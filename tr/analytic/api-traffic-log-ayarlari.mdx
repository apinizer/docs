---
title: "API Trafik Ayarları"
description: "API Proxy trafik loglarını yapılandırabilir, proje ve ortam bazlı log ayarlarını yönetebilir ve Elasticsearch entegrasyonu gerçekleştirebilir. Mesaj bölgelerine göre loglama kontrolü yapabilir ve entegrasyon hedeflerine göre log gönderimini yapılandırabilir."
---

## Log Kayıt Bölgeleri

Apinizer üzerinde tanımlanan API Proxy'e gelen ve giden mesaj bilgileri mesaj ögelerine (başlık, parametre, gövde) göre Elasticsearch veri tabanında loglanmaktadır.

Bu log kaydı tutulan bölgeler:

<CardGroup cols={2}>
  <Card title="Request from Client" icon="arrow-right">
    İstemciden API Proxy'e gelen istek bilgileri
  </Card>
  <Card title="Request to Target" icon="arrow-right">
    API Proxy'den Backend API'ye iletilen istek bilgileri
  </Card>
  <Card title="Response from Target" icon="arrow-left">
    Backend API'den API Proxy'e verilen yanıt bilgileri
  </Card>
  <Card title="Response to Client" icon="arrow-left">
    API Proxy'den istemciye gönderilen yanıt bilgileri
  </Card>
</CardGroup>

Varsayılan olarak, projenin tüm mesaj bölgelerindeki alanların loglanması aktiftir. Loglanan alanlar ihtiyaca göre veya log sunucusunun kaynak tüketimi baz alınarak kısıtlanabilir.

Bu ekran üzerinden proje ve ortam (environment) bazlı log ayarı yönetilmektedir.

<Info>
Üretim ortamı için aşağıdaki ortamlara ait ögeleri loglama işleminin devre dışı bırakılması tavsiye edilmektedir.

- API Proxy'den Backend API'ye (Request to Target)
- Backend API'den API Proxy'e (Response from Target)

Eğer bir API Proxy üretim ortamında çalışıyorsa, API Proxy'deki tüm poliçelerin ayarları ve testleri tamamlandığı ve artık geliştirme yapılmayacağı anlamına gelmektedir.

Bu yüzden veri tabanında verilerinin aşırı büyümemesi bu iki bölgedeki başlık, parametre ve gövde verilerinin yazılmaması tavsiye edilir.
</Info>

<Warning>
Tüm loglama alanları kapalı olsa dahi istekte de bir hata oluştuysa log alanlarının tümü hatanın tespit edilebilmesi için kayıt edilir. Bu özellik genel ayarlarda açılıp, kapatılabilir.
</Warning>

<Warning>
Formdata istekleri hiçbir şekilde loglanmamaktadır.
</Warning>

<Warning>
Websocket ve gRPC istekleri Apinizer'a gelen ve Apinizer'dan çıkan veriler şeklinde tutulmakta olduğundan bu tip API Proxylerde sadece 2 bölge vardır.
</Warning>

<Frame caption="API Trafik Log ayarları sayfası">
  <img
    src="/images/yonetici/log-ayarlari.png"
    alt="API Trafik Log Ayarları"
    width="1200"
    height="800"
    style={{ borderRadius: '0.5rem' }}
  />
</Frame>

Bu ekranda API Proxy bazlı log ayarları yapılabilmektedir. Ayrıca eğer entegrasyon ayarları yapılmış ise hangi API Proxy'lerin trafik kayıtlarının bu entegrasyon hedeflerine gönderilebileceği de ayarlanabilir.

<Frame caption="Log ayarları düzenleme dialogu">
  <img
    src="/images/yonetici/log-duzenle.png"
    alt="Log Ayarları Düzenleme Dialogu"
    width="1200"
    height="800"
    style={{ borderRadius: '0.5rem' }}
  />
</Frame>

## Log Ayarları Alanları

Log ayarları için kullanılan alanlar aşağıdaki tabloda görülmektedir.

| Alan | Açıklama |
|------|----------|
| Başlık (Header) | Mesajdaki başlık bilgilerinin loglanıp loglanmadığını yönetir. |
| Gövde (Body) | Mesajdaki gövde bilgilerinin loglanıp loglanmadığını yönetir. |
| Parametre (Parameter) | Mesajdaki parametre bilgilerinin loglanıp loglanmadığını yönetir. |