---
title: "Linux Olası Sorunları, Çözümleri ve Yardımcı Komutlar"
description: "Linux Olası Sorunları, Çözümleri ve Yardımcı Komutlar"
---

*   *   *   *   * 

  * [Apinizer Dokümantasyonu](/apinizer-dokumantasyonu/apinizer-dokuemantasyonuna-hos-geldiniz-1179695.html)
  * [Sorun Giderme](/apinizer-dokumantasyonu/sorun-giderme-6685033.html)
  * Current: Linux Olası Sorunları, Çözümleri ve Yardımcı Komutlar

# Linux Olası Sorunları, Çözümleri ve Yardımcı Komutlar

# Diğer

## Sistem saatini "date" komutuyla kontrol ederek yanlış bölgede olması durumunda düzeltmek için
```bash
    sudo ln -sf /usr/share/zoneinfo/Europe/Istanbul /etc/localtime
```

BASH

  

## Doğru bölgede ancak hala yanlış olması durumunda tarihi manuel ayarlamak için
```bash
    date -s '2014-12-25 12:34:56'
```

BASH

  

## Ubuntu no-key hatası alınması durumunda
```bash
    #W: GPG error: https://download.docker.com/linux/ubuntu focal InRelease: The following signatures couldn't be verified because the public key is not available: NO_PUBKEY 7EA0A9C3F273FCD8
    
    sudo apt-key adv --keyserver hkp://keyserver.ubuntu.com:80 --recv-keys 7EA0A9C3F273FCD8
```

BASH

  

## Kullanıcının tanımından kaynaklı ssh sonrasında bash yerine dash ile çalışmasını düzeltmek için
```bash
    chsh -s /bin/bash $(whoami)
```

BASH

  

## OOM Killer tarafından öldürülen uygulamaları görmek için
```bash
    dmesg -T | egrep -i 'killed process'
```

BASH

  

* * *

# Disk Kontrolleri

## Tüm Diskteki Mevcut Kullanım ve Limitleri Görmek İçin
```bash
    df -h
```

BASH

## Belirli Bir Adresteki Mevcut Kullanım ve Limitleri Görmek İçin
```bash
    du -sh &#60;FILE_PATH&#62;
```

BASH

# Bellek Kontrolleri

## Bellek Bilgileri
```bash
    cat /proc/meminfo
```

BASH

## Mevcut Bellek Miktarı ve Limitleri Görmek İçin
```bash
    free -g
```

BASH

# İşlemci Kontrolleri

## Cpu Bilgileri
```bash
    less /proc/cpuinfo
    lscpu
```

BASH

## Sadece İşlemci Sayısını Görmek
```bash
    cat /proc/cpuinfo | grep processor | wc -l
```

BASH

## Toplam Thread Sayısını Görmek
```bash
    ps -eo nlwp | tail -n +2 | awk '&#123; num_threads += $1 &#125; END &#123; print num_threads &#125;'
     
    cat /proc/sys/kernel/threads-max
```

BASH

## Java Uygulamasına Ait Toplam Thread Sayısını Görmek
```bash
    ps -ef | grep java
    #Java'nın id'si aşağıya yazılır, ör: 10057
    ps huH p 10057 | wc -l
```

BASH

## Dump almak
```bash
    //jcmd-> JRE'nin altında iken
    sudo -u apinizer ./jcmd 26032 Thread.print > ./Thread.dump
    sudo -u apinizer ./jcmd 26032 GC.heap_dump ./Heap.dump
```

BASH

## Mevcut Kullanıcı İçin İşlem Sayısını Belirlemek
```bash
    ulimit -Su 30000
```

BASH

  

* * *

# Jar İşlemleri

## Dosyayı Jar'dan Çıkarmak
```bash
    jar -xf apinizer-gateway-2.1.2.jar
```

BASH

## Dosyayı Jar'lamak
```bash
    jar -cf apinizer-gateway-2.1.2.jar **
```

BASH

## Dosyayı manifest Dosyası ile Birlikte Jar'lamak
```bash
    /opt/apinizerManager/jre8162linux/bin/jar -cfm apinizer-gateway-2.1.2.jar ./META-INF/MANIFEST.MF **
```

BASH

  

* * *

# Dosya İşlemleri

## SCP ile Başka Sunucuya Klasör Aktarımı
```bash
    scp -r /opt/apinizerManager/* &#60;REMOTE_SERVER_USER&#62;@&#60;REMOTE_SERVER_ID&#62;:&#60;PATH_TO_COPY_TO&#62;
```

BASH

  

## tar.gz Dosyasını zip'e Çevirmek İçin
```bash
    tar xzf jre282linux.tar.gz && zip jre282linux.zip $(tar tf jre282linux.tar.gz)
```

BASH

## Açık Dosyaları Görmek
```bash
    lsof | wc -l
```

BASH

## Dosyalarla İlgili Ayarları Görmek
```bash
    cat /etc/sysctl.conf
    // system-wide maximum number of files 
    cat /proc/sys/fs/file-max
    cat /proc/sys/fs/file-nr
```

BASH

## En Çok Açık Olan On Dosya Tanımlayıcılarını Görmek
```bash
    cd /proc
    for pid in [0-9]*
    do
        echo "PID = $pid with $(ls /proc/$pid/fd/ | wc -l) file descriptors"
    done | sort -rn -k5 | head | while read -r _ _ pid _ fdcount _
    do
      command=$(ps -o cmd -p "$pid" -hc)
      printf "pid = %5d with %4d fds: %s\n" "$pid" "$fdcount" "$command"
    done
```

BASH

## En Çok Dosya Açık Tutan İşlemler
```bash
    lsof -Fnst | awk '
        { field = substr($0,1,1); sub(/^./,""); }
        field == "p" { pid = $0; }
        field == "t" { if ($0 == "REG") size = 0; else next; }
        field == "s" { size = $0; }
        field == "n" && size != 0 { print size, $0; }
    ' | sort -k1n -u | tail -n42 | sed 's/^[0-9]* //'
```

BASH

  

* * *

# Firewall İşlemleri
```bash
    sudo iptables -A PREROUTING -t nat -i ens160 -p tcp --dport 443 -j REDIRECT --to-port 9443
    iptables-save > /opt/apinizerManager/iptables.conf
```

BASH

  

```bash
    #Aşağıdaki startManager içine yazılır
    iptables-restore < /opt/apinizerManager/iptables.conf
     
    max_allowed_packet=500M
    lower_case_table_names=1
    innodb_log_file_size=2G
```

BASH

  

* * *

# Wget İşlemleri

## Wget ile Google Drive'dan Dosya İndirme
```bash
    wget --load-cookies /tmp/cookies.txt "https://docs.google.com/uc?export=download&confirm=$(wget --quiet --save-cookies /tmp/cookies.txt --keep-session-cookies --no-check-certificate 'https://docs.google.com/uc?export=download&id=Adres_Unique_Idsi_yZ8JlXtWwdOQg_5h' -O- | sed -rn 's/.*confirm=([0-9A-Za-z_]+).*/\1\n/p')&id=Adres_Unique_Idsi_yZ8JlXtWwdOQg_5h" -O apinizer.zip && rm -rf /tmp/cookies.txt
```

BASH

  

# Dosya Boyutuna Göre Sıralama
```bash
    sudo lsof
    | grep REG
    | grep -v "stat: No such file or directory"
    | grep -v DEL
    | awk '{if ($NF=="(deleted)") {x=3;y=1} else {x=2;y=0}; {print $(NF-x) "  " $(NF-y) } }' 
    | sort -n -u 
    | numfmt  --field=1 --to=iec
    
```

BASH

  

* * *

# Network İşlemleri

## Belirli Bir Port'u Kullanan İşlemi ya da Servisi Görmek
```bash
    netstat -ltnp | grep -w ':80'
```

BASH

  

**Çalışan Portla**

`ss ``-antp`  
` ``State Recv``-Q` `Send``-Q` `Local Address:Port Peer Address:Port`  
` ``LISTEN 0 128 0.0.0.0:22 0.0.0.0:* users:((``"sshd"``,pid=734,fd=4))`  
` ``ESTAB 0 0 173.249.11.199:22 3.83.11.233:48610 users:((``"sshd"``,pid=44179,fd=5),(``"sshd"``,pid=44178,fd=5))`  
` ``ESTAB 0 0 173.249.11.199:22 176.43.11.169:4400 users:((``"sshd"``,pid=4714,fd=5),(``"sshd"``,pid=4712,fd=5))`  
` ``ESTAB 0 0 173.249.11.199:22 176.43.11.169:4488 users:((``"sshd"``,pid=1182,fd=5),(``"sshd"``,pid=1161,fd=5))`  
` ``ESTAB 0 0 173.249.11.199:22 78.175.12.218:37538 users:((``"sshd"``,pid=4391,fd=5),(``"sshd"``,pid=4370,fd=5))`  
` ``ESTAB 0 40 173.249.11.199:22 78.175.12.218:40141 users:((``"sshd"``,pid=4369,fd=5),(``"sshd"``,pid=4367,fd=5))`  
` ``ESTAB 0 0 173.249.11.199:22 222.186.13.130:12376 users:((``"sshd"``,pid=44169,fd=5),(``"sshd"``,pid=44168,fd=5))`  
` ``ESTAB 0 0 173.249.11.199:22 157.230.12.208:56782 users:((``"sshd"``,pid=44177,fd=5),(``"sshd"``,pid=44176,fd=5))`  
` ``LISTEN 0 128 [::]:22 [::]:* users:((``"sshd"``,pid=734,fd=6)) ``-t` `: Show only TCP sockets on Linux`  
  
`//Diğer sık kullanılan parametreler şu şekildedir:`  
` ``-t` `: Show only TCP sockets on Linux`  
` ``-u` `: Display only UDP sockets on Linux`  
` ``-l` `: Show listening sockets. For example, TCP port 22 is opened by SSHD server.`  
` ``-p` `: List process name that opened sockets`  
` ``-n` `: Don’t resolve service names i.e. don’t use DNS`  
---  
  
* * *

# Sertifika İşlemleri

## Sunucu sertifikasını linux sunucusu üzerinden almak
```bash
    openssl s_client -showcerts -connect &#60;URL&#62;:443 </dev/null 2>/dev/null|openssl x509 -outform PEM > mycertfile.pem
```

BASH

## Jar dosyalı bir uygulamaya sertifika import
```bash
    /opt/apinizerManager/jre8282linux/jre/bin/keytool -import -trustcacerts -keystore /opt/apinizerManager/jre8282linux/jre/lib/security/cacerts -storepass changeit -alias &#60;CERTIFICATE_ALIAS&#62; -import -file &#60;CERTIFICATE_FILE&#62;
    
```

BASH

  

* * *

# Vi Editör İşlemleri

Vi ve vim ile ilgili tüm komutları yazmak için öncelikle escape tuşuna basılarak komut girme moduna geçilmeli ve bir çoğunda : (iki nokta üst üste) karakteri ile başlanmalı.

## Düzenlemeleri kaydetmeden çıkmak için
```bash
    :q!
```

BASH

  

## Düzenlemeleri kaydederek çıkmak için
```bash
    :wq
```

BASH

## Tümünü Değiştir
```bash
    :%s/old_word/new_word/g
```

BASH

  

* * *

# CURL İşlemleri

#ssl 'li adreslere doğrulama olmadan gidebilmek için -k  
#log için -v  
#timeout için -m 10  
#username gönderip password'ü girdirmek için -u &#60;USERNAME&#62;  
#çıktıyı kaydetmek --output response.txt

## Soap request atıp cevabını loglamak
```bash
    curl -D -  --header "Content-Type:text/xml;charset=UTF-8" --header "SOAPAction:XXX" -d '&#60;SOAP_BODY_GOES_HERE&#62;' https://api.adres/apigateway/relativepath >> response.txt
```

BASH
```bash
      
    
```

## Basic auth'lu wsdl adresine erişmek (şifreyi sorcak) ve onu kaydetmek
```bash
    curl -u username "http://api.address.com?wsdl" --output response.wsdl
```

BASH
```bash
      
    
```

×