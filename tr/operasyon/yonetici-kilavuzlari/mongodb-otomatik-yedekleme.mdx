---
title: "MongoDB Veritabanını Otomatik Yedekleme ve Eski Yedekleri Temizleme"
description: "MongoDB veritabanını otomatik olarak yedekleyerek veri kaybını önleyebilir, eski yedekleri temizleyerek depolama alanını optimize edebilir, cron job ile zamanlanmış yedekleme yapılandırabilir ve mongodump ile yedekten geri yükleme işlemlerini gerçekleştirebilir."
---

## Genel Bakış

MongoDB veritabanını otomatik olarak yedekleyerek veri kaybını önleyebilir ve eski yedekleri temizleyerek depolama alanını optimize edebilirsiniz.

## Yedekleme Stratejisi

### Yedekleme Türleri

| Yedekleme Türü | Açıklama |
|----------------|----------|
| **Full Backup** | Tüm veritabanının yedeği |
| **Incremental Backup** | Sadece değişen verilerin yedeği |
| **Point-in-Time Recovery** | Belirli bir zaman noktasına geri dönüş |

### Yedekleme Sıklığı

Yedekleme sıklığını belirleyin:

- Günlük yedekleme
- Haftalık yedekleme
- Aylık yedekleme

## Otomatik Yedekleme Scripti

### MongoDB Dump Scripti

```bash
#!/bin/bash

# Yedekleme ayarları
BACKUP_DIR="/backup/mongodb"
DATE=$(date +%Y%m%d_%H%M%S)
RETENTION_DAYS=30

# MongoDB bağlantı bilgileri
MONGO_HOST="mongodb-service"
MONGO_PORT="27017"
MONGO_DB="apinizer"
MONGO_USER="admin"
MONGO_PASS="password"

# Yedekleme dizini oluşturma
mkdir -p $BACKUP_DIR

# MongoDB dump
mongodump \
  --host=$MONGO_HOST:$MONGO_PORT \
  --db=$MONGO_DB \
  --username=$MONGO_USER \
  --password=$MONGO_PASS \
  --out=$BACKUP_DIR/backup_$DATE

# Eski yedekleri temizleme
find $BACKUP_DIR -type d -mtime +$RETENTION_DAYS -exec rm -rf {} \;
```

<Tip>
Script dosyasını çalıştırılabilir hale getirmek için `chmod +x backup-script.sh` komutunu kullanın.
</Tip>

### Cron Job Kurulumu

Cron job ile otomatik yedekleme:

<Steps>
  <Step>
    **Crontab Düzenleme**

    ```bash
    crontab -e
    ```
  </Step>
  <Step>
    **Yedekleme Zamanlaması Ekleme**

    Günlük yedekleme (her gece 02:00'de) için:

    ```bash
    0 2 * * * /path/to/backup-script.sh
    ```
  </Step>
</Steps>

## Yedekten Geri Yükleme

Yedekten geri yükleme işlemi:

```bash
mongorestore \
  --host=$MONGO_HOST:$MONGO_PORT \
  --db=$MONGO_DB \
  --username=$MONGO_USER \
  --password=$MONGO_PASS \
  $BACKUP_DIR/backup_20240101_020000
```

<Warning>
Geri yükleme işlemi mevcut verileri üzerine yazabilir. Geri yükleme yapmadan önce mevcut verilerinizin yedeğini alın.
</Warning>

## İlgili Kaynaklar

- [MongoDB Sorunları](/tr/operasyon/sorun-giderme/mongodb-sorunlari)
- [MongoDB Loglarını Elasticsearch'e Yazma](/tr/operasyon/sorun-giderme/mongodb-loglarini-elasticsearch-yazma)
