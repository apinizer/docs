---
title: "Kibana Maps ile Apinizer'a Gelen İsteklerin Coğrafi Olarak Görselleştirilmesi"
description: "Apinizer'da kullanılan geolocation verilerini Kibana Maps özelliği ile harita üzerinde görselleştirebilir, hangi şehirlerden istek geldiğini analiz edebilir ve coğrafi erişim verilerini görsel olarak inceleyebilir."
---

<Info>
Apinizer'da 2025 versiyonu ile birlikte geolocation özelliğini kullanabilirsiniz. Geolocation özelliğini kullanmak için ilgili dökümana [Coğrafi Erişim Kontrolü](/tr/operasyon/yonetici-kilavuzlari/geolocation-sehir-bazli-erisim-kontrolu) sayfasına bakabilirsiniz.
</Info>

## Apinizer Üzerinden Sağlanan Geolocation Verisi

Apinizer'da gelen isteğin coğrafi konum verisi, Elasticsearch'te aşağıdaki gibi bir JSON formatında temsil edilmektedir.

```json
{
  "toClientBody": "[]",
  "loc": {
    "lat": 41.0,
    "lon": 28.0
  }
}
```

Lat (latitude) ve lon (longitude) değerleri, bir noktanın Dünya üzerindeki konumunu belirlemek için kullanılan coğrafi koordinatlardır.

**Örnek Koordinatlar:**

- Latitude: 41.0082° N, Longitude: 28.9784° E (İstanbul, Türkiye)
- Latitude: 40.7128° N, Longitude: 74.0060° W (New York, ABD)

## Kibana'ya Veri Aktarma

### Index Pattern Oluşturma

Kibana'ya veri aktarma adımında, Kibana **kurulumu** ve **entegrasyonu** sağlanmalıdır. Kibana kurulumu için ilgili dökümana [bakınız](/tr/tutorials/api-analitigi-ve-gozlemlenebilirlik-senaryolari/kibana-api-trafik-log-gorsellestirme.mdx).

<Steps>
  <Step>
    **Index Pattern Oluşturma**

    Kurulum sonrası Kibana'da, **Stack Management → Index Patterns** sayfasında, **'Create Index Pattern'** bölümünden yeni bir index pattern oluşturulabilir:

    ![Index Pattern Oluşturma](/images/kibana-index-pattern-create.png)
  </Step>
  <Step>
    **Data Stream Seçimi**

    Elasticsearch'te kullanılan **data stream** seçilerek adımlar tamamlanır ve oluşturma işlemi gerçekleştirilir:

    ![Data Stream Seçimi](/images/kibana-data-stream.png)
  </Step>
  <Step>
    **Alanları Kontrol Etme**

    Oluşturma işlemi tamamlandıktan sonra, ilgili alanları (**fields**) aşağıdaki sayfada görebilirsiniz:

    ![Index Pattern Fields](/images/kibana-index-pattern-fields.png)
  </Step>
</Steps>

### Mevcut Index Pattern'i Kontrol Etme

Kibana daha önce **kurulduysa** ve **index pattern mevcutsa** aşağıdaki **Stack Management →Index Patterns** sayfasıdan Kibanaya eklediğiniz indeksi yenileyin. Arama kısmına **'loc'** yazarak ilgili değerin var olduğunu kontrol etmelisiniz.

![Index Pattern Kontrol](/images/kibana-index-pattern-check.png)

<Info>
Kibana, bu **'loc'** verilerini (**enlem ve boylam**) kullanarak, **harita** üzerinde gelen isteklerin **görselleştirilmesini** sağlar.
</Info>

## Kibana Maps ile Harita Paneli Eklemek ve Görselleştirmesi

<Steps>
  <Step>
    **Maps Sekmesine Erişim**

    **Kibana** ana sayfasında, sol menüdeki **"Maps"** sekmesine tıklayın. Bu, harita görselleştirmeleri oluşturmak için kullanacağınız uygulamadır:

    ![Kibana Maps](/images/kibana-maps.png)
  </Step>
  <Step>
    **Layer Ekleme**

    **Add layer** butonuna tıklayın. **Documents** seçeneğini tercih edin:

    ![Add Layer](/images/kibana-maps-add-layer.png)
  </Step>
  <Step>
    **Layer Yapılandırması ve Kaydetme**

    Index pattern'ı seçtikten sonra, 'loc' alanı otomatik seçilecek. Ardından, **'Add layer'** butonuna tıklayıp katmanı **ekleyip** isim vererek **kaydedebilirsiniz**:

    ![Layer Kaydetme](/images/kibana-maps-save-layer.png)
  </Step>
</Steps>

## Sonuç

Bu dokümanda, Apinizer'a gelen isteklerin **IP bilgileri coğrafi verilere dönüştürülüp** Elasticsearch'e gönderildikten sonra, **Kibana Maps** kullanılarak hangi şehirlerden istek geldiği adım adım **görselleştirilmiştir**.

<Check>
Bu yapı sayesinde, kullanıcı erişimleri şehir bazında analiz edilebilir.
</Check>

Harita üzerinde gelen istekler, **yeşil işaretçilerle** gösterilecektir:

![Kibana Maps Sonuç](/images/kibana-maps-result.png)
