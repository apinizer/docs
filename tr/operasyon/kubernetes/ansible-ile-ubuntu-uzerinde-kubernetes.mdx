---
title: "Kubernetes Docker Containerd Komutlari"
description: "Kubernetes, Docker ve Containerd için sık kullanılan komutları sağlar. Pod yönetimi, log görüntüleme, deployment işlemleri ve image yönetimi gibi günlük operasyonel görevler için pratik komut örnekleri sunar."
---

## Kubernetes Komutları

### Kubelet Durum Kontrolü

**Kubelet servis durumunu kontrol etme:**

```bash
systemctl status kubelet
```

**Kubelet hatalarını Linux sistem üzerinden görüntüleme:**

```bash
journalctl -xeu kubelet
```

**Kubelet hatalarını Kubernetes üzerinden görüntüleme:**

```bash
kubectl get events --all-namespaces --sort-by='.metadata.creationTimestamp'
```

### Pod Log ve Durum Kontrolü

**Pod loglarını görüntüleme:**

```bash
kubectl logs <POD_NAME> -n <NAMESPACE>
```

**Önceki Pod loglarını görüntüleme (Pod yeniden başlatıldıysa):**

```bash
kubectl logs --previous <POD_NAME> -n apinizer
```

**Pod detaylarını görüntüleme:**

```bash
kubectl describe pod <POD_NAME> -n apinizer
```

### Pod İşlemleri

**Pod içine girme:**

```bash
kubectl exec -it <POD_NAME> -n prod /bin/bash
```

**Pod içine girmeden istek atma:**

```bash
kubectl exec -it <POD_NAME> -n prod -- curl x.y.gov.tr
```

### Deployment İşlemleri

**Deployment'ı restart etme:**

```bash
kubectl rollout restart deployment manager -n apinizer
```

**Deployment replica sayısını ayarlama:**

```bash
kubectl scale deploy cache -n prod --replicas=0
```

**Deployment silme:**

```bash
kubectl delete -f apinizer-deployment.yaml
```

**Terminating durumundaki Pod'u zorla silme:**

```bash
kubectl delete pod <POD_NAME> -n apinizer --grace-period=0 --force
```

**Versiyon güncelleme:**

<Info>
  Image'ları sunuculara çektikten sonra aşağıdaki komutlar kullanılır. Bu komutlar "vi" editörü gibi çalışır, kaydederek çıkmak için ":wq" kullanılmalıdır.
</Info>

```bash
kubectl edit deployment manager -n apinizer
kubectl edit deployment cache -n prod
kubectl edit deployment worker -n prod
```

**Evicted durumdaki Pod'ları temizleme:**

```bash
kubectl get pod -n prod | grep Evicted | awk '{print $1}' | xargs kubectl delete pod -n prod
```

### Node Affinity Yapılandırması

**Pod'un belirli node'lar üzerinde çalışmasını engelleme:**

```yaml
affinity:
  nodeAffinity:
    requiredDuringSchedulingIgnoredDuringExecution:
      nodeSelectorTerms:
        - matchExpressions:
            - key: kubernetes.io/hostname
              operator: NotIn
              values:
                - kuberdemo55
                - kuberdemo56
```

## Docker Komutları

### Image İşlemleri

**Image listeleme:**

```bash
docker images
```

**Tüm container'ları listeleme:**

```bash
docker ps -a
```

**Image pull işlemi:**

```bash
sudo docker pull apinizercloud/manager:2024.xx.0
```

**Image export:**

```bash
sudo docker save apinizercloud/manager:2024.xx.0 > manager_2024.xx.0.tar
```

**Image import:**

```bash
sudo docker load < manager_2024.xx.0.tar
```

## Containerd Komutları

### Namespace İşlemleri

**Namespace listeleme:**

```bash
sudo ctr namespaces list
```

**Container'ları namespace'e göre listeleme:**

```bash
sudo ctr --namespace k8s.io containers ls
```

### Image İşlemleri

**Apinizer image'larını listeleme:**

```bash
sudo ctr -n k8s.io images list | grep apinizer
```

**Image pull işlemi:**

```bash
sudo ctr --namespace k8s.io images pull docker.io/apinizercloud/manager:2024.05.0
```

**Image export:**

```bash
sudo ctr -n k8s.io images export /tmp/manager:2024.05.0.tar docker.io/apinizercloud/manager:2024.05.0
```

**Image import:**

```bash
sudo ctr --namespace k8s.io images import /tmp/manager:2024.05.0.tar
```
