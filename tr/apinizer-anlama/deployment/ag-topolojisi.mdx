---
title: "Ağ Topolojisi"
description: 'Secure Deployment Pattern, Firewall Zones'
---

Ağ topolojisi, Apinizer platformunun güvenli bir şekilde kurulması için kritik öneme sahiptir. Bu bölüm, **güvenli deployment desenleri**, **firewall zone'ları** ve **sunucu gereksinimleri** hakkında detaylı bilgi sağlar.

## Sunucu Gereksinimleri

Aşağıdaki gereksinimler tavsiye edilen **minimum** konfigürasyon için belirtilmiştir. Servis yüklerinize göre artırılmalıdır.

**Apinizer, üretim ortamı için tek sunucuya kurulum yapılmasını tavsiye etmez. Böyle bir kurulum konfigürasyonunu sadece PoC ortamları için değerlendiriniz.**

**Test/PoC kurulumlarını yük testi amacıyla kullanmayınız! Yük testi yapmak için doğru konfigürasyonu değerlendirmek isterseniz lütfen [Benchmark Sonuçları sayfamıza](/apinizer-dokumantasyonu/benchmark-sonuclari-13271080.html) bakınız veya bizimle iletişime geçiniz.**

| Topoloji/Kullanım Amacı | No | İşletim Sistemi | CPU | RAM | Disk | Kurulumlar |
|-------------------------|----|-----------------|-----|-----|------|------------|
| **PoC / Test / Minimum Deployment** | Sunucu 1 | Ubuntu Server 24.04 LTS / RHEL 9.x | 8 Core | 16 GB | 200 GB | Kubernetes Control-Plane, Elasticsearch (Master+Data), Replica set MongoDB Single Instance |
| | Sunucu 2 | Ubuntu Server 24.04 LTS / RHEL 9.x | 8 Core | 12 GB | 80 GB | Kubernetes Worker |
| **Professional Deployment** | Sunucu 1 | Ubuntu Server 24.04 LTS / RHEL 9.x | 8 Core | 32 GB | 1 TB | Kubernetes Control-Plane, Elasticsearch (Master+Data), Replica set MongoDB Single Instance |
| | Sunucu 2 | Ubuntu Server 24.04 LTS / RHEL 9.x | 10 Core | 12 GB | 80 GB | Kubernetes Worker |
| | Sunucu 3 | Ubuntu Server 24.04 LTS / RHEL 9.x | 10 Core | 12 GB | 80 GB | Kubernetes Worker |
| **High Available Deployment** | Sunucu 1 | Ubuntu Server 24.04 LTS / RHEL 9.x | 4 Core | 4 GB | 80 GB | Kubernetes Control-Plane |
| | Sunucu 2 | Ubuntu Server 24.04 LTS / RHEL 9.x | 4 Core | 4 GB | 80 GB | Kubernetes Control-Plane |
| | Sunucu 3 | Ubuntu Server 24.04 LTS / RHEL 9.x | 4 Core | 4 GB | 80 GB | Kubernetes Control-Plane |
| | Sunucu 4 | Ubuntu Server 24.04 LTS / RHEL 9.x | 12 Core | 16 GB | 80 GB | Kubernetes Worker |
| | Sunucu 5 | Ubuntu Server 24.04 LTS / RHEL 9.x | 12 Core | 16 GB | 80 GB | Kubernetes Worker |
| | Sunucu 6 | Ubuntu Server 24.04 LTS / RHEL 9.x | 12 Core | 16 GB | 80 GB | Kubernetes Worker |
| | Sunucu 7 | Ubuntu Server 24.04 LTS / RHEL 9.x | 4 Core | 12 GB | 200 GB | MongoDB Replica Set Node 1 |
| | Sunucu 8 | Ubuntu Server 24.04 LTS / RHEL 9.x | 4 Core | 12 GB | 200 GB | MongoDB Replica Set Node 2 |
| | Sunucu 9 | Ubuntu Server 24.04 LTS / RHEL 9.x | 4 Core | 12 GB | 200 GB | MongoDB Replica Set Node 3 |
| | Sunucu 10 | Ubuntu Server 24.04 LTS / RHEL 9.x | 8 Core | 64 GB | 2 TB | Elasticsearch Cluster Node 1 (Master+Data) |
| | Sunucu 11 | Ubuntu Server 24.04 LTS / RHEL 9.x | 8 Core | 64 GB | 2 TB | Elasticsearch Cluster Node 2 (Master+Data) |
| | Sunucu 12 | Ubuntu Server 24.04 LTS / RHEL 9.x | 8 Core | 64 GB | 2 TB | Elasticsearch Cluster Node 3 (Master+Data) |

## Güvenli Deployment Deseni (Best Practice)

Apinizer için önerilen güvenli deployment deseni, **Gateway'in DMZ'de, Database ve Management panel'in LAN'da** olduğu mimaridir.

### Mimari Diyagram

```
                    Internet
                       │
                       ▼
            ┌────────────────────┐
            │  External Firewall │
            │   (Port 443/80)    │
            └──────────┬─────────┘
                       │
                       ▼
        ┌──────────────────────────────┐
        │      DMZ ZONE               │
        │  ┌────────────────────────┐ │
        │  │   Load Balancer        │ │
        │  │   (HAProxy/Nginx)      │ │
        │  └───────────┬────────────┘ │
        │              │              │
        │  ┌───────────▼────────────┐ │
        │  │   Worker Nodes         │ │
        │  │   (API Gateway)        │ │
        │  │   - Proxy Handler      │ │
        │  │   - Token Provider     │ │
        │  └───────────────────────┘ │
        └──────────────┬──────────────┘
                       │
            ┌───────────┴───────────┐
            │  Internal Firewall   │
            │  (Restricted Access)  │
            └───────────┬───────────┘
                       │
                       ▼
        ┌──────────────────────────────┐
        │      LAN ZONE                │
        │  ┌────────────────────────┐ │
        │  │   Manager Module       │ │
        │  │   - Web Manager        │ │
        │  │   - Analytics          │ │
        │  │   - Monitoring        │ │
        │  └────────────────────────┘ │
        │                              │
        │  ┌────────────────────────┐ │
        │  │   MongoDB              │ │
        │  │   (Replica Set)        │ │
        │  └────────────────────────┘ │
        │                              │
        │  ┌────────────────────────┐ │
        │  │   Elasticsearch        │ │
        │  │   (Cluster)            │ │
        │  └────────────────────────┘ │
        │                              │
        │  ┌────────────────────────┐ │
        │  │   Cache Cluster        │ │
        │  │   (Hazelcast)          │ │
        │  └────────────────────────┘ │
        └──────────────────────────────┘
```

## Firewall Zone'ları

### DMZ Zone (Demilitarized Zone)

DMZ, dış dünyaya açık olan ancak iç ağdan izole edilmiş güvenli ağ bölgesidir.

**DMZ'de Çalışan Bileşenler:**

<CardGroup cols={2}>
  <Card title="Worker Nodes" icon="server">
    API Gateway bileşenleri:
    * Proxy Handler
    * Token Provider API
    * Local Cache
    
    **Port Gereksinimleri:**
    * 443/80 (HTTPS/HTTP) - İstemci erişimi
    * 8080 (Management API) - Manager'dan erişim
  </Card>
  <Card title="Load Balancer" icon="scale-balanced">
    Trafik dağıtımı:
    * HAProxy / Nginx
    * SSL/TLS sonlandırması
    * Health check
    
    **Port Gereksinimleri:**
    * 443/80 (HTTPS/HTTP) - Dış erişim
    * 8080 (Backend) - Worker'lara erişim
  </Card>
</CardGroup>

**DMZ Güvenlik Kuralları:**

* **Inbound:**
  * Port 443/80: Internet'ten Load Balancer'a
  * Port 22: SSH (opsiyonel, VPN üzerinden önerilir)
  
* **Outbound:**
  * Port 8080: Manager'a (LAN)
  * Port 27017: MongoDB'ye (LAN)
  * Port 9200: Elasticsearch'e (LAN)
  * Port 5701: Cache'e (LAN)
  * Port 443: Dış API'lere (Backend)

### LAN Zone (Local Area Network)

LAN, kurum içi güvenli ağ bölgesidir. Dış dünyadan erişilemez.

**LAN'da Çalışan Bileşenler:**

<CardGroup cols={2}>
  <Card title="Manager Module" icon="gear">
    Yönetim ve konfigürasyon:
    * Web Manager
    * Analytics Engine
    * Monitoring & Alerting
    * Scheduled Jobs
    
    **Port Gereksinimleri:**
    * 8080 (HTTP) - Web Manager
    * 8080 (Management API) - Worker'lardan erişim
  </Card>
  <Card title="MongoDB" icon="database">
    Veritabanı:
    * Konfigürasyon verileri
    * Metadata
    * Audit logs
    
    **Port Gereksinimleri:**
    * 27017 (MongoDB) - Manager ve Worker'lardan
  </Card>
  <Card title="Elasticsearch" icon="magnifying-glass">
    Log ve analitik:
    * API traffic logs
    * Analitik veriler
    
    **Port Gereksinimleri:**
    * 9200 (HTTP) - Manager ve Worker'lardan
    * 9300 (Transport) - Cluster iletişimi
  </Card>
  <Card title="Cache Cluster" icon="memory">
    Dağıtılmış önbellek:
    * Hazelcast cluster
    * Shared cache data
    
    **Port Gereksinimleri:**
    * 5701 (Hazelcast) - Cluster iletişimi
  </Card>
</CardGroup>

**LAN Güvenlik Kuralları:**

* **Inbound:**
  * Port 8080: DMZ'den Manager'a
  * Port 27017: DMZ'den MongoDB'ye
  * Port 9200: DMZ'den Elasticsearch'e
  * Port 5701: DMZ'den Cache'e
  * Port 22: SSH (VPN üzerinden)
  
* **Outbound:**
  * Port 443: Dış servislere (opsiyonel)
  * Port 53: DNS sorguları

## Ağ Segmentasyonu

### Network Segmentation Best Practices

<AccordionGroup>
  <Accordion title="VLAN Yapılandırması">
    **Önerilen VLAN Yapısı:**
    
    * **VLAN 10**: DMZ Zone
    * **VLAN 20**: LAN Zone (Manager)
    * **VLAN 30**: LAN Zone (Database)
    * **VLAN 40**: Management Network (SSH, Monitoring)
    
    Bu yapı, ağ trafiğinin izole edilmesini ve güvenlik kontrollerinin kolaylaştırılmasını sağlar.
  </Accordion>
  
  <Accordion title="Subnet Yapılandırması">
    **Önerilen Subnet Yapısı:**
    
    * **DMZ**: 10.0.1.0/24
    * **LAN (Manager)**: 10.0.2.0/24
    * **LAN (Database)**: 10.0.3.0/24
    * **Management**: 10.0.4.0/24
    
    Her subnet'in kendi firewall kuralları ve erişim politikaları olmalıdır.
  </Accordion>
  
  <Accordion title="Routing Kuralları">
    **Routing Yapılandırması:**
    
    * DMZ'den LAN'a: Sadece gerekli portlar açık
    * LAN'dan DMZ'ya: Yönetim amaçlı erişim
    * Internet'ten DMZ'ya: Sadece Load Balancer
    * LAN'dan Internet'e: Kısıtlı erişim
  </Accordion>
</AccordionGroup>

## Güvenlik Katmanları

### Defense in Depth Stratejisi

Apinizer, katmanlı güvenlik yaklaşımı ile korunur:

```
Layer 1: Network Firewall
    │
    ▼
Layer 2: Application Firewall (WAF)
    │
    ▼
Layer 3: TLS/SSL Encryption
    │
    ▼
Layer 4: API Security Policies
    │
    ▼
Layer 5: Data Encryption & Masking
```

### Güvenlik Kontrolleri

<CardGroup cols={2}>
  <Card title="Network Layer" icon="network-wired">
    * Firewall kuralları
    * Network segmentation
    * VLAN isolation
    * DDoS protection
  </Card>
  <Card title="Transport Layer" icon="lock">
    * TLS/SSL encryption
    * Certificate management
    * mTLS (mutual TLS)
    * Perfect Forward Secrecy
  </Card>
  <Card title="Application Layer" icon="shield">
    * OAuth2 / JWT authentication
    * Rate limiting
    * IP whitelisting
    * API key management
  </Card>
  <Card title="Data Layer" icon="database">
    * Data encryption at rest
    * Data masking in logs
    * PII redaction
    * Audit logging
  </Card>
</CardGroup>

## Port ve Protokol Gereksinimleri

### DMZ → LAN İletişimi

| Kaynak | Hedef | Port | Protokol | Açıklama |
|--------|-------|------|----------|----------|
| Worker | Manager | 8080 | HTTP | Konfigürasyon alımı |
| Worker | MongoDB | 27017 | TCP | Veri okuma/yazma |
| Worker | Elasticsearch | 9200 | HTTP | Log gönderimi |
| Worker | Cache | 5701 | TCP | Cache erişimi |

### LAN → DMZ İletişimi

| Kaynak | Hedef | Port | Protokol | Açıklama |
|--------|-------|------|----------|----------|
| Manager | Worker | 8080 | HTTP | Deployment işlemleri |
| Manager | Worker | 8080 | HTTP | Health check |

### Internet → DMZ İletişimi

| Kaynak | Hedef | Port | Protokol | Açıklama |
|--------|-------|------|----------|----------|
| Internet | Load Balancer | 443 | HTTPS | API erişimi |
| Internet | Load Balancer | 80 | HTTP | HTTP → HTTPS redirect |

## Güvenlik Best Practices

<Warning>
  **Kritik Güvenlik Kuralları:**
  
  1. **Asla** MongoDB ve Elasticsearch'i DMZ'ye koymayın
  2. **Asla** Manager modülünü DMZ'ye koymayın
  3. **Mutlaka** TLS/SSL kullanın (production'da)
  4. **Mutlaka** firewall kurallarını en az ayrıcalık prensibi ile yapılandırın
  5. **Mutlaka** düzenli güvenlik güncellemeleri yapın
</Warning>

### Güvenlik Checklist

- [ ] DMZ ve LAN ayrımı yapıldı
- [ ] Firewall kuralları en az ayrıcalık prensibi ile yapılandırıldı
- [ ] TLS/SSL sertifikaları yapılandırıldı
- [ ] MongoDB ve Elasticsearch LAN'da
- [ ] Manager modülü LAN'da
- [ ] Worker modülleri DMZ'de
- [ ] Load Balancer DMZ'de
- [ ] Network segmentation uygulandı
- [ ] DDoS koruması aktif
- [ ] Log monitoring ve alerting yapılandırıldı
- [ ] Düzenli güvenlik güncellemeleri planlandı

## Sonraki Adımlar

<CardGroup cols={2}>
  <Card title="Port Gereksinimleri" icon="plug" href="/tr/apinizer-anlama/sistem/port-izinleri">
    Detaylı port gereksinimlerini inceleyin
  </Card>
  <Card title="Ağ Bağlantı Matrisi" icon="network-wired" href="/tr/apinizer-anlama/sistem/ag-baglanti-matrisi">
    Ağ bağlantı matrisini inceleyin
  </Card>
  <Card title="Kurulum Kılavuzu" icon="download" href="/tr/kurulum-surum-yukseltme/kurulum/kurulum-oncesi-verilmesi-gereken-kararlar">
    Kurulum adımlarını takip edin
  </Card>
  <Card title="Güvenlik Politikaları" icon="shield" href="/tr/gelistirici/politikalar">
    API güvenlik politikalarını öğrenin
  </Card>
</CardGroup>

<Note>
  **Önemli**: Production ortamları için mutlaka bu güvenli deployment deseni kullanılmalıdır. DMZ/LAN ayrımı, güvenlik ve compliance gereksinimleri için kritik öneme sahiptir.
</Note>
