---
title: "Client Route"
description: 'Client Route, istemcilerden gelen isteklerin API Proxy'ye girdiği noktadır. Host, header ve method bazlı dinamik yönlendirme desteği sağlar'
---

Client Route (İstemci Yolu), API Proxy'de istemcilerden gelen isteklerin karşılandığı ve işleme alındığı noktadır. Client Route, API Proxy'nin dış dünyaya açılan kapısıdır ve esnek yönlendirme kuralları sağlar.

## Client Route Kavramı

Client Route, istemcilerin API Proxy'ye erişmek için kullandığı endpoint'tir. İstemciler bu route'a istek göndererek API'yi kullanırlar. Apinizer'ın Client Route özelliği sayesinde:

* Bir proxy'e birden fazla relative path tanımlanabilir
* Host bilgisine göre farklı proxy'lere yönlendirme yapılabilir
* HTTP header değerlerine göre yönlendirme kuralları oluşturulabilir
* Method bazlı yönlendirme yapılabilir

<CardGroup cols={2}>
  <Card title="Giriş Noktası" icon="door-open">
    İsteklerin API Proxy'ye girdiği nokta
  </Card>
  <Card title="URL Yolu" icon="route">
    İstemcilerin eriştiği URL yolu
  </Card>
  <Card title="Dinamik Yönlendirme" icon="arrows-rotate">
    Host, header ve method bazlı yönlendirme
  </Card>
  <Card title="Çoklu Path" icon="layer-group">
    Bir proxy'e birden fazla path tanımlama
  </Card>
</CardGroup>

## Client Route Yapısı

Bir Client Route şu bilgileri içerir:

```
https://api.example.com/api/v1/products
│                    │   │  │
│                    │   │  └─ Resource Path
│                    │   └─ Version
│                    └─ Base Path
└─ Protocol & Domain
```

### Örnek Client Route'lar

```
GET    https://api.example.com/api/v1/products
POST   https://api.example.com/api/v1/orders
PUT    https://api.example.com/api/v1/users/{id}
DELETE https://api.example.com/api/v1/products/{id}
```

## Client Route Nasıl Çalışır?

Client Route özelliği, gelen istekleri belirli bir öncelik sırasına göre değerlendirerek doğru proxy'e yönlendirir.

### Yönlendirme Öncelik Sırası

Gateway, gelen istekleri aşağıdaki öncelik sırasına göre değerlendirir:

1. **Relative Path** (En yüksek öncelik)
2. **Hosts**
3. **Headers**
4. **Methods** (En düşük öncelik)

### Eşleştirme Mantığı

* **Hosts**: Birden fazla host tanımlandığında **OR** mantığı ile çalışır. Yani tanımlanan hostlardan **herhangi birinin** eşleşmesi yeterlidir.
* **Headers**: Birden fazla header tanımlandığında **AND** mantığı ile çalışır. Yani tanımlanan **tüm header'ların** eşleşmesi gerekir.

## Client Route Yapılandırması

### Temel Yapılandırma

Bir Client Route oluştururken şu bilgiler tanımlanır:

* **Relative Path**: URL yolu (örn: `/api/v1/products`)
* **Methods**: HTTP method'ları (GET, POST, PUT, DELETE, vb.) - opsiyonel
* **Hosts**: Host header değerleri - opsiyonel
* **Headers**: HTTP header değerleri - opsiyonel
* **Protocol**: HTTP veya HTTPS
* **Port**: Port numarası (443, 80, vb.)

### Path Matching

Client Route'lar farklı path matching stratejileri destekler:

<AccordionGroup>
  <Accordion title="Exact Match">
    Tam eşleşme. Path tam olarak eşleşmelidir:
    ```
    /api/v1/products → Sadece bu path eşleşir
    ```
  </Accordion>
  
  <Accordion title="Prefix Match">
    Önek eşleşmesi. Path ile başlayan tüm istekler eşleşir:
    ```
    /api/v1/* → /api/v1/products, /api/v1/orders, vb.
    ```
    
    **Path Önceliği**: Daha spesifik path'ler önceliklidir:
    ```
    /api/v1/products/{id} → Daha spesifik
    /api/v1/products      → Daha genel
    ```
  </Accordion>
  
  <Accordion title="Regex Match">
    Düzenli ifade eşleşmesi. Regex pattern'e göre eşleşme:
    ```
    /api/v[0-9]+/.* → /api/v1/products, /api/v2/orders, vb.
    ```
  </Accordion>
</AccordionGroup>

### Wildcard Hostname Kullanımı

Apinizer, host tanımlamalarında esneklik sağlamak için **wildcard (joker karakter)** kullanımını destekler.

<Warning>
  **Wildcard Kuralları:**
  * Domain'in **en solundaki** veya **en sağındaki** label'ında yalnızca **bir adet** asterisk (*) içerebilir
  * Asterisk, domain'in başında veya sonunda kullanılabilir
</Warning>

<CardGroup cols={2}>
  <Card title="Sol Taraf Wildcard" icon="arrow-left">
    ```
    *.example.com
    ```
    
    **Eşleşen Host'lar:**
    * a.example.com
    * x.y.example.com
    * api.example.com
    * test.subdomain.example.com
  </Card>
  <Card title="Sağ Taraf Wildcard" icon="arrow-right">
    ```
    example.*
    ```
    
    **Eşleşen Host'lar:**
    * example.com
    * example.org
    * example.net
    * example.io
  </Card>
</CardGroup>

## Client Route ve Endpoint İlişkisi

Client Route, bir veya birden fazla endpoint'i içerebilir:

```
Client Route: /api/v1/*
│
├─ GET /api/v1/products
├─ GET /api/v1/products/{id}
├─ POST /api/v1/products
├─ PUT /api/v1/products/{id}
└─ DELETE /api/v1/products/{id}
```

## Client Route Yönlendirme Örnekleri

Aşağıdaki örnek senaryoda 5 farklı proxy ve bunlara tanımlanmış Client Route yapılandırmaları gösterilmektedir:

| Proxy ID | Relative Path | Methods | Hosts (OR) | Headers (AND) |
|----------|---------------|---------|------------|---------------|
| 1 | `/jokes` | - | - | `testmode:true`, `test:true` |
| 2 | `/jokes` | - | `hostname_x.com`, `hostname_y.com` | - |
| 3 | `/jokes1/endpoint_x` | - | - | - |
| 4 | `/jokes1` | - | - | - |
| 5 | `/jokes` | - | - | - |

### Yönlendirme Senaryoları

<AccordionGroup>
  <Accordion title="Örnek 1: Temel Yönlendirme">
    **İstek:**
    ```
    GET https://<ACCESS_URL>/jokes
    ```
    
    **Sonuç:** Proxy 5'e yönlendirilir (herhangi bir koşul sağlanmadığı için varsayılan proxy)
  </Accordion>
  
  <Accordion title="Örnek 2: Host Bazlı Yönlendirme">
    **İstek:**
    ```
    GET https://<ACCESS_URL>/jokes
    Host: hostname_x.com
    ```
    
    **Sonuç:** Proxy 2'ye yönlendirilir (host koşulu sağlandı)
  </Accordion>
  
  <Accordion title="Örnek 3: Eksik Header ile Yönlendirme">
    **İstek:**
    ```
    GET https://<ACCESS_URL>/jokes
    testmode: true
    ```
    
    **Sonuç:** Proxy 5'e yönlendirilir (Proxy 1 için her iki header gerekli, sadece biri sağlandı)
  </Accordion>
  
  <Accordion title="Örnek 4: Tam Header Eşleşmesi">
    **İstek:**
    ```
    GET https://<ACCESS_URL>/jokes
    testmode: true
    test: true
    ```
    
    **Sonuç:** Proxy 1'e yönlendirilir (tüm header koşulları sağlandı)
  </Accordion>
  
  <Accordion title="Örnek 5: Path Önceliği - Temel Path">
    **İstek:**
    ```
    GET https://<ACCESS_URL>/jokes1
    ```
    
    **Sonuç:** Proxy 4'e yönlendirilir (path tam eşleşme)
  </Accordion>
  
  <Accordion title="Örnek 6: Path Önceliği - Uzun Path">
    **İstek:**
    ```
    GET https://<ACCESS_URL>/jokes1/endpoint_x
    ```
    
    **Sonuç:** Proxy 3'e yönlendirilir (daha spesifik path öncelikli)
  </Accordion>
  
  <Accordion title="Örnek 7: Host ve Header Kombinasyonu">
    **İstek:**
    ```
    GET https://<ACCESS_URL>/jokes
    Host: hostname_x.com
    testmode: true
    test: true
    ```
    
    **Sonuç:** Proxy 2'ye yönlendirilir (host, header'dan daha yüksek önceliğe sahip)
  </Accordion>
</AccordionGroup>

## Client Route Özellikleri

<AccordionGroup>
  <Accordion title="TLS/SSL Sonlandırması">
    Client Route'da TLS/SSL sonlandırması yapılabilir:
    * Sertifika yönetimi
    * SNI (Server Name Indication) desteği
    * TLS versiyon kontrolü
  </Accordion>
  
  <Accordion title="CORS Desteği">
    Cross-Origin Resource Sharing desteği:
    * Origin kontrolü
    * Method kontrolü
    * Header kontrolü
  </Accordion>
  
  <Accordion title="Rate Limiting">
    Client Route seviyesinde rate limiting:
    * İstek başına limit
    * Zaman bazlı limit
    * İstemci bazlı limit
  </Accordion>
  
  <Accordion title="IP Filtering">
    IP bazlı filtreleme:
    * IP whitelist
    * IP blacklist
    * GeoIP filtering
  </Accordion>
  
  <Accordion title="Dinamik Yönlendirme">
    Çoklu koşul bazlı yönlendirme:
    * Host bazlı routing
    * Header bazlı routing
    * Method bazlı routing
    * Kombinasyon bazlı routing
  </Accordion>
</AccordionGroup>

## Client Route ve Upstream Target İlişkisi

Client Route, istekleri Upstream Target'a yönlendirir:

```
İstemci İsteği
   │
   ▼
Client Route (/api/v1/products)
   │
   │ Routing Logic
   │ (Load Balancing, Failover)
   │
   ▼
Upstream Target (http://backend:8080/products)
   │
   ▼
Backend API
```

## Sonraki Adımlar

<CardGroup cols={2}>
  <Card title="Upstream Target" icon="arrow-left" href="/tr/apinizer-anlama/temel-kavramlar/upstream-target">
    Upstream Target kavramını öğrenin
  </Card>
  <Card title="Routing" icon="route" href="/tr/apinizer-anlama/temel-kavramlar/routing">
    Routing kavramını öğrenin
  </Card>
  <Card title="HTTP Routing" icon="globe" href="/tr/gelistirici/routing-configuration/http-routing">
    HTTP Routing yapılandırması
  </Card>
  <Card title="Load Balancing" icon="scale-balanced" href="/tr/apinizer-anlama/temel-kavramlar/load-balancing-strategies">
    Load balancing stratejileri
  </Card>
</CardGroup>

