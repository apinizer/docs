---
title: "Routing"
description: 'Routing, API Proxy'de isteklerin backend API'lere nasıl yönlendirildiğini tanımlar'
---

Routing (Yönlendirme), API Proxy'de istemcilerden gelen isteklerin backend API'lere nasıl yönlendirildiğini tanımlayan mekanizmadır. Routing, Client Route ve Upstream Target kavramları üzerine kuruludur.

## Routing Kavramı

Routing, bir API Proxy'de iki temel bileşenden oluşur:

<CardGroup cols={2}>
  <Card title="Client Route" icon="arrow-right" href="/tr/apinizer-anlama/temel-kavramlar/client-route">
    İsteklerin API Proxy'ye girdiği nokta. İstemciler bu endpoint'e istek gönderir.
  </Card>
  <Card title="Upstream Target" icon="arrow-left" href="/tr/apinizer-anlama/temel-kavramlar/upstream-target">
    İsteklerin yönlendirildiği backend API. API Proxy bu adrese istek gönderir.
  </Card>
</CardGroup>

## Routing Akışı

```
İstemci
   │
   ▼ (HTTPS Request)
┌──────────────┐
│ Client Route │ ← İsteklerin girdiği nokta
│ /api/v1/... │
└──────┬───────┘
       │
       │ Routing Logic
       │ (Load Balancing, Failover)
       │
       ▼
┌──────────────┐
│Upstream Target│ ← İsteklerin yönlendirildiği backend
│ backend:8080 │
└──────┬───────┘
       │
       ▼
   Backend API
```

## Routing Türleri

Apinizer platformu farklı protokoller için routing desteği sağlar:

<CardGroup cols={3}>
  <Card title="HTTP Routing" icon="globe" href="/tr/apinizer-anlama/temel-kavramlar/routing-types#http-routing">
    HTTP/HTTPS protokolü için routing. REST API'ler için kullanılır.
  </Card>
  <Card title="gRPC Routing" icon="network-wired" href="/tr/apinizer-anlama/temel-kavramlar/routing-types#grpc-routing">
    gRPC protokolü için routing. Microservice mimarileri için kullanılır.
  </Card>
  <Card title="WebSocket Routing" icon="globe" href="/tr/apinizer-anlama/temel-kavramlar/routing-types#websocket-routing">
    WebSocket protokolü için routing. Gerçek zamanlı iletişim için kullanılır.
  </Card>
</CardGroup>

## Load Balancing Strategies

Backend'de birden fazla instance varsa, yük dengeleme stratejileri kullanılır:

<CardGroup cols={2}>
  <Card title="Round Robin" icon="rotate">
    İstekler sırayla tüm backend instance'larına dağıtılır.
  </Card>
  <Card title="Least Connections" icon="users">
    En az bağlantıya sahip backend'e istek gönderilir.
  </Card>
  <Card title="IP Hash" icon="hashtag">
    İstemci IP'sine göre backend seçilir. Aynı IP her zaman aynı backend'e gider.
  </Card>
  <Card title="Weighted Round Robin" icon="scale-balanced">
    Backend'lere ağırlık atanır ve buna göre istek dağıtılır.
  </Card>
</CardGroup>

Detaylı bilgi için [Load Balancing Strategies](/tr/apinizer-anlama/temel-kavramlar/load-balancing-strategies) sayfasına bakın.

## Routing Yapılandırması

### Client Route Yapılandırması

Client Route, istemcilerden gelen isteklerin karşılandığı endpoint'i tanımlar:

* **Path**: `/api/v1/products`
* **Method**: GET, POST, PUT, DELETE, vb.
* **Protocol**: HTTP, HTTPS
* **Port**: 443, 80, vb.

### Upstream Target Yapılandırması

Upstream Target, backend API'nin adresini tanımlar:

* **URL**: `http://backend-service:8080`
* **Protocol**: HTTP, HTTPS, gRPC, WebSocket
* **Health Check**: Backend sağlık kontrolü
* **Timeout**: İstek zaman aşımı

## Routing Özellikleri

### Dinamik Yönlendirme

Apinizer'ın Client Route özelliği sayesinde dinamik yönlendirme yapılabilir:

<CardGroup cols={2}>
  <Card title="Host Bazlı Routing" icon="globe">
    Host header değerine göre farklı proxy'lere yönlendirme:
    ```
    Host: api.example.com → Proxy A
    Host: test.example.com → Proxy B
    ```
  </Card>
  <Card title="Header Bazlı Routing" icon="file-lines">
    HTTP header değerlerine göre yönlendirme:
    ```
    X-Environment: production → Proxy A
    X-Environment: test → Proxy B
    ```
  </Card>
  <Card title="Method Bazlı Routing" icon="code">
    HTTP method'a göre yönlendirme:
    ```
    GET /api/products → Proxy A
    POST /api/products → Proxy B
    ```
  </Card>
  <Card title="Kombinasyon Bazlı Routing" icon="puzzle-piece">
    Host, header ve method kombinasyonlarına göre yönlendirme
  </Card>
</CardGroup>

### Yönlendirme Öncelik Sırası

Gateway, gelen istekleri aşağıdaki öncelik sırasına göre değerlendirir:

1. **Relative Path** (En yüksek öncelik)
2. **Hosts**
3. **Headers**
4. **Methods** (En düşük öncelik)

<Info>
  **Eşleştirme Mantığı:**
  * **Hosts**: Birden fazla host tanımlandığında **OR** mantığı ile çalışır (herhangi biri eşleşirse yeterli)
  * **Headers**: Birden fazla header tanımlandığında **AND** mantığı ile çalışır (tümü eşleşmeli)
</Info>

<AccordionGroup>
  <Accordion title="Path Matching">
    * Exact match: Tam eşleşme
    * Prefix match: Önek eşleşmesi (daha spesifik path'ler önceliklidir)
    * Regex match: Düzenli ifade eşleşmesi
    
    **Path Önceliği:**
    ```
    /api/v1/products/{id} → Daha spesifik (öncelikli)
    /api/v1/products      → Daha genel
    ```
  </Accordion>
  
  <Accordion title="Method Matching">
    * HTTP method kontrolü (GET, POST, PUT, DELETE)
    * Method bazlı routing
    * Method override desteği
    * Method tanımlanmazsa tüm method'lar kabul edilir
  </Accordion>
  
  <Accordion title="Header Matching">
    * Header bazlı routing
    * Content-Type bazlı routing
    * Custom header bazlı routing
    * **AND mantığı**: Tüm header'lar eşleşmeli
  </Accordion>
  
  <Accordion title="Host Matching">
    * Host header bazlı routing
    * Wildcard hostname desteği (*.example.com, example.*)
    * **OR mantığı**: Herhangi bir host eşleşirse yeterli
  </Accordion>
  
  <Accordion title="Query Parameter Matching">
    * Query parametresi bazlı routing
    * Parametre değeri bazlı routing
  </Accordion>
</AccordionGroup>

## Failover ve Retry

### Failover

Backend instance'larından biri hata verdiğinde:

* **Automatic Failover**: Otomatik olarak başka bir instance'a geçiş
* **Health Check**: Düzenli sağlık kontrolü
* **Circuit Breaker**: Hata durumunda geçici olarak devre dışı bırakma

### Retry

Geçici hatalar için retry mekanizması:

* **Retry Count**: Tekrar deneme sayısı
* **Retry Delay**: Tekrar deneme aralığı
* **Retry Conditions**: Hangi hatalar için retry yapılacağı

## Sonraki Adımlar

<CardGroup cols={2}>
  <Card title="Client Route" icon="arrow-right" href="/tr/apinizer-anlama/temel-kavramlar/client-route">
    Client Route kavramını öğrenin
  </Card>
  <Card title="Upstream Target" icon="arrow-left" href="/tr/apinizer-anlama/temel-kavramlar/upstream-target">
    Upstream Target kavramını öğrenin
  </Card>
  <Card title="HTTP Routing" icon="globe" href="/tr/gelistirici/routing-configuration/http-routing">
    HTTP Routing yapılandırması
  </Card>
  <Card title="Load Balancing" icon="scale-balanced" href="/tr/apinizer-anlama/temel-kavramlar/load-balancing-strategies">
    Load balancing stratejileri
  </Card>
</CardGroup>