---
title: "Load Balancing Strategies"
description: 'Load Balancing Strategies, birden fazla backend instance arasında trafik dağıtımı için kullanılan stratejilerdir'
---

Load Balancing Strategies (Yük Dengeleme Stratejileri), API Proxy'de birden fazla backend instance arasında trafik dağıtımı için kullanılan stratejilerdir. Bu stratejiler, yükün eşit dağıtılmasını ve yüksek erişilebilirliği sağlar.

## Load Balancing Kavramı

Yük dengeleme, birden fazla backend instance arasında isteklerin dağıtılması işlemidir. Bu sayede:

* **Yük Dağılımı**: Trafik eşit veya ağırlıklı olarak dağıtılır
* **Yüksek Erişilebilirlik**: Bir instance hata verdiğinde diğerleri devam eder
* **Performans**: Yük birden fazla instance'a dağıtıldığı için performans artar
* **Ölçeklenebilirlik**: Yeni instance'lar eklenerek kapasite artırılabilir

## Load Balancing Stratejileri

### 1. Round Robin

İstekler sırayla tüm backend instance'larına dağıtılır.

<CardGroup cols={2}>
  <Card title="Nasıl Çalışır?" icon="rotate">
    İstekler sırayla backend'lere gönderilir:
    ```
    İstek 1 → Backend 1
    İstek 2 → Backend 2
    İstek 3 → Backend 3
    İstek 4 → Backend 1 (döngü)
    ```
  </Card>
  <Card title="Avantajlar" icon="check-circle">
    * Basit ve anlaşılır
    * Eşit dağılım sağlar
    * Düşük overhead
  </Card>
  <Card title="Dezavantajlar" icon="xmark-circle">
    * Backend kapasitelerini dikkate almaz
    * Uzun süren istekler sorun yaratabilir
  </Card>
  <Card title="Kullanım Senaryosu" icon="lightbulb">
    Tüm backend'lerin benzer kapasitede olduğu durumlar
  </Card>
</CardGroup>

### 2. Least Connections

En az bağlantıya sahip backend'e istek gönderilir.

<CardGroup cols={2}>
  <Card title="Nasıl Çalışır?" icon="users">
    Backend'lerin aktif bağlantı sayısı kontrol edilir:
    ```
    Backend 1: 10 bağlantı
    Backend 2: 5 bağlantı  ← Seçilir
    Backend 3: 8 bağlantı
    ```
  </Card>
  <Card title="Avantajlar" icon="check-circle">
    * Yükü daha iyi dağıtır
    * Uzun süren istekler için uygundur
    * Backend kapasitelerini dikkate alır
  </Card>
  <Card title="Dezavantajlar" icon="xmark-circle">
    * Bağlantı sayısı takibi gerekir
    * Biraz daha karmaşık
  </Card>
  <Card title="Kullanım Senaryosu" icon="lightbulb">
    İstek sürelerinin değişken olduğu durumlar
  </Card>
</CardGroup>

### 3. IP Hash

İstemci IP'sine göre backend seçilir. Aynı IP her zaman aynı backend'e gider.

<CardGroup cols={2}>
  <Card title="Nasıl Çalışır?" icon="hashtag">
    İstemci IP'si hash'lenir ve backend seçilir:
    ```
    IP 192.168.1.100 → Hash → Backend 1
    IP 192.168.1.101 → Hash → Backend 2
    IP 192.168.1.100 → Hash → Backend 1 (aynı)
    ```
  </Card>
  <Card title="Avantajlar" icon="check-circle">
    * Session affinity sağlar
    * Cache kullanımı için uygundur
    * Tutarlı backend seçimi
  </Card>
  <Card title="Dezavantajlar" icon="xmark-circle">
    * Yük dağılımı eşit olmayabilir
    * Backend ekleme/çıkarma durumunda sorun yaratabilir
  </Card>
  <Card title="Kullanım Senaryosu" icon="lightbulb">
    Session state'in backend'de tutulduğu durumlar
  </Card>
</CardGroup>

### 4. Weighted Round Robin

Backend'lere ağırlık atanır ve buna göre istek dağıtılır.

<CardGroup cols={2}>
  <Card title="Nasıl Çalışır?" icon="scale-balanced">
    Backend'lere ağırlık atanır:
    ```
    Backend 1: Ağırlık 3 → 3 istek
    Backend 2: Ağırlık 2 → 2 istek
    Backend 3: Ağırlık 1 → 1 istek
    ```
  </Card>
  <Card title="Avantajlar" icon="check-circle">
    * Farklı kapasiteli backend'ler için uygundur
    * Esnek yapılandırma
    * Performans optimizasyonu
  </Card>
  <Card title="Dezavantajlar" icon="xmark-circle">
    * Ağırlık yapılandırması gerekir
    * Dinamik değişiklikler için uygun değil
  </Card>
  <Card title="Kullanım Senaryosu" icon="lightbulb">
    Backend'lerin farklı kapasitelerde olduğu durumlar
  </Card>
</CardGroup>

## Strateji Karşılaştırması

| Strateji | Yük Dağılımı | Session Affinity | Karmaşıklık | Kullanım |
|----------|--------------|------------------|-------------|----------|
| **Round Robin** | Eşit | Yok | Düşük | Genel kullanım |
| **Least Connections** | İyi | Yok | Orta | Değişken süreler |
| **IP Hash** | Değişken | Var | Düşük | Session state |
| **Weighted Round Robin** | Ağırlıklı | Yok | Orta | Farklı kapasiteler |

## Health Check ve Failover

Tüm yük dengeleme stratejileri health check ile birlikte çalışır:

* **Health Check**: Backend'lerin sağlık durumu kontrol edilir
* **Automatic Failover**: Sağlıksız backend'ler devre dışı bırakılır
* **Recovery**: Backend sağlığına kavuştuğunda tekrar devreye alınır

## Yük Dengeleme Yapılandırması

### Temel Yapılandırma

```yaml
upstream_targets:
  - url: http://backend1:8080
    weight: 3
    health_check: /health
  - url: http://backend2:8080
    weight: 2
    health_check: /health
  - url: http://backend3:8080
    weight: 1
    health_check: /health

load_balancing_strategy: weighted_round_robin
```

### Health Check Yapılandırması

* **Health Check URL**: Sağlık kontrolü endpoint'i
* **Interval**: Kontrol aralığı (örn: 10 saniye)
* **Timeout**: Zaman aşımı (örn: 5 saniye)
* **Failure Threshold**: Hata eşiği (örn: 3 başarısız kontrol)

## Best Practices

<AccordionGroup>
  <Accordion title="Strateji Seçimi">
    * Backend kapasitelerine göre strateji seçin
    * Session state gereksinimlerini değerlendirin
    * Trafik desenlerini analiz edin
  </Accordion>
  
  <Accordion title="Health Check">
    * Mutlaka health check yapılandırın
    * Health check endpoint'lerini optimize edin
    * Failure threshold'u uygun şekilde ayarlayın
  </Accordion>
  
  <Accordion title="Monitoring">
    * Backend yük dağılımını izleyin
    * Health check sonuçlarını monitor edin
    * Performans metriklerini takip edin
  </Accordion>
</AccordionGroup>

## Sonraki Adımlar

<CardGroup cols={2}>
  <Card title="Routing" icon="route" href="/tr/apinizer-anlama/temel-kavramlar/routing">
    Routing kavramını öğrenin
  </Card>
  <Card title="Upstream Target" icon="arrow-left" href="/tr/apinizer-anlama/temel-kavramlar/upstream-target">
    Upstream Target kavramını öğrenin
  </Card>
  <Card title="HTTP Routing" icon="globe" href="/tr/gelistirici/routing-configuration/http-routing">
    HTTP Routing yapılandırması
  </Card>
  <Card title="Monitoring" icon="chart-line" href="/tr/gelistirici/monitoring-analytics/api-traffic-real-time-monitoring">
    Monitoring ve analytics
  </Card>
</CardGroup>

