---
title: "Variable"
description: "Variable (Değişken), Apinizer platformunda API Proxy'lerde ve Task Flow'larda kullanılan dinamik değerleri saklayan yapılardır. Değişkenler, gelen veya dönen mesajın içeriğindeki bir veriye ulaşmak için kullanılır. Bu veriler header'lardan, parametrelerden, body içeriğinden, sistem özelliklerinden veya manuel olarak tanımlanan değerlerden alınabilir. Değişkenler form tabanlı yapılandırma ile oluşturulur ve bu verilerin politika üzerinde işlenmesi sağlanır. Değişkenler, API Proxy ve Task Flow'larda dinamik değerleri temsil eder ve mesaj işleme sırasında kullanılır. Politika yapılandırması, routing, dönüştürme, koşullu ifadeler ve script'lerde kullanılabilirler."
---

## Variable Özellikleri

Variable'lar, gelen veya dönen mesajın içeriğindeki bir veriye ulaşmak ve bu verinin politika üzerinde işlenmesini sağlamak için kullanılır. Form tabanlı yapılandırma ile oluşturulur.

<CardGroup cols={2}>
  <Card title="Mesaj İçeriğinden Veri Çıkarma" icon="arrows-rotate">
    Gelen veya dönen mesajın içeriğindeki verilere ulaşma
    
    Header, parametre, body içeriğinden dinamik değerler çıkarılabilir.
  </Card>
  <Card title="Politika Üzerinde İşleme" icon="shield">
    Çıkarılan verilerin politikalar üzerinde işlenmesi
    
    Rate limiting, throttling, koşullu çalıştırma gibi politikalar için kullanılır.
  </Card>
  <Card title="Form Tabanlı Yapılandırma" icon="wand-magic-sparkles">
    Kod yazmadan form ile değişken oluşturma
    
    Form alanları doldurularak değişkenler tanımlanır.
  </Card>
  <Card title="Yeniden Kullanım" icon="recycle">
    Değişkenler birden fazla yerde kullanılabilir
    
    Proje bazında tanımlanan değişkenler tüm API Proxy'lerde kullanılabilir.
  </Card>
  <Card title="Dönüştürme" icon="wand-magic-sparkles">
    Değişkenler dönüştürülebilir ve zenginleştirilebilir
    
    String, number, date işlemleri ve özel dönüşümler yapılabilir.
  </Card>
  <Card title="Koşullu Kullanım" icon="code-branch">
    Değişkenler koşullu ifadelerde kullanılabilir
    
    Değişken değerlerine göre politika çalıştırma kararı verilebilir.
  </Card>
</CardGroup>

<Info>
Variable'lar proje bazında tanımlanır ve tüm API Proxy'lerde kullanılabilir. Administration menüsü altında tanımlanan değişkenler yeni proje oluşturulduğunda otomatik olarak projeye kopyalanır.
</Info>

## Variable Türleri

### Mesaj Değişkenleri

Mesaj içeriğinden alınan değerler:

<CardGroup cols={2}>
  <Card title="Request Body" icon="file-lines">
    `request.body`
    
    İstek gövdesinden veri çıkarma. JSON, XML veya raw body içeriği.
  </Card>
  <Card title="Response Body" icon="file-lines">
    `response.body`
    
    Yanıt gövdesinden veri çıkarma. JSON, XML veya raw body içeriği.
  </Card>
  <Card title="Request Header" icon="file-lines">
    `request.header`
    
    İstek header'larından veri çıkarma. Örneğin: `X-API-Key`, `Authorization`.
  </Card>
  <Card title="Response Header" icon="file-lines">
    `response.header`
    
    Yanıt header'larından veri çıkarma. Örneğin: `X-Custom-Header`.
  </Card>
  <Card title="Query Parameters" icon="link">
    `request.query`
    
    URL query parametrelerinden veri çıkarma. Örneğin: `?page=1&limit=10`.
  </Card>
  <Card title="Path Parameters" icon="route">
    `request.path`
    
    URL path parametrelerinden veri çıkarma. Örneğin: `/users/{id}`.
  </Card>
</CardGroup>

### Sistem Değişkenleri (Context Values)

Sistem özelliklerinden alınan değerler. CONTEXT_VALUES tipinde değişkenler olarak tanımlanır. Form tabanlı yapılandırmada dropdown menüden seçim yapılarak kullanılır.

<CardGroup cols={2}>
  <Card title="Client IP" icon="network-wired">
    İstemci IP adresi
    
    İsteği gönderen client'ın IP adresi bilgisi.
  </Card>
  <Card title="Request Time" icon="calendar">
    İstek zamanı
    
    Epoch milisaniye formatında istek zamanı. Zaman dilimi (zoneId) gerektirir.
  </Card>
  <Card title="Environment Name" icon="server">
    Ortam adı
    
    Deploy edilen ortam bilgisi.
  </Card>
  <Card title="API Proxy Name" icon="server">
    API Proxy adı
    
    İsteğin geldiği API Proxy'nin adı.
  </Card>
  <Card title="Message Correlation ID" icon="fingerprint">
    Mesaj correlation ID
    
    Her istek için benzersiz tanımlayıcı.
  </Card>
  <Card title="HTTP Method" icon="code">
    HTTP method
    
    GET, POST, PUT, DELETE gibi HTTP method bilgisi.
  </Card>
  <Card title="Request URI" icon="link">
    İstek URI'si
    
    Tam istek URI bilgisi.
  </Card>
  <Card title="Content Type" icon="file-lines">
    İçerik tipi
    
    Content-Type header değeri.
  </Card>
</CardGroup>

<AccordionGroup>
  <Accordion title="Request Bilgileri">
    Formda seçilebilen request bilgileri:
    * Client IP adresi
    * HTTP method
    * Content type
    * Path bilgisi
    * Query string
    * Request URI
    * Remote user bilgisi
    * Server bilgileri (ad, port, vb.)
  </Accordion>
  
  <Accordion title="Tarih/Saat Değerleri">
    Tarih/saat değerleri zaman dilimi (zoneId) gerektirir:
    * Epoch milisaniye
    * Formatlanmış tarih-saat
    * Formatlanmış tarih
    * Formatlanmış saat
    * Yıl, ay, gün, saat, dakika, saniye bilgileri
  </Accordion>
  
  <Accordion title="Ortam ve API Proxy Bilgileri">
    * Ortam ID ve adı
    * API Proxy Group ID ve adı
    * API Proxy ID ve adı
    * API Method bilgileri
  </Accordion>
  
  <Accordion title="Mesaj Bilgileri">
    * Mesaj correlation ID
    * İçerik uzunluğu
    * Yanıt status kodu
    * Compression bilgileri
  </Accordion>
</AccordionGroup>

<Info>
Context Values, form tabanlı yapılandırmada dropdown menüden seçilir. Kullanıcı dostu label'lar ile gösterilir ve seçim yapılarak kullanılır.
</Info>

### Kullanıcı Tanımlı Değişkenler

Manuel olarak tanımlanan değişkenler:

<CardGroup cols={3}>
  <Card title="Custom Variables" icon="code">
    Kullanıcı tarafından tanımlanan değişkenler
    
    Özellikle pipeline'lar arası veri taşımak için kullanılır. Akış esnasında içine veri eklenebilir, okunabilir ve değiştirilebilir.
  </Card>
  <Card title="Environment Variables" icon="key">
    Ortam değişkenleri
    
    Ortam bazında tanımlanan sabit değerler.
  </Card>
  <Card title="Project Variables" icon="folder">
    Proje değişkenleri
    
    Proje bazında tanımlanan sabit değerler.
  </Card>
</CardGroup>

<Info>
**Custom Variable** özellikle pipeline'lar arası veri taşımak için kullanılır. Script ve Business Rule politikaları ile akış esnasında Custom Variable'a veri eklenebilir, okunabilir ve değiştirilebilir. Bu sayede bir politikadan diğerine veri aktarımı sağlanır.
</Info>

## Variable Kullanımı

Değişkenler şu durumlarda kullanılır:

<CardGroup cols={2}>
  <Card title="Politika Yapılandırması" icon="shield">
    Politika ayarlarında dinamik değerler
    
    Rate Limiting, Throttling, API Key gibi politikalar için client tanımlama.
  </Card>
  <Card title="Routing" icon="route">
    Yönlendirme kurallarında dinamik hedef seçimi
    
    Değişken değerlerine göre farklı backend'lere yönlendirme.
  </Card>
  <Card title="Dönüştürme" icon="arrows-rotate">
    Mesaj dönüştürme işlemlerinde dinamik değerler
    
    JSON/XML dönüşümlerinde değişken kullanımı.
  </Card>
  <Card title="Koşullu İfadeler" icon="code-branch">
    Koşullu politika çalıştırmada değer kontrolü
    
    Değişken değerlerine göre politika çalıştırma kararı.
  </Card>
  <Card title="Script" icon="code">
    Groovy/JavaScript script'lerinde değişken kullanımı
    
    Script içinde değişkenlere erişim ve işleme. Custom Variable'lara veri ekleme, okuma ve değiştirme.
  </Card>
  <Card title="Pipeline'lar Arası Veri Taşıma" icon="arrows-left-right">
    Custom Variable ile pipeline'lar arası veri aktarımı
    
    Request Pipeline'dan Response Pipeline'a, bir politikadan diğerine veri taşıma.
  </Card>
  <Card title="Content Filtering" icon="filter">
    İçerik filtreleme ve redaction
    
    Hassas verilerin filtrelenmesi veya gizlenmesi.
  </Card>
</CardGroup>

## Variable Syntax

Değişkenler farklı syntax'larla kullanılabilir:

<AccordionGroup>
  <Accordion title="JSONPath (JSON için)">
    JSON içeriğinden veri çıkarmak için JSONPath kullanılır:
    
    ```json
    $.user.name                    // Kullanıcı adı
    $.products[0].price           // İlk ürünün fiyatı
    $.items[*].id                 // Tüm item'ların ID'leri
    $.user.contact.email          // Kullanıcı e-posta adresi
    ```
    
    <Tip>
    JSONPath ifadeleri `$` ile başlar ve nokta (`.`) veya köşeli parantez (`[]`) ile devam eder.
    </Tip>
  </Accordion>
  
  <Accordion title="XPath (XML için)">
    XML içeriğinden veri çıkarmak için XPath kullanılır:
    
    ```xpath
    /user/name                     // Kullanıcı adı
    /products/product[1]/price    // İlk ürünün fiyatı
    //item[@id='123']             // ID'si 123 olan item
    /customer/contact/email       // Müşteri e-posta adresi
    ```
    
    <Tip>
    XPath ifadeleri `/` ile başlar ve XML yapısını takip eder.
    </Tip>
  </Accordion>
  
  <Accordion title="Header Değişkenleri">
    HTTP header'larından veri çıkarmak için:
    
    ```
    request.header["Content-Type"]
    request.header["X-API-Key"]
    response.header["X-Custom-Header"]
    ```
    
    <Tip>
    Header adları case-insensitive'dir. Büyük/küçük harf fark etmez.
    </Tip>
  </Accordion>
  
  <Accordion title="Query Parametreleri">
    URL query parametrelerinden veri çıkarmak için:
    
    ```
    request.query["page"]
    request.query["limit"]
    request.query["userId"]
    ```
    
    <Tip>
    Query parametreleri URL'de `?` işaretinden sonra gelir ve `&` ile ayrılır.
    </Tip>
  </Accordion>
  
  <Accordion title="Path Parametreleri">
    URL path parametrelerinden veri çıkarmak için:
    
    ```
    request.path["id"]            // /users/{id} → id değeri
    request.path["orderId"]       // /orders/{orderId} → orderId değeri
    ```
    
    <Tip>
    Path parametreleri URL path'inde `{paramName}` formatında tanımlanır.
    </Tip>
  </Accordion>
</AccordionGroup>

## Variable Dönüştürme

Değişkenler dönüştürülebilir:

<AccordionGroup>
  <Accordion title="String Operations">
    String işlemleri:
    * **Uppercase**: Büyük harfe dönüştürme
    * **Lowercase**: Küçük harfe dönüştürme
    * **Substring**: String'in bir kısmını alma
    * **Replace**: String değiştirme
    * **Trim**: Boşlukları temizleme
  </Accordion>
  
  <Accordion title="Number Operations">
    Sayısal işlemler:
    * **Math Operations**: Toplama, çıkarma, çarpma, bölme
    * **Formatting**: Sayı formatlama (ondalık basamak, binlik ayırıcı)
    * **Rounding**: Yuvarlama işlemleri
  </Accordion>
  
  <Accordion title="Date Operations">
    Tarih işlemleri:
    * **Date Formatting**: Tarih formatı dönüşümü
    * **Timezone Conversion**: Zaman dilimi dönüşümü
    * **Date Arithmetic**: Tarih aritmetiği (gün ekleme, çıkarma)
  </Accordion>
  
  <Accordion title="Custom Transformations">
    Özel dönüşümler:
    * **Script ile Dönüştürme**: Groovy/JavaScript ile özel mantık
    * **Regular Expressions**: Regex ile pattern matching ve dönüşüm
    * **Conditional Logic**: Koşullu dönüşüm mantığı
  </Accordion>
</AccordionGroup>

## Variable ve Politika İlişkisi

Değişkenler politikaların temel bileşenleridir:

<CardGroup cols={2}>
  <Card title="Rate Limiting" icon="gauge">
    **RLCL (Rate Limit Control List)**
    
    `targetVariable` ile client tanımlama ve rate limit uygulama.
  </Card>
  <Card title="API Based Throttling" icon="tachometer-alt">
    **Throttling Politikası**
    
    `targetVariableForIdentity` ile client kimlik doğrulama ve throttling.
  </Card>
  <Card title="Koşullu Politika" icon="code-branch">
    **Conditional Policy Execution**
    
    `firstVariable` ve `secondVariable` ile koşul kontrolü.
  </Card>
  <Card title="Content Filter" icon="filter">
    **Content Filtering**
    
    Değişkenler ile içerik filtreleme ve redaction işlemleri.
  </Card>
  <Card title="Encryption/Decryption" icon="lock">
    **Şifreleme Politikaları**
    
    Değişkenler ile kaynak ve hedef veri tanımlama.
  </Card>
  <Card title="Client Ban" icon="ban">
    **Client Ban Politikası**
    
    Değişkenler ile client tanımlama ve yasaklama.
  </Card>
</CardGroup>

## Variable Oluşturma

Değişkenler form tabanlı yapılandırma ile oluşturulur. Kod yazmaya gerek kalmadan form alanları doldurularak değişkenler tanımlanır.

Değişkenler oluşturulurken şu bilgiler tanımlanır:

<AccordionGroup>
  <Accordion title="Temel Bilgiler">
    * **Name**: Değişkenin benzersiz adı (proje bazında unique)
    * **Description**: Değişkenin açıklaması (opsiyonel)
    * **Type**: Değişken türü (HEADER, PARAMETER, BODY, CONTEXT_VALUES, CUSTOM)
  </Accordion>
  
  <Accordion title="HEADER Type">
    Header değişkenleri için:
    * **headerName**: HTTP header adı (örn: `X-API-Key`)
    * Request veya response header'ından veri çıkarır
  </Accordion>
  
  <Accordion title="PARAMETER Type">
    Parametre değişkenleri için:
    * **paramType**: Parametre türü (QUERY, PATH, FORM)
    * **paramName**: Parametre adı
    * **paramPath**: Path parametreleri için path tanımı (örn: `/orders/{orderId}`)
  </Accordion>
  
  <Accordion title="BODY Type">
    Body değişkenleri için:
    * **messageContentType**: İçerik tipi (JSON, XML, RAW)
    * **jsonPathValue**: JSON için JSONPath ifadesi
    * **xpathValue**: XML için XPath ifadesi
  </Accordion>
  
  <Accordion title="CONTEXT_VALUES Type">
    Context değişkenleri için:
    * **Value**: Form dropdown menüsünden seçilecek context değeri (örn: "Client IP adresi", "İstek zamanı")
    * **Zone ID**: Tarih/saat değerleri için zaman dilimi (opsiyonel, örn: "Europe/Istanbul" veya "+03:00")
    
    <Tip>
    Context değerleri form tabanlı yapılandırmada dropdown menüden seçilir. Kullanıcı dostu label'lar ile gösterilir (örn: "Client IP adresi", "İstek zamanı", "Ortam adı"). Teknik enum değerleri yerine anlaşılır label'lar kullanılır.
    </Tip>
  </Accordion>
  
  <Accordion title="CUSTOM Type">
    Custom değişkenler için:
    * **Name**: Değişkenin benzersiz adı
    * **Description**: Değişkenin açıklaması (opsiyonel)
    * **Initialized with Script**: Script ile başlangıç değeri atama (opsiyonel)
    * **Script Language**: Script dili (JAVASCRIPT, GROOVY)
    * **Script Body**: Başlangıç değeri için script içeriği
    
    <Tip>
    Custom Variable'lar özellikle pipeline'lar arası veri taşımak için kullanılır. Script ve Business Rule politikaları ile akış esnasında veri eklenebilir, okunabilir ve değiştirilebilir.
    </Tip>
  </Accordion>
</AccordionGroup>

<Warning>
**Önemli Notlar:**
* Değişken adları proje bazında benzersiz olmalıdır
* Değişken adı ve header/parametre adı farklı tanımlanabilir
* Değişken adı sistem genelinde benzersiz bir tanımdır
* Header/parametre adı client'tan beklenen değerdir
* Header ve parametre değerleri çoklu olsa bile ilk değer kullanılır
* Her değişken türü için gerekli alanlar tanımlanmalıdır
* JSONPath/XPath ifadeleri geçerli olmalıdır
* Context değişkenleri için tarih/saat değerleri `zoneId` gerektirebilir
* Custom Variable'lar özellikle pipeline'lar arası veri taşımak için kullanılır
* Custom Variable'lar akış esnasında Script ve Business Rule politikaları ile yönetilebilir (ekleme, okuma, değiştirme)
</Warning>

<Tip>
**Variable Yönetimi:**
* Administration menüsü altında tanımlanan değişkenler "Move to Global" seçeneği ile Admin sayfasına taşınabilir
* Global değişkenler tüm projelerde kullanılabilir
* Administration menüsündeki değişkenlerin güncellenmesi veya silinmesi, kopyalandıkları projelerdeki tanımları etkilemez
</Tip>

## Sonraki Adımlar

<CardGroup cols={2}>
  <Card title="Environment Variable" icon="key" href="/tr/apinizer-anlama/temel-kavramlar/environment-variable">
    Ortam değişkenlerini öğrenin
  </Card>
  <Card title="Politika Nedir?" icon="shield" href="/tr/apinizer-anlama/temel-kavramlar/politika-nedir">
    Politika kavramını öğrenin
  </Card>
  <Card title="Koşullu Politika Çalıştırma" icon="code-branch" href="/tr/apinizer-anlama/temel-kavramlar/kosullu-politika-calistirma">
    Koşullu politika çalıştırmayı öğrenin
  </Card>
  <Card title="Script Policy" icon="code" href="/tr/gelistirici/politikalar/script">
    Script politikasında değişken kullanımı
  </Card>
  <Card title="Variable Definition API" icon="code" href="/api-reference/appendix/variable-definition">
    Variable tanımlama API referansı
  </Card>
  <Card title="Variable Detaylı Dokümantasyon" icon="book" href="https://docs.apinizer.com/variables-16811772.html">
    Variable oluşturma ve yönetimi detayları
  </Card>
</CardGroup>
