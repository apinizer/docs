---
title: "Environment Variable"
description: 'Environment Variable, şifrelenmiş veya şifrelenmemiş olarak saklanabilen, ortam veya proje seviyesinde tanımlanan değişkenlerdir'
---

Environment Variable (Ortam Değişkeni), Apinizer API Management Platform'unda farklı ortamlarda (Development, Test, Production) farklı değerler kullanılması gereken yapılandırma bilgilerini merkezi olarak yönetmenizi sağlayan bir özelliktir. Bu özellik sayesinde aynı API Proxy yapılandırması farklı ortamlarda farklı backend adresleri, veritabanı bağlantı bilgileri, API anahtarları gibi değerleri dinamik olarak kullanabilir.

## Environment Variable Kavramı

Ortam değişkenleri, hassas bilgileri (şifreler, API anahtarları, sertifikalar) veya yapılandırma değerlerini güvenli bir şekilde saklamak için kullanılır. Apinizer'da ortam değişkenleri proje seviyesinde tanımlanır ve iki tipte olabilir:

* **Global (Tüm Ortamlar)**: Tüm ortamlarda aynı değeri kullanır
* **Environment-Specific (Ortam Özelinde)**: Her ortam için farklı değerler tanımlanabilir

<CardGroup cols={2}>
  <Card title="Şifreleme Desteği" icon="lock">
    Hassas bilgiler şifrelenmiş olarak saklanabilir
  </Card>
  <Card title="Seviye Bazlı" icon="layer-group">
    Ortam veya proje seviyesinde tanımlanabilir
  </Card>
  <Card title="Güvenlik" icon="shield">
    Şifrelenmiş değişkenler güvenli bir şekilde saklanır
  </Card>
  <Card title="Yeniden Kullanım" icon="recycle">
    Birden fazla API Proxy veya Task Flow'da kullanılabilir
  </Card>
</CardGroup>

## Environment Variable Türleri

### Şifrelenmiş (Encrypted)

Hassas bilgiler için kullanılır:

* **Şifreler**: Veritabanı şifreleri, API anahtarları
* **Sertifikalar**: SSL/TLS sertifikaları
* **Token'lar**: OAuth token'ları, JWT secret'ları

<Warning>
  **Önemli**: Şifrelenmiş değişkenler geri dönüştürülemez şekilde şifrelenir. Değerler sadece kullanım sırasında çözülür.
</Warning>

### Şifrelenmemiş (Unencrypted)

Yapılandırma değerleri için kullanılır:

* **URL'ler**: Backend API URL'leri
* **Port Numaraları**: Port değerleri
* **Flag'ler**: Boolean değerler
* **Diğer Yapılandırmalar**: Genel yapılandırma değerleri

## Environment Variable Seviyeleri

### Environment-Level (Ortam Seviyesi)

Ortam seviyesinde tanımlanan değişkenler:

* **Kapsam**: Belirli bir ortamda (Environment) geçerlidir
* **Kullanım**: O ortamdaki tüm API Proxy'ler ve Task Flow'lar tarafından kullanılabilir
* **Öncelik**: Proje seviyesi değişkenlerden daha yüksek önceliğe sahiptir

**Kullanım Senaryoları:**
* Ortam bazlı backend URL'leri
* Ortam bazlı API anahtarları
* Ortam bazlı yapılandırma değerleri

### Project-Level (Proje Seviyesi)

Proje seviyesinde tanımlanan değişkenler:

* **Kapsam**: Belirli bir projede (Project) geçerlidir
* **Kullanım**: O projedeki tüm API Proxy'ler ve Task Flow'lar tarafından kullanılabilir
* **Öncelik**: Ortam seviyesi değişkenlerden daha düşük önceliğe sahiptir

**Kullanım Senaryoları:**
* Proje bazlı yapılandırma değerleri
* Proje bazlı API anahtarları
* Proje bazlı genel ayarlar

## Environment Variable Öncelik Sırası

Değişken çözümleme sırası:

1. **Environment-Level Encrypted**: En yüksek öncelik
2. **Environment-Level Unencrypted**
3. **Project-Level Encrypted**
4. **Project-Level Unencrypted**: En düşük öncelik

<Info>
  **Not**: Aynı isimde bir değişken hem ortam hem de proje seviyesinde tanımlıysa, ortam seviyesindeki değişken kullanılır.
</Info>

## Çalışma Mantığı

### 1. Tanımlama Aşaması

Ortam değişkenleri proje seviyesinde tanımlanır ve iki tipte olabilir:

* **Global (Tüm Ortamlar)**: Tüm ortamlarda aynı değeri kullanır
* **Environment-Specific (Ortam Özelinde)**: Her ortam için farklı değerler tanımlanabilir

### 2. Kullanım Aşaması

Ortam değişkenleri, yapılandırma alanlarında `${variableName}` formatında kullanılır:

* **Örnek 1**: Backend adresi için `${BACKEND_URL}`
* **Örnek 2**: Veritabanı bağlantı string'i için `jdbc:mysql://${DB_HOST}:${DB_PORT}/${DB_NAME}`
* **Örnek 3**: API anahtarı için `${API_KEY}`

### 3. Runtime Çözümleme

API Proxy çalışırken (runtime):

1. Yapılandırmadaki `${variableName}` formatındaki ifadeler tespit edilir
2. İlgili ortamın (Environment) değişken değeri alınır
3. Secret değerler otomatik olarak decrypt edilir
4. Değişken adı gerçek değerle değiştirilir
5. İşlem gerçek değerle devam eder

**Örnek Senaryo:**

* **Development Ortamı**: `BACKEND_URL = dev-api.example.com`
* **Production Ortamı**: `BACKEND_URL = api.example.com`
* **Yapılandırmada**: `${BACKEND_URL}`
* **Runtime'da Development'ta**: `dev-api.example.com`
* **Runtime'da Production'da**: `api.example.com`

## Environment Variable Kullanım Formatı

Ortam değişkenleri, yapılandırma alanlarında özel bir format kullanılarak referans edilir.

### Format Yapısı

| Format | Açıklama | Örnek |
|--------|----------|-------|
| `${variableName}` | Temel kullanım formatı | `${BACKEND_URL}` |
| `text${variableName}` | Metin ile birleştirme | `https://${API_HOST}` |
| `${variableName}text` | Metin ile birleştirme | `${API_PORT}/api` |
| `text${variable1}text${variable2}` | Birden fazla değişken | `jdbc:mysql://${DB_HOST}:${DB_PORT}/${DB_NAME}` |

### Format Kuralları

<CardGroup cols={2}>
  <Card title="Başlangıç Karakteri" icon="arrow-right">
    `${` ile başlamalıdır
  </Card>
  <Card title="Bitiş Karakteri" icon="arrow-left">
    `}` ile bitmelidir
  </Card>
  <Card title="Değişken Adı" icon="tag">
    Ortada değişken adı yer alır (boşluk olmadan)
  </Card>
  <Card title="Büyük/Küçük Harf" icon="text-height">
    Değişken adı büyük/küçük harf duyarlıdır
  </Card>
</CardGroup>

## Environment Variable Kullanım Yerleri

Ortam değişkenleri Apinizer platformunda çeşitli yapılandırma alanlarında kullanılabilir. Ancak **Environment Variable Seçim Dialog'u** sadece belirli alanlarda mevcuttur.

### 1. API Proxy - Routing (Yönlendirme)

**Kullanım Alanı:** Upstream Routing adresleri

| Özellik | Açıklama |
|---------|----------|
| **Konum** | API Proxy > Upstream/Routing Tab > Define Address(es) |
| **Alan** | Backend API adresi input alanı |
| **Kullanım** | Backend API adreslerinde ortam bazlı yönlendirme |
| **Erişim** | Adres input alanının sağındaki liste ikonu butonuna tıklanarak |

**Kullanım Senaryosu:** Farklı ortamlarda farklı backend adresleri kullanmak için

### 2. Database Connection (Veritabanı Bağlantısı)

**Kullanım Alanı:** Veritabanı bağlantı yapılandırması

| Özellik | Açıklama |
|---------|----------|
| **Konum** | Administration > Connection Management > Connection Pool Def DB |
| **Alanlar** | JDBC URL, Username, Password |
| **Kullanım** | Veritabanı bağlantı bilgilerinde ortam bazlı yönetim |
| **Dialog Erişimi** | Her alanın sağındaki liste ikonu butonuna tıklanarak |
| **Secret Kullanımı** | Password alanı mutlaka secret olarak işaretlenmelidir |

**Kullanım Senaryosu:** Farklı ortamlarda farklı veritabanı bağlantı bilgileri kullanmak için

### 3. LDAP Connection (LDAP Bağlantısı)

**Kullanım Alanı:** LDAP bağlantı yapılandırması

| Özellik | Açıklama |
|---------|----------|
| **Konum** | Administration > Connection Management > Connection Pool Def LDAP |
| **Alanlar** | LDAP URL, Bind DN, Bind Password |
| **Kullanım** | LDAP bağlantı bilgilerinde ortam bazlı yönetim |
| **Dialog Erişimi** | Her alanın sağındaki liste ikonu butonuna tıklanarak |
| **Secret Kullanımı** | Bind Password mutlaka secret olarak işaretlenmelidir |

## Kullanım Senaryoları ve Örnekler

<AccordionGroup>
  <Accordion title="Backend API Adresi Yönetimi">
    **Problem:** Farklı ortamlarda farklı backend API adresleri kullanılıyor.
    
    **Çözüm:**
    
    **Ortam Değişkeni Oluşturma:**
    * Key Name: `BACKEND_API_URL`
    * Type: Environment-Specific
    * Development: `https://dev-api.example.com`
    * Test: `https://test-api.example.com`
    * Production: `https://api.example.com`
    
    **Routing'de Kullanım:**
    * Address: `${BACKEND_API_URL}`
    
    **Sonuç:**
    * Development ortamında istekler `https://dev-api.example.com` adresine gider
    * Test ortamında istekler `https://test-api.example.com` adresine gider
    * Production ortamında istekler `https://api.example.com` adresine gider
  </Accordion>
  
  <Accordion title="Veritabanı Bağlantı Yönetimi">
    **Problem:** Her ortamda farklı veritabanı kullanılıyor.
    
    **Çözüm:**
    
    **Ortam Değişkenleri:**
    * `DB_HOST`: Development=`dev-db.example.com`, Production=`prod-db.example.com`
    * `DB_PORT`: Global=`3306`
    * `DB_NAME`: Development=`dev_db`, Production=`prod_db`
    * `DB_USER`: Development=`dev_user`, Production=`prod_user`
    * `DB_PASSWORD`: Development=`dev_pass`, Production=`prod_pass` (Secret)
    
    **Connector'da Kullanım:**
    * Connection String: `jdbc:mysql://${DB_HOST}:${DB_PORT}/${DB_NAME}`
    * Username: `${DB_USER}`
    * Password: `${DB_PASSWORD}`
    
    **Sonuç:**
    * Development: `jdbc:mysql://dev-db.example.com:3306/dev_db`
    * Production: `jdbc:mysql://prod-db.example.com:3306/prod_db`
  </Accordion>
  
  <Accordion title="API Anahtarı Yönetimi">
    **Problem:** Dış servisler için farklı API anahtarları kullanılıyor.
    
    **Çözüm:**
    
    **Ortam Değişkeni:**
    * Key Name: `EXTERNAL_SERVICE_API_KEY`
    * Type: Environment-Specific
    * Development: `dev-key-abc123` (Secret)
    * Production: `prod-key-xyz789` (Secret)
    
    **Policy'de Kullanım:**
    * Header Name: `X-API-Key`
    * Header Value: `${EXTERNAL_SERVICE_API_KEY}`
    
    **Sonuç:**
    * Development: `X-API-Key: dev-key-abc123`
    * Production: `X-API-Key: prod-key-xyz789`
  </Accordion>
</AccordionGroup>

## Environment Variable Oluşturma

Ortam değişkeni oluşturma adımları:

### Adım 1: Yeni Ortam Değişkeni Ekleme

* **Ortam Değişkenleri** sayfasına gidin
* Sağ üst köşedeki **"Oluştur" (Create)** butonuna tıklayın
* Ortam Değişkeni düzenleme penceresi açılır

### Adım 2: Temel Bilgileri Girme

* **Key Name (Değişken Adı)**:
  * Zorunlu alan
  * Proje içinde benzersiz olmalıdır
  * İsim kontrolü otomatik yapılır
  * Geçerli isim: Yeşil onay işareti
  * Mevcut isim: Kırmızı uyarı işareti
  
* **Açıklama (Description)**:
  * İsteğe bağlı alan
  * Değişkenin ne için kullanıldığını açıklar

### Adım 3: Tip Seçimi

* **Environment-Specific (Ortam Özelinde)**:
  * Her ortam için farklı değer tanımlanabilir
  * Yeni kayıt oluştururken seçilir
  * Kayıt oluşturulduktan sonra değiştirilemez
  
* **Global (Tüm Ortamlar)**:
  * Tüm ortamlarda aynı değer kullanılır
  * Yeni kayıt oluştururken seçilir
  * Kayıt oluşturulduktan sonra değiştirilemez

<Info>
  **Önemli**: Tip seçimi sadece yeni kayıt oluştururken yapılabilir. Mevcut kayıtların tipi değiştirilemez.
</Info>

### Adım 4: Değer Tanımlama

**Environment-Specific Değişkenler İçin:**

* **Ortam Ekleme**: "Ortam Ekle" butonuna tıklayarak yeni ortam ekleyin
* **Ortam Seçimi**: Her değer için bir ortam seçin
  * Mevcut ortamlar listeden seçilir
  * "Custom..." seçeneği ile özel ortam adı girilebilir
* **Değer Girme**: Her ortam için değer girin
* **Secret Ayarlama**: Hassas bilgiler için "Secret" checkbox'ını işaretleyin
  * Secret değerler kaydedildikten sonra maskelenir (`***********`)
  * Secret değerler şifrelenerek saklanır
  * Güncelleme sırasında değer değiştirilmemişse mevcut değer korunur

**Global Değişkenler İçin:**

* **Global Değer**: Tek bir değer girin (tüm ortamlar için geçerli)
* **Secret Ayarlama**: Hassas bilgiler için "Secret" checkbox'ını işaretleyin

### Adım 5: Kaydetme ve Deployment

* **Form Kontrolü**: Tüm zorunlu alanlar doldurulmalı ve isim geçerli olmalı
* **"Kaydet ve Deploy"** butonuna tıklayın
* **Onay Dialog'u**:
  * Değişken adını tekrar girmeniz istenir (güvenlik için)
  * Etkilenecek bileşenler listelenir:
    * API Proxy Routing ayarları
    * Policy Configuration ayarları
    * Connector ayarları
    * Diğer yapılandırma ayarları
* **Deployment Sonucu**:
  * Tüm çalışan ortamlara (Environments) otomatik olarak deploy edilir
  * Deployment sonuçları gösterilir

<Warning>
  **Önemli**: Secret olarak işaretlenen değerler kaydedildikten sonra bir daha görüntülenemez.
</Warning>

## Environment Variable Düzenleme

### Düzenleme Modal'ının Açılması

Düzenleme modal'ı aşağıdaki yollarla açılabilir:

| Yöntem | Açıklama |
|--------|----------|
| **Liste'den Tıklama** | Ortam değişkeni adına tıklanır |
| **Menü'den Seçim** | Satır sonundaki menüden "Edit" seçilir |

### Düzenleme Modal'ındaki Farklılıklar

| Özellik | Yeni Kayıt | Düzenleme |
|---------|------------|-----------|
| **Modal Başlığı** | "Add Environment Variable" | "Edit Environment Variable" |
| **Type Seçimi** | Aktif (değiştirilebilir) | Pasif (değiştirilemez) |
| **Secret Değerler** | Normal görünür | Maskelenmiş görünür (`***********`) |
| **Secret Checkbox** | Aktif | Kaydedilmiş secret'lar için pasif |

## Best Practices

<AccordionGroup>
  <Accordion title="Güvenlik">
    * Hassas bilgileri mutlaka şifrelenmiş olarak saklayın
    * Şifreler, API anahtarları, sertifikalar için encrypted kullanın
    * Düzenli olarak şifreleri değiştirin
  </Accordion>
  
  <Accordion title="Organizasyon">
    * Değişken isimlerini tutarlı bir şekilde adlandırın
    * Ortam ve proje seviyesi değişkenleri doğru şekilde ayırın
    * Dokümantasyon oluşturun
  </Accordion>
  
  <Accordion title="Yönetim">
    * Kullanılmayan değişkenleri temizleyin
    * Değişken kullanımını düzenli olarak gözden geçirin
    * Versiyon kontrolü yapın
  </Accordion>
</AccordionGroup>

## Sonraki Adımlar

<CardGroup cols={2}>
  <Card title="Variable" icon="code" href="/tr/apinizer-anlama/temel-kavramlar/variable">
    Variable kavramını öğrenin
  </Card>
  <Card title="Environment Variables" icon="gear" href="/tr/gelistirici/politika-yonetimi/environment-variables">
    Environment Variables yönetimi
  </Card>
  <Card title="Secret Manager" icon="lock" href="/tr/admin/gizlilik-yonetimi-secret-manager/certificate-management">
    Secret Manager kullanımı
  </Card>
  <Card title="API Proxy Yapılandırması" icon="network-wired" href="/tr/gelistirici/api-proxy-konfigurasyonu/settings">
    API Proxy yapılandırması
  </Card>
</CardGroup>