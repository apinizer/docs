---
title: "Kapasite Planlama"
description: 'Sistem, network ve altyapı yöneticileri için kapsamlı kapasite planlama rehberi: trafik tahmini, donanım gereksinimleri, ağ yapılandırması ve kurulum öncesi kararlar'
---

Kapasite planlama, Apinizer platformunun başarılı bir şekilde kurulması ve çalıştırılması için gerekli kaynakların belirlenmesi sürecidir. Bu sayfa, **sistem yöneticileri**, **network yöneticileri** ve **altyapı ekipleri** için hazırlanmış kapsamlı bir rehberdir.

## Kapasite Planlama Süreci

Kapasite planlama yaparken aşağıdaki faktörler göz önünde bulundurulmalıdır:

### Trafik Tahmini

Trafik tahmini, kapasite planlamanın temelini oluşturur. Aşağıdaki noktalar değerlendirilmelidir:

* **Beklenen API çağrı sayısı**: Günlük ve saatlik bazda beklenen API çağrı hacmi belirlenmelidir
* **Peak trafik tahmini**: En yüksek trafik dönemlerindeki (örneğin kampanya dönemleri, özel günler) trafik hacmi tahmin edilmelidir
* **Trafik büyüme projeksiyonu**: Gelecekteki trafik artışı için projeksiyon yapılmalıdır
* **Mevsimsel değişiklikler**: Yıl içindeki mevsimsel trafik değişimleri göz önünde bulundurulmalıdır

### Deployment Modeli

Apinizer'ın kurulacağı deployment modeli, kaynak gereksinimlerini doğrudan etkiler. Mevcut seçenekler:

* **Topoloji 1: Test ve PoC**: Tüm bileşenlerin tek sunucuda çalıştığı basit kurulum modeli
* **Topoloji 2: Profesyonel Kurulum**: Bileşenlerin farklı sunucularda dağıtıldığı model
* **Topoloji 3: Yüksek Erişilebilirlik**: Yüksek erişilebilirlik için kümeleme yapılan model
* **Topoloji 4: Bölgeler Arası Dağıtım**: Global dağılım, coğrafi yedekleme

Detaylı bilgi için [Deployment Modelleri](/tr/apinizer-anlama/deployment/deployment-modelleri) sayfasına bakabilirsiniz.

### Yüksek Erişilebilirlik

Kritik iş uygulamaları için yüksek erişilebilirlik gereksinimleri planlanmalıdır:

* **Uptime gereksinimleri**: Sistemin ne kadar süre kesintisiz çalışması gerektiği belirlenmelidir (genellikle %99.9+)
* **Failover stratejisi**: Bir bileşen arızalandığında trafiğin nasıl yönlendirileceği planlanmalıdır
* **Disaster recovery planı**: Büyük çaplı arıza durumlarında sistemin nasıl kurtarılacağı planlanmalıdır

### Büyüme Planı

Kapasite planlaması, sadece mevcut gereksinimleri değil, gelecekteki büyümeyi de kapsamalıdır:

* **Kısa vadeli gereksinimler**: 6 aylık dönem için gereken kaynaklar
* **Orta vadeli gereksinimler**: 1-2 yıllık dönem için planlanan kaynaklar
* **Uzun vadeli gereksinimler**: 3 yıl ve üzeri için öngörülen kaynak gereksinimleri


## Tier Bazlı Kapasite ve Donanım Gereksinimleri

Aşağıdaki tablolar, trafik seviyesine göre (Tier 1, 2, 3) veri büyüklüğü ve donanım gereksinimlerini özetlemektedir.

### Trafik Kategorileri

| Tier | Trafik Seviyesi | Kullanım Amacı |
|------|----------------|----------------|
| **Tier 1** | < 10K istek/gün | Test/POC ortamları |
| **Tier 2** | 10K - 1M istek/gün | Production ortamları |
| **Tier 3** | > 1M istek/gün | Enterprise production |

### Worker Nodes (API Gateway)

Worker node'ları API trafiğini işleyen ana bileşenlerdir.

| Özellik | Tier 1 | Tier 2 | Tier 3 |
|---------|--------|--------|--------|
| **CPU** | 4 core | 8 core | 16+ core |
| **RAM** | 8 GB | 16 GB | 32+ GB |
| **Disk** | 50 GB SSD | 100 GB SSD | 200+ GB SSD |
| **Network** | 1 Gbps | 1-10 Gbps | 10+ Gbps |
| **Node Sayısı** | 2 (min) | 3-5 | 5+ |
| **IOPS** | 1,000 | 3,000 | 5,000+ |

<Info>
  **Not**: Worker node sayısı, trafik hacmi ve yüksek erişilebilirlik gereksinimlerine göre artırılabilir. Her node, yaklaşık 1000-5000 istek/saniye işleyebilir (politika karmaşıklığına bağlı).
</Info>

### Manager Nodes

Manager node'ları, konfigürasyonların yapıldığı web arayüzünü sağlar. Günlük trafik yüküne bağlı olarak değişmez; konfigürasyon yönetimi ve arayüz erişimi için kullanılır. Standalone kurulum için tek node yeterlidir, production ortamları için yüksek erişilebilirlik amacıyla en az 2 node ile HA kurulumu önerilir.

### MongoDB Replica Set

MongoDB, Apinizer'ın konfigürasyon veritabanıdır. API proxy tanımları, politika konfigürasyonları ve metadata bilgilerini saklar. Günlük trafik yüküne bağlı olarak değişmez; gereksinimler, API proxy sayısı ve konfigürasyon karmaşıklığına göre belirlenir. 

<Warning>
  **Kritik**: MongoDB mutlaka **Replica Set** olarak yapılandırılmalıdır. Tek node dahi olsa replica set olarak kurulmalıdır. Standalone instance kullanılmamalıdır.
</Warning>

### Elasticsearch Cluster

Elasticsearch, log ve analitik verilerini saklar.

| Özellik | Tier 1 | Tier 2 | Tier 3 |
|---------|--------|--------|--------|
| **CPU** | 4 core | 8 core | 16 core |
| **RAM** | 16 GB | 32 GB | 64 GB |
| **Disk (Hot)** | 500 GB SSD | 2 TB SSD | 5+ TB SSD |
| **Disk (Warm)** | 1 TB HDD | 3 TB HDD | 10+ TB HDD |
| **Network** | 1 Gbps | 1-10 Gbps | 10+ Gbps |
| **Node Sayısı** | 3 (min) | 3-5 | 5+ |
| **Shard/Index** | 1-2 | 3-5 | 5+ |
| **Günlük Log** | < 10 GB | 10-100 GB | > 100 GB |
| **Aylık Log** | ~300 GB | ~1.5 TB | ~6 TB+ |
| **Yıllık Log (Retention)** | ~3.6 TB | ~18 TB | ~72 TB+ |

<Info>
  **Disk Stratejisi**: Hot tier için SSD, Warm/Cold tier için HDD kullanılması önerilir. Bu, maliyet optimizasyonu sağlar.
</Info>

### Cache Cluster (Hazelcast)

Cache Cluster, Apinizer'ın distributed cache altyapısıdır ve kritik performans verilerini saklar. Response cache, routing load balancer bilgileri, rate limit sayaçları ve diğer performans kritik veriler burada tutulur. Cache boyutu, cache'lenecek veri miktarına göre belirlenir ve günlük trafik sayısından ziyade cache'lenecek veri hacmi önemlidir.

| Özellik | Küçük Cache | Orta Cache | Büyük Cache |
|---------|-------------|------------|-------------|
| **Cache Boyutu** | 32 GB | 64-128 GB | 256+ GB |
| **CPU** | 4 core | 8 core | 16 core |
| **RAM** | 32 GB | 64-128 GB | 256+ GB |
| **Disk** | 100 GB SSD | 200 GB SSD | 500 GB SSD |
| **Network** | 1 Gbps | 1-10 Gbps | 10 Gbps |
| **Node Sayısı** | 3 (min) | 3-5 | 5+ |

## Toplam Kaynak Hesaplama Örneği

### Senaryo: Orta Ölçekli Production (Tier 2)

**Worker Nodes:**
* 3 node × (8 CPU + 16 GB RAM + 100 GB Disk) = 24 CPU + 48 GB RAM + 300 GB Disk

**Manager Nodes:**
* 2 node × (4 CPU + 16 GB RAM + 100 GB Disk) = 8 CPU + 32 GB RAM + 200 GB Disk

**MongoDB Replica Set:**
* 3 node × (8 CPU + 32 GB RAM + 500 GB Disk) = 24 CPU + 96 GB RAM + 1.5 TB Disk

**Elasticsearch Cluster:**
* 3 node × (8 CPU + 32 GB RAM + 2 TB Disk) = 24 CPU + 96 GB RAM + 6 TB Disk

**Cache Cluster:**
* 3 node × (8 CPU + 32 GB RAM + 200 GB Disk) = 24 CPU + 96 GB RAM + 600 GB Disk

**TOPLAM:**
* **CPU**: 104 core
* **RAM**: 368 GB
* **Disk**: ~8.6 TB

## Kapasite Planlama Checklist

- [ ] Trafik seviyesi belirlendi (Tier 1/2/3)
- [ ] Günlük/saatlik/peak trafik tahmini yapıldı
- [ ] Trafik büyüme projeksiyonu hazırlandı
- [ ] Worker node gereksinimleri hesaplandı (CPU, RAM, Disk, Network, Node sayısı)
- [ ] Manager node gereksinimleri belirlendi (Standalone veya HA)
- [ ] MongoDB veri büyüklüğü tahmin edildi (API Proxy sayısı, Audit Log)
- [ ] Elasticsearch log verisi tahmin edildi (günlük/aylık/yıllık retention)
- [ ] Cache cluster boyutu belirlendi (cache'lenecek veri hacmine göre)
- [ ] Network bandwidth gereksinimleri hesaplandı
- [ ] Toplam kaynak hesaplaması yapıldı (CPU, RAM, Disk)
- [ ] Node sayıları belirlendi (HA ve ölçeklendirme için)
- [ ] Deployment modeli seçildi (Topoloji 1/2/3/4)


<Note>
  **Önemli**: Bu rehber başlangıç için bir kılavuzdur. Gerçek gereksinimler, trafik desenleri, API karmaşıklığı ve politika sayısına göre değişebilir. Production ortamları için mutlaka performans testleri yapılmalıdır.
</Note>
