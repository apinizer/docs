---
title: "Sistem ve Yazılım Gereksinimleri"
description: "Desteklenen işletim sistemleri, Kubernetes, MongoDB ve Elasticsearch versiyonları ile kritik yapılandırma ayarları"
---

Bu sayfa, Apinizer platformunun çalışması için gerekli yazılım gereksinimlerini ve kritik yapılandırma ayarlarını içerir.

## Desteklenen İşletim Sistemleri

Apinizer Kubernetes üzerinden çalıştığından, Kubernetes destekleyen Linux tabanlı işletim sistemlerini destekler.

| İşletim Sistemi | Desteklenen Versiyonlar | Önerilen Versiyon |
|----------------|------------------------|-------------------|
| **Red Hat Enterprise Linux (RHEL)** | 7.x, 8.x, 9.x | 8.x veya 9.x |
| **Ubuntu** | 20.04 LTS, 22.04 LTS, 24.04 LTS | 22.04 LTS veya 24.04 LTS |
| **Oracle Linux** | 7.x, 8.x, 9.x | 8.x veya 9.x |
| **Rocky Linux** | 8.x, 9.x | 8.x veya 9.x |
| **CentOS** | 7.x, 8.x | 8.x (EOL - Rocky Linux'e geçiş önerilir) |

<Info>
  **Not**: Apinizer Kubernetes üzerinden çalıştığı için, Kubernetes destekleyen diğer Linux dağıtımları da kullanılabilir (SUSE Linux Enterprise Server, Debian vb.).
</Info>

## Kubernetes Gereksinimleri

### Desteklenen Versiyonlar

| Platform | Minimum Versiyon | Önerilen Versiyon | Notlar |
|----------|------------------|-------------------|--------|
| **Kubernetes** | 1.20+ | 1.24+ veya 1.28+ | En son stable versiyon önerilir |
| **OpenShift** | 4.x | 4.12+ | Kubernetes 1.24+ tabanlı |
| **Tanzu** | v1.x | v1.5+ | VMware Tanzu Kubernetes Grid |
| **RKE2** | 1.x | 1.28+ | Rancher Kubernetes Engine 2 |
| **AKS** | Tüm versiyonlar | En son versiyon | Azure Kubernetes Service |
| **EKS** | Tüm versiyonlar | En son versiyon | Amazon Elastic Kubernetes Service |
| **GKE** | Tüm versiyonlar | En son versiyon | Google Kubernetes Engine |

### Kubernetes Kritik Ayarlar

#### Container Runtime

Apinizer imajları DockerHub üzerinden rootless sağlandığından, aşağıdaki container runtime'lar desteklenir:

* **containerd**: Önerilen (Kubernetes 1.24+)
* **CRI-O**: Desteklenir
* **Docker**: Desteklenir (Kubernetes 1.24+ için deprecated)

#### Gerekli Kubernetes Özellikleri

* **Namespace desteği**: Apinizer bileşenleri namespace'ler içinde çalışır
* **RBAC**: Role-Based Access Control aktif olmalı
* **Network Policies**: İsteğe bağlı, güvenlik için önerilir
* **Storage Classes**: Persistent Volume'lar için gerekli
* **Ingress Controller**: Dış erişim için (Nginx, Traefik vb.)

#### Önemli Yapılandırmalar

**Kubelet Ayarları:**

```yaml
# /var/lib/kubelet/config.yaml
maxPods: 110
podPidsLimit: 4096
```

**API Server Ayarları:**

```yaml
# /etc/kubernetes/manifests/kube-apiserver.yaml
--max-requests-inflight=400
--max-mutating-requests-inflight=200
```

## MongoDB Gereksinimleri

### Desteklenen Versiyonlar

| Versiyon | Durum | Önerilen |
|----------|-------|----------|
| **MongoDB 4.4** | Desteklenir | ✓ |
| **MongoDB 5.0** | Desteklenir | ✓✓ |
| **MongoDB 6.0** | Desteklenir | ✓✓ |
| **MongoDB 7.0** | Desteklenir | ✓✓ |

<Warning>
  **Kritik**: MongoDB mutlaka **Replica Set** olarak yapılandırılmalıdır. Tek node dahi olsa replica set olarak kurulmalıdır. Standalone instance kullanılmamalıdır.
</Warning>

### MongoDB Kritik Ayarlar

#### Replica Set Yapılandırması

**Zorunlu**: MongoDB mutlaka Replica Set olarak kurulmalıdır. Tek node için bile replica set yapılandırması gereklidir.

**Örnek Replica Set Yapılandırması:**

```javascript
// MongoDB Replica Set başlatma
rs.initiate({
  _id: "apinizer-rs",
  members: [
    { _id: 0, host: "mongodb-0:27017" },
    { _id: 1, host: "mongodb-1:27017" },
    { _id: 2, host: "mongodb-2:27017" }
  ]
})
```

#### Önemli MongoDB Ayarları

**mongod.conf Yapılandırması:**

```yaml
storage:
  wiredTiger:
    engineConfig:
      cacheSizeGB: 16  # RAM'in %50'si önerilir
    collectionConfig:
      blockCompressor: snappy
    indexConfig:
      prefixCompression: true

net:
  bindIp: 0.0.0.0
  port: 27017

replication:
  replSetName: "apinizer-rs"

operationProfiling:
  slowOpThresholdMs: 100
  mode: slowOp
```

**Sharding (Opsiyonel):**

Büyük kurulumlar için sharding kullanılabilir, ancak çoğu senaryo için replica set yeterlidir.

## Elasticsearch Gereksinimleri

### Desteklenen Versiyonlar

| Versiyon | Durum | Notlar |
|----------|-------|--------|
| **Elasticsearch 7.9.2** | Resmi Desteklenen | ✓✓ Önerilen |
| **Elasticsearch 7.x** | Desteklenir | ✓ |
| **Elasticsearch 8.x** | Test Edilmiş | Resmi destek yok, kullanılabilir |

### Elasticsearch Kritik Ayarlar

#### Cluster Yapılandırması

**Minimum Yapılandırma:**

* **Node Sayısı**: Minimum 3 node (Master + Data)
* **Shard Sayısı**: Index başına 1-5 shard (veri hacmine göre)
* **Replica Sayısı**: Minimum 1 (yüksek erişilebilirlik için)

#### Önemli Elasticsearch Ayarları

**elasticsearch.yml Yapılandırması:**

```yaml
cluster.name: apinizer-cluster
node.name: ${HOSTNAME}
node.roles: [master, data, ingest]

network.host: 0.0.0.0
http.port: 9200

discovery.seed_hosts:
  - elasticsearch-0:9300
  - elasticsearch-1:9300
  - elasticsearch-2:9300

cluster.initial_master_nodes:
  - elasticsearch-0
  - elasticsearch-1
  - elasticsearch-2

# JVM Heap Size (RAM'in %50'si, max 32GB)
-Xms16g
-Xmx16g

# Index Lifecycle Management
xpack.ilm.enabled: true
```

**Index Lifecycle Management (ILM):**

ILM aktif olmalı ve log retention politikaları yapılandırılmalıdır:

```json
{
  "policy": {
    "phases": {
      "hot": {
        "actions": {
          "rollover": {
            "max_size": "50GB",
            "max_age": "7d"
          }
        }
      },
      "warm": {
        "min_age": "7d",
        "actions": {
          "allocate": {
            "number_of_replicas": 1
          }
        }
      },
      "delete": {
        "min_age": "90d"
      }
    }
  }
}
```

**Snapshot Yedekleme:**

Düzenli snapshot yedeklemesi önerilir:

```bash
# Snapshot repository oluşturma
PUT _snapshot/backup_repo
{
  "type": "fs",
  "settings": {
    "location": "/backup/elasticsearch"
  }
}
```

## Sistem Kernel Ayarları

Linux kernel'inin belirli parametrelerinin yapılandırılması gerekir.

### sysctl Ayarları

`/etc/sysctl.conf` dosyasına eklenmelidir:

```bash
# Network ayarları
net.core.somaxconn = 32768
net.core.netdev_max_backlog = 5000
net.ipv4.tcp_max_syn_backlog = 8192
net.ipv4.tcp_fin_timeout = 30
net.ipv4.tcp_keepalive_time = 300
net.ipv4.tcp_keepalive_probes = 5
net.ipv4.tcp_keepalive_intvl = 15

# Memory ayarları (Elasticsearch için kritik)
vm.swappiness = 10
vm.max_map_count = 262144
vm.dirty_ratio = 15
vm.dirty_background_ratio = 5

# File descriptor limits
fs.file-max = 2097152
fs.nr_open = 2097152
```

Ayarları uygulamak için:
```bash
sudo sysctl -p
```

### File Descriptor Limits

`/etc/security/limits.conf` dosyasına eklenmelidir:

```bash
* soft nofile 65536
* hard nofile 65536
* soft nproc 32768
* hard nproc 32768
```

### Systemd Limits

`/etc/systemd/system.conf` dosyasına eklenmelidir:

```bash
DefaultLimitNOFILE=65536
DefaultLimitNPROC=32768
```

Değişiklikleri uygulamak için:
```bash
sudo systemctl daemon-reload
```

## Network Ayarları

### Jumbo Frames (Önerilen)

Cluster içi iletişim için jumbo frames önerilir:

```bash
# RHEL/CentOS: /etc/sysconfig/network-scripts/ifcfg-eth0
MTU=9000

# Ubuntu: /etc/netplan/01-netcfg.yaml
network:
  version: 2
  ethernets:
    eth0:
      mtu: 9000
```

## Zaman Senkronizasyonu

NTP/Chrony yapılandırması zorunludur (Kubernetes ve MongoDB için kritik):

```bash
# chronyd yapılandırması
sudo systemctl enable chronyd
sudo systemctl start chronyd

# NTP server'ları /etc/chrony.conf
server 0.pool.ntp.org iburst
server 1.pool.ntp.org iburst
server 2.pool.ntp.org iburst
server 3.pool.ntp.org iburst
```

## Yazılım Gereksinimleri Checklist

- [ ] İşletim sistemi kuruldu ve güncellendi (RHEL/Ubuntu/Oracle Linux)
- [ ] Kernel ayarları yapılandırıldı (sysctl, vm.max_map_count)
- [ ] File descriptor limits ayarlandı (limits.conf, systemd)
- [ ] Network ayarları yapılandırıldı (MTU, jumbo frames)
- [ ] Zaman senkronizasyonu yapılandırıldı (NTP/Chrony)
- [ ] Kubernetes kuruldu ve yapılandırıldı (1.20+)
- [ ] Container runtime yapılandırıldı (containerd/CRI-O)
- [ ] MongoDB kuruldu ve Replica Set olarak yapılandırıldı (4.4+)
- [ ] Elasticsearch kuruldu ve cluster olarak yapılandırıldı (7.9.2+)
- [ ] Elasticsearch ILM yapılandırıldı
- [ ] Tüm servisler çalışıyor ve test edildi

<Note>
  **Önemli**: Tüm kernel ve sistem ayarları production ortamlarına geçmeden önce test ortamlarında doğrulanmalıdır. Bazı ayarlar sistem davranışını önemli ölçüde etkileyebilir.
</Note>
