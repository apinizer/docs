---
title: "Genel Bakış"
description: 'Sistemin anatomisi, "Neyi, nereye kuruyorum?" sorusunun cevabı, DMZ + LAN ayrımı + bileşenlerin nerede çalıştığını gösteren diyagram'
---

Bu bölümde platformu oluşturan bileşenlerin yerleşimleri, birbirleri ile etkileşimleri ve içeriklerini kapsayacak şekilde Apinizer'in mimari yapısı aktarılmaktadır.

## Apinizer Platformunun Modülleri ve Bileşenleri

Apinizer Platformu içerisinde yer alan modüllerin etkileşimi ve alt bileşenleri aşağıda detaylandırılmıştır.

### APINIZER MANAGER

Apinizer'de ön tanımlı ayarlarda bir tane Manager modülü bulunur. Manager modülü esasen konfigürasyon amaçlı çalışıyor gibi gözükse de üzerinde çalıştırdığı görevler sistemin önemli bir bileşeni olmasını sağlar.

<CardGroup cols={2}>
  <Card title="Web API Manager" icon="globe">
    Ayarların/Tanımlamaların bir Web tarayıcı üzerinden form tabanlı arayüzler aracılığı ile yapılabilmesini, bu ayarların diğer bileşenlere gönderilebilmesini sağlar.
  </Card>
  <Card title="Test Console" icon="flask">
    Dahili ya da harici API'lerin test edilebilmesi için geliştirme ortamını terk etmeden ve başka bir yazılıma ihtiyaç duymadan kullanılabilecek test aracıdır.
  </Card>
  <Card title="Scheduled Jobs" icon="clock">
    Zamanlanmış görevlerin tetiklenmesini sağlar.
  </Card>
  <Card title="Analytics" icon="chart-bar">
    Tutulan log kayıtlarındaki analitik verilerin görselleştirilmesini ve sorgulanabilmesini sağlar.
  </Card>
  <Card title="Monitoring" icon="heart-pulse">
    API Proxy'lerin çalışıp çalışmadığını kontrol eder, çalışmadığını tespit ederse alarm oluşturur.
  </Card>
  <Card title="Anomaly Detection" icon="triangle-exclamation">
    API Proxy'lerin çalışmasında anormal bir durum olup olmadığını kontrol eder, anormal durum tespit ederse alarm oluşturur.
  </Card>
  <Card title="Alarms & Actions" icon="bell">
    Monitoring veya Anomaly Detection ile oluşan alarmların eyleme dönüştürülmesi sağlar. Örneğin ilgili kişilere mail ile alarm verisini gönderir.
  </Card>
  <Card title="Management API" icon="code">
    Uygulama üzerinden yapılabilecek ayarların API'ler ile yapılmasını sağlar.
  </Card>
</CardGroup>

### APINIZER WORKER

Worker modülü Apinizer'in en önemli bileşenidir. Her Worker bir Ortam'a (Environment) ait olup, ayarları çalıştığı Ortam'a göre değişir. Apinizer'de birden fazla Ortam ve her bir Ortam'da da birden fazla Worker olabilir.

<CardGroup cols={2}>
  <Card title="Proxy Handler" icon="network-wired">
    İstemcilerden gelen isteklerin karşılandığı noktadır. Aynı zamanda Politika Uygulama Noktası (Policy Enforcement Point) olarak görev yapar. Gelen isteği tanımlanmış politikalara uygun şekilde işleyerek ilgili Backend API/Servise yönlendirir. Yönlendirme yaparken yük dengeleyici olarak çalışabilir. TLS/SSL sonlandırması burada yapılır. Backend API/Servisten dönen yanıtı da yine tanımlı politikalara uygun olarak işleyerek istemciye gönderir. Bu esnada yapılan tüm işlemleri kayıt altına alarak asenkron olarak log sunucusuna gönderir. Hassas verilerin kayıt altına alınması işini, belirlenen kurallara (silme, maskeleme, şifreleme) uygun şekilde ele alır.
  </Card>
  <Card title="Management API" icon="server">
    Apinizer Manager modülündeki konfigürasyonların Worker'a yüklenmesi (deploy), yüklü olanların yeniden yüklenerek güncellenmesini (redeploy) veya kaldırılmasını (undeploy) sağlar. Apinizer Manager modülündeki Management API ile karıştırılmamalıdır. Worker'a yüklenecek tüm konfigürasyonlar Management API üzerinden geçerek gelir.
  </Card>
  <Card title="Local Cache" icon="memory">
    Management API üzerinden yüklenen tüm veriler Local Cache içinde tutulur. Worker, açılış ya da yeniden başlatma sırasında kendisine ait verileri mongoDB veri tabanından çekerek Local Cache'e koyar.
  </Card>
  <Card title="Db-2-Api" icon="database">
    Tanımlanan bir veri tabanına bağlantı kurarak tanımlı SQL'lerin işletilmesini ya da Stored Procedure'lerin çalıştırılmasını sağlar. Db-2-Api'ye erişim "Proxy Handler" üzerinden yapılır.
  </Card>
  <Card title="Script2API" icon="file-code">
    Tanımlı JavaScript veya Groovy Script'lerin çalıştırılmasını sağlar. Script2API'ye erişim "Proxy Handler" üzerinden yapılır.
  </Card>
  <Card title="MockAPI" icon="wand-magic-sparkles">
    Tanımlanan koşullara göre önceden hazırlanmış yanıtların döndürülmesini sağlar. MockAPI'ye erişim "Proxy Handler" üzerinden yapılır.
  </Card>
  <Card title="Token Provider API" icon="key">
    Apinizer üzerinde eğer OAuth2 veya JWT Yetkilendirme Politikaları kullanılmak istenirse, Token üretimi için Worker üzerinde çalışan "Token Provider API" kullanılır. İstemci, kimlik bilgilerini "Token Provider API"ye gönderir, eğer bilgileri doğru ise Token üretilerek istemciye dönülür. Token alma isteği ile ilgili kayıtlar Log sunucunda kayıt altına alınır. Böylece kime, ne zaman, hangi Token verilmiş bilgisi saklanmış olur. JWT Token'larının yapısı gereği veri tabanında tutulmasına gerek yoktur, doğrulama için sertifikası kontrol edilir. OAuth2 tipindeki Token'lar ise ayrıca mongoDB veri tabanına kaydedilir. Ayrıca, Proxy Handler'daki Token kontrolünün performansını arttırmak için "Apinizer Cache"e de eklenir.
  </Card>
</CardGroup>

### APINIZER CACHE

Apinizer, dağıtılmış önbellekte saklayarak hem bileşenlerinin paylaştığı verileri yönetir, hem de performans iyileştirmesi sağlar.

<CardGroup cols={2}>
  <Card title="Dağıtılmış Önbellek (Distributed Cache)" icon="layer-group">
    Apinizer distributed cache gerçekleştirimi olarak, Kubernetes üzerinde kolayca genişletilerek ölçeklenebilen, dinamik konfigürasyon ile yönetilebilen ve başarılı performans gösteren Hazelcast teknolojisini kullanmaktadır. Distributed Cache üzerinde Quota, Throttling, OAuth2 Token, Yük Dengeleme Nesnesi.. vb nesneler tutulmakta ve işlenmektedir.
  </Card>
  <Card title="Cache API" icon="code">
    Cache üzerinden yapılacak olan tüm işlemler için Cache API kullanılır.
  </Card>
</CardGroup>

### APINIZER INTEGRATION

API Integrator ile geliştiriciler, çeşitli kaynaklara yayılan karmaşık işleri otomatikleştirmek için görev zincirleri oluşturup bunları isteğe göre zamanlayıcılar aracılığıyla ya da API oluşturarak kullanıma sunabilirler.

<CardGroup cols={2}>
  <Card title="Konnektörler (Connectors)" icon="puzzle-piece">
    Farklı kaynaklara bağlanabilmeyi, bu kaynaklara veri gönderebilmeyi veya bu kaynaklardan veri çekebilmeyi sağlar. Örneğin; Mail, API Call, PagerDuty, Opsgenie, Oracle DB, Postgres, IBM DB2.. vb
  </Card>
  <Card title="Görev Akışı (Task Flow)" icon="diagram-project">
    Konnektörler kullanılarak iş tanımları yapılabilmesini sağlar. İstenirse tanımlanan görevler zincir haline getirilebilir ve bir görevin çıktısını diğer görev girdi olarak kullanılabilir.
  </Card>
  <Card title="Zamanlayıcı (Scheduler)" icon="clock">
    Tanımlanan görev veya görev zincirlerinin belirli bir zamanda otomatik olarak çalışmasını sağlar.
  </Card>
</CardGroup>

## Ortam (Environment)

Apinizer Platformu'nda bir Ortam (Environment), API Proxy'lerin yüklenerek erişime açıldığı, kendisine ait bir erişim adresi ve ayarları olan, diğer Ortam'lardan yalıtılmış olarak ve kendisine ayrılmış CPU ve RAM gibi kaynakları kullanarak çalışan sanal sunucu alanlarıdır.

<Info>
  **Ortam, Kubernetes bağlamında "Namespace" ifadesine karşılık gelir.**
  
  Kubernetes kümeleri büyük miktarda bağlantısız iş yüklerini eş zamanlı olarak yönetebilir. Kubernetes, küme içindeki nesnelerin karmaşasını gidermek için Namespace adı verilen bir kavramdan faydalanır.
  
  Namespace'ler nesnelerin birbirleriyle gruplanmasına ve bu grupların bir birim olarak filtrelenip kontrol edilmesine olanak sağlar. Böylece özelleştirilmiş erişim kontrol politikalarını uygulamak ya da bir test ortamı için tüm birimleri birbirlerinden ayırmak için gruplamalar yapmak gibi amaçlarla kullanılabilir.
</Info>

### İki Nedenle Birden Çok Ortam Kullanılması Tavsiye Edilir

1. **Yaşam Döngüsü Yönetimi**: Geliştirme (Development), Test, Üretim (Production) gibi farklı amaca yönelik Ortamlar oluşturarak API yaşam döngüsünü yönetmek.
2. **Kaynak İzolasyonu**: Çok kaynak tüketen API'leri gruplandırarak izole çalışmalarını sağlamak, böylece diğer API'lerin performansının kötü etkilenmesine engel olmak.

### Ortam Bileşenleri

Apinizer Platformu ile oluşturulan tüm ortamlar Kubernetes altyapısında çalışmaktadır. Bir ortamda aşağıdaki bileşenler bulunur:

* **Worker Pod'ları**: API Proxy'lerin çalıştığı pod'lar
* **Cache Pod'ları**: Dağıtılmış önbellek pod'ları
* **Integration Pod'ları**: API Integrator görevlerinin çalıştığı pod'lar

<Warning>
  API Proxy'ler, bir veya birden fazla ortam üzerine yüklenebilir. Kurulumu yapılan ortam ya da ortamların hepsi bir küme (cluster) içinde yer alır ve Apinizer Platformu'nun kurulu olduğu sunucular üzerinde çalışır.
</Warning>

## Neyi, Nereye Kuruyorum?

### DMZ ve LAN Ayrımı

Apinizer platformu, güvenlik mimarisine uygun olarak DMZ (Demilitarized Zone) ve LAN (Local Area Network) bölgelerinde farklı bileşenlerin çalışmasını destekler:

**DMZ Bölgesi:**
* **Worker Modülleri**: İstemci isteklerini karşılayan Proxy Handler'lar
* **Load Balancer**: Trafik dağıtımı ve yük dengeleme

**LAN Bölgesi:**
* **Manager Modülü**: Konfigürasyon ve yönetim
* **MongoDB**: Veri tabanı
* **Elasticsearch**: Log ve analitik veriler
* **Cache Modülü**: Dağıtılmış önbellek

Bu mimari, güvenlik duvarları ve ağ segmentasyonu ile uyumlu çalışarak, hassas bileşenlerin korunmasını sağlar.

## Sonraki Adımlar

<CardGroup cols={2}>
  <Card title="Üst Seviye Mimari" icon="sitemap" href="/tr/apinizer-anlama/mimari/ust-seviye-mimari">
    Data Plane ve Control Plane mimarisini öğrenin
  </Card>
  <Card title="Deployment Topolojileri" icon="network-wired" href="/tr/apinizer-anlama/deployment/genel-bakis">
    Kurulum topolojilerini inceleyin
  </Card>
  <Card title="Sistem Gereksinimleri" icon="server" href="/tr/apinizer-anlama/sistem/kapasite-planlama">
    Kapasite planlama ve gereksinimleri öğrenin
  </Card>
  <Card title="Veri Log Katmanı" icon="database" href="/tr/apinizer-anlama/mimari/veri-log-katmani">
    Veri ve log katmanı stratejilerini inceleyin
  </Card>
</CardGroup>