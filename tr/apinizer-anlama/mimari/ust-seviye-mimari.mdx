---
title: "Üst Seviye Mimari"
description: 'Data Plane (Gateway), Control Plane (Management), Tüm bileşenlerin bir arada olduğu genel mimari şeması'
---

Apinizer platformu, modern API Management mimarisine uygun olarak **Data Plane** (Gateway) ve **Control Plane** (Management) olmak üzere iki ana düzlemden oluşur.

## Apinizer Platformunun Modülleri ve Modüllerin Bileşenleri

Aşağıdaki görselde Apinizer Platformu içerisinde yer alan modüllerin etkileşimi gösterilmektedir:

![Apinizer Platform Modülleri](https://docs.apinizer.com/apinizer-dokumantasyonu/files/1180904/13271823/1/1621951519253/image2021-5-25_17-5-16.png)

Bu modüllere ait alt bileşenler aşağıdaki görselde verilmiştir.

![Apinizer Platform Bileşenleri](https://docs.apinizer.com/apinizer-dokumantasyonu/files/1180904/13271828/1/1621954178700/image2021-5-25_17-49-36.png)

## Mimari Düzlemler

### Data Plane (Gateway)

Data Plane, API trafiğinin işlendiği ve yönlendirildiği katmandır. Bu katmanda yer alan bileşenler:

<CardGroup cols={2}>
  <Card title="Proxy Handler" icon="network-wired">
    İstemci isteklerini karşılayan ve politika uygulama noktası (Policy Enforcement Point) olarak görev yapan ana bileşendir. TLS/SSL sonlandırması, yük dengeleme ve trafik yönetimi burada gerçekleşir.
  </Card>
  <Card title="Worker Modülleri" icon="server">
    Her Worker bir Ortam'a (Environment) ait olup, API Proxy'lerin çalıştığı ortamdır. Birden fazla Worker ile yatay ölçeklendirme sağlanır.
  </Card>
  <Card title="Local Cache" icon="memory">
    Worker'ların performansını artırmak için kullanılan yerel önbellek. Management API üzerinden yüklenen konfigürasyonlar burada tutulur.
  </Card>
  <Card title="Token Provider API" icon="key">
    OAuth2 ve JWT token üretimi ve yönetimi için kullanılan API endpoint'i.
  </Card>
</CardGroup>

**Data Plane Özellikleri:**
* Yüksek performans ve düşük gecikme
* Otomatik ölçeklendirme (Auto-scaling)
* Yüksek erişilebilirlik (High Availability)
* TLS/SSL sonlandırması
* Trafik yönetimi ve yük dengeleme

### Control Plane (Management)

Control Plane, platformun yönetim, konfigürasyon ve izleme işlevlerini sağlayan katmandır. Apinizer'de ön tanımlı ayarlarda bir tane Manager modülü bulunur. Manager modülü esasen konfigürasyon amaçlı çalışıyor gibi gözükse de üzerinde çalıştırdığı görevler sistemin önemli bir bileşeni olmasını sağlar.

<CardGroup cols={2}>
  <Card title="Web API Manager" icon="globe">
    Web tabanlı yönetim arayüzü. Ayarların/Tanımlamaların bir Web tarayıcı üzerinden form tabanlı arayüzler aracılığı ile yapılabilmesini, bu ayarların diğer bileşenlere gönderilebilmesini sağlar. Tüm konfigürasyonlar bu arayüz üzerinden yapılır.
  </Card>
  <Card title="Management API" icon="code">
    Programatik erişim için RESTful API. Uygulama üzerinden yapılabilecek ayarların API'ler ile yapılmasını sağlar. Tüm yönetim işlemleri bu API üzerinden de yapılabilir.
  </Card>
  <Card title="Analytics Engine" icon="chart-bar">
    Log kayıtlarından analitik verilerin çıkarılması ve görselleştirilmesi. Tutulan log kayıtlarındaki analitik verilerin görselleştirilmesini ve sorgulanabilmesini sağlar.
  </Card>
  <Card title="Monitoring & Alerting" icon="heart-pulse">
    Sistem sağlığı izleme, anomali tespiti ve alarm yönetimi. API Proxy'lerin çalışıp çalışmadığını kontrol eder, çalışmadığını tespit ederse alarm oluşturur.
  </Card>
  <Card title="Anomaly Detection" icon="triangle-exclamation">
    Log kayıtlarında bulunan zaman bazlı verileri, tanımlanan sorgu ve filtrelere göre belirtilen zaman aralığında inceleyerek eşik değere takılan anomalileri tespit eder. API Proxy'lerin çalışmasında anormal bir durum olup olmadığını kontrol eder, anormal durum tespit ederse alarm oluşturur.
  </Card>
  <Card title="Alarms & Actions" icon="bell">
    Monitoring veya Anomaly Detection ile oluşan alarmların eyleme dönüştürülmesi sağlar. Örneğin ilgili kişilere mail ile alarm verisini gönderir.
  </Card>
  <Card title="Scheduled Jobs" icon="clock">
    Zamanlanmış görevlerin yönetimi ve tetiklenmesi. Zamanlanmış görevlerin tetiklenmesini sağlar.
  </Card>
  <Card title="Test Console" icon="flask">
    API'lerin test edilmesi için geliştirme ortamı araçları. Dahili ya da harici API'lerin test edilebilmesi için geliştirme ortamını terk etmeden ve başka bir yazılıma ihtiyaç duymadan kullanılabilecek test aracıdır.
  </Card>
</CardGroup>

**Control Plane Özellikleri:**
* Merkezi konfigürasyon yönetimi
* Gerçek zamanlı izleme ve analitik
* Otomatik alarm ve bildirimler
* API yaşam döngüsü yönetimi
* Versiyonlama ve deployment yönetimi

## Tüm Bileşenlerin Bir Arada Olduğu Mimari

Apinizer platformu, aşağıdaki bileşenlerin entegre çalışması ile tam bir API Management çözümü sunar:

```
┌─────────────────────────────────────────────────────────────┐
│                    CONTROL PLANE                             │
│  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐     │
│  │ Web Manager  │  │ Management   │  │  Analytics    │     │
│  │              │  │    API       │  │   Engine      │     │
│  └──────────────┘  └──────────────┘  └──────────────┘     │
│  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐     │
│  │ Monitoring   │  │  Scheduled   │  │  Test Console │     │
│  │ & Alerting   │  │    Jobs      │  │               │     │
│  └──────────────┘  └──────────────┘  └──────────────┘     │
└─────────────────────────────────────────────────────────────┘
                            │
                            │ Configuration & Control
                            ▼
┌─────────────────────────────────────────────────────────────┐
│                    DATA PLANE                                │
│  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐     │
│  │   Worker 1   │  │   Worker 2   │  │   Worker N    │     │
│  │ ┌──────────┐ │  │ ┌──────────┐ │  │ ┌──────────┐ │     │
│  │ │  Proxy   │ │  │ │  Proxy   │ │  │ │  Proxy   │ │     │
│  │ │ Handler  │ │  │ │ Handler  │ │  │ │ Handler  │ │     │
│  │ └──────────┘ │  │ └──────────┘ │  │ └──────────┘ │     │
│  │ ┌──────────┐ │  │ ┌──────────┐ │  │ ┌──────────┐ │     │
│  │ │Local Cache│ │  │ │Local Cache│ │  │ │Local Cache│ │     │
│  │ └──────────┘ │  │ └──────────┘ │  │ └──────────┘ │     │
│  └──────────────┘  └──────────────┘  └──────────────┘     │
└─────────────────────────────────────────────────────────────┘
                            │
                            │ API Traffic
                            ▼
┌─────────────────────────────────────────────────────────────┐
│              SUPPORTING SERVICES                             │
│  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐     │
│  │ Distributed │  │   MongoDB    │  │ Elasticsearch │     │
│  │    Cache     │  │              │  │              │     │
│  │  (Hazelcast) │  │              │  │              │     │
│  └──────────────┘  └──────────────┘  └──────────────┘     │
└─────────────────────────────────────────────────────────────┘
```

## Bileşenler Arası İletişim

### Control Plane → Data Plane

* **Konfigürasyon Dağıtımı**: Manager modülünden Worker'lara konfigürasyon gönderimi
* **Deployment İşlemleri**: API Proxy'lerin deploy, redeploy ve undeploy işlemleri
* **Monitoring Verileri**: Worker'lardan Manager'a sağlık durumu ve metrikler

### Data Plane → Supporting Services

* **Cache Erişimi**: Worker'ların distributed cache'e erişimi (Quota, Throttling, Token)
* **Veritabanı Erişimi**: MongoDB'ye konfigürasyon ve metadata erişimi
* **Log Gönderimi**: Elasticsearch'e asenkron log gönderimi

### Control Plane → Supporting Services

* **Veritabanı Yönetimi**: MongoDB'de konfigürasyon ve metadata yönetimi
* **Analitik Sorguları**: Elasticsearch'ten analitik veri çekme
* **Cache Yönetimi**: Distributed cache üzerinde veri yönetimi

## Ölçeklenebilirlik ve Yüksek Erişilebilirlik

### Horizontal Scaling

* **Worker Ölçeklendirme**: Trafik artışına göre Worker sayısı artırılabilir
* **Cache Ölçeklendirme**: Hazelcast cluster'ına yeni node'lar eklenebilir
* **Database Ölçeklendirme**: MongoDB replica set ile okuma performansı artırılabilir

### High Availability

* **Manager Redundancy**: Manager modülü için yedekleme stratejileri
* **Worker Redundancy**: Her ortamda birden fazla Worker ile yüksek erişilebilirlik
* **Database Replication**: MongoDB replica set ile veri güvenliği
* **Cache Replication**: Hazelcast'in built-in replication özellikleri

## Güvenlik Mimarisi

* **TLS/SSL Sonlandırması**: Data Plane'de TLS/SSL sonlandırması
* **Network Segmentation**: DMZ ve LAN ayrımı ile ağ segmentasyonu
* **Policy Enforcement**: Tüm trafik Policy Enforcement Point'ten geçer
* **Token Management**: Merkezi token yönetimi ve doğrulama
* **Audit Logging**: Tüm işlemlerin kayıt altına alınması

## Sonraki Adımlar

<CardGroup cols={2}>
  <Card title="Genel Bakış" icon="sitemap" href="/tr/apinizer-anlama/mimari/genel-bakis">
    Bileşenlerin detaylı açıklamalarını inceleyin
  </Card>
  <Card title="Deployment Topolojileri" icon="network-wired" href="/tr/apinizer-anlama/deployment/genel-bakis">
    Kurulum topolojilerini öğrenin
  </Card>
  <Card title="Veri Log Katmanı" icon="database" href="/tr/apinizer-anlama/mimari/veri-log-katmani">
    Veri ve log katmanı stratejilerini inceleyin
  </Card>
  <Card title="Sistem Gereksinimleri" icon="server" href="/tr/apinizer-anlama/sistem/kapasite-planlama">
    Kapasite planlama yapın
  </Card>
</CardGroup>
