---
title: "Adım Adım İzleme"
description: "API Proxy'nin mesaj trafiğini detaylı olarak izleyerek hata tespiti yapabilir. Trace modunu aktifleştirerek mesaj akışını adım adım takip edebilir, politika işletim sonuçlarını görüntüleyebilir ve sorunların kaynağını tespit edebilir."
---

## Adım Adım İzleme Modunu Aktifleştirme

<Steps>
  <Step title="Ön Koşul">
    API Proxy'nin en az bir [Ortam](/tr/apinizer-anlama/temel-kavramlar/ortam-nedir)'a yüklenmiş olması gerekir
  </Step>
  <Step title="Ortam Seçimi">
    API Proxy'nin yüklenmiş olduğu Ortam'lardan hangisi için izleme modu açılacaksa o Ortam seçilir
  </Step>
  <Step title="Başlat">
    **Başlat (Start)** tuşuna tıklanır
  </Step>
</Steps>

<Tip>
Ortam seçiminin yanındaki filtre alanından **Custom Query** ile sadece istenen veriler üzerinden özel olarak trace edilebilir.
</Tip>

<Frame>
  <img src="/images/gelistirici/izleme-analiz/trace-start.png" alt="Trace Modunu Aktifleştirme" />
</Frame>

<Warning>
Adım Adım İzleme modu aktifleştirildiğinde:
- Log kayıtlarının içeriği detaylı incelemeye izin verecek şekilde genişletilir
- Mod durdurulana ya da **5 dakika** sonunda platform tarafından otomatik olarak kapatılana kadar bu şekilde saklanmaya devam eder
</Warning>

## Log Kayıtları

Görüntülenmekte olan log kayıtları, kullanıcının bulduğu herhangi bir kaydı kaybetmemesi amacıyla otomatik olarak güncellenmez. Bunun için **Logları Yenile (Refresh Logs)** tuşu kullanılır.

<Frame>
  <img src="/images/gelistirici/izleme-analiz/trace-logs.png" alt="Log Kayıtları" />
</Frame>

Tabloda görünen log kayıtlarının her birisi, istemciden bu API Proxy'e gelen istek ve o isteğe verilen yanıt mesajına aittir.

<Info>
API Çağrı Politikasının log kaydı ayrı olarak tutulduğu için aynı isteğe ait çift log gözükebilir.
</Info>

## Log Kayıtları Özellikleri

<CardGroup cols={2}>
  <Card title="Otomatik Güncelleme Yok" icon="pause">
    Log kayıtları otomatik güncellenmez, manuel yenileme ile kontrol edilir
  </Card>
  <Card title="Detaylı İzleme" icon="magnifying-glass">
    Her istek ve yanıt mesajı için ayrıntılı log kayıtları tutulur
  </Card>
  <Card title="Politika İzleme" icon="list-check">
    İşletilen tüm politikalar için ayrıntılı log kayıtları oluşturulur
  </Card>
  <Card title="Manuel Yenileme" icon="arrows-rotate">
    **Logları Yenile** tuşu ile kayıtlar güncellenebilir
  </Card>
</CardGroup>

## Log Kayıtları İşlemleri

<Tabs>
  <Tab title="Detaylı Görüntüleme">
    İncelenmek istenen istek mesajına ait satırın sonundaki tuşlardan ilki, o mesajın log kayıtlarını görüntüleyen bir pencere açar.

    <Frame>
      <img src="/images/gelistirici/izleme-analiz/trace-detailed-view-button.png" alt="Detaylı Görüntüleme Butonu" />
    </Frame>

    Açılan pencerede, logların mesaj akışına ilişkin bölümlere ayrıldığı görülür. İncelenmek istenen bölümün adına tıklandığında bu alana ilişkin log kayıtları görüntülenir. Varsayılan olarak **Genel Bakış (Overview)** bölümü açıktır.

    <Frame>
      <img src="/images/gelistirici/izleme-analiz/trace-detailed-view-dialog.png" alt="Detaylı Görüntüleme Dialog" />
    </Frame>
  </Tab>
  <Tab title="JSON Görüntüleme">
    Detaylı Görüntüleme tuşunun yanındaki tuş log kayıtlarını JSON formatında görüntüler.

    <Frame>
      <img src="/images/gelistirici/izleme-analiz/trace-json-view.png" alt="JSON Görüntüleme" />
    </Frame>

    <Frame>
      <img src="/images/gelistirici/izleme-analiz/trace-json-dialog.png" alt="JSON Dialog" />
    </Frame>
  </Tab>
  <Tab title="İndirme">
    Apinizer, adım adım izleme modundayken, API Proxy için işletilen bütün politikalar için de ayrıntılı bir şekilde log kayıtları oluşturur. İndirme seçeneği, istek bazlı olarak oluşturulan bütün log kayıtlarını topluca indirme olanağı sağlar.

    <Frame>
      <img src="/images/gelistirici/izleme-analiz/trace-download.png" alt="İndirme" />
    </Frame>
  </Tab>
  <Tab title="Hızlı Test">
    İlgili satırdaki Hızlı Test tuşu, gönderilen isteğin yeniden gönderilerek anında test edilebileceği şekilde biçimlendirilmiş olarak Test Konsolunu açar.

    <Frame>
      <img src="/images/gelistirici/izleme-analiz/trace-quick-test.png" alt="Hızlı Test" />
    </Frame>
  </Tab>
</Tabs>

## Politika Akışını İzleme (Select)

Apinizer'ın adım adım izleme modundayken API Proxy için işletilen politikalara ilişkin tuttuğu ayrıntılı log kayıtlarını görüntülemek için **Seç (Select)** tuşuna tıklanır.

<Frame>
  <img src="/images/gelistirici/izleme-analiz/trace-select.png" alt="Seçme" />
</Frame>

Bu tuşa tıklandığında log kayıtlarını içeren tablonun altında yeni bir bölüm açılır. Bu bölüm, seçilen mesaj için işletilen, varsa [API Proxy Grup](/tr/apinizer-anlama/temel-kavramlar/api-proxy-group)'tan da gelen bütün politikaları işletildikleri sırada gösterir.

Her bir politikanın ve Backend API'nin yanında o adımın başarılı işletilip işletilemediğini gösterecek şekilde küçük ikonlar bulunur. Böylece eğer mesaj akışı beklendiği gibi gerçekleşmemişse sorunun hangi politikadan kaynaklandığı görünür.

<Tabs>
  <Tab title="Başarılı Akış">
    Bütün politikaların başarıyla işletildiği durum:
    
    <Frame>
      <img src="/images/gelistirici/izleme-analiz/trace-successful-flow.png" alt="Başarılı Politika Akışı" />
    </Frame>
  </Tab>
  <Tab title="Başarısız Akış">
    Kimlik Doğrulama (Authentication) politikasının başarısız olduğu durum:
    
    <Frame>
      <img src="/images/gelistirici/izleme-analiz/trace-failed-flow.png" alt="Başarısız Politika Akışı" />
    </Frame>

    <Warning>
    Kimlik Doğrulama politikasından sonra işletilmesi gereken üçüncü politika görünmemektedir. Çünkü Kimlik Doğrulamanın başarısız olması ile birlikte mesaj akışı kesilmiş, istemciye hata yanıtı döndürülmüştür.
    </Warning>
  </Tab>
</Tabs>

## Detaylı Log Kayıtları

Bir log kaydının seçilmesi ile görüntülenen bölüm, mesaj akışının başarılı olup olmadığını ve başarısız olmuşsa bunun hangi noktada gerçekleştiğinin özetini sunar.

<Frame>
  <img src="/images/gelistirici/izleme-analiz/trace-detailed-logs.png" alt="Detaylı Log Kayıtları" />
</Frame>

Detaylı log kayıtlarını görüntülemek için aşağıdaki bağlantılar kullanılabilir:

<Tip>
Detaylı log kayıtları, mesaj akışının her adımını izlemenize ve sorunların kaynağını hızlıca tespit etmenize olanak sağlar.
</Tip>

<AccordionGroup>
  <Accordion title="1 - İstemci Log Kayıtları">
    **İstemci (Client)** yazısı bir bağlantıdır. Buna tıklandığı zaman istemciden giden ve istemciye dönen mesajların detaylarının görüntülenebileceği bir pencere açılır.

    **İstemcinin gönderdiği HTTP mesajının detayları:**
    <Frame>
      <img src="/images/gelistirici/izleme-analiz/trace-client-logs-1.png" alt="İstemci Log 1" />
    </Frame>

    **İstemciden API Proxy'e gönderilen mesajın detayları:**
    <Frame>
      <img src="/images/gelistirici/izleme-analiz/trace-client-logs-2.png" alt="İstemci Log 2" />
    </Frame>

    **API Proxy'den istemciye döndürülen mesajın detayları:**
    <Frame>
      <img src="/images/gelistirici/izleme-analiz/trace-client-logs-3.png" alt="İstemci Log 3" />
    </Frame>
  </Accordion>

  <Accordion title="2, 4 - Politika Log Kayıtları">
    2 numaralı bölgedeki bir politika ikonunun üzerine ya da 4 numaralı bölgede ilgili politikanın yanındaki ok işaretine tıklandığında, o politikaya gelen ve o politikadan giden mesaj içeriğini gösteren log kayıtları açılır.

    <Frame>
      <img src="/images/gelistirici/izleme-analiz/trace-policy-logs.png" alt="Politika Log Kayıtları" />
    </Frame>
  </Accordion>

  <Accordion title="3 - Backend API Log Kayıtları">
    **API** yazısı bir bağlantıdır. Buna tıklandığı zaman Backend API'ye gelen ve Backend API'den dönen mesajların detaylarının görüntülenebileceği bir pencere açılır.

    **API Proxy'den gelen mesajın detayları:**
    <Frame>
      <img src="/images/gelistirici/izleme-analiz/trace-backend-logs-1.png" alt="Backend API Log 1" />
    </Frame>

    **Backend API'ye yapılan yönlendirme detayları** *(yönlendirme seçenekleri için [HTTP Yönlendirme](/tr/gelistirici/yonlendirme/http-yonlendirme) sayfasına bakabilirsiniz)*:
    <Frame>
      <img src="/images/gelistirici/izleme-analiz/trace-backend-logs-2.png" alt="Backend API Log 2" />
    </Frame>

    **Backend API'den API Proxy'e döndürülen mesajın detayları:**
    <Frame>
      <img src="/images/gelistirici/izleme-analiz/trace-backend-logs-3.png" alt="Backend API Log 3" />
    </Frame>
  </Accordion>
</AccordionGroup>
