---
title: "API BazlÄ± Kota"
description: "API BazlÄ± Kota politikasÄ±, belirli zaman periyotlarÄ±nda API lere gelen toplam istek sayÄ±sÄ±nÄ± sÄ±nÄ±rlandÄ±rarak kullanÄ±m kotasÄ± yÃ¶netimi saÄŸlar"
---

**Son GÃ¼ncelleme**: 06 KasÄ±m 2025 **Hedef Kitle**: Sistem YÃ¶neticileri, Backend GeliÅŸtiriciler, DevOps MÃ¼hendisleri

**ğŸ’¡ Politikalar hakkÄ±nda bilginiz var mÄ±?**\
Bu dokÃ¼man spesifik bir politikanÄ±n detaylÄ± kullanÄ±mÄ±nÄ± anlatÄ±r. EÄŸer Apinizer politika yapÄ±sÄ±nÄ± ilk kez kullanÄ±yorsanÄ±z veya politikalarÄ±n genel Ã§alÄ±ÅŸma prensiplerini Ã¶ÄŸrenmek istiyorsanÄ±z, Ã¶ncelikle [Politika Nedir?](/tr/gelistirici/politikalar/politika-nedir) sayfasÄ±nÄ± okumanÄ±zÄ± Ã¶neririz.

| **Politika AdÄ±** | API TabanlÄ± Kota <em>(API Based Quota)</em> |
|------------------|----------------------------------------------|
| **Ã–zet** | Belirli zaman periyotlarÄ±nda API'lere gelen toplam istek sayÄ±sÄ±nÄ± sÄ±nÄ±rlandÄ±rarak kullanÄ±m kotasÄ± yÃ¶netimi saÄŸlar |
| **Kategori** | Performans ve Kaynak YÃ¶netimi |
| **DÃ¶nÃ¼ÅŸ Durum KodlarÄ±** | <table><thead><tr><th><strong>Hata Kodu</strong></th><th><strong>Hata MesajÄ±</strong></th><th><strong>HTTP Durum Kodu</strong></th></tr></thead><tbody><tr><td>ERR-078</td><td>API Based QUOTA policy failed! Error message is: {0}</td><td>500</td></tr><tr><td>ERR-079</td><td>Because of reaching QUOTA limit for specified API Proxy, message is BLOCKED!</td><td>403</td></tr><tr><td>ERR-080</td><td>API Based QUOTA policy failed! Error message is: {0}</td><td>500</td></tr><tr><td>ERR-128</td><td>Client Based QUOTA policy failed! Error message is: {0}</td><td>500</td></tr><tr><td>ERR-129</td><td>Because of reaching QUOTA limit for specified proxy and credential, message is BLOCKED!</td><td>403</td></tr><tr><td>ERR-130</td><td>Client Based QUOTA policy failed! Error message is: {0}</td><td>500</td></tr></tbody></table> |

## Genel BakÄ±ÅŸ

API TabanlÄ± Kota politikasÄ±, API kullanÄ±mÄ±nÄ± belirli zaman periyotlarÄ± (saat, gÃ¼n, hafta, ay) boyunca sÄ±nÄ±rlandÄ±ran bir kaynak yÃ¶netim mekanizmasÄ±dÄ±r.

### AmacÄ± Nedir?

- **KullanÄ±m KotasÄ± YÃ¶netimi**: API kullanÄ±mÄ±nÄ± saatlik, gÃ¼nlÃ¼k, haftalÄ±k veya aylÄ±k periyotlarda sÄ±nÄ±rlandÄ±rarak kaynak tÃ¼ketimini kontrol eder ve adil kullanÄ±m saÄŸlar.
- **Ä°ÅŸ Modeli ve FiyatlandÄ±rma DesteÄŸi**: FarklÄ± mÃ¼ÅŸteri segmentleri iÃ§in Ã¶zelleÅŸtirilmiÅŸ kota planlarÄ± sunar (Free: 1000 istek/ay, Basic: 10K/ay, Premium: 100K/ay, Enterprise: Unlimited), abonelik modellerini destekler.
- **Maliyet KontrolÃ¼ ve BÃ¼tÃ§e YÃ¶netimi**: Cloud servis maliyetlerini tahmin edilebilir kÄ±lar, mÃ¼ÅŸteri baÅŸÄ±na kaynak tÃ¼ketimini izler, beklenmedik maliyet artÄ±ÅŸlarÄ±nÄ± Ã¶nler.
- **SLA ve Servis Kalitesi Garantisi**: Servis seviyesi sÃ¶zleÅŸmelerini yerine getirir, tÃ¼m kullanÄ±cÄ±larÄ±n API kaynaklarÄ±na eriÅŸimini garanti eder, kaynak tÃ¼kenmesini Ã¶nler.
- **Abuse ve KÃ¶tÃ¼ye KullanÄ±m Ã–nleme**: AÅŸÄ±rÄ± kullanÄ±mÄ± tespit eder ve engeller, API kaynaklarÄ±nÄ±n adil daÄŸÄ±lÄ±mÄ±nÄ± saÄŸlar, hizmet kesintilerini Ã¶nler.

### Ã‡alÄ±ÅŸma Prensibi

1. **Ä°stek GeliÅŸi**: API Gateway'e gelen her HTTP/HTTPS isteÄŸi iÃ§in, istemin kaynak bilgileri (IP, kullanÄ±cÄ±, API key vb.) ve zaman damgasÄ± tespit edilir.
2. **Politika KontrolÃ¼**: API TabanlÄ± Kota politikasÄ± aktif ise, sistem aÅŸaÄŸÄ±daki sÄ±rayla kontrol yapar:
  - Condition (koÅŸul) tanÄ±mlÄ± mÄ±? Varsa koÅŸul saÄŸlanÄ±yor mu?
  - Politika aktif mi (active=true)?
  - Variable kullanÄ±lÄ±yor mu yoksa Apinizer default mÄ±?
3. **Quota Key OluÅŸturma ve SayaÃ§ KontrolÃ¼**: Her istek iÃ§in benzersiz bir kota anahtarÄ± oluÅŸturulur (format: `quota:{policy_id}:{apply_by_value}:{period}`). Apply By parametresi varsa (IP adresi, kullanÄ±cÄ± ID, API key), bu deÄŸer anahtara dahil edilir. Redis cache'den mevcut kota kullanÄ±m sayacÄ± sorgulanÄ±r. Detail List tanÄ±mlÄ±ysa, hedef deÄŸer ile karÅŸÄ±laÅŸtÄ±rÄ±lÄ±r ve eÅŸleÅŸen kuralÄ±n kotasÄ± kullanÄ±lÄ±r, yoksa varsayÄ±lan kota uygulanÄ±r.
4. **Karar Verme**:
  - **Kota AÅŸÄ±lmadÄ±ysa**:
    - SayaÃ§ 1 artÄ±rÄ±lÄ±r ve cache'e senkron olarak yazÄ±lÄ±r
    - Ä°stek backend'e iletilir
    - Kota bilgisi veritabanÄ±na asenkron olarak gÃ¼ncellenir (API yanÄ±t sÃ¼resini etkilemez)
    - Rate limit statistics aktifse response header'larÄ±na kalan kota bilgisi eklenir (X-RateLimit-Limit, X-RateLimit-Remaining, X-RateLimit-Reset)
  - **Kota AÅŸÄ±ldÄ±ysa**:
    - HTTP 429 (Too Many Requests) hatasÄ± dÃ¶nÃ¼lÃ¼r, istek iÅŸlenmez
    - Kota yenileme zamanÄ± response header'Ä±nda belirtilir
    - Cache hatasÄ± durumunda Cache Error Handling politikasÄ± devreye girer (REJECT: istek reddedilir, ALLOW: istek devam eder)
5. **Hata Ä°ÅŸleme**: Politika kuralÄ±na uymayan istekler iÃ§in Ã¶zelleÅŸtirilebilir HTTP durum kodu ve hata mesajÄ± dÃ¶ndÃ¼rÃ¼lÃ¼r.

## Veri Depolama Mimarisi

API TabanlÄ± Kota politikasÄ±, veri tutarlÄ±lÄ±ÄŸÄ± ve kalÄ±cÄ±lÄ±ÄŸÄ± saÄŸlamak iÃ§in iki katmanlÄ± bir depolama stratejisi kullanÄ±r:

**Cache (Redis) - Birincil Katman:**
- GerÃ§ek zamanlÄ± kota kontrolleri iÃ§in kullanÄ±lÄ±r
- Her API isteÄŸinde senkron olarak gÃ¼ncellenir
- YÃ¼ksek performans ve dÃ¼ÅŸÃ¼k gecikme saÄŸlar
- DaÄŸÄ±tÄ±k sistemlerde tÃ¼m Gateway instance'larÄ± aynÄ± sayaÃ§larÄ± paylaÅŸÄ±r

**VeritabanÄ± - Ä°kincil Katman:**
- Uzun vadeli kota verilerinin kalÄ±cÄ± saklanmasÄ± iÃ§in kullanÄ±lÄ±r
- API yanÄ±t sÃ¼resini etkilememek iÃ§in asenkron olarak gÃ¼ncellenir
- Sistem yeniden baÅŸlatÄ±ldÄ±ÄŸÄ±nda veya cache hatasÄ± durumunda veri kaybÄ±nÄ± Ã¶nler
- Raporlama, analitik ve faturalama iÃ§in gÃ¼venilir veri kaynaÄŸÄ± saÄŸlar
- Kota geÃ§miÅŸi ve kullanÄ±m istatistikleri iÃ§in arÅŸiv tutar

**Senkronizasyon Stratejisi:**
BaÅŸarÄ±lÄ± her istek sonrasÄ±nda kota bilgileri iki aÅŸamada gÃ¼ncellenir:
1. Ã–ncelikle Redis cache hÄ±zlÄ±ca gÃ¼ncellenir (senkron) - API yanÄ±t sÃ¼resine dahil
2. ArdÄ±ndan veritabanÄ± gÃ¼ncellemesi asenkron olarak gerÃ§ekleÅŸtirilir - API yanÄ±t sÃ¼resini etkilemez

Bu yaklaÅŸÄ±m, yÃ¼ksek performans ve veri dayanÄ±klÄ±lÄ±ÄŸÄ± arasÄ±nda optimal bir denge kurar.

## Ã–zellikler ve Yetenekler

### Temel Ã–zellikler

- **Kota SayÄ±sÄ± Limiti**: Belirli bir zaman periyodunda izin verilen maksimum toplam istek sayÄ±sÄ±nÄ± belirler (minimum 1, tam sayÄ±).
- **Uzun DÃ¶nem Zaman AralÄ±ÄŸÄ± DesteÄŸi**: Saat, GÃ¼n, Hafta ve Ay bazÄ±nda kota periyotlarÄ± tanÄ±mlama. Periyot uzunluÄŸu Ã§arpanÄ± ile Ã¶zelleÅŸtirilebilir zaman aralÄ±klarÄ± (Ã¶rn: 7 gÃ¼n, 3 ay).
- **Apply By DeÄŸiÅŸkeni**: Kota'nÄ±n hangi kritere gÃ¶re uygulanacaÄŸÄ±nÄ± belirler (kullanÄ±cÄ± ID bazlÄ±, API Key bazlÄ±, mÃ¼ÅŸteri ID bazlÄ±, abonelik tipi bazlÄ±). Her deÄŸiÅŸken deÄŸeri iÃ§in ayrÄ± kota sayacÄ± tutulur.
- **Aktif/Pasif Durum KontrolÃ¼**: PolitikanÄ±n aktif veya pasif durumunu kolayca deÄŸiÅŸtirme (active/passive toggle). Pasif durumda politika uygulanmaz ancak yapÄ±landÄ±rmasÄ± saklanÄ±r.
- **KoÅŸul BazlÄ± Uygulama**: Query Builder ile karmaÅŸÄ±k koÅŸullar oluÅŸturarak politikanÄ±n ne zaman uygulanacaÄŸÄ±nÄ± belirleme (Ã¶rn: sadece belirli endpoint'lere veya kullanÄ±cÄ± tiplerine gÃ¶re).

### Ä°leri DÃ¼zey Ã–zellikler

- **Hedef BazlÄ± FarklÄ± Kotalar (Detail List)**: Belirli hedef deÄŸerler (kullanÄ±cÄ± seviyeleri, abonelik planlarÄ±, mÃ¼ÅŸteri segmentleri) iÃ§in Ã¶zel kota kurallarÄ± tanÄ±mlama. Regex desteÄŸi ile esnek hedef eÅŸleÅŸmeleri. Her hedef iÃ§in ayrÄ± kota sayÄ±sÄ± ve zaman periyodu.
- **Interval Window Type DesteÄŸi**: SLIDING (Kayan Pencere) - Her istek zamanÄ±ndan geriye doÄŸru pencere uygulanÄ±r, son N gÃ¼n/saat iÃ§indeki kullanÄ±m. FIXED (Sabit Pencere) - Belirli zaman dilimlerinde sayaÃ§ sÄ±fÄ±rlanÄ±r (her ayÄ±n 1'i, her haftanÄ±n baÅŸÄ±), daha yaygÄ±n kullanÄ±m.
- **Cache BaÄŸlantÄ± ve Hata YÃ¶netimi**: Cache sunucusu baÄŸlantÄ± timeout sÃ¼resi ayarlama (saniye). Cache eriÅŸilemezse davranÄ±ÅŸ belirleme: REJECT (gÃ¼venlik ve fatura doÄŸruluÄŸu Ã¶ncelikli) veya ALLOW (kullanÄ±labilirlik Ã¶ncelikli).
- **Rate Limit Ä°statistikleri**: Response header'larÄ±nda kalan kota bilgisi gÃ¶sterme (X-RateLimit-Limit, X-RateLimit-Remaining, X-RateLimit-Reset). Client'larÄ±n ve dashboard'larÄ±n kota durumunu takip edebilmesi.
- **DaÄŸÄ±tÄ±k Mimari DesteÄŸi**: Merkezi Redis cache kullanÄ±mÄ± sayesinde birden fazla Gateway instance'Ä± aynÄ± kota sayaÃ§larÄ±nÄ± paylaÅŸÄ±r. KullanÄ±cÄ± hangi gateway'e baÄŸlanÄ±rsa baÄŸlansÄ±n tutarlÄ± kota takibi garantisi.
- **Export/Import Ã–zelliÄŸi**: Politika yapÄ±landÄ±rmasÄ±nÄ± ZIP dosyasÄ± olarak export etme. FarklÄ± ortamlara (Development, Test, Production) import etme. Versiyon kontrolÃ¼ ve yedekleme imkanÄ±.
- **Policy Group ve Proxy Group DesteÄŸi**: Birden fazla politikayÄ± Policy Group iÃ§inde yÃ¶netme. Proxy Group'lara toplu politika atama. Merkezi gÃ¼ncelleme ve deploy iÅŸlemleri.
- **Deploy ve Versiyonlama**: Politika deÄŸiÅŸikliklerini canlÄ± ortama deploy etme. Hangi API Proxy'lerde kullanÄ±ldÄ±ÄŸÄ±nÄ± gÃ¶rme (Policy Usage). Proxy Group ve Policy Group kullanÄ±m raporlarÄ±.

## KullanÄ±m SenaryolarÄ±

API Based Quota politikasÄ±, API kullanÄ±mÄ±nÄ± uzun dÃ¶nemli periyotlarda (saatlik, gÃ¼nlÃ¼k, haftalÄ±k, aylÄ±k) sÄ±nÄ±rlamak ve kontrol altÄ±nda tutmak amacÄ±yla toplam istek sayÄ±sÄ±nÄ± yÃ¶netir. AÅŸaÄŸÄ±daki Ã¶rnek senaryolar, farklÄ± kullanÄ±m durumlarÄ±nda bu politikanÄ±n nasÄ±l uygulanabileceÄŸini gÃ¶stermektedir.

| **Senaryo** | **Durum** | **Ã‡Ã¶zÃ¼m (Politika UygulamasÄ±)** | **Beklenen DavranÄ±ÅŸ / SonuÃ§** |
|:------------|:----------|:---------------------------------|:-------------------------------|
| **AylÄ±k Abonelik PlanlarÄ±** | FarklÄ± abonelik seviyelerine gÃ¶re aylÄ±k kota belirlemek istiyorsunuz | Apply By: `{user.subscription_plan}`, Kota: 1000/ay (varsayÄ±lan), Detail List: free=1000/ay, basic=10000/ay, premium=100000/ay, enterprise=1000000/ay | Her abonelik planÄ±na gÃ¶re aylÄ±k kota uygulanÄ±r. Ay sonunda otomatik sÄ±fÄ±rlanÄ±r. Free: 1K, Basic: 10K, Premium: 100K, Enterprise: 1M istek/ay |
| **API Key BazlÄ± GÃ¼nlÃ¼k Kota** | Her API key iÃ§in gÃ¼nlÃ¼k kullanÄ±m limiti koymak istiyorsunuz | Apply By: `{request.header.X-API-Key}`, Kota: 5000, Periyot: 1 GÃ¼n, Interval Window Type: FIXED | Her API key gÃ¼nde 5000 istek yapabilir. Her gÃ¼n baÅŸÄ±nda sayaÃ§ sÄ±fÄ±rlanÄ±r. MÃ¼ÅŸteriler gÃ¼nlÃ¼k kotalarÄ±nÄ± yÃ¶netebilir |
| **Ãœcretsiz Deneme DÃ¶nemi** | Ãœcretsiz kullanÄ±cÄ±lara 7 gÃ¼nlÃ¼k deneme kotasÄ± vermek istiyorsunuz | Kota: 500, Periyot: 7 GÃ¼n, Interval Window Type: FIXED, KoÅŸul: `{user.account_type} = trial` | Deneme hesaplarÄ± 7 gÃ¼n boyunca toplam 500 istek yapabilir. SÃ¼re sonunda kota sÄ±fÄ±rlanmaz, hesap yÃ¼kseltilmesi gerekir |
| **KullanÄ±cÄ± BazlÄ± HaftalÄ±k Limit** | Her kullanÄ±cÄ± iÃ§in haftalÄ±k toplam kota tanÄ±mlamak istiyorsunuz | Apply By: `{user.id}`, Kota: 10000, Periyot: 1 Hafta, Show Rate Limit Statistics: Aktif | Her kullanÄ±cÄ± haftada 10000 istek yapabilir. Pazartesi gÃ¼nleri sayaÃ§ sÄ±fÄ±rlanÄ±r. KullanÄ±cÄ±lar kalan kotalarÄ±nÄ± gÃ¶rebilir |
| **Premium MÃ¼ÅŸteriler Ä°Ã§in Ã–zel Kota** | Ã–zel sÃ¶zleÅŸmeli mÃ¼ÅŸterilere yÃ¼ksek aylÄ±k kota vermek istiyorsunuz | Apply By: `{customer.id}`, Kota: 50000/ay, Detail List: customer_A=500000/ay, customer_B=1000000/ay, customer_C=2000000/ay | Standart mÃ¼ÅŸteriler 50K/ay, Ã¶zel sÃ¶zleÅŸmeli mÃ¼ÅŸteriler anlaÅŸmaya gÃ¶re Ã§ok daha yÃ¼ksek kotalar alÄ±r |
| **Endpoint BazlÄ± FarklÄ± Kotalar** | Resource-intensive endpoint'ler iÃ§in daha dÃ¼ÅŸÃ¼k kota uygulamak istiyorsunuz | Politika 1: Kota: 100/gÃ¼n, KoÅŸul: `{request.path} = /api/export`. Politika 2: Kota: 10000/gÃ¼n, KoÅŸul: diÄŸerleri | Export endpoint'i gÃ¼nde 100 kez, normal endpoint'ler 10000 kez kullanÄ±labilir. Kaynak yoÄŸun iÅŸlemler sÄ±nÄ±rlandÄ±rÄ±lÄ±r |
| **Sliding Window ile Esnek Kota** | Son 30 gÃ¼n iÃ§inde toplam kullanÄ±m limiti koymak istiyorsunuz | Kota: 100000, Periyot: 30 GÃ¼n, Interval Window Type: SLIDING | Her an son 30 gÃ¼ndeki toplam istek sayÄ±sÄ± kontrol edilir. Daha esnek ve adil kota yÃ¶netimi saÄŸlanÄ±r |

## Politika Parametrelerini YapÄ±landÄ±rma

Bu adÄ±mda, kullanÄ±cÄ± **yeni bir politika oluÅŸturabilir** ya da **mevcut politika parametrelerini yapÄ±landÄ±rarak** eriÅŸim kurallarÄ±nÄ± belirleyebilir.

### Yeni API TabanlÄ± Kota PolitikasÄ± OluÅŸturma

<img src="/images/gelistirici/politikalar/api-bazli-kota-1.png" alt="API BazlÄ± Kota PolitikasÄ± YapÄ±landÄ±rma" width="1000" />

### YapÄ±landÄ±rma AdÄ±mlarÄ±

| **AdÄ±m** | **AÃ§Ä±klama / Ä°ÅŸlem** |
|:---------|:---------------------|
| **AdÄ±m 1: OluÅŸturma SayfasÄ±na Gitme** | - Sol menÃ¼den **Development â†’ Global Settings â†’ Global Policies â†’ API Based Quota** bÃ¶lÃ¼mÃ¼ne gidin.<br />- SaÄŸ Ã¼stteki **[+ Create]** butonuna tÄ±klayÄ±n. |
| **AdÄ±m 2: Temel Bilgileri Girme** | **Policy Status (Politika Durumu):** Aktif/Pasif durumu gÃ¶sterir. Yeni politikalar varsayÄ±lan olarak aktiftir.<br /><br />**Name (Ä°sim) Zorunlu:**<br />Ã–rnek: `Monthly_Premium_User_Quota`<br />- Benzersiz isim girin, boÅŸlukla baÅŸlamaz.<br />- Sistem otomatik kontrol eder. YeÅŸil tik: kullanÄ±labilir. KÄ±rmÄ±zÄ± Ã§arpÄ±: mevcut isim.<br /><br />**Description (AÃ§Ä±klama):**<br />Ã–rnek: "Premium kullanÄ±cÄ±lar iÃ§in aylÄ±k 100.000 istek kotasÄ±"<br />- Maks. 1000 karakter.<br />- PolitikanÄ±n amacÄ±nÄ± aÃ§Ä±klayÄ±n. |
| **AdÄ±m 3: Kota AyarlarÄ±nÄ± YapÄ±landÄ±rma** | **Rate Limit Ä°statistiklerini Response Header'da GÃ¶ster:**<br />- Toggle switch ile aktif/pasif yapÄ±n.<br />- Aktif olduÄŸunda response header'larÄ±nda `X-RateLimit-Limit`, `X-RateLimit-Remaining`, `X-RateLimit-Reset` bilgileri gÃ¶sterilir.<br /><br />**Uygulama DeÄŸiÅŸkeni (Apply By):** Ä°steÄŸe BaÄŸlÄ±<br />- "DeÄŸiÅŸken SeÃ§" butonuna tÄ±klayÄ±n.<br />- Kota'nÄ±n hangi kritere gÃ¶re uygulanacaÄŸÄ±nÄ± belirler.<br />- Ã–rnekler: `{user.id}` (kullanÄ±cÄ± bazlÄ±), `{user.subscription}` (abonelik tipi bazlÄ±), `{request.header.X-API-Key}` (API key bazlÄ±)<br />- DeÄŸiÅŸken seÃ§ilmezse tÃ¼m istekler aynÄ± kotayÄ± paylaÅŸÄ±r.<br /><br />**Kota SayÄ±sÄ±:** Zorunlu, Minimum: 1<br />- Ä°zin verilen maksimum toplam istek sayÄ±sÄ±.<br />- Ã–rnek: 100000<br /><br />**per (gÃ¶rsel metin)**<br /><br />**Periyot UzunluÄŸu:** Zorunlu, Minimum: 1<br />- Zaman aralÄ±ÄŸÄ±nÄ±n Ã§arpanÄ±.<br />- Ã–rnek: 1<br /><br />**Zaman Birimi:** Zorunlu<br />- ONE_HOUR (Saat), ONE_DAY (GÃ¼n), ONE_WEEK (Hafta), ONE_MONTH (Ay)<br />- Ã–rnek: Ay<br /><br />**Ã–rnek YapÄ±landÄ±rma:** 100000 istek / 1 Ay â†’ Ayda maksimum 100000 istek |
| **AdÄ±m 4: Hedef BazlÄ± Kurallar TanÄ±mlama (Ä°steÄŸe BaÄŸlÄ±)** | **Detail List (Hedef BazlÄ± Kota KurallarÄ±):**<br />- FarklÄ± hedef deÄŸerler iÃ§in Ã¶zel kotalar tanÄ±mlayÄ±n.<br />- "+" butonuna tÄ±klayarak yeni satÄ±r ekleyin.<br /><br />**Tablo KolonlarÄ±:**<br />- **Hedef DeÄŸer:** DeÄŸiÅŸken deÄŸeri (Ã¶rn: "premium", "enterprise", "trial")<br />- Zorunlu<br />- **Regex Ä°fade:** Hedef deÄŸerin regex olup olmadÄ±ÄŸÄ±<br />- Toggle (Boolean)<br />- **Kota SayÄ±sÄ±:** Bu hedef iÃ§in toplam istek limiti<br />- Number (Min: 1)<br />- **Periyot UzunluÄŸu:** Zaman aralÄ±ÄŸÄ± Ã§arpanÄ±<br />- Number (Min: 1)<br />- **Zaman Birimi:** Saat/GÃ¼n/Hafta/Ay<br />- Dropdown<br /><br />**KullanÄ±m SenaryolarÄ±:**<br />- Free kullanÄ±cÄ±lar: `free` â†’ 1000 istek/ay<br />- Basic kullanÄ±cÄ±lar: `basic` â†’ 10000 istek/ay<br />- Premium kullanÄ±cÄ±lar: `premium` â†’ 100000 istek/ay<br />- Enterprise mÃ¼ÅŸteriler: `enterprise` â†’ 1000000 istek/ay<br /><br />**Silme:** SatÄ±r sonundaki Ã§Ã¶p kutusu ikonu ile satÄ±rÄ± kaldÄ±rÄ±n. |
| **AdÄ±m 5: GeliÅŸmiÅŸ AyarlarÄ± YapÄ±landÄ±rma** | **Interval Window Type:** Zorunlu<br />- **SLIDING (Kayan Pencere):** Her istek zamanÄ±ndan geriye doÄŸru pencere uygulanÄ±r. Ã–rnek: Son 30 gÃ¼ndeki toplam istek sayÄ±sÄ±. Daha esnek ancak hesaplama maliyeti yÃ¼ksek.<br />- **FIXED (Sabit Pencere):** Belirli zaman dilimlerinde sÄ±fÄ±rlanÄ±r. Ã–rnek: Her ayÄ±n 1'inde sayaÃ§ sÄ±fÄ±rlanÄ±r. Daha yaygÄ±n ve performanslÄ±. Faturalama dÃ¶ngÃ¼leriyle uyumlu.<br /><br />**Cache BaÄŸlantÄ± Timeout:** Zorunlu, Minimum: 0 saniye<br />- Cache sunucusuna baÄŸlantÄ± timeout sÃ¼resi.<br />- Timeout durumunda hata yÃ¶netimi politikasÄ± devreye girer.<br />- Ã–nerilen: 1-3 saniye<br /><br />**Cache Hata YÃ¶netimi Tipi:** Zorunlu<br />- **REJECT:** Ä°steÄŸi reddet, hata dÃ¶n. GÃ¼venlik ve fatura doÄŸruluÄŸu Ã¶ncelikli. Ã–deme yapan mÃ¼ÅŸteriler iÃ§in kritik.<br />- **ALLOW:** Ä°steÄŸe izin ver, devam et. KullanÄ±labilirlik Ã¶ncelikli. Cache geÃ§ici arÄ±zalarda servis devam eder. Ãœcretsiz katmanlarda kullanÄ±labilir.<br /><br />**âš ï¸ Ã–nemli Notlar:**<br />**Zaman Dilimi AyarlarÄ±:** FIXED window kullanÄ±rken sistem saat dilimi ayarlarÄ±nÄ±n doÄŸru yapÄ±landÄ±rÄ±ldÄ±ÄŸÄ±ndan emin olun. Ã–zellikle gÃ¼n/hafta/ay bazlÄ± periyotlarda, zaman dilimi farklÄ±lÄ±klarÄ± beklenmedik sÄ±fÄ±rlama zamanlarÄ±na neden olabilir. SÄ±fÄ±rlama zamanlarÄ± her zaman sunucu saat dilimine gÃ¶re hesaplanÄ±r.<br /><br />**Sabit Pencere Hesaplama (FIXED):**<br />- **Bir gÃ¼nden kÄ±sa aralÄ±klar iÃ§in (Ã¶rn: 6 saat):**<br />  - FormÃ¼l: `Pencere BaÅŸlangÄ±cÄ± = GÃ¼n BaÅŸlangÄ±cÄ± + (GeÃ§en Periyotlar Ã— Periyot SÃ¼resi)`<br />  - Ã–rnek: Saat 14:37'deki bir istek, 6 saatlik periyotta â†’ 12:00-17:59 penceresine aittir<br />- **Bir gÃ¼n veya daha uzun aralÄ±klar iÃ§in (Ã¶rn: 7 gÃ¼n, 1 ay):**<br />  - FormÃ¼l: `Pencere BaÅŸlangÄ±cÄ± = Unix Epoch + (GeÃ§en Periyotlar Ã— Periyot SÃ¼resi)`<br />  - Ã–rnek: 1 aylÄ±k periyotta her ayÄ±n 1'inde sayaÃ§ sÄ±fÄ±rlanÄ±r<br /><br />**Faturalama Entegrasyonu:** Abonelik bazlÄ± sistemlerde FIXED window type kullanarak faturalama dÃ¶ngÃ¼nÃ¼zÃ¼ kota yenileme zamanÄ±yla senkronize edebilirsiniz. Bu sayede mÃ¼ÅŸteri faturalandÄ±rma tarihi ile kota yenileme tarihi aynÄ± olur. |
| **AdÄ±m 6: KoÅŸul TanÄ±mlama (Ä°steÄŸe BaÄŸlÄ±)** | - **Condition** sekmesine geÃ§in.<br />- KoÅŸullar, politikanÄ±n hangi durumda aktif olacaÄŸÄ±nÄ± belirler.<br /><br />**Ã–rnekler:**<br />- KullanÄ±cÄ± tipi bazlÄ±: `Header = X-User-Type, Operator = Equals, Value = paid`<br />- Abonelik bazlÄ±: `Header = X-Subscription, Starts With = premium-`<br />- Hesap durumu: `Header = X-Account-Status, Equals = active` KoÅŸul tanÄ±mlamazsa politika her zaman aktif<br /><br />Detaylar iÃ§in bakabilirsiniz: [KoÅŸullar (Conditions)](/tr/gelistirici/politikalar/politika-nedir#conditions) |
| **AdÄ±m 7: Hata MesajÄ± Ã–zelleÅŸtirme (Ä°steÄŸe BaÄŸlÄ±)** | - **Error Message Customization** sekmesine gidin.<br />- Kota aÅŸÄ±ldÄ±ÄŸÄ±nda dÃ¶necek mesajÄ± Ã¶zelleÅŸtirin.<br /><br />**VarsayÄ±lan:**<br />`{ "statusCode": 429, "message": "Quota Exceeded" }`<br /><br />**Ã–zel:**<br />`{ "statusCode": 429, "errorCode": "MONTHLY_QUOTA_EXCEEDED", "message": "AylÄ±k kotanÄ±z dolmuÅŸtur. Yenilenme tarihi: {reset_date}. PlanÄ±nÄ±zÄ± yÃ¼kseltmek iÃ§in: /upgrade" }` |
| **AdÄ±m 8: Kaydetme** | - SaÄŸ Ã¼stteki **[Save]** butonuna tÄ±klayÄ±n.<br /><br />**Kontrol Listesi:** Benzersiz isim. Zorunlu alanlar dolu. En az bir mesaj sayÄ±sÄ± ve zaman aralÄ±ÄŸÄ± tanÄ±mlÄ±<br /><br />**SonuÃ§:**<br />- Politika listeye eklenir.<br />- API'lere baÄŸlanabilir.<br />- Global politikaysa otomatik uygulanÄ±r. |

## PolitikayÄ± Silme

Bu politikanÄ±n silme adÄ±mlarÄ± ve kullanÄ±mdayken uygulanacak iÅŸlemler, *Politika Nedir?* sayfasÄ±ndaki **PolitikayÄ± Silme** bÃ¶lÃ¼mÃ¼nde detaylÄ± olarak aÃ§Ä±klanmÄ±ÅŸtÄ±r. AyrÄ±ntÄ±lÄ± bilgi iÃ§in ilgili bÃ¶lÃ¼me bakabilirsiniz: [PolitikayÄ± Silme](/tr/gelistirici/politikalar/politika-nedir#politika-silme)

## PolitikayÄ± DÄ±ÅŸa/Ä°Ã§e Aktarma

Bu politikanÄ±n dÄ±ÅŸa aktarma (Export) adÄ±mlarÄ± ve kullanÄ±labilecek seÃ§enekler, *Politika Nedir?* sayfasÄ±ndaki **DÄ±ÅŸa Aktarma Ä°ÅŸlemi** bÃ¶lÃ¼mÃ¼nde aÃ§Ä±klanmaktadÄ±r. AyrÄ±ntÄ±lÄ± bilgi iÃ§in ilgili bÃ¶lÃ¼me bakabilirsiniz: [PolitikayÄ± DÄ±ÅŸa/Ä°Ã§e Aktarma](/tr/gelistirici/politikalar/politika-nedir#politika-export)

## PolitikayÄ± API'ye BaÄŸlama

Bu politikanÄ±n API'lere nasÄ±l baÄŸlanacaÄŸÄ±na iliÅŸkin sÃ¼reÃ§, *Politika Nedir?* sayfasÄ±ndaki **PolitikayÄ± API'ye BaÄŸlama** bÃ¶lÃ¼mÃ¼nde detaylandÄ±rÄ±lmÄ±ÅŸtÄ±r. AyrÄ±ntÄ±lÄ± bilgi iÃ§in ilgili bÃ¶lÃ¼me gÃ¶z atabilirsiniz: [PolitikayÄ± API'ye BaÄŸlama](/tr/gelistirici/politikalar/politika-nedir#politika-api-baglama)

## Ä°leri DÃ¼zey Ã–zellikler

Bu bÃ¶lÃ¼mde kullanÄ±cÄ±, **API Based Quota** politikasÄ±nÄ±n geliÅŸmiÅŸ yÃ¶netim kabiliyetlerini kullanarak daha esnek, dinamik ve kurumsal seviyede kontrol elde eder.

| **Ã–zellik** | **AÃ§Ä±klama ve AdÄ±mlar** |
|:------------|:------------------------|
| **Dinamik Kota Yenileme** | - FIXED window type ile belirli gÃ¼nlerde otomatik sÄ±fÄ±rlama ayarlayÄ±n (Ã¶rn: her ayÄ±n 1'i).<br />- Faturalama dÃ¶ngÃ¼nÃ¼zle senkronize edin.<br />- Customer billing date'e gÃ¶re Ã¶zel yenileme tarihleri tanÄ±mlayÄ±n.<br />- Bu sayede her mÃ¼ÅŸterinin kotasÄ± kendi abonelik yenileme gÃ¼nÃ¼nde sÄ±fÄ±rlanÄ±r. |
| **Kota Rollover Ã–zelliÄŸi** | - Cache'de kullanÄ±lmayan kota miktarÄ±nÄ± saklayÄ±n.<br />- Bir sonraki periyotta bonus olarak ekleyin.<br />- Maksimum rollover limiti tanÄ±mlayÄ±n (Ã¶rn: maksimum 2 aylÄ±k biriktirme).<br />- KullanÄ±lmayan kotalarÄ± bir sonraki dÃ¶neme aktararak mÃ¼ÅŸteri memnuniyeti artÄ±rÄ±n. |
| **Soft Limit ve Hard Limit** | - Ä°ki farklÄ± quota politikasÄ± oluÅŸturun.<br />- Soft Limit (Ã¶rn: 80000/ay): UyarÄ± gÃ¶ster ama izin ver.<br />- Hard Limit (Ã¶rn: 100000/ay): Ä°stek reddet.<br />- MÃ¼ÅŸterilere kota yaklaÅŸtÄ±ÄŸÄ±nda uyarÄ± vererek ani kesintileri Ã¶nleyin. |
| **Cache-Database Senkronizasyonu** | - DÃ¼zenli olarak cache ve database'deki kota deÄŸerlerini karÅŸÄ±laÅŸtÄ±ran monitoring kurun.<br />- TutarsÄ±zlÄ±k tespit edilirse alert gÃ¶nderin ve otomatik dÃ¼zeltme mekanizmasÄ± tetikleyin.<br />- YÃ¼ksek trafikli saatlerde asenkron yazma sÄ±klÄ±ÄŸÄ±nÄ± artÄ±rÄ±n, dÃ¼ÅŸÃ¼k trafikte azaltÄ±n.<br />- Bu sayede veri tutarlÄ±lÄ±ÄŸÄ±nÄ± garanti ederken sistem gÃ¼venilirliÄŸini artÄ±rÄ±n. |

## Ä°puÃ§larÄ± ve En Ä°yi Uygulamalar

### YapÄ±lmasÄ± Gerekenler ve En Ä°yi Uygulamalar

| **Kategori** | **AÃ§Ä±klama / Ã–neriler** |
|:-------------|:-------------------------|
| **Kota DeÄŸerleri Belirleme** | **KÃ¶tÃ¼:** Keyfi sayÄ±lar belirlemek (Ã¶rn: 12345 istek/ay) - analiz eksikliÄŸi<br />**Ä°yi:** GeÃ§miÅŸ kullanÄ±m verilerine gÃ¶re kota belirlemek<br />**En Ä°yi:** Percentile analizi yapÄ±n (Ã¶rn: %95 kullanÄ±cÄ± 5K/ay altÄ±nda), yeterli buffer ekleyin (%20-30 fazla), farklÄ± kullanÄ±cÄ± segmentleri iÃ§in ayrÄ± analiz yapÄ±n |
| **Window Type SeÃ§imi** | **KÃ¶tÃ¼:** Her senaryo iÃ§in SLIDING kullanmak - gereksiz hesaplama yÃ¼kÃ¼<br />**Ä°yi:** Abonelik bazlÄ± sistemlerde FIXED tercih etmek<br />**En Ä°yi:** FIXED window type ile faturalama dÃ¶ngÃ¼sÃ¼nÃ¼ senkronize edin, mÃ¼ÅŸteri baÅŸlangÄ±Ã§ tarihini baz alÄ±n, ay sonu/baÅŸÄ± sÄ±fÄ±rlamayÄ± planlayÄ±n |
| **Apply By DeÄŸiÅŸkeni Stratejisi** | **KÃ¶tÃ¼:** Apply By kullanmamak - tÃ¼m mÃ¼ÅŸteriler aynÄ± kotayÄ± paylaÅŸÄ±r<br />**Ä°yi:** User ID ile kullanÄ±cÄ± bazlÄ± kota<br />**En Ä°yi:** HiyerarÅŸik yapÄ±: Organization â†’ Team â†’ User. Enterprise mÃ¼ÅŸterilerde organization ID, bireysel kullanÄ±cÄ±larda user ID kullanÄ±n. Multi-tenancy destekleyin. |
| **Detail List ile Segmentasyon** | **KÃ¶tÃ¼:** Tek tip kota - esneklik yok<br />**Ä°yi:** Free/Premium ayrÄ±mÄ± yapÄ±n<br />**En Ä°yi:** Ã‡ok katmanlÄ± tier sistemi: Trial/Free/Starter/Professional/Business/Enterprise. Her segment iÃ§in ayrÄ± fiyatlandÄ±rma ve kota. Upsell yolu aÃ§Ä±k bÄ±rakÄ±n. |
| **Rate Limit Header KullanÄ±mÄ±** | **KÃ¶tÃ¼:** Header'larÄ± gÃ¶stermemek - mÃ¼ÅŸteri kotasÄ±nÄ± bilmez<br />**Ä°yi:** Sadece authenticated isteklerde header gÃ¶stermek<br />**En Ä°yi:** TÃ¼m isteklerde header aktif, dashboard/analytics entegrasyonu saÄŸlayÄ±n, kota %80 dolduÄŸunda email/notification gÃ¶nderin, upgrade linki saÄŸlayÄ±n |

## GÃ¼venlik En Ä°yi UygulamalarÄ±

| **GÃ¼venlik AlanÄ±** | **AÃ§Ä±klama / UyarÄ±lar** |
|:-------------------|:------------------------|
| **Fatura DoÄŸruluÄŸu** | Cache Error Handling'de REJECT kullanÄ±n. Ã–deme yapan mÃ¼ÅŸterilerde kotanÄ±n kesinlikle doÄŸru sayÄ±lmasÄ± kritiktir. Cache problemi yaÅŸanÄ±rsa servis geÃ§ici kesintiye uÄŸramalÄ±, fazla kullanÄ±m izni verilmemelidir. VeritabanÄ± asenkron gÃ¼ncellemesi sayesinde cache hatasÄ± durumunda bile kota verileri kaybolmaz. DÃ¼zenli olarak cache-database senkronizasyonunu kontrol edin. |
| **Fraud ve Abuse Ã–nleme** | Anormal kullanÄ±m paternlerini tespit edin (Ã¶rn: gÃ¼nde 1000 istek yapan kullanÄ±cÄ± aniden 100K istek atÄ±yorsa). Ani quota patlamalarÄ± iÃ§in alert kurun. ÅÃ¼pheli hesaplarÄ± otomatik suspend edin. |
| **API Key GÃ¼venliÄŸi** | API Key bazlÄ± quota kullanÄ±rken key rotation stratejisi uygulayÄ±n. SÄ±zan key'lerin zararÄ±nÄ± sÄ±nÄ±rlandÄ±rmak iÃ§in kota Ã§ok kritiktir. Her key iÃ§in separate quota tracking yapÄ±n. |
| **Tenant Isolation** | Multi-tenant sistemlerde her tenant iÃ§in tamamen izole quota sayacÄ± tutun. Bir tenant'Ä±n kullanÄ±mÄ± diÄŸerlerini etkilememeli. Cache key'lerde tenant_id mutlaka bulunmalÄ±. |
| **Monitoring ve Alerting** | Kota aÅŸÄ±mlarÄ±nÄ± sÃ¼rekli izleyin. %80 dolulukta uyarÄ±, %100'de alert gÃ¶nderin. Revenue impact analizi yapÄ±n (kaÃ§ mÃ¼ÅŸteri kota yÃ¼zÃ¼nden upgrade yaptÄ±?). Abuse pattern'lerini tespit edin. |

## KaÃ§Ä±nÄ±lmasÄ± Gerekenler

| **Kategori** | **AÃ§Ä±klama / UyarÄ±lar** |
|:-------------|:------------------------|
| **Cache Error Handling'de ALLOW KullanÄ±mÄ± (Ã–deme Yapan MÃ¼ÅŸterilerde)** | **Neden kaÃ§Ä±nÄ±lmalÄ±:** Cache hatasÄ± olduÄŸunda kota kontrolÃ¼ devre dÄ±ÅŸÄ± kalÄ±r, mÃ¼ÅŸteriler sÄ±nÄ±rsÄ±z kullanÄ±m yapabilir, fatura kayÄ±plarÄ± oluÅŸur, abuse riski artar<br />**Alternatif:** Ã–deme yapan mÃ¼ÅŸterilerde REJECT kullanÄ±n, cache high availability saÄŸlayÄ±n, Redis cluster kurun, failover mekanizmasÄ± oluÅŸturun |
| **Ã‡ok KÄ±sa Periyotlar (Ã–rn: Saatlik Kota)** | **Neden kaÃ§Ä±nÄ±lmalÄ±:** Kota Ã§ok sÄ±k sÄ±fÄ±rlanÄ±r, mÃ¼ÅŸteri deneyimi kÃ¶tÃ¼leÅŸir, faturalama karmaÅŸÄ±klaÅŸÄ±r, abuse kolay hale gelir<br />**Alternatif:** Minimum gÃ¼nlÃ¼k, idealda aylÄ±k periyotlar kullanÄ±n, kÄ±sa sÃ¼reli koruma iÃ§in throttling politikasÄ± ekleyin, quota + throttling kombinasyonu yapÄ±n |
| **DeÄŸiÅŸken Olmadan Detail List KullanÄ±mÄ±** | **Neden kaÃ§Ä±nÄ±lmalÄ±:** Apply By olmadan hedef eÅŸleÅŸtirmesi Ã§alÄ±ÅŸmaz, tÃ¼m Detail List kurallarÄ± etkisiz kalÄ±r, farklÄ± kotalar uygulanamaz<br />**Alternatif:** Mutlaka Apply By deÄŸiÅŸkeni tanÄ±mlayÄ±n, deÄŸiÅŸken deÄŸeri ile hedef deÄŸeri eÅŸleÅŸecek ÅŸekilde planlayÄ±n |
| **Ã‡ok YÃ¼ksek Quota DeÄŸerleri (Ãœcretsiz Planlarda)** | **Neden kaÃ§Ä±nÄ±lmalÄ±:** Abuse riski Ã§ok yÃ¼ksek, maliyet kontrolÃ¼ olmaz, upgrade motivasyonu azalÄ±r, sunucu kaynaklarÄ± tÃ¼kenir<br />**Alternatif:** Ãœcretsiz planlar iÃ§in makul limitler koyun (Ã¶rn: 1000-5000/ay), upgrade path'i net gÃ¶sterin, paid planlarÄ±n avantajlarÄ±nÄ± vurgulayÄ±n |

## Performans Ä°puÃ§larÄ±

| **Kriter** | **Ã–neri / Etki** |
|:-----------|:-----------------|
| **Cache Stratejisi** | **Ã–neri:** Redis cluster kullanÄ±n, connection pooling aktif edin, read replica'lar ekleyin, cache key'leri optimize edin (kÄ±sa ve unique)<br />**Etki:** YÃ¼ksek trafikte bile dÃ¼ÅŸÃ¼k latency, yÃ¼ksek availability, tutarlÄ± kota takibi |
| **Cache BaÄŸlantÄ± Pooling** | **Ã–neri:** Redis connection pool kullanÄ±n, connection pool size'Ä± trafiÄŸinize gÃ¶re optimize edin (Ã¶nerilen: CPU core sayÄ±sÄ± Ã— 2), keepalive sÃ¼relerini ayarlayÄ±n, connection timeout'larÄ± belirleyin<br />**Etki:** Her istek iÃ§in yeni connection aÃ§Ä±lmaz, baÄŸlantÄ± maliyeti %80 azalÄ±r, latency %30-50 dÃ¼ÅŸer, cache sunucusu aynÄ± anda daha fazla client'a hizmet verebilir |
| **FIXED Window Tercihi** | **Ã–neri:** Ã–zellikle aylÄ±k quota'larda FIXED window kullanÄ±n, SLIDING yerine daha performanslÄ±, faturalama dÃ¶ngÃ¼sÃ¼ne uygun<br />**Etki:** Cache okumasÄ± azalÄ±r, iÅŸlem maliyeti dÃ¼ÅŸer, faturalama daha basit, mÃ¼ÅŸteri deneyimi daha net |
| **Detail List Optimizasyonu** | **Ã–neri:** Detail List'i maksimum 20-30 kuralla sÄ±nÄ±rlayÄ±n, en sÄ±k kullanÄ±lan kurallarÄ± Ã¼stte tutun, gereksiz regex kullanmayÄ±n, basit string matching tercih edin<br />**Etki:** Kural eÅŸleÅŸtirme hÄ±zlanÄ±r, CPU kullanÄ±mÄ± dÃ¼ÅŸer, latency 10ms'den az kalÄ±r |
| **Batch Processing** | **Ã–neri:** YÃ¼ksek trafikli sistemlerde sayaÃ§ gÃ¼ncellemelerini batch olarak yapÄ±n, her istek iÃ§in ayrÄ± write yerine bufferda toplayÄ±n, 100-1000 istek biriktirip toplu yazÄ±n<br />**Etki:** Cache write yÃ¼kÃ¼ %90 azalÄ±r, throughput 10x artar, cache sunucu Ã¶mrÃ¼ uzar |
| **Monitoring ve Tuning** | **Ã–neri:** Quota metriklerini toplayÄ±n (usage rate, reset frequency), cache performansÄ±nÄ± izleyin, slow query'leri tespit edin, hotspot key'leri belirleyin<br />**Etki:** Bottleneck'ler erken tespit edilir, proaktif scaling yapÄ±lÄ±r, SLA garantisi saÄŸlanÄ±r |

## SÄ±k Sorulan Sorular (SSS)

| **Kategori** | **Soru (S)** | **Cevap (C)** |
|:-------------|:-------------|:--------------|
| **Genel** | Quota ve Throttling arasÄ±ndaki fark nedir? | **Throttling:** KÄ±sa sÃ¼rede (saniye/dakika) hÄ±z sÄ±nÄ±rlamasÄ±. DDoS korumasÄ± ve burst control iÃ§in.<br />**Quota:** Uzun sÃ¼rede (gÃ¼n/ay) toplam kullanÄ±m limiti. Faturalama ve subscription yÃ¶netimi iÃ§in. Ä°kisi birlikte kullanÄ±lmalÄ±: Throttling anlÄ±k koruma, Quota uzun dÃ¶nem kontrol saÄŸlar. |
| **Genel** | Bir API'ye hem Throttling hem Quota politikasÄ± eklenebilir mi? | Evet, kesinlikle Ã¶nerilir. Ã–rnek kombinasyon: Throttling: 100 istek/dakika (burst protection), Quota: 100.000 istek/ay (subscription limit). Her iki politika da baÄŸÄ±msÄ±z Ã§alÄ±ÅŸÄ±r, birbirini tamamlar. |
| **Teknik** | SLIDING vs FIXED window hangisini seÃ§meliyim? | **FIXED tercih edin Ã§Ã¼nkÃ¼:** Faturalama dÃ¶ngÃ¼sÃ¼ne uygun (her ayÄ±n 1'i sÄ±fÄ±rlanÄ±r), daha performanslÄ±, mÃ¼ÅŸteriye daha net (kotanÄ±z X tarihinde yenilenecek), implementation daha basit.<br />**SLIDING sadece:** Daha hassas kontrol gerekiyorsa, rolling period istiyorsanÄ±z (son 30 gÃ¼n) kullanÄ±n. |
| **Teknik** | Cache sunucusu neden gereklidir? | Quota sayaÃ§larÄ±nÄ± merkezi olarak tutmak iÃ§in Redis gereklidir. DaÄŸÄ±tÄ±k sistemlerde (birden fazla Gateway) her gateway aynÄ± sayacÄ± gÃ¶rmeli.<br />Cache olmadan: Gateway'ler farklÄ± sayarlar tutar, mÃ¼ÅŸteri kotasÄ±nÄ± 2-3 kat fazla kullanabilir, fatura kayÄ±plarÄ± oluÅŸur. |
| **Teknik** | Kota verileri neden veritabanÄ±na da yazÄ±lÄ±yor? | Cache yÃ¼ksek performans saÄŸlarken, veritabanÄ± veri kalÄ±cÄ±lÄ±ÄŸÄ±nÄ± garanti eder. Ã–nemli nedenler: 1) Sistem yeniden baÅŸlatÄ±ldÄ±ÄŸÄ±nda kota bilgileri kaybolmaz, 2) Raporlama ve analitik iÃ§in geÃ§miÅŸ veriler saklanÄ±r, 3) Faturalama iÃ§in gÃ¼venilir kayÄ±t tutar, 4) Cache hatalarÄ±nda fallback saÄŸlar, 5) Yasal zorunluluklar iÃ§in audit trail oluÅŸturur. VeritabanÄ± gÃ¼ncellemesi asenkron olduÄŸu iÃ§in API performansÄ±nÄ± etkilemez. |
| **KullanÄ±m** | MÃ¼ÅŸteri kotasÄ±nÄ± ay ortasÄ±nda artÄ±rÄ±rsam ne olur? | Politika gÃ¼ncellemesi yapÄ±n, yeni limit cache'e yazÄ±lÄ±r, mevcut kullanÄ±m korunur. Ã–rnek: MÃ¼ÅŸteri 5000/10000 kullanmÄ±ÅŸ, limiti 20000'e Ã§Ä±karÄ±rsanÄ±z â†’ 5000/20000 olur. Geriye dÃ¶nÃ¼k etkilemez, sadece ileriye etkiler. |
| **KullanÄ±m** | Kota aÅŸan mÃ¼ÅŸteri ne zaman tekrar istek yapabilir? | Reset time'a kadar beklemeli. FIXED window'da: Bir sonraki periyot baÅŸÄ±nda (Ã¶rn: gelecek ayÄ±n 1'i). SLIDING window'da: Ä°lk isteÄŸin Ã¼zerinden periyot sÃ¼resi geÃ§ince. Response header'da X-RateLimit-Reset ile timestamp verilir. |

**Bu dokÃ¼man Apinizer Ã¼rÃ¼n dokÃ¼mantasyonunun bir parÃ§asÄ±dÄ±r. Â©ï¸ 2025 Apinizer - TÃ¼m haklarÄ± saklÄ±dÄ±r.**

Bu dokÃ¼mantasyon, Apinizer yazÄ±lÄ±mÄ±nÄ± kullanan kiÅŸi ve kuruluÅŸlar tarafÄ±ndan dahili kullanÄ±m amacÄ±yla serbestÃ§e kullanÄ±labilir, kopyalanabilir ve daÄŸÄ±tÄ±labilir.
