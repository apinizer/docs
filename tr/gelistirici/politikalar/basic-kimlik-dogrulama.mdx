---
title: "Basic Kimlik DoÄŸrulama"
description: "HTTP Basic Authentication standardÄ±nÄ± kullanarak API isteklerini kimlik bilgileriyle doÄŸrular ve yetkilendirir"
---

**Son GÃ¼ncelleme**: 04 KasÄ±m 2025 **Hedef Kitle**: Sistem YÃ¶neticileri, Backend GeliÅŸtiriciler, DevOps MÃ¼hendisleri

**ğŸ’¡ Politikalar hakkÄ±nda bilginiz var mÄ±?**\
Bu dokÃ¼man spesifik bir politikanÄ±n detaylÄ± kullanÄ±mÄ±nÄ± anlatÄ±r. EÄŸer Apinizer politika yapÄ±sÄ±nÄ± ilk kez kullanÄ±yorsanÄ±z veya politikalarÄ±n genel Ã§alÄ±ÅŸma prensiplerini Ã¶ÄŸrenmek istiyorsanÄ±z, Ã¶ncelikle [Politika Nedir?](/tr/gelistirici/politikalar/politika-nedir) sayfasÄ±nÄ± okumanÄ±zÄ± Ã¶neririz.

| **Politika AdÄ±** | Base64 Authentication <em>(Basic Authentication)</em> |
|------------------|------------------------------------------------------|
| **Ã–zet** | HTTP Basic Authentication standardÄ±nÄ± kullanarak API isteklerini kimlik bilgileriyle doÄŸrular ve yetkilendirir |
| **Kategori** | GÃ¼venlik ve EriÅŸim KontrolÃ¼ / Kimlik DoÄŸrulama |
| **DÃ¶nÃ¼ÅŸ Durum KodlarÄ±** | <table><thead><tr><th><strong>Hata Kodu</strong></th><th><strong>Hata MesajÄ±</strong></th><th><strong>HTTP Durum Kodu</strong></th></tr></thead><tbody><tr><td>ERR-050</td><td>Authentication policy failed! Error message is: {0}</td><td>500</td></tr></tbody></table> |

## Genel BakÄ±ÅŸ

HTTP Basic Authentication standardÄ±nÄ± kullanarak API isteklerini gÃ¼venli bir ÅŸekilde doÄŸrulamak. Ä°steklerde gÃ¶nderilen kullanÄ±cÄ± adÄ± ve ÅŸifre bilgilerini base64 ile decode ederek kimlik kontrolÃ¼ yapmak.

## AmacÄ± Nedir?

- HTTP Basic Authentication standardÄ±nÄ± kullanarak API isteklerini gÃ¼venli bir ÅŸekilde doÄŸrulamak. Ä°steklerde gÃ¶nderilen kullanÄ±cÄ± adÄ± ve ÅŸifre bilgilerini base64 ile decode ederek kimlik kontrolÃ¼ yapmak.
- Secret Manager, LDAP, veritabanÄ± veya harici API entegrasyonlarÄ± ile merkezi kimlik doÄŸrulama altyapÄ±sÄ±na baÄŸlanmak. KullanÄ±cÄ± bilgilerini gÃ¼venli ÅŸekilde Identity/Role Group servisleri Ã¼zerinden doÄŸrulamak.
- KullanÄ±cÄ±nÄ±n rollerini ve yetkilerini kontrol ederek endpoint bazÄ±nda veya method bazÄ±nda eriÅŸim kontrolÃ¼ saÄŸlamak. Authorization yapÄ±landÄ±rmasÄ± ile sadece yetkili kullanÄ±cÄ±larÄ±n belirli API'lere eriÅŸmesini garanti etmek.
- Kimlik doÄŸrulamasÄ± yapÄ±lan kullanÄ±cÄ± bilgilerini (username, user ID vb.) backend servislerine Ã¶zel header ile iletmek. Backend'in kullanÄ±cÄ± baÄŸlamÄ±nda iÅŸlem yapmasÄ±nÄ± saÄŸlamak.
- IP adresi kontrolÃ¼, clear auth ve error message Ã¶zelleÅŸtirme gibi geliÅŸmiÅŸ gÃ¼venlik katmanlarÄ± ekleyerek Ã§ok katmanlÄ± gÃ¼venlik saÄŸlamak.

### Ã‡alÄ±ÅŸma Prensibi

1. **Ä°stek GeliÅŸi**: API Gateway'e gelen her HTTP/HTTPS isteÄŸi iÃ§in, istemin `Authorization` header'Ä± kontrol edilir ve `Basic` prefix ile base64 encoded credentials (kullanÄ±cÄ± adÄ±:ÅŸifre) aranÄ±r.
2. **Politika KontrolÃ¼**: Base64 Authentication politikasÄ± aktif ise, sistem aÅŸaÄŸÄ±daki sÄ±rayla kontrol yapar:
   - Condition (koÅŸul) tanÄ±mlÄ± mÄ±? Varsa koÅŸul saÄŸlanÄ±yor mu?
   - Politika aktif mi (active=true)?
   - Variable kullanÄ±lÄ±yor mu yoksa Apinizer default mÄ±?
3. **Kimlik DoÄŸrulama KontrolÃ¼**: Authorization header'Ä± decode edilir ve username/password Ã§Ä±karÄ±lÄ±r. Identity Role Group servisi (Secret Manager, LDAP, Database veya API) ile kimlik bilgileri doÄŸrulanÄ±r. EÄŸer `checkClientIpAddress` aktifse, istemci IP adresi de kontrol edilir.
4. **Karar Verme**:
   - **DoÄŸrulama BaÅŸarÄ±lÄ±**: KullanÄ±cÄ± doÄŸrulanÄ±rsa, opsiyonel olarak authorization (rol kontrolÃ¼) yapÄ±lÄ±r. `addUserToHeader` aktifse kullanÄ±cÄ± bilgisi backend'e Ã¶zel header ile iletilir. `clearAuth` aktifse, Authorization header backend'e gÃ¶nderilmez.
   - **DoÄŸrulama BaÅŸarÄ±sÄ±z**: KullanÄ±cÄ± kimlik bilgileri geÃ§ersizse veya yetkisi yoksa HTTP 401/403 hatasÄ± dÃ¶ndÃ¼rÃ¼lÃ¼r.
5. **Hata Ä°ÅŸleme**: Politika kuralÄ±na uymayan istekler iÃ§in Ã¶zelleÅŸtirilebilir HTTP durum kodu ve hata mesajÄ± dÃ¶ndÃ¼rÃ¼lÃ¼r.

## Ã–zellikler ve Yetenekler

### Temel Ã–zellikler

- **HTTP Basic Authentication DesteÄŸi**: RFC 7617 standardÄ±na uygun base64 encoded username:password formatÄ±nda kimlik doÄŸrulama. Authorization header'Ä±ndan otomatik decode ve credential extraction.
- **Identity/Role Group Entegrasyonu**: Secret Manager, LDAP, Database veya harici API servisleri ile merkezi kimlik yÃ¶netimi. KullanÄ±cÄ± bilgilerini gÃ¼venli ÅŸekilde doÄŸrulama ve rol bilgilerini alma.
- **Username Variable DesteÄŸi**: DoÄŸrulanan kullanÄ±cÄ± adÄ±nÄ± Apinizer deÄŸiÅŸkenlerine yazma. Policy chain boyunca kullanÄ±cÄ± bilgisine eriÅŸim ve backend'e aktarÄ±m imkanÄ±.
- **Aktif/Pasif Durum KontrolÃ¼**: PolitikanÄ±n aktif veya pasif durumunu kolayca deÄŸiÅŸtirme (active/passive toggle). Pasif durumda politika uygulanmaz ancak yapÄ±landÄ±rmasÄ± saklanÄ±r.
- **KoÅŸul BazlÄ± Uygulama**: Query Builder ile karmaÅŸÄ±k koÅŸullar oluÅŸturarak politikanÄ±n ne zaman uygulanacaÄŸÄ±nÄ± belirleme (Ã¶rn: sadece belirli endpoint'lere veya header deÄŸerlerine gÃ¶re).

### Ä°leri DÃ¼zey Ã–zellikler

- **Authorization (Yetkilendirme) YapÄ±landÄ±rmasÄ±**: Method bazlÄ± eriÅŸim kontrolÃ¼ (GET, POST, PUT, DELETE vb.). Rol bazlÄ± yetkilendirme ve credential role listesi tanÄ±mlama. Rolleri backend'e header olarak iletme (addRolesToHeader).
- **IP Adresi KontrolÃ¼**: Secret Manager modunda kullanÄ±cÄ± kimlik bilgilerine ek olarak istemci IP adresi doÄŸrulamasÄ±. Ã‡ift faktÃ¶rlÃ¼ gÃ¼venlik katmanÄ±.
- **Clear Auth ve Header ManipÃ¼lasyonu**: Authorization header'Ä±nÄ± backend'e gÃ¶ndermeme (clearAuth). DoÄŸrulanmÄ±ÅŸ kullanÄ±cÄ± bilgisini Ã¶zel header ile backend'e iletme (addUserToHeader). Header adÄ±nÄ± Ã¶zelleÅŸtirme (userHeaderName).
- **Export/Import Ã–zelliÄŸi**: Politika yapÄ±landÄ±rmasÄ±nÄ± ZIP dosyasÄ± olarak export etme. FarklÄ± ortamlara (Development, Test, Production) import etme. Versiyon kontrolÃ¼ ve yedekleme imkanÄ±.
- **Policy Group ve Proxy Group DesteÄŸi**: Birden fazla politikayÄ± Policy Group iÃ§inde yÃ¶netme. Proxy Group'lara toplu politika atama. Merkezi gÃ¼ncelleme ve deploy iÅŸlemleri.
- **Deploy ve Versiyonlama**: Politika deÄŸiÅŸikliklerini canlÄ± ortama deploy etme. Hangi API Proxy'lerde kullanÄ±ldÄ±ÄŸÄ±nÄ± gÃ¶rme (Policy Usage). Proxy Group ve Policy Group kullanÄ±m raporlarÄ±.

## KullanÄ±m SenaryolarÄ±

| Senaryo | Durum | Ã‡Ã¶zÃ¼m (Politika UygulamasÄ±) | Beklenen DavranÄ±ÅŸ / SonuÃ§ |
| :------ | :---- | :--------------------------- | :------------------------ |
| **Kurumsal Kimlik DoÄŸrulama** | Åirket iÃ§i API'ler iÃ§in LDAP tabanlÄ± kimlik doÄŸrulama gerekli. TÃ¼m kullanÄ±cÄ±lar Active Directory'de tanÄ±mlÄ±. | Identity Role Group olarak LDAP servisi seÃ§ilir. Username variable tanÄ±mlanÄ±r. Politika tÃ¼m API'lere atanÄ±r. | Her istekte Authorization header'Ä± kontrol edilir. LDAP'tan kullanÄ±cÄ± doÄŸrulanÄ±r. BaÅŸarÄ±lÄ± ise backend'e istek iletilir. |
| **Mikroservis Kimlik AktarÄ±mÄ±** | Backend mikroservisler kullanÄ±cÄ± bilgisine ihtiyaÃ§ duyuyor ancak ÅŸifre bilgisi gÃ¶nderilmemeli. | `addUserToHeader=true` ve `clearAuth=true` ayarlanÄ±r. Header adÄ± `X-Authenticated-User` olarak belirlenir. | Gateway kimlik doÄŸrulamasÄ± yapar, Authorization header'Ä± backend'e gÃ¶ndermez. Sadece kullanÄ±cÄ± adÄ±nÄ± X-Authenticated-User header'Ä± ile iletir. |
| **Rol BazlÄ± EriÅŸim KontrolÃ¼** | Admin kullanÄ±cÄ±larÄ± tÃ¼m method'lara eriÅŸebilsin, normal kullanÄ±cÄ±lar sadece GET ve POST yapabilsin. | Authorization yapÄ±landÄ±rmasÄ± aktif edilir. Method Access tanÄ±mlanÄ±r: Admin rolÃ¼: ALL, User rolÃ¼: GET, POST. | Her istekte kullanÄ±cÄ±nÄ±n rolÃ¼ kontrol edilir. Admin DELETE yapabilir ancak User rolÃ¼ 403 hatasÄ± alÄ±r. |
| **IP KÄ±sÄ±tlamalÄ± DoÄŸrulama** | Secret Manager'da tanÄ±mlÄ± kullanÄ±cÄ±lar sadece belirli IP'lerden eriÅŸebilmeli. | Secret Manager Identity seÃ§ilir. `checkClientIpAddress=true` ayarlanÄ±r. Secret Manager'da credential tanÄ±mlarken IP listesi girilir. | Ä°stek geldiÄŸinde hem kullanÄ±cÄ± adÄ±/ÅŸifre hem de IP adresi kontrol edilir. IP uyuÅŸmazsa 401 hatasÄ± dÃ¶ner. |
| **Test ve Production AyrÄ±mÄ±** | Test ortamÄ±nda kimlik doÄŸrulama yapÄ±lmasÄ±n, production'da yapÄ±lsÄ±n. | Condition tanÄ±mlanÄ±r: `Header = X-Environment, Equals, production`. Politika aktif olarak atanÄ±r. | Test ortamÄ±nda X-Environment header'Ä± olmadÄ±ÄŸÄ± iÃ§in politika atlanÄ±r. Production'da header varsa kimlik doÄŸrulama yapÄ±lÄ±r. |
| **External API Kimlik DoÄŸrulama** | KullanÄ±cÄ± bilgileri harici bir REST API'de tutuluyor. | Identity Role Group olarak API servisi seÃ§ilir. API endpoint ve parametreleri yapÄ±landÄ±rÄ±lÄ±r. | Her istekte API Gateway harici API'ye kullanÄ±cÄ± bilgilerini gÃ¶nderir. API'den dÃ¶nen response'a gÃ¶re doÄŸrulama yapÄ±lÄ±r. |
| **Ã‡oklu Kimlik KaynaÄŸÄ±** | BazÄ± kullanÄ±cÄ±lar LDAP'ta, bazÄ±larÄ± Database'de tanÄ±mlÄ±. | Ä°ki ayrÄ± Base64 Authentication politikasÄ± oluÅŸturulur. Condition ile ayrÄ±lÄ±r: LDAP kullanÄ±cÄ±larÄ± iÃ§in `Header = X-Auth-Source, Equals, LDAP`. | Ä°steÄŸe gÃ¶re uygun kimlik kaynaÄŸÄ± seÃ§ilir. LDAP veya Database'den doÄŸrulama yapÄ±lÄ±r. |

## Politika Parametrelerini YapÄ±landÄ±rma

Bu adÄ±mda, kullanÄ±cÄ± **yeni bir politika oluÅŸturabilir** ya da **mevcut politika parametrelerini yapÄ±landÄ±rarak** eriÅŸim kurallarÄ±nÄ± belirleyebilir. TanÄ±mlanan parametreler, politikanÄ±n Ã§alÄ±ÅŸma ÅŸeklini (Ã¶rneÄŸin hangi IP'lerin izinli olacaÄŸÄ±, coÄŸrafi kÄ±sÄ±tlamalar, koÅŸullu aktivasyonlar vb.) doÄŸrudan etkiler. Bu sayede politika hem kuruma Ã¶zel gereksinimlere gÃ¶re Ã¶zelleÅŸtirilebilir hem de merkezi olarak yÃ¶netilebilir.

### Yeni Base64 Authentication PolitikasÄ± OluÅŸturma

<img src="/images/gelistirici/politikalar/basic-kimlik-dogrulama-1.png" alt="Basic Kimlik DoÄŸrulama PolitikasÄ± YapÄ±landÄ±rma" width="1000" />

#### YapÄ±landÄ±rma AdÄ±mlarÄ±

| AdÄ±m | AÃ§Ä±klama / Ä°ÅŸlem |
| :--- | :--------------- |
| **AdÄ±m 1: OluÅŸturma SayfasÄ±na Gitme** | - Sol menÃ¼den **Development â†’ Global Settings â†’ Global Policies â†’ Base64 Authentication** bÃ¶lÃ¼mÃ¼ne gidin.<br />- SaÄŸ Ã¼stteki **[+ Create]** butonuna tÄ±klayÄ±n. |
| **AdÄ±m 2: Temel Bilgileri Girme** | **Policy Status (Politika Durumu):** Aktif/Pasif durumu gÃ¶sterir. Yeni politikalar varsayÄ±lan olarak aktiftir.<br /><br />**Name (Ä°sim) Zorunlu:**<br />Ã–rnek: `Production_Basic_Auth`<br />- Benzersiz isim girin, boÅŸlukla baÅŸlamaz.<br />- Sistem otomatik kontrol eder. YeÅŸil tik: kullanÄ±labilir. KÄ±rmÄ±zÄ± Ã§arpÄ±: mevcut isim.<br /><br />**Description (AÃ§Ä±klama):**<br />Ã–rnek: "Production ortamÄ± iÃ§in LDAP tabanlÄ± kimlik doÄŸrulama"<br />- Maks. 1000 karakter.<br />- PolitikanÄ±n amacÄ±nÄ± aÃ§Ä±klayÄ±n. |
| **AdÄ±m 3: Identity Role Group SeÃ§imi (Zorunlu)** | - **Identity Role Group** alanÄ±nda **[Click to Select]** butonuna tÄ±klayÄ±n.<br />- AÃ§Ä±lan dialogda kimlik kaynaÄŸÄ±nÄ± seÃ§in:<br /><br />**Secret Manager:** Apinizer'da tanÄ±mlÄ± kullanÄ±cÄ±/ÅŸifre/IP listeleri<br />**LDAP:** Active Directory veya OpenLDAP entegrasyonu<br />**Database:** KullanÄ±cÄ± bilgilerini veritabanÄ±ndan sorgulama<br />**API:** Harici REST API ile kimlik doÄŸrulama<br /><br />- SeÃ§im yaptÄ±ktan sonra **[Select]** butonuna tÄ±klayÄ±n.<br />- YanlÄ±ÅŸ seÃ§im yaparsanÄ±z **[X]** butonu ile temizleyebilirsiniz. |
| **AdÄ±m 4: Username Variable TanÄ±mlama (Zorunlu)** | - **Variable for Authorization** alanÄ±nda deÄŸiÅŸken seÃ§imi yapÄ±n.<br />- Ä°ki seÃ§enek mevcuttur:<br /><br />**1. Mevcut Variable SeÃ§me:**<br />**[Select Different]** butonuna tÄ±klayÄ±n. Variable listesinden username bilgisinin yazÄ±lacaÄŸÄ± deÄŸiÅŸkeni seÃ§in.<br /><br />**2. Variable GÃ¼ncelleme:**<br />SeÃ§ili variable'Ä±n **[Update Variable]** butonuna tÄ±klayarak Ã¶zelliklerini dÃ¼zenleyebilirsiniz.<br /><br />- DoÄŸrulanan kullanÄ±cÄ± adÄ± bu variable'a yazÄ±lÄ±r.<br />- Policy chain'de sonraki politikalar veya backend bu deÄŸiÅŸkeni kullanabilir. |
| **AdÄ±m 5: Opsiyonel GÃ¼venlik AyarlarÄ±** | **Check Client IP Address (sadece Secret Manager):**<br />- Checkbox aktif edilirse, Secret Manager'da tanÄ±mlÄ± IP listesi ile istemci IP'si karÅŸÄ±laÅŸtÄ±rÄ±lÄ±r.<br />- IP uyuÅŸmazsa 401 hatasÄ± dÃ¶ner.<br /><br />**Clear Auth:**<br />- Checkbox aktif edilirse, Authorization header backend'e iletilmez.<br />- Mikroservis mimarilerinde backend'in ÅŸifre bilgisine eriÅŸmesini engellemek iÃ§in kullanÄ±lÄ±r.<br /><br />**Add User to Header:**<br />- Toggle aktif edilirse, doÄŸrulanan kullanÄ±cÄ± bilgisi Ã¶zel header ile backend'e iletilir.<br />- **User Header Name** alanÄ± aÃ§Ä±lÄ±r (varsayÄ±lan: `X-Authenticated-UserId`).<br />- Backend bu header'Ä± okuyarak kullanÄ±cÄ± baÄŸlamÄ±nda iÅŸlem yapabilir. |
| **AdÄ±m 6: KoÅŸul TanÄ±mlama (Ä°steÄŸe BaÄŸlÄ±)** | - **Condition** sekmesine geÃ§in.<br />- KoÅŸullar, politikanÄ±n hangi durumda aktif olacaÄŸÄ±nÄ± belirler.<br /><br />**Ã–rnekler:**<br />- Ortam bazlÄ±: `Header = X-Environment, Operator = Equals, Value = production`<br />- API Key bazlÄ±: `Header = X-API-Key, Starts With = PROD-`<br />- Endpoint bazlÄ±: `Path = /api/admin/*`<br /><br />KoÅŸul tanÄ±mlamazsa politika her zaman aktif<br /><br />Detaylar iÃ§in bakabilirsiniz: [KoÅŸullar (Conditions)](/tr/gelistirici/politikalar/politika-nedir#conditions) |
| **AdÄ±m 7: Hata MesajÄ± Ã–zelleÅŸtirme (Ä°steÄŸe BaÄŸlÄ±)** | - **Error Message Customization** sekmesine gidin.<br />- EriÅŸim reddedildiÄŸinde dÃ¶necek mesajÄ± Ã¶zelleÅŸtirin.<br /><br />**VarsayÄ±lan:**<br />`{ "statusCode": 401, "message": "Unauthorized: Invalid credentials" }`<br /><br />**Ã–zel:**<br />`{ "statusCode": 401, "errorCode": "AUTH_FAILED", "message": "Kimlik doÄŸrulama baÅŸarÄ±sÄ±z. KullanÄ±cÄ± adÄ± veya ÅŸifre hatalÄ±." }` |
| **AdÄ±m 8: Kaydetme** | - SaÄŸ Ã¼stteki **[Save]** butonuna tÄ±klayÄ±n.<br /><br />**Kontrol Listesi:**<br />- Benzersiz isim<br />- Zorunlu alanlar dolu<br />- En az bir Identity Role Group seÃ§ili<br /><br />**SonuÃ§:**<br />- Politika listeye eklenir.<br />- API'lere baÄŸlanabilir.<br />- Global politikaysa otomatik uygulanÄ±r. |

**KoÅŸullar (Conditions)** ve **Hata MesajÄ± Ã–zelleÅŸtirme (Error Message Customization)** panellerinin detayÄ± iÃ§in [Politika Nedir?](/tr/gelistirici/politikalar/politika-nedir) sayfasÄ±nÄ± ziyaret edebilirsiniz.

## PolitikayÄ± Silme

Bu politikanÄ±n silme adÄ±mlarÄ± ve kullanÄ±mdayken uygulanacak iÅŸlemler, [Politika Nedir?](/tr/gelistirici/politikalar/politika-nedir) sayfasÄ±ndaki **PolitikayÄ± Silme** bÃ¶lÃ¼mÃ¼nde detaylÄ± olarak aÃ§Ä±klanmÄ±ÅŸtÄ±r. AyrÄ±ntÄ±lÄ± bilgi iÃ§in ilgili bÃ¶lÃ¼me bakabilirsiniz: [PolitikayÄ± Silme](/tr/gelistirici/politikalar/politika-nedir#politikayÄ±-silme)

## PolitikayÄ± DÄ±ÅŸa/Ä°Ã§e Aktarma

Bu politikanÄ±n dÄ±ÅŸa aktarma (Export) adÄ±mlarÄ± ve kullanÄ±labilecek seÃ§enekler, [Politika Nedir?](/tr/gelistirici/politikalar/politika-nedir) sayfasÄ±ndaki **DÄ±ÅŸa Aktarma Ä°ÅŸlemi** bÃ¶lÃ¼mÃ¼nde aÃ§Ä±klanmaktadÄ±r. AyrÄ±ntÄ±lÄ± bilgi iÃ§in ilgili bÃ¶lÃ¼me bakabilirsiniz: [PolitikayÄ± DÄ±ÅŸa/Ä°Ã§e Aktarma](/tr/gelistirici/politikalar/politika-nedir#politikayÄ±-dÄ±ÅŸa-iÃ§e-aktarma)

## PolitikayÄ± API'ye BaÄŸlama

Bu politikanÄ±n API'lere nasÄ±l baÄŸlanacaÄŸÄ±na iliÅŸkin sÃ¼reÃ§, [Politika Nedir?](/tr/gelistirici/politikalar/politika-nedir) sayfasÄ±ndaki **PolitikayÄ± API'ye BaÄŸlama** bÃ¶lÃ¼mÃ¼nde detaylandÄ±rÄ±lmÄ±ÅŸtÄ±r. AyrÄ±ntÄ±lÄ± bilgi iÃ§in ilgili bÃ¶lÃ¼me gÃ¶z atabilirsiniz: [PolitikayÄ± API'ye BaÄŸlama](/tr/gelistirici/politikalar/politika-nedir#politikayÄ±-apiye-baÄŸlama)

## Ä°leri DÃ¼zey Ã–zellikler

| Ã–zellik | AÃ§Ä±klama ve AdÄ±mlar |
| :------ | :------------------ |
| **Authorization (Yetkilendirme) YapÄ±landÄ±rmasÄ±** | - Politika dÃ¼zenleme sayfasÄ±nda **Enable Authorization** toggle'Ä±nÄ± aktif edin.<br />- **Authorization Type** seÃ§in (API, Database, LDAP veya Secret Manager).<br />- **Enable Method Access** aktif edilirse, method bazlÄ± yetkilendirme yapÄ±lÄ±r. Her HTTP method (GET, POST, PUT, DELETE vb.) iÃ§in izinli roller tanÄ±mlanÄ±r.<br />- **Add Roles to Header** aktif edilirse, kullanÄ±cÄ±nÄ±n rolleri backend'e header olarak iletilir. |
| **Ã‡oklu Kimlik KaynaÄŸÄ± DesteÄŸi** | - FarklÄ± kimlik kaynaklarÄ± iÃ§in ayrÄ± politikalar oluÅŸturun (Ã¶rn: LDAP_Auth, Database_Auth).<br />- Her politikaya Condition tanÄ±mlayÄ±n: `Header = X-Auth-Type, Equals, LDAP` veya `Header = X-Auth-Type, Equals, DB`.<br />- AynÄ± API'ye her iki politikayÄ± da ekleyin. Gateway isteÄŸe gÃ¶re uygun politikayÄ± Ã§alÄ±ÅŸtÄ±rÄ±r. |
| **Cascading Authentication (Zincirleme DoÄŸrulama)** | - Ä°lk politika (Base64 Authentication) ile kimlik doÄŸrulama yapÄ±n.<br />- Ä°kinci politika (Ã¶rn: IP Whitelist) ile ek gÃ¼venlik kontrolÃ¼ ekleyin.<br />- Politika sÄ±ralamasÄ±nÄ± doÄŸru yapÄ±n. Kimlik doÄŸrulama Ã¶nce, diÄŸer kontroller sonra gelmelidir. |

## Ä°puÃ§larÄ± ve En Ä°yi Uygulamalar

### YapÄ±lmasÄ± Gerekenler ve En Ä°yi Uygulamalar

| Kategori | AÃ§Ä±klama / Ã–neriler |
| :------- | :------------------ |
| **Kimlik KaynaÄŸÄ± SeÃ§imi** | **KÃ¶tÃ¼:** Her API iÃ§in ayrÄ± Secret Manager credential tanÄ±mlamak.<br />**Ä°yi:** Secret Manager'da grup credential tanÄ±mlarÄ± kullanmak.<br />**En Ä°yi:** Merkezi LDAP veya Identity Provider (IdP) entegrasyonu kullanmak.<br />- TÃ¼m kullanÄ±cÄ±lar tek noktadan yÃ¶netilir, ÅŸifre deÄŸiÅŸiklikleri otomatik yansÄ±r. |
| **Variable KullanÄ±mÄ±** | **KÃ¶tÃ¼:** Username variable tanÄ±mlamamak ve backend'in kullanÄ±cÄ± bilgisine eriÅŸememesi.<br />**Ä°yi:** Username variable tanÄ±mlayÄ±p addUserToHeader ile backend'e gÃ¶ndermek.<br />**En Ä°yi:** Username variable + User ID variable + Roles variable tanÄ±mlayÄ±p tÃ¼m kullanÄ±cÄ± baÄŸlamÄ±nÄ± backend'e aktarmak.<br />- Policy chain'de sonraki politikalar da bu bilgiyi kullanabilir. |
| **Clear Auth KullanÄ±mÄ±** | **KÃ¶tÃ¼:** Authorization header'Ä±nÄ± backend mikroservislere gÃ¶ndermek. Åifre bilgisi gereksiz yere iletilir.<br />**Ä°yi:** `clearAuth=true` ayarlayÄ±p Authorization header'Ä±nÄ± temizlemek.<br />**En Ä°yi:** `clearAuth=true` + `addUserToHeader=true` kombinasyonu.<br />- Backend ÅŸifre gÃ¶rmez, sadece doÄŸrulanmÄ±ÅŸ kullanÄ±cÄ± bilgisini alÄ±r. |
| **Condition KullanÄ±mÄ±** | **KÃ¶tÃ¼:** TÃ¼m API'lere aynÄ± politikayÄ± condition olmadan atamak.<br />**Ä°yi:** Production ve test ortamlarÄ±nÄ± condition ile ayÄ±rmak.<br />**En Ä°yi:** Path, method, header ve query parameter kombinasyonlarÄ± ile granÃ¼ler kontrol.<br />- Ã–rn: Admin endpoint'leri iÃ§in ayrÄ± condition, public endpoint'ler iÃ§in ayrÄ± condition. |
| **Error Message Customization** | **KÃ¶tÃ¼:** VarsayÄ±lan hata mesajlarÄ±nÄ± kullanmak. KullanÄ±cÄ± neyin yanlÄ±ÅŸ gittiÄŸini anlamaz.<br />**Ä°yi:** TÃ¼rkÃ§e hata mesajlarÄ± tanÄ±mlamak: "Kimlik doÄŸrulama baÅŸarÄ±sÄ±z".<br />**En Ä°yi:** DetaylÄ± hata kodlarÄ± ve yÃ¶nlendirme bilgileri:<br />`{ "errorCode": "AUTH_001", "message": "KullanÄ±cÄ± adÄ± veya ÅŸifre hatalÄ±", "supportUrl": "https://support.example.com/auth" }` |

### GÃ¼venlik En Ä°yi UygulamalarÄ±

| GÃ¼venlik AlanÄ± | AÃ§Ä±klama / UyarÄ±lar |
| :-------------- | :------------------ |
| **HTTPS ZorunluluÄŸu** | **Kritik:** Base64 Authentication sadece HTTPS Ã¼zerinden kullanÄ±lmalÄ±dÄ±r. HTTP'de base64 encoding kolayca decode edilebilir ve credentials aÃ§Ä±ÄŸa Ã§Ä±kar. Gateway'de HTTPS enforcement aktif olmalÄ±, HTTP istekleri otomatik olarak HTTPS'e yÃ¶nlendirilmeli veya reddedilmelidir. |
| **IP KÄ±sÄ±tlamasÄ± (Defense in Depth)** | **Ã–neri:** Secret Manager kullanÄ±lÄ±yorsa `checkClientIpAddress=true` ayarlayÄ±n. Hem credential hem de IP kontrolÃ¼ yapÄ±lÄ±r. SaldÄ±rganlar credentials Ã§alsa bile farklÄ± IP'den eriÅŸemez. Ã‡ok katmanlÄ± gÃ¼venlik (defense in depth) prensibi uygulanmÄ±ÅŸ olur. |
| **Credential Rotation** | **UyarÄ±:** Secret Manager'da tanÄ±mlÄ± kullanÄ±cÄ± ÅŸifrelerini dÃ¼zenli olarak deÄŸiÅŸtirin (30-90 gÃ¼n). LDAP/Database kullanÄ±lÄ±yorsa ÅŸifre expiration policy aktif olmalÄ±dÄ±r. Eski ÅŸifreler revoke edilmeli, yeni ÅŸifreler gÃ¼Ã§lÃ¼ olmalÄ±dÄ±r (min 12 karakter, karmaÅŸÄ±k). |
| **Brute Force KorumasÄ±** | **Ã–neri:** Rate Limiting politikasÄ± ile aynÄ± IP'den gelen baÅŸarÄ±sÄ±z authentication denemelerini sÄ±nÄ±rlayÄ±n. Ã–rnek: 5 baÅŸarÄ±sÄ±z denemeden sonra 15 dakika IP block. Log'larda baÅŸarÄ±sÄ±z authentication denemelerini izleyin, anomali tespiti yapÄ±n. |
| **Authorization KontrolÃ¼** | **Kritik:** Sadece kimlik doÄŸrulama yeterli deÄŸildir, yetkilendirme de yapÄ±lmalÄ±dÄ±r. `enableAuthorization=true` ayarlayÄ±n ve method bazlÄ± rol kontrolÃ¼ ekleyin. Aksi halde doÄŸrulanmÄ±ÅŸ her kullanÄ±cÄ± tÃ¼m endpoint'lere eriÅŸebilir (privilege escalation riski). |

### KaÃ§Ä±nÄ±lmasÄ± Gerekenler

| Kategori | AÃ§Ä±klama / UyarÄ±lar |
| :------- | :------------------ |
| **HTTP Ãœzerinden Basic Auth** | **Neden kaÃ§Ä±nÄ±lmalÄ±:** HTTP trafiÄŸi ÅŸifrelenmez. Base64 encoding sadece encoding'dir, ÅŸifreleme deÄŸildir. Network sniffing ile credentials kolayca Ã§alÄ±nabilir.<br />**Alternatif:** Sadece HTTPS Ã¼zerinden Basic Auth kullanÄ±n. Gateway'de HTTP isteklerini reddedin veya HTTPS'e yÃ¶nlendirin. |
| **Authorization Header'Ä±nÄ± Backend'e Ä°letme** | **Neden kaÃ§Ä±nÄ±lmalÄ±:** Backend mikroservislerin ÅŸifre bilgisine ihtiyacÄ± yoktur. Åifre bilgisi backend log'larÄ±na yazÄ±labilir veya 3. parti entegrasyonlarda aÃ§Ä±ÄŸa Ã§Ä±kabilir.<br />**Alternatif:** `clearAuth=true` + `addUserToHeader=true` kullanÄ±n. Backend sadece doÄŸrulanmÄ±ÅŸ kullanÄ±cÄ± bilgisini alÄ±r. |
| **Global Politikada Dikkatli Olmama** | **Neden kaÃ§Ä±nÄ±lmalÄ±:** Global politika deÄŸiÅŸiklikleri tÃ¼m API'leri etkiler. YanlÄ±ÅŸ yapÄ±landÄ±rma tÃ¼m servislerin eriÅŸilemez hale gelmesine neden olabilir.<br />**Alternatif:** Global politika deÄŸiÅŸikliklerini test ortamÄ±nda deneyin. Production'a deploy etmeden Ã¶nce "Used Proxies" kontrolÃ¼ yapÄ±n. |
| **Username Variable TanÄ±mlamamak** | **Neden kaÃ§Ä±nÄ±lmalÄ±:** Backend kullanÄ±cÄ± bilgisine eriÅŸemez. Audit log, user tracking ve personalization Ã¶zellikleri Ã§alÄ±ÅŸmaz.<br />**Alternatif:** Mutlaka username variable tanÄ±mlayÄ±n ve backend'e header ile iletin. User context tÃ¼m mikroservisler arasÄ±nda tutarlÄ± olmalÄ±. |

### Performans Ä°puÃ§larÄ±

| Kriter | Ã–neri / Etki |
| :----- | :---------- |
| **Identity Service Cache** | **Ã–neri:** LDAP veya Database kimlik doÄŸrulamasÄ± kullanÄ±lÄ±yorsa, Gateway'de credential caching aktif edilmelidir. Her istekte harici servis Ã§aÄŸrÄ±sÄ± performans kaybÄ±na neden olur.<br />**Etki:** Cache sÃ¼resi 5-15 dakika arasÄ± olabilir. Cache hit rate %80+ ise response time 50-100ms azalÄ±r. |
| **Connection Pooling** | **Ã–neri:** LDAP veya Database baÄŸlantÄ±larÄ±nda connection pool kullanÄ±n. Her istekte yeni connection aÃ§mak overhead yaratÄ±r.<br />**Etki:** Connection pool size 10-50 arasÄ± ayarlanabilir. Connection reuse ile 20-30ms kazanÃ§ saÄŸlanÄ±r. |
| **Condition DeÄŸerlendirme SÄ±rasÄ±** | **Ã–neri:** Condition kurallarÄ±nÄ± basit â†’ karmaÅŸÄ±k sÄ±rasÄ±na gÃ¶re yazÄ±n. HÄ±zlÄ± sonuÃ§ veren condition'larÄ± Ã¶nce deÄŸerlendirin (Ã¶rn: header check â†’ regex check).<br />**Etki:** Condition evaluation time %30-40 azalÄ±r. |
| **Authorization Cache** | **Ã–neri:** Rol bazlÄ± yetkilendirme kullanÄ±lÄ±yorsa, kullanÄ±cÄ± rollerini cache'leyin. Her istekte rol sorgulama yapmak gereksizdir.<br />**Etki:** Cache TTL 10-30 dakika. Cache kullanÄ±mÄ± ile authorization overhead %60-70 azalÄ±r. |
| **Lightweight Identity Service** | **Ã–neri:** MÃ¼mkÃ¼nse Secret Manager kullanÄ±n. LDAP veya Database'e gÃ¶re 3-5x daha hÄ±zlÄ±dÄ±r Ã§Ã¼nkÃ¼ local memory'de Ã§alÄ±ÅŸÄ±r.<br />**Etki:** Secret Manager response time 5ms'den az. LDAP/Database response time 20-50ms arasÄ±. Kritik performans gereksinimleri iÃ§in Secret Manager tercih edilmelidir. |

## SÄ±k Sorulan Sorular (SSS)

| Kategori | Soru (S) | Cevap (C) |
| :------- | :------- | :-------- |
| **Genel** | Base64 Authentication ile JWT Authentication arasÄ±ndaki fark nedir? | Base64 Authentication her istekte kullanÄ±cÄ± adÄ± ve ÅŸifre gÃ¶nderilir, Gateway Identity Service'i sorgular. JWT Authentication'da ise token tabanlÄ± Ã§alÄ±ÅŸÄ±r, kullanÄ±cÄ± bir kez login olur ve sonraki isteklerde token gÃ¶nderir. JWT stateless'tÄ±r ve daha performanslÄ±dÄ±r. Base64 Auth daha basittir ancak her istekte kimlik doÄŸrulama overhead'i vardÄ±r. |
| **Genel** | Base64 Authentication gÃ¼venli midir? | HTTPS Ã¼zerinden kullanÄ±ldÄ±ÄŸÄ±nda gÃ¼venlidir. HTTP'de kesinlikle kullanÄ±lmamalÄ±dÄ±r Ã§Ã¼nkÃ¼ base64 sadece encoding'dir, ÅŸifreleme deÄŸildir. HTTPS trafiÄŸi TLS ile ÅŸifrelenir, credentials gÃ¼vende kalÄ±r. Ek gÃ¼venlik iÃ§in IP restriction ve rate limiting eklenmelidir. |
| **Teknik** | `X-Forwarded-For` header'Ä±ndan IP nasÄ±l alÄ±nÄ±r? | Kurumsal ortamlarda LDAP (Active Directory) tercih edilir Ã§Ã¼nkÃ¼ merkezi kullanÄ±cÄ± yÃ¶netimi saÄŸlar. KÃ¼Ã§Ã¼k Ã¶lÃ§ekli projelerde Secret Manager yeterlidir. External kullanÄ±cÄ±lar iÃ§in 3. parti Identity Provider (IdP) API entegrasyonu kullanÄ±labilir. Database option legacy sistemler iÃ§in uygundur. |
| **Teknik** | Identity Role Group olarak hangi servis seÃ§ilmeli? | Kurumsal ortamlarda LDAP (Active Directory) tercih edilir Ã§Ã¼nkÃ¼ merkezi kullanÄ±cÄ± yÃ¶netimi saÄŸlar. KÃ¼Ã§Ã¼k Ã¶lÃ§ekli projelerde Secret Manager yeterlidir. External kullanÄ±cÄ±lar iÃ§in 3. parti Identity Provider (IdP) API entegrasyonu kullanÄ±labilir. Database option legacy sistemler iÃ§in uygundur. |
| **Teknik** | `checkClientIpAddress` ne zaman kullanÄ±lmalÄ±? | YÃ¼ksek gÃ¼venlik gerektiren senaryolarda (Ã¶rn: admin paneli, finansal iÅŸlemler) kullanÄ±lmalÄ±dÄ±r. KullanÄ±cÄ±nÄ±n IP adresi sabitlenebiliyorsa (Ã¶rn: ofis IP) etkilidir. Mobil kullanÄ±cÄ±lar veya dinamik IP'li senaryolarda kullanÄ±ÅŸlÄ± deÄŸildir Ã§Ã¼nkÃ¼ IP sÄ±k deÄŸiÅŸir. |
| **KullanÄ±m** | `clearAuth` ne zaman kullanÄ±lmalÄ±? | Mikroservis mimarisinde backend'in ÅŸifre bilgisine ihtiyacÄ± yoksa mutlaka kullanÄ±lmalÄ±dÄ±r. Gateway kimlik doÄŸrulama yapar, backend sadece doÄŸrulanmÄ±ÅŸ kullanÄ±cÄ± bilgisini alÄ±r. Security best practice olarak backend'e credentials gÃ¶nderilmemelidir (least privilege principle). |
| **KullanÄ±m** | Global politika mÄ± Local politika mÄ± kullanmalÄ±yÄ±m? | Ã‡oÄŸu API aynÄ± kimlik doÄŸrulama kuralÄ±nÄ± kullanÄ±yorsa Global politika kullanÄ±n. Merkezi yÃ¶netim ve tutarlÄ±lÄ±k saÄŸlar. Sadece 1-2 API'de farklÄ± kural gerekiyorsa Local politika oluÅŸturun. Local politika test ve geliÅŸtirme aÅŸamasÄ±nda daha esnektir. |

**Bu dokÃ¼man Apinizer Ã¼rÃ¼n dokÃ¼mantasyonunun bir parÃ§asÄ±dÄ±r. Â©ï¸ 2025 Apinizer - TÃ¼m haklarÄ± saklÄ±dÄ±r.**

Bu dokÃ¼mantasyon, Apinizer yazÄ±lÄ±mÄ±nÄ± kullanan kiÅŸi ve kuruluÅŸlar tarafÄ±ndan dahili kullanÄ±m amacÄ±yla serbestÃ§e kullanÄ±labilir, kopyalanabilir ve daÄŸÄ±tÄ±labilir.
