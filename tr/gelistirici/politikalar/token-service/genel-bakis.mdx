---
title: "Token Service Genel Bakış"
description: "OAuth2 ve JWT token'larının üretimi, yönetimi ve doğrulanması için merkezi bir servis sağlar. Token türlerini, lifecycle yönetimini ve storage stratejilerini öğrenebilirsiniz"
---

Token Service, Apinizer platformunda OAuth2 ve JWT token'larının üretimi, yönetimi ve doğrulanması için kullanılan bir servistir. Bu servis, API Proxy'lerinizde kimlik doğrulama ve yetkilendirme işlemlerini merkezi bir noktadan yönetmenizi sağlar.

## Token Service Nedir?

Token Service, Apinizer'ın Token Provider API'si üzerinden çalışan bir bileşendir. İstemcilerden gelen token isteklerini işler, token'ları üretir ve yönetir.

<CardGroup cols={2}>
  <Card title="Token Üretimi" icon="key">
    Access token ve refresh token üretimi
  </Card>
  <Card title="Token Doğrulama" icon="check-circle">
    Token geçerliliğini kontrol etme
  </Card>
  <Card title="Token İptal" icon="ban">
    Token'ları iptal etme (revoke)
  </Card>
  <Card title="Token Yönetimi" icon="gear">
    Token lifecycle yönetimi
  </Card>
</CardGroup>

## Token Türleri

### Access Token

Access token, API'lere erişim için kullanılan token'dır:

* **Kısa Ömürlü**: Genellikle kısa bir süre için geçerlidir (örn: 1 saat)
* **API Erişimi**: API Proxy'lere erişim için kullanılır
* **Bearer Token**: HTTP Authorization header'ında Bearer token olarak gönderilir

### Refresh Token

Refresh token, yeni access token almak için kullanılır:

* **Uzun Ömürlü**: Daha uzun süre geçerlidir (örn: 30 gün)
* **Token Yenileme**: Access token süresi dolduğunda yeni token almak için kullanılır
* **Güvenlik**: Refresh token'lar güvenli bir şekilde saklanmalıdır

### JWT Token

JWT (JSON Web Token) token'ları:

* **Self-Contained**: Token içinde bilgi taşır
* **Doğrulama**: Sertifika ile doğrulanır
* **Veritabanı Gereksiz**: JWT token'lar veritabanında tutulmaz

### OAuth2 Token

OAuth2 token'ları:

* **Veritabanında Saklanır**: MongoDB'de saklanır
* **Cache'lenir**: Performans için Apinizer Cache'e eklenir
* **Yönetilebilir**: Token'lar yönetilebilir ve iptal edilebilir

## Token Lifecycle

Token lifecycle şu aşamalardan oluşur:

```
1. Token İsteği
   │
   ▼
2. Kimlik Doğrulama
   │
   ▼
3. Token Üretimi
   │
   ▼
4. Token Dağıtımı
   │
   ▼
5. Token Kullanımı
   │
   ▼
6. Token Doğrulama
   │
   ├─→ Geçerli → API Erişimi
   │
   └─→ Geçersiz → Hata
   │
   ▼
7. Token Yenileme (Refresh Token ile)
   │
   ▼
8. Token İptal (Revoke)
```

## Token Storage

### JWT Token Storage

JWT token'lar:

* **Veritabanında Tutulmaz**: JWT token'lar self-contained olduğu için veritabanında tutulmaz
* **Sertifika ile Doğrulama**: Token doğrulama için sertifika kullanılır
* **Cache'lenir**: Performans için cache'lenebilir

### OAuth2 Token Storage

OAuth2 token'lar:

* **MongoDB'de Saklanır**: Token bilgileri MongoDB veritabanında saklanır
* **Cache'lenir**: Apinizer Cache'e eklenir
* **Log Kaydı**: Token alma işlemleri log sunucusunda kaydedilir

### Token Cache

Token'lar performans için cache'lenir:

* **Local Cache**: Worker'larda local cache
* **Distributed Cache**: Apinizer Cache'de distributed cache
* **Cache Invalidation**: Token iptal edildiğinde cache'den kaldırılır

## Token Service Kullanımı

### Token Service Endpoint

Token Service endpoint'i:

```
POST /oauth2/token
```

### Token İsteği Formatı

Token isteği genellikle şu formatta yapılır:

```http
POST /oauth2/token HTTP/1.1
Content-Type: application/x-www-form-urlencoded

grant_type=client_credentials&
client_id=your_client_id&
client_secret=your_client_secret
```

### Token Yanıtı

Başarılı token yanıtı:

```json
{
  "access_token": "eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9...",
  "token_type": "Bearer",
  "expires_in": 3600,
  "refresh_token": "refresh_token_value"
}
```

## Token Service Yapılandırması

Token Service'i yapılandırmak için:

1. **Identity Provider**: Token Service için Identity Provider seçin
2. **Token Ayarları**: Token expire süresi, refresh token ayarları
3. **Güvenlik**: Token imzalama, şifreleme ayarları

## Sonraki Adımlar

<CardGroup cols={2}>
  <Card title="Token Alma Yöntemleri" icon="key" href="/tr/gelistirici/politikalar/token-service/token-alma-yontemleri">
    Token alma yöntemlerini öğrenin
  </Card>
  <Card title="Token SSS" icon="question-circle" href="/tr/gelistirici/politikalar/token-service/token-sss">
    Token ile ilgili sık sorulan sorular
  </Card>
  <Card title="OAuth2 Policy" icon="shield" href="/tr/gelistirici/politikalar/oauth2">
    OAuth2 Policy hakkında bilgi edinin
  </Card>
  <Card title="JWT Policy" icon="key" href="/tr/gelistirici/politikalar/jwt">
    JWT Policy hakkında bilgi edinin
  </Card>
</CardGroup>
