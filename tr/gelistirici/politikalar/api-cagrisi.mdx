---
title: "API Ã‡aÄŸrÄ±sÄ±"
description: "API Gateway Ã¼zerinden harici REST API lere gÃ¼venli ve kontrollÃ¼ Ã§aÄŸrÄ± yaparak veri entegrasyonu saÄŸlar"
---

**Son GÃ¼ncelleme**: 06 KasÄ±m 2025 **Hedef Kitle**: Sistem YÃ¶neticileri, Backend GeliÅŸtiriciler, DevOps MÃ¼hendisleri

**ğŸ’¡ Politikalar hakkÄ±nda bilginiz var mÄ±?**\
Bu dokÃ¼man spesifik bir politikanÄ±n detaylÄ± kullanÄ±mÄ±nÄ± anlatÄ±r. EÄŸer Apinizer politika yapÄ±sÄ±nÄ± ilk kez kullanÄ±yorsanÄ±z veya politikalarÄ±n genel Ã§alÄ±ÅŸma prensiplerini Ã¶ÄŸrenmek istiyorsanÄ±z, Ã¶ncelikle [Politika Nedir?](/tr/gelistirici/politikalar/politika-nedir) sayfasÄ±nÄ± okumanÄ±zÄ± Ã¶neririz.

| **Politika AdÄ±** | API Ã‡aÄŸrÄ±sÄ± <em>(API Call)</em> |
|------------------|----------------------------------|
| **Ã–zet** | API Gateway Ã¼zerinden harici REST API'lere gÃ¼venli ve kontrollÃ¼ Ã§aÄŸrÄ± yaparak veri entegrasyonu saÄŸlar |
| **Kategori** | Entegrasyon ve Veri Ä°ÅŸleme |
| **DÃ¶nÃ¼ÅŸ Durum KodlarÄ±** | <table><thead><tr><th><strong>Hata Kodu</strong></th><th><strong>Hata MesajÄ±</strong></th><th><strong>HTTP Durum Kodu</strong></th></tr></thead><tbody><tr><td>ERR-061</td><td>API Call response code ({0}) is unexpected! Expected value is between 200 and 400. API Result Body is: {1}</td><td>503</td></tr><tr><td>ERR-062</td><td>API Call policy failed! Error message for connection is: {0}</td><td>500</td></tr><tr><td>ERR-063</td><td>API Call policy failed! Error message is: {0}</td><td>500</td></tr></tbody></table> |

## Genel BakÄ±ÅŸ

API Call politikasÄ±, API Gateway Ã¼zerinden baÅŸka REST API'leri Ã§aÄŸÄ±rarak mikroservis mimarisinde servis-servis iletiÅŸimi kurar. Gelen istekleri backend sistemlere yÃ¶nlendirir, yanÄ±tlarÄ± iÅŸler ve API Proxy akÄ±ÅŸÄ±na entegre eder. Bu sayede harici servislerden veri Ã§ekmek, istekleri zenginleÅŸtirmek veya birden fazla kaynaktan gelen yanÄ±tlarÄ± birleÅŸtirmek mÃ¼mkÃ¼n olur.

### AmacÄ± Nedir?

- API Gateway Ã¼zerinden geÃ§en istekleri baÅŸka bir REST API'ye yÃ¶nlendirerek mikroservis mimarilerinde servis-servis iletiÅŸimini saÄŸlamak.
- Gelen istekleri zenginleÅŸtirmek, dÃ¶nÃ¼ÅŸtÃ¼rmek ve birden fazla backend servisinden veri toplayarak birleÅŸtirilmiÅŸ yanÄ±tlar oluÅŸturmak (API Orchestration).
- Harici sistemlerden (CRM, ERP, Ã¶deme gateway'leri vb.) veri Ã§ekmek veya veri gÃ¶ndermek iÃ§in gÃ¼venli ve yÃ¶netilebilir bir kÃ¶prÃ¼ oluÅŸturmak.
- Request ve Response mesajlarÄ± Ã¼zerinde header, parameter ve body manipÃ¼lasyonu yaparak veri dÃ¶nÃ¼ÅŸÃ¼mÃ¼ gerÃ§ekleÅŸtirmek.
- Cache mekanizmasÄ± ile sÄ±k kullanÄ±lan API Ã§aÄŸrÄ±larÄ±nÄ±n sonuÃ§larÄ±nÄ± Ã¶nbelleÄŸe alarak performansÄ± artÄ±rmak ve backend sistemlere olan yÃ¼kÃ¼ azaltmak.

### Ã‡alÄ±ÅŸma Prensibi

1. **Ä°stek GeliÅŸi**: API Gateway'e gelen her HTTP/HTTPS isteÄŸi iÃ§in, REST API Call politikasÄ± aktif ise Ã§aÄŸrÄ± iÅŸlemi baÅŸlatÄ±lÄ±r.
2. **Politika KontrolÃ¼**: Sistem aÅŸaÄŸÄ±daki sÄ±rayla kontrol yapar:
   - Condition (koÅŸul) tanÄ±mlÄ± mÄ±? Varsa koÅŸul saÄŸlanÄ±yor mu?
   - Politika aktif mi (active=true)?
   - Variable kullanÄ±lÄ±yor mu yoksa Apinizer default mÄ±?
3. **Request HazÄ±rlama (Before Call)**: Ä°stek gÃ¶nderilmeden Ã¶nce:
   - Body temizlenir veya yeni iÃ§erik eklenir
   - Header ve parametreler manipÃ¼le edilir (ekleme/silme)
   - Data Manipulation kurallarÄ± uygulanÄ±r
   - Cache kontrolÃ¼ yapÄ±lÄ±r (varsa Ã¶nbellekten dÃ¶ner)
4. **API Ã‡aÄŸrÄ±sÄ±**: TanÄ±mlanan URL'ye HTTP method ile istek gÃ¶nderilir:
   - **Synchronous (Senkron)**: YanÄ±t beklenir ve iÅŸleme devam edilir
   - **Asynchronous (Asenkron)**: YanÄ±t beklenmeden iÅŸlem tamamlanÄ±r
5. **Response Ä°ÅŸleme (After Call - Sadece Synchronous)**: Gelen yanÄ±t iÅŸlenir:
   - Body Ã¼zerinde dÃ¶nÃ¼ÅŸÃ¼m yapÄ±lÄ±r (NOT_CHANGE, REPLACE, CLEAR)
   - Header ve parametreler manipÃ¼le edilir
   - Data Manipulation kurallarÄ± uygulanÄ±r
   - Cache'e kaydedilir (aktifse)
6. **Hata Ä°ÅŸleme**: BaÄŸlantÄ± hatasÄ±, timeout veya beklenmeyen yanÄ±tlar iÃ§in Ã¶zelleÅŸtirilebilir HTTP durum kodu ve hata mesajÄ± dÃ¶ndÃ¼rÃ¼lÃ¼r.

## Ã–zellikler ve Yetenekler

### Temel Ã–zellikler

- **Ã‡aÄŸrÄ± Tipi SeÃ§imi**: Synchronous (yanÄ±t bekle) veya Asynchronous (fire-and-forget) mod desteÄŸi. Asenkron modda yanÄ±t iÅŸleme yapÄ±lmaz.
- **HTTP Method DesteÄŸi**: GET, POST, PUT, DELETE, PATCH, HEAD, OPTIONS, TRACE tÃ¼m HTTP methodlarÄ±nÄ± destekler.
- **Timeout YÃ¶netimi**: API Ã§aÄŸrÄ±larÄ±nda maksimum bekleme sÃ¼resini saniye cinsinden tanÄ±mlayarak sonsuz beklemeleri Ã¶nler ve sistem kaynaklarÄ±nÄ± korur.
- **Aktif/Pasif Durum KontrolÃ¼**: PolitikanÄ±n aktif veya pasif durumunu kolayca deÄŸiÅŸtirme (active/passive toggle). Pasif durumda politika uygulanmaz ancak yapÄ±landÄ±rmasÄ± saklanÄ±r.
- **KoÅŸul BazlÄ± Uygulama**: Query Builder ile karmaÅŸÄ±k koÅŸullar oluÅŸturarak politikanÄ±n ne zaman uygulanacaÄŸÄ±nÄ± belirleme (Ã¶rn: sadece belirli endpoint'lere veya header deÄŸerlerine gÃ¶re).

### Ä°leri DÃ¼zey Ã–zellikler

- **Request/Response ManipÃ¼lasyonu**: Before Call ve After Call aÅŸamalarÄ±nda body, header ve parametreler Ã¼zerinde kapsamlÄ± manipÃ¼lasyon. XML, JSON, RAW, URL-Encoded formatlarÄ±nÄ± destekler.
- **Data Manipulation**: Kaynak ve hedef deÄŸiÅŸkenler arasÄ±nda ADD (ekle), REPLACE (deÄŸiÅŸtir), DELETE (sil) operasyonlarÄ± ile veri dÃ¶nÃ¼ÅŸtÃ¼rme. Variable sistemini kullanarak dinamik veri iÅŸleme.
- **SSL/TLS Certificate DesteÄŸi**: Ã–zel sertifikalarla gÃ¼venli (HTTPS) backend servislerine baÄŸlanma. Certificate Manager entegrasyonu ile merkezi sertifika yÃ¶netimi.
- **Cache MekanizmasÄ±**: Distributed (daÄŸÄ±tÄ±k) veya Local (yerel) cache desteÄŸi. Variable bazlÄ± cache key tanÄ±mlama, capacity ve TTL ayarlarÄ±, null response'larÄ± cache'leme seÃ§eneÄŸi.
- **Test Helper**: API Ã§aÄŸrÄ±sÄ± iÃ§in URL'yi otomatik oluÅŸturma. Mevcut API Proxy'lerden veya Proxy Group'lardan endpoint seÃ§imi, environment bazlÄ± test yapma.
- **Export/Import Ã–zelliÄŸi**: Politika yapÄ±landÄ±rmasÄ±nÄ± ZIP dosyasÄ± olarak export etme. FarklÄ± ortamlara (Development, Test, Production) import etme. Versiyon kontrolÃ¼ ve yedekleme imkanÄ±.
- **Policy Group ve Proxy Group DesteÄŸi**: Birden fazla politikayÄ± Policy Group iÃ§inde yÃ¶netme. Proxy Group'lara toplu politika atama. Merkezi gÃ¼ncelleme ve deploy iÅŸlemleri.
- **Deploy ve Versiyonlama**: Politika deÄŸiÅŸikliklerini canlÄ± ortama deploy etme. Hangi API Proxy'lerde kullanÄ±ldÄ±ÄŸÄ±nÄ± gÃ¶rme (Policy Usage). Proxy Group ve Policy Group kullanÄ±m raporlarÄ±.

## KullanÄ±m SenaryolarÄ±

| **Senaryo** | **Durum** | **Ã‡Ã¶zÃ¼m (Politika UygulamasÄ±)** | **Beklenen DavranÄ±ÅŸ / SonuÃ§** |
|:------------|:----------|:---------------------------------|:-------------------------------|
| **Mikroservis Entegrasyonu** | SipariÅŸ API'si, Ã¶deme servisini Ã§aÄŸÄ±rmalÄ± | REST API Call politikasÄ± ile sipariÅŸ endpoint'ine gelen isteklerde Ã¶deme servisine POST Ã§aÄŸrÄ±sÄ± yapÄ±lÄ±r. Body'de sipariÅŸ bilgileri gÃ¶nderilir. | Ã–deme servisi yanÄ±tÄ± alÄ±nÄ±r, baÅŸarÄ±lÄ± ise sipariÅŸ onaylanÄ±r. Timeout 30 saniye. |
| **Veri ZenginleÅŸtirme** | KullanÄ±cÄ± profil API'si, sadece ID ile gelir ancak detaylÄ± bilgi gerekir | Gelen istek body'sindeki userId ile CRM sistemine GET Ã§aÄŸrÄ±sÄ± yapÄ±lÄ±r. Data Manipulation ile CRM yanÄ±tÄ± mevcut response'a eklenir. | Ä°stemciye kullanÄ±cÄ± ID'si + tam profil bilgisi (ad, soyad, email) birleÅŸtirilmiÅŸ ÅŸekilde dÃ¶ner. |
| **Authentication Token YÃ¶netimi** | Backend servisi API Key yerine JWT token bekliyor | Request Header'larÄ±ndan X-API-Key alÄ±nÄ±r, Authentication API'sine gÃ¶nderilir. DÃ¶nen JWT token, Before Call aÅŸamasÄ±nda Authorization header'Ä±na eklenir. | Backend servisi geÃ§erli JWT token ile Ã§aÄŸrÄ±lÄ±r. Ä°stemci API Key kullanmaya devam eder. |
| **Cache ile Performans** | ÃœrÃ¼n katalog API'si her Ã§aÄŸrÄ±da veritabanÄ±na gidiyor | REST API Call ile catalog servisi Ã§aÄŸrÄ±lÄ±r. Cache aktif, capacity: 1000, TTL: 300 saniye. Cache By: "product.category" variable'Ä±. Storage: Distributed. | Ä°lk Ã§aÄŸrÄ±da backend'e gidilir, sonuÃ§ 5 dakika cache'lenir. AynÄ± kategori iÃ§in yapÄ±lan Ã§aÄŸrÄ±lar cache'ten dÃ¶nÃ¼lÃ¼r. |
| **Async Log GÃ¶nderimi** | Her API Ã§aÄŸrÄ±sÄ±nÄ± harici log sistemine kaydetmek gerekiyor | Asynchronous REST API Call ile log servisine POST yapÄ±lÄ±r. Body'de request detaylarÄ± gÃ¶nderilir. Timeout: 5 saniye. | Log servisi yanÄ±tÄ± beklenmez, ana istek akÄ±ÅŸÄ± kesintisiz devam eder. Fire-and-forget mantÄ±ÄŸÄ±. |
| **ÃœÃ§Ã¼ncÃ¼ Parti API Gateway** | Ã–deme gateway'i Ã¶zel header formatÄ± bekliyor | Before Call aÅŸamasÄ±nda tÃ¼m header'lar silinir (removeAllHeadersBeforeCall: true). Yeni header'lar eklenir: X-Merchant-ID, X-Transaction-Type, Authorization (Bearer token). Body XML'den JSON'a dÃ¶nÃ¼ÅŸtÃ¼rÃ¼lÃ¼r. | Ã–deme gateway'i beklediÄŸi formatta istek alÄ±r, entegrasyon baÅŸarÄ±lÄ± olur. |
| **Certificate ile GÃ¼venli Ä°letiÅŸim** | Backend servisi mutual TLS (mTLS) gerektiriyor | Certificate Enabled: true. SeÃ§ilen certificate: "Production_Client_Cert". URL: `https://secure-backend/api`. Timeout: 60 saniye. | Ä°stek client certificate ile gÃ¶nderilir, backend servisi certificate'Ä± doÄŸrular, gÃ¼venli iletiÅŸim saÄŸlanÄ±r. |

## Politika Parametrelerini YapÄ±landÄ±rma

Bu adÄ±mda, kullanÄ±cÄ± **yeni bir politika oluÅŸturabilir** ya da **mevcut politika parametrelerini yapÄ±landÄ±rarak** eriÅŸim kurallarÄ±nÄ± belirleyebilir. TanÄ±mlanan parametreler, politikanÄ±n Ã§alÄ±ÅŸma ÅŸeklini (Ã¶rneÄŸin hangi IP'lerin izinli olacaÄŸÄ±, coÄŸrafi kÄ±sÄ±tlamalar, koÅŸullu aktivasyonlar vb.) doÄŸrudan etkiler. Bu sayede politika hem kuruma Ã¶zel gereksinimlere gÃ¶re Ã¶zelleÅŸtirilebilir hem de merkezi olarak yÃ¶netilebilir.

### Yeni API Call PolitikasÄ± OluÅŸturma

<img src="/images/gelistirici/politikalar/api-cagrisi-1.png" alt="API Call PolitikasÄ± YapÄ±landÄ±rma" width="1000" />

### YapÄ±landÄ±rma AdÄ±mlarÄ±

| **AdÄ±m** | **AÃ§Ä±klama / Ä°ÅŸlem** |
|:---------|:---------------------|
| **AdÄ±m 1: OluÅŸturma SayfasÄ±na Gitme** | - Sol menÃ¼den **Development â†’ Global Settings â†’ Global Policies â†’ API Call** bÃ¶lÃ¼mÃ¼ne gidin.<br />- SaÄŸ Ã¼stteki **[+ Create]** butonuna tÄ±klayÄ±n. |
| **AdÄ±m 2: Temel Bilgileri Girme** | **Policy Status (Politika Durumu):** Aktif/Pasif durumu gÃ¶sterir. Yeni politikalar varsayÄ±lan olarak aktiftir.<br /><br />**Name (Ä°sim) Zorunlu:**<br />Ã–rnek: `Payment_Gateway_Call`<br />- Benzersiz isim girin, boÅŸlukla baÅŸlamaz.<br />- Sistem otomatik kontrol eder. YeÅŸil tik: kullanÄ±labilir. KÄ±rmÄ±zÄ± Ã§arpÄ±: mevcut isim.<br /><br />**Description (AÃ§Ä±klama):**<br />Ã–rnek: "Ã–deme gateway'ine sipariÅŸ onayÄ± iÃ§in API Ã§aÄŸrÄ±sÄ± yapar"<br />- Maks. 1000 karakter.<br />- PolitikanÄ±n amacÄ±nÄ± aÃ§Ä±klayÄ±n. |
| **AdÄ±m 3: Ã‡aÄŸrÄ± Tipini ve Temel AyarlarÄ± YapÄ±landÄ±rma** | **Call Type (Ã‡aÄŸrÄ± Tipi):**<br />- **SYNCHRONOUS:** YanÄ±t beklenir, iÅŸleme devam edilir. Response iÅŸleme yapÄ±lÄ±r.<br />- **ASYNCHRONOUS:** Fire-and-forget. YanÄ±t beklenmez, response iÅŸleme yapÄ±lmaz.<br /><br />**HTTP Method Zorunlu:** Dropdown'dan seÃ§in (GET, POST, PUT, DELETE, PATCH, HEAD, OPTIONS, TRACE)<br /><br />**Base URL Zorunlu:**<br />Ã–rnek: `https://api.payment-gateway.com/v2/charge`<br />- Test Helper (âš™ï¸ ikonu) ile mevcut API Proxy'lerden URL seÃ§ebilirsiniz.<br /><br />**Timeout Zorunlu:**<br />Saniye cinsinden. Ã–rnek: `30` (30 saniye). Min: 1.<br />- API yanÄ±t vermezse bu sÃ¼re sonunda timeout hatasÄ± dÃ¶nÃ¼lÃ¼r. |
| **AdÄ±m 4: Request (Before Call) YapÄ±landÄ±rmasÄ±** | **BODY Sekmesi:**<br /><br />**Clear Body Before Call:**<br />Toggle ile aktif/pasif<br />- Aktif: Gelen istek body'si temizlenir.<br />- Pasif: Gelen body aynen kullanÄ±lÄ±r.<br /><br />**Use Message Template (Clear Body aktifse):**<br />- Content Type: XML, JSON, RAW, URL_ENCODED<br />- Body Content: Textarea'ya ÅŸablon girin. Variable kullanabilirsiniz: `${variable.name}`<br />- URL Encoded seÃ§iliyse: Key-Value tablosu gÃ¶rÃ¼nÃ¼r.<br /><br />**Request Data Manipulation:**<br />- [+ Add] butonuna tÄ±klayÄ±n.<br />- Operation: ADD, REPLACE, DELETE<br />- Source: Value veya Variable<br />- Target: Value veya Variable (ADD'de targetName zorunlu)<br /><br />**HEADER Sekmesi:**<br /><br />**Remove All Headers Before Call:**<br />Toggle<br />- Aktif: TÃ¼m header'lar silinir.<br />- Pasif: Header'lar korunur.<br /><br />**Deleted Headers (Remove All pasifse):**<br />- Silinecek header adlarÄ±nÄ± liste halinde ekleyin: `X-Old-Header`<br /><br />**New Headers:**<br />- Name, Description, Value/Variable, Prefix (Variable seÃ§iliyse: BEARER, BASIC vb.)<br />- Ã–rnek: Name: `Authorization`, Value: `Bearer ${token.jwt}`, Prefix: BEARER<br /><br />**PARAMETER Sekmesi:**<br />- Header ile aynÄ± mantÄ±k. Query parameter'leri iÃ§in kullanÄ±lÄ±r.<br /><br />**CACHE Sekmesi:**<br /><br />**Enable Cache:**<br />Toggle<br />**Apply By (Cache By):**<br />Variable seÃ§in (Ã¶rn: `user.id`, `product.category`)<br />**Capacity Zorunlu:**<br />Ã–rnek: `1000` (1000 kayÄ±t)<br />**TTL Zorunlu:**<br />Saniye cinsinden. Ã–rnek: `300` (5 dakika)<br />**Cache Storage Type:**<br />DISTRIBUTED (daÄŸÄ±tÄ±k) veya LOCAL (yerel)<br />**Cache Null Responses:**<br />Checkbox - Null yanÄ±tlar da cache'lensin mi?<br /><br />**SETTINGS Sekmesi:**<br /><br />**Certificate Enabled:**<br />Toggle<br />- Aktif: Certificate dropdown gÃ¶rÃ¼nÃ¼r.<br />- SeÃ§im: Certificate Manager'dan sertifika seÃ§in.<br />- [Add Certificate] butonu ile yeni sertifika ekleyebilirsiniz. |
| **AdÄ±m 5: Response (After Call) YapÄ±landÄ±rmasÄ± (Sadece SYNCHRONOUS)** | **BODY Sekmesi:**<br /><br />**After Call Body Operation Type:**<br />- **NOT_CHANGE_BODY:** Gelen yanÄ±t aynen dÃ¶ndÃ¼rÃ¼lÃ¼r.<br />- **REPLACE_BODY:** Gelen yanÄ±t tamamen deÄŸiÅŸtirilir.<br />- **CLEAR_BODY:** Gelen yanÄ±t temizlenir, yeni body oluÅŸturulur.<br /><br />**Use Message Template (CLEAR_BODY seÃ§iliyse):**<br />- Content Type: XML, JSON<br />- Body Content: Textarea'ya yanÄ±t ÅŸablonu girin.<br /><br />**Original Message Data Manipulation:**<br />- Before Call ile aynÄ± mantÄ±k. Gelen yanÄ±t Ã¼zerinde ADD, REPLACE, DELETE.<br /><br />**HEADER ve PARAMETER Sekmeleri:**<br />- Request ile aynÄ± yapÄ±. After Call iÃ§in header/parameter manipÃ¼lasyonu. |
| **AdÄ±m 6: KoÅŸul TanÄ±mlama (Ä°steÄŸe BaÄŸlÄ±)** | - **Condition** sekmesine geÃ§in.<br />- KoÅŸullar, politikanÄ±n hangi durumda aktif olacaÄŸÄ±nÄ± belirler.<br /><br />**Ã–rnekler:**<br />- Ortam bazlÄ±: `Header = X-Environment, Operator = Equals, Value = production`<br />- API Key bazlÄ±: `Header = X-API-Key, Starts With = PROD-`<br />- Endpoint bazlÄ±: `Path = /api/payment/*`<br /><br />Detaylar iÃ§in bakabilirsiniz: [KoÅŸullar (Conditions)](/tr/gelistirici/politikalar/politika-nedir#conditions) |
| **AdÄ±m 7: Hata MesajÄ± Ã–zelleÅŸtirme (Ä°steÄŸe BaÄŸlÄ±)** | - **Error Message Customization** sekmesine gidin.<br />- API Ã§aÄŸrÄ±sÄ± baÅŸarÄ±sÄ±z olduÄŸunda dÃ¶necek mesajÄ± Ã¶zelleÅŸtirin.<br /><br />**VarsayÄ±lan:**<br />`{ "statusCode": 500, "message": "REST API call failed" }`<br /><br />**Ã–zel:**<br />`{ "statusCode": 502, "errorCode": "PAYMENT_GATEWAY_ERROR", "message": "Ã–deme servisi yanÄ±t vermiyor", "timestamp": "${current.time}" }` |

| **AdÄ±m 8: Kaydetme** | - SaÄŸ Ã¼stteki **[Save]** butonuna tÄ±klayÄ±n.<br /><br />**Kontrol Listesi:** Benzersiz isim. Zorunlu alanlar dolu. En az bir IP veya grup mevcut<br /><br />**SonuÃ§:**<br />- Politika listeye eklenir.<br />- API'lere baÄŸlanabilir.<br />- Global politikaysa otomatik uygulanÄ±r. |

## PolitikayÄ± Silme

Bu politikanÄ±n silme adÄ±mlarÄ± ve kullanÄ±mdayken uygulanacak iÅŸlemler, *Politika Nedir?* sayfasÄ±ndaki **PolitikayÄ± Silme** bÃ¶lÃ¼mÃ¼nde detaylÄ± olarak aÃ§Ä±klanmÄ±ÅŸtÄ±r. AyrÄ±ntÄ±lÄ± bilgi iÃ§in ilgili bÃ¶lÃ¼me bakabilirsiniz: [PolitikayÄ± Silme](/tr/gelistirici/politikalar/politika-nedir#politika-silme)

## PolitikayÄ± DÄ±ÅŸa/Ä°Ã§e Aktarma

Bu politikanÄ±n dÄ±ÅŸa aktarma (Export) adÄ±mlarÄ± ve kullanÄ±labilecek seÃ§enekler, *Politika Nedir?* sayfasÄ±ndaki **DÄ±ÅŸa Aktarma Ä°ÅŸlemi** bÃ¶lÃ¼mÃ¼nde aÃ§Ä±klanmaktadÄ±r. AyrÄ±ntÄ±lÄ± bilgi iÃ§in ilgili bÃ¶lÃ¼me bakabilirsiniz: [PolitikayÄ± DÄ±ÅŸa/Ä°Ã§e Aktarma](/tr/gelistirici/politikalar/politika-nedir#politika-export)

## PolitikayÄ± API'ye BaÄŸlama

Bu politikanÄ±n API'lere nasÄ±l baÄŸlanacaÄŸÄ±na iliÅŸkin sÃ¼reÃ§, *Politika Nedir?* sayfasÄ±ndaki **PolitikayÄ± API'ye BaÄŸlama** bÃ¶lÃ¼mÃ¼nde detaylandÄ±rÄ±lmÄ±ÅŸtÄ±r. AyrÄ±ntÄ±lÄ± bilgi iÃ§in ilgili bÃ¶lÃ¼me gÃ¶z atabilirsiniz: [PolitikayÄ± API'ye BaÄŸlama](/tr/gelistirici/politikalar/politika-nedir#politika-api-baglama)

## Ä°leri DÃ¼zey Ã–zellikler

Bu bÃ¶lÃ¼mde kullanÄ±cÄ±, **API Call** politikasÄ±nÄ±n geliÅŸmiÅŸ yÃ¶netim kabiliyetlerini kullanarak daha esnek, dinamik ve kurumsal seviyede kontrol elde eder.

| **Ã–zellik** | **AÃ§Ä±klama ve AdÄ±mlar** |
|:------------|:------------------------|
| **Variable BazlÄ± Dynamic URL** | URL iÃ§inde variable kullanarak dinamik endpoint'ler oluÅŸturabilirsiniz.<br />- Variable tanÄ±mlayÄ±n: `backend.base.url = https://api.backend.com`<br />- URL alanÄ±na: `${backend.base.url}/users/${user.id}/profile`<br />- Runtime'da deÄŸerler otomatik doldurulur. |
| **Chained API Calls (Zincir Ã‡aÄŸrÄ±lar)** | Birden fazla REST API Call politikasÄ±nÄ± sÄ±ralÄ± Ã§alÄ±ÅŸtÄ±rarak veri akÄ±ÅŸÄ± oluÅŸturabilirsiniz.<br />- Ä°lk politika ile Authentication API'sini Ã§aÄŸÄ±rÄ±n, token alÄ±n.<br />- Token'Ä± variable'a kaydedin: `auth.token`<br />- Ä°kinci politikada Authorization header'Ä±na `${auth.token}` ekleyin.<br />- Ä°kinci politika ile Data API'sini Ã§aÄŸÄ±rÄ±n. |
| **Conditional Caching** | Sadece belirli durumlarda cache aktif olur.<br />- Cache'i aktif edin.<br />- Condition bÃ¶lÃ¼mÃ¼nde: `Header = X-Cache-Control, Equals = enable`<br />- Ä°stemci cache istediÄŸinde header gÃ¶ndererek cache'i aktif eder. |

## Ä°puÃ§larÄ± ve En Ä°yi Uygulamalar

### YapÄ±lmasÄ± Gerekenler ve En Ä°yi Uygulamalar

| **Kategori** | **AÃ§Ä±klama / Ã–neriler** |
|:-------------|:-------------------------|
| **URL YÃ¶netimi** | **KÃ¶tÃ¼:** URL'leri hard-code olarak yazma: `https://api.prod.com/users`<br />**Ä°yi:** Environment variable kullanma: `${env.api.url}/users`<br />**En Ä°yi:** Variable + Config ile ortam bazlÄ± yÃ¶netim: Test ortamÄ±nda `${backend.url}` = `https://test-api.com`, Production'da `https://prod-api.com` |
| **Timeout DeÄŸerleri** | **KÃ¶tÃ¼:** Ã‡ok yÃ¼ksek timeout (120 saniye) - Sistem kaynaklarÄ± tÃ¼kenir<br />**Ä°yi:** Ortalama timeout (30 saniye) - Ã‡oÄŸu durumda yeterli<br />**En Ä°yi:** Backend servisi response time'Ä±na gÃ¶re optimize edilmiÅŸ timeout. Database sorgularÄ±: 10 saniye, Harici API: 30 saniye, Ã–deme: 60 saniye |
| **Cache Stratejisi** | **KÃ¶tÃ¼:** TÃ¼m API'lere aynÄ± cache ayarÄ± - Gereksiz cache<br />**Ä°yi:** Endpoint bazlÄ± cache - ÃœrÃ¼n listesi: 5 dakika<br />**En Ä°yi:** Variable bazlÄ± cache + Null response kontrolÃ¼. `Cache By: user.tier` â†’ Premium user: 1 dakika, Free user: 10 dakika. Cache Null Responses: false (boÅŸ yanÄ±tlar cache'lenmesin) |
| **Error Handling** | **KÃ¶tÃ¼:** VarsayÄ±lan hata mesajlarÄ± - KullanÄ±cÄ± anlamaz<br />**Ä°yi:** Ã–zel hata mesajlarÄ± - "Backend servisi yanÄ±t vermiyor"<br />**En Ä°yi:** HTTP status code + custom error code + contextual message: `{ statusCode: 504, errorCode: "PAYMENT_TIMEOUT", message: "Ã–deme servisi 30 saniye iÃ§inde yanÄ±t vermedi", retryAfter: 60 }` |
| **Header Manipulation** | **KÃ¶tÃ¼:** TÃ¼m header'larÄ± silip manuel ekleme - GÃ¼venlik riski<br />**Ä°yi:** Sadece gerekli header'larÄ± ekleme/silme<br />**En Ä°yi:** Remove All Headers: false. Sadece hassas header'larÄ± sil (Authorization, Cookie). Backend'in ihtiyacÄ± olan header'larÄ± ekle. Trace iÃ§in correlation-id ekle. |

## GÃ¼venlik En Ä°yi UygulamalarÄ±

| **GÃ¼venlik AlanÄ±** | **AÃ§Ä±klama / UyarÄ±lar** |
|:-------------------|:------------------------|
| **Certificate KullanÄ±mÄ±** | **UyarÄ±:** HTTPS backend'lere certificate olmadan baÄŸlanmak gÃ¼venlik aÃ§Ä±ÄŸÄ± oluÅŸturur.<br />**Ã–neri:** Mutual TLS (mTLS) gerektiren sistemlere mutlaka certificate ekleyin. Certificate revoke kontrolÃ¼ yapÄ±n. Expired sertifikalar uyarÄ± verir.<br />**Kritik:** Production ortamÄ±nda self-signed certificate kullanmayÄ±n. |
| **Hassas Veri Ä°letimi** | **UyarÄ±:** API Key, token, password gibi bilgileri body iÃ§inde plain text gÃ¶ndermeyin.<br />**Ã–neri:** Hassas verileri Variable olarak tanÄ±mlayÄ±n, encrypted saklayÄ±n. Header'da gÃ¶nderin: `Authorization: Bearer ${secure.token}`<br />**Kritik:** Log'lara hassas veri dÃ¼ÅŸmemesine dikkat edin. Data Manipulation'da password alanlarÄ±nÄ± mask edin. |
| **Asynchronous Call GÃ¼venliÄŸi** | **UyarÄ±:** Asenkron Ã§aÄŸrÄ±larda yanÄ±t kontrol edilemez, hata gÃ¶zden kaÃ§abilir.<br />**Ã–neri:** Kritik operasyonlar iÃ§in Synchronous kullanÄ±n. Asenkron sadece log, notification gibi yan iÅŸlemler iÃ§in kullanÄ±n.<br />**Kritik:** Ã–deme, sipariÅŸ onayÄ± gibi iÅŸlemler asÄ±l yanÄ±t alÄ±nmadan tamamlanmamalÄ±. |
| **Input Validation** | **UyarÄ±:** Gelen istekleri doÄŸrulamadan backend'e gÃ¶ndermeyin.<br />**Ã–neri:** Before Call aÅŸamasÄ±nda input validation ekleyin. XSS, SQL Injection riskli karakterleri filtreleyin. Data Manipulation ile sanitization yapÄ±n.<br />**Kritik:** Backend'in beklediÄŸi format dÄ±ÅŸÄ±nda veri gÃ¶nderilmemesini saÄŸlayÄ±n. |
| **Rate Limiting** | **UyarÄ±:** REST API Call politikasÄ± rate limiting yapmaz, backend overload olabilir.<br />**Ã–neri:** REST API Call ile birlikte Rate Limiting politikasÄ± kullanÄ±n. Backend sistemine aÅŸÄ±rÄ± yÃ¼k atmayÄ±n.<br />**Kritik:** DDoS korumasÄ± iÃ§in API Gateway seviyesinde rate limiting ÅŸart. |

## KaÃ§Ä±nÄ±lmasÄ± Gerekenler

| **Kategori** | **AÃ§Ä±klama / UyarÄ±lar** |
|:-------------|:------------------------|
| **Sonsuz Timeout** | **Neden kaÃ§Ä±nÄ±lmalÄ±:** Timeout deÄŸeri Ã§ok yÃ¼ksek olursa (Ã¶rn: 300 saniye), yanÄ±t vermeyen backend'ler sistem kaynaklarÄ±nÄ± tÃ¼ketir. Connection pool dolabilir.<br />**Alternatif:** Makul timeout deÄŸerleri kullanÄ±n (5-60 saniye arasÄ±). Backend servisi optimize edin. Gerekirse async call kullanÄ±n. |
| **Cache Olmadan YoÄŸun Ã‡aÄŸrÄ±** | **Neden kaÃ§Ä±nÄ±lmalÄ±:** AynÄ± veriyi defalarca Ã§aÄŸÄ±rmak backend'i yorar, response time artar, maliyet artar.<br />**Alternatif:** SÄ±k deÄŸiÅŸmeyen veriler (Ã¼rÃ¼n katalog, ayarlar) iÃ§in cache aktif edin. TTL'yi veri gÃ¼ncelleme sÄ±klÄ±ÄŸÄ±na gÃ¶re ayarlayÄ±n. |
| **Gereksiz Data Manipulation** | **Neden kaÃ§Ä±nÄ±lmalÄ±:** Her request/response'da karmaÅŸÄ±k data manipulation yapmak performansÄ± dÃ¼ÅŸÃ¼rÃ¼r. CPU kullanÄ±mÄ± artar.<br />**Alternatif:** Backend servisini deÄŸiÅŸtirerek veriyi istenen formatta gÃ¶ndermeyi tercih edin. Sadece gerektiÄŸinde data manipulation kullanÄ±n. |
| **Global Politikada SÄ±k DeÄŸiÅŸiklik** | **Neden kaÃ§Ä±nÄ±lmalÄ±:** Global politika birden fazla API'de kullanÄ±lÄ±yorsa, bir deÄŸiÅŸiklik tÃ¼m API'leri etkiler. Production'da hata riski artar.<br />**Alternatif:** Test ortamÄ±nda global politikayÄ± test edin. Kritik API'ler iÃ§in local politika kullanÄ±n. DeÄŸiÅŸiklik Ã¶ncesi backup alÄ±n. |

## Performans Ä°puÃ§larÄ±

| **Kriter** | **Ã–neri / Etki** |
|:-----------|:-----------------|
| **Connection Reuse** | **Ã–neri:** Apinizer backend baÄŸlantÄ±larÄ± connection pool ile yÃ¶netir. AynÄ± backend'e birden fazla Ã§aÄŸrÄ± yapÄ±lÄ±yorsa connection reuse edilir.<br />**Etki:** Her Ã§aÄŸrÄ±da yeni TCP baÄŸlantÄ±sÄ± aÃ§Ä±lmaz, latency azalÄ±r. SSL handshake overhead'i dÃ¼ÅŸer. |
| **Cache Hit Ratio** | **Ã–neri:** Cache capacity'yi Ã§ok dÃ¼ÅŸÃ¼k tutmayÄ±n. YoÄŸun kullanÄ±lan endpoint'lere yÃ¼ksek capacity verin. Cache By ile doÄŸru key seÃ§imi yapÄ±n.<br />**Etki:** Cache hit ratio %80+ olursa backend load %80 azalÄ±r. Response time 10-100x hÄ±zlanÄ±r. |
| **Async vs Sync SeÃ§imi** | **Ã–neri:** Kritik olmayan, yavaÅŸ, yanÄ±t gerektirmeyen iÅŸlemler iÃ§in async kullanÄ±n (log, notification, analytics).<br />**Etki:** Ana istek akÄ±ÅŸÄ± bloklanmaz. End-user response time dÃ¼ÅŸer. Backend timeout riski azalÄ±r. |
| **Data Manipulation Optimizasyonu** | **Ã–neri:** BÃ¼yÃ¼k JSON/XML dosyalarÄ±nda gereksiz parsing yapmayÄ±n. Sadece gerekli alanlarÄ± manipÃ¼le edin. Variable kullanarak XPath/JSONPath ile direkt alana eriÅŸin.<br />**Etki:** CPU kullanÄ±mÄ± %50-70 azalÄ±r. Memory consumption dÃ¼ÅŸer. Throughput artar. |
| **Timeout Tuning** | **Ã–neri:** Backend servisi average response time'Ä±nÄ± Ã¶lÃ§Ã¼n. Timeout'u average + 2x standard deviation olarak ayarlayÄ±n. Ã–rnek: Avg: 2s, StdDev: 1s â†’ Timeout: 4s<br />**Etki:** Gereksiz timeout oluÅŸmaz. YanÄ±t vermeyen backend'ler hÄ±zlÄ± fail eder. Resource leak Ã¶nlenir. |

## SÄ±k Sorulan Sorular (SSS)

| **Kategori** | **Soru (S)** | **Cevap (C)** |
|:-------------|:-------------|:--------------|
| **Genel** | REST API Call politikasÄ± ile API Proxy arasÄ±ndaki fark nedir? | API Proxy: Ä°stemciye sunulan public endpoint. REST API Call: Politika olarak baÅŸka bir backend API'sine Ã§aÄŸrÄ± yapar. Bir API Proxy iÃ§inde REST API Call politikasÄ± kullanÄ±labilir. Ã–rnek: Ä°stemci â†’ API Proxy (/payment) â†’ REST API Call â†’ Backend (/charge) |
| **Genel** | AynÄ± API Proxy'de birden fazla REST API Call politikasÄ± kullanabilir miyim? | Evet. FarklÄ± condition'larla veya sÄ±ralÄ± olarak birden fazla REST API Call politikasÄ± kullanabilirsiniz. Ã–rnek: Ä°lk politika authentication, ikinci politika data fetch. |
| **Teknik** | Synchronous ve Asynchronous arasÄ±ndaki fark pratikte nedir? | **Synchronous:** Ä°stek gÃ¶nderilir, yanÄ±t beklenir, yanÄ±t iÅŸlenir, istemciye dÃ¶nÃ¼lÃ¼r. Total time artar ama kontrol tam.<br />**Asynchronous:** Ä°stek gÃ¶nderilir, yanÄ±t beklenmez, hemen istemciye dÃ¶nÃ¼lÃ¼r. Total time dÃ¼ÅŸer ama backend baÅŸarÄ±/hata bilgisi alÄ±namaz. |
| **Teknik** | Cache'de veri bozulmasÄ± veya stale data riski var mÄ±? | TTL doÄŸru ayarlanÄ±rsa risk minimumdur. TTL sonunda cache temizlenir. Manuel cache clear iÃ§in Cache Policy kullanÄ±n. Critical data iÃ§in TTL'yi dÃ¼ÅŸÃ¼k tutun (30-60 saniye). |
| **KullanÄ±m** | Test Helper nedir, nasÄ±l kullanÄ±lÄ±r? | Test Helper, REST API Call iÃ§in URL oluÅŸturmayÄ± kolaylaÅŸtÄ±rÄ±r. Mevcut API Proxy'leri listeler, seÃ§tiÄŸiniz proxy'nin URL'ini otomatik doldurur. Environment seÃ§imi yapabilirsiniz. âš™ï¸ ikonuna tÄ±klayarak aÃ§Ä±lÄ±r. |
| **KullanÄ±m** | Data Manipulation'da ADD ve REPLACE farkÄ± nedir? | **ADD:** Yeni bir alan ekler. Ã–rnek: Response JSON'a yeni alan ekle: `response.user.fullName = ${user.firstName} + ${user.lastName}`<br />**REPLACE:** Mevcut alanÄ± deÄŸiÅŸtirir. Ã–rnek: `request.body.price` deÄŸerini `${discounted.price}` ile deÄŸiÅŸtir. |
| **Hata** | "PolicyRestApiCallConnectionException" hatasÄ± alÄ±yorum. Ã‡Ã¶zÃ¼m? | Backend servisi eriÅŸilemiyor. Kontrol: URL doÄŸru mu? Backend ayakta mÄ±? Network firewall var mÄ±? Certificate gerekiyor mu? Timeout Ã§ok dÃ¼ÅŸÃ¼k mÃ¼ (artÄ±rÄ±n)? |
| **Hata** | Cache Ã§alÄ±ÅŸmÄ±yor, her Ã§aÄŸrÄ±da backend'e gidiyor. Neden? | Kontrol: Cache enabled mi? Capacity ve TTL tanÄ±mlÄ± mÄ±? Cache By variable doÄŸru set edilmiÅŸ mi? AynÄ± cache key ile istek geliyor mu? Cache storage type distributed ise cache sunucusu ayakta mÄ±? |
| **Performans** | REST API Call politikasÄ± performance overhead'i ne kadardÄ±r? | Minimal. Ek latency: Data manipulation varsa 5-20ms, yoksa 2ms'den az. Cache aktifse cache hit'te backend Ã§aÄŸrÄ±sÄ± olmaz, latency %90 dÃ¼ÅŸer. Asynchronous modda overhead neredeyse sÄ±fÄ±r. |

**Bu dokÃ¼man Apinizer Ã¼rÃ¼n dokÃ¼mantasyonunun bir parÃ§asÄ±dÄ±r. Â©ï¸ 2025 Apinizer - TÃ¼m haklarÄ± saklÄ±dÄ±r.**

Bu dokÃ¼mantasyon, Apinizer yazÄ±lÄ±mÄ±nÄ± kullanan kiÅŸi ve kuruluÅŸlar tarafÄ±ndan dahili kullanÄ±m amacÄ±yla serbestÃ§e kullanÄ±labilir, kopyalanabilir ve daÄŸÄ±tÄ±labilir.
