---
title: 'Backend API Kimlik DoÄŸrulama'
description: 'Backend API Ã§aÄŸrÄ±larÄ±na otomatik kimlik doÄŸrulama bilgisi ekler (Basic, Digest, Base64, API Auth)'
---

**Son GÃ¼ncelleme**: 06 KasÄ±m 2025 **Hedef Kitle**: Sistem YÃ¶neticileri, Backend GeliÅŸtiriciler, DevOps MÃ¼hendisleri

**ğŸ’¡ Politikalar hakkÄ±nda bilginiz var mÄ±?**\
Bu dokÃ¼man spesifik bir politikanÄ±n detaylÄ± kullanÄ±mÄ±nÄ± anlatÄ±r. EÄŸer Apinizer politika yapÄ±sÄ±nÄ± ilk kez kullanÄ±yorsanÄ±z veya politikalarÄ±n genel Ã§alÄ±ÅŸma prensiplerini Ã¶ÄŸrenmek istiyorsanÄ±z, Ã¶ncelikle [Politika Nedir?](/tr/gelistirici/politikalar/politika-nedir) sayfasÄ±nÄ± okumanÄ±zÄ± Ã¶neririz.

| **Politika AdÄ±** | Backend API Kimlik DoÄŸrulama <em>(Backend API Authentication)</em> |
|------------------|---------------------------------------------------------------------|
| **Ã–zet** | Backend API Ã§aÄŸrÄ±larÄ±na otomatik kimlik doÄŸrulama bilgisi ekler (Basic, Digest, Base64, API Auth) |
| **Kategori** | GÃ¼venlik ve Kimlik DoÄŸrulama |
| **DÃ¶nÃ¼ÅŸ Durum KodlarÄ±** | <table><thead><tr><th><strong>Hata Kodu</strong></th><th><strong>Hata MesajÄ±</strong></th><th><strong>HTTP Durum Kodu</strong></th></tr></thead><tbody><tr><td>ERR-055</td><td>API Authentication failed! Detailed Exception Message is: {0}</td><td>500</td></tr><tr><td>ERR-056</td><td>API Authentication is not found!</td><td>501</td></tr></tbody></table> |

## Genel BakÄ±ÅŸ

Backend API Authentication politikasÄ±, API Gateway'in backend servislerine eriÅŸim saÄŸlarken kullanacaÄŸÄ± kimlik doÄŸrulama bilgilerini tanÄ±mlar. Plain-Text, Basic, API Key ve Digest gibi farklÄ± authentication yÃ¶ntemlerini destekleyerek backend sistemlere gÃ¼venli baÄŸlantÄ± kurar. Mikroservis mimarilerinde her servisin farklÄ± authentication gereksinimlerini merkezi olarak yÃ¶netmek iÃ§in idealdir.

## AmacÄ± Nedir?

- Backend API servislerine yapÄ±lan Ã§aÄŸrÄ±larda kimlik doÄŸrulama bilgilerinin otomatik olarak eklenmesini saÄŸlar, bÃ¶ylece her istek iÃ§in manuel credential yÃ¶netimi gerekmez.
- Basic, Digest, Base64 ve Ã¶zel API Authentication olmak Ã¼zere dÃ¶rt farklÄ± kimlik doÄŸrulama tÃ¼rÃ¼nÃ¼ destekler ve koÅŸullu kullanÄ±cÄ± adÄ±/ÅŸifre tanÄ±mlarÄ±na izin verir.
- Kimlik doÄŸrulama bilgilerinin HTTP Header, URL Parametresi, Body Message veya Body Injection yÃ¶ntemleriyle backend'e iletilmesini saÄŸlar.
- XML ve JSON formatlarÄ±nda mesaj iÃ§eriÄŸi desteÄŸi sunarak hem SOAP hem de REST servisleriyle uyumlu Ã§alÄ±ÅŸÄ±r.
- KoÅŸul bazlÄ± credential yÃ¶netimi sayesinde farklÄ± senaryolarda (Ã¶rn: environment, endpoint, header deÄŸerine gÃ¶re) farklÄ± kullanÄ±cÄ± bilgileri kullanÄ±labilir.

### Ã‡alÄ±ÅŸma Prensibi

1. **Ä°stek GeliÅŸi**: API Gateway'e gelen her HTTP/HTTPS isteÄŸi iÃ§in, istemin backend servise yÃ¶nlendirilmeden Ã¶nce kimlik doÄŸrulama bilgisinin eklenmesi gerekip gerekmediÄŸi kontrol edilir.
2. **Politika KontrolÃ¼**: API Authentication politikasÄ± aktif ise, sistem aÅŸaÄŸÄ±daki sÄ±rayla kontrol yapar:
   - Condition (koÅŸul) tanÄ±mlÄ± mÄ±? Varsa koÅŸul saÄŸlanÄ±yor mu?
   - Politika aktif mi (active=true)?
   - Variable kullanÄ±lÄ±yor mu yoksa Apinizer default mÄ±?
3. **Kimlik DoÄŸrulama TÃ¼rÃ¼ SeÃ§imi**: TanÄ±mlanan Auth Type'a gÃ¶re (API, BASIC, BASE64, DIGEST) uygun kimlik bilgisi hazÄ±rlanÄ±r. EÄŸer Conditional Expression tanÄ±mlÄ±ysa, koÅŸullara gÃ¶re doÄŸru username/password seÃ§ilir.
4. **Karar Verme**:
   - **KoÅŸul SaÄŸlanÄ±rsa**: Ä°lgili credential bilgisi seÃ§ilen Send Type metoduyla (Header, Param, Body Message, Body Injection) backend Ã§aÄŸrÄ±sÄ±na eklenir ve istek iletilir.
   - **KoÅŸul SaÄŸlanmazsa veya Credential Bulunamazsa**: Ä°stek reddedilir ve Ã¶zelleÅŸtirilebilir hata mesajÄ± dÃ¶ndÃ¼rÃ¼lÃ¼r.
5. **Hata Ä°ÅŸleme**: Politika kuralÄ±na uymayan istekler iÃ§in Ã¶zelleÅŸtirilebilir HTTP durum kodu ve hata mesajÄ± dÃ¶ndÃ¼rÃ¼lÃ¼r.

## Ã–zellikler ve Yetenekler

### Temel Ã–zellikler

- **DÃ¶rt FarklÄ± Kimlik DoÄŸrulama TÃ¼rÃ¼**: API (hazÄ±r auth servisi), Basic Authentication, Base64 encoded Authorization, Digest Authentication desteÄŸi.
- **KoÅŸullu Credential YÃ¶netimi**: Her username/password Ã§ifti iÃ§in ayrÄ± koÅŸullar tanÄ±mlayarak ortam, endpoint veya header deÄŸerine gÃ¶re dinamik credential seÃ§imi yapabilme.
- **DÃ¶rt FarklÄ± GÃ¶nderim YÃ¶ntemi**: Kimlik bilgilerini HTTP Header, URL Parametresi, Body Message veya Body Injection yÃ¶ntemleriyle backend'e gÃ¶nderebilme.
- **XML ve JSON DesteÄŸi**: Body tabanlÄ± kimlik doÄŸrulamada hem XML (SOAP) hem de JSON (REST) formatlarÄ±nÄ± destekleme ve XPath/JSONPath injection yapabilme.
- **API Authentication Entegrasyonu**: HazÄ±r tanÄ±mlÄ± Authentication API servislerini kullanarak merkezi credential yÃ¶netimi yapabilme.
- **Aktif/Pasif Durum KontrolÃ¼**: PolitikanÄ±n aktif veya pasif durumunu kolayca deÄŸiÅŸtirme (active/passive toggle). Pasif durumda politika uygulanmaz ancak yapÄ±landÄ±rmasÄ± saklanÄ±r.
- **KoÅŸul BazlÄ± Uygulama**: Query Builder ile karmaÅŸÄ±k koÅŸullar oluÅŸturarak politikanÄ±n ne zaman uygulanacaÄŸÄ±nÄ± belirleme (Ã¶rn: sadece belirli endpoint'lere veya header deÄŸerlerine gÃ¶re).

### Ä°leri DÃ¼zey Ã–zellikler

- **Dinamik Field Name ve Injection Path TanÄ±mlama**: Header, parametre veya body injection iÃ§in field name ve path'leri Ã¶zelleÅŸtirerek esnek kimlik doÄŸrulama yapÄ±landÄ±rmasÄ± oluÅŸturma.
- **Digest Authentication DesteÄŸi**: Nonce, Created timestamp gibi geliÅŸmiÅŸ gÃ¼venlik parametreleriyle Digest authentication yapabilme (SOAP WS-Security uyumlu).
- **Body Message Template DesteÄŸi**: XML ve JSON iÃ§in hazÄ±r body message template'leri kullanarak hÄ±zlÄ± SOAP/REST kimlik doÄŸrulama konfigÃ¼rasyonu oluÅŸturma.
- **XPath ve JSONPath Test AracÄ±**: Body injection ve message path'lerini canlÄ± olarak test edebilme ve doÄŸrulama yapabilme.
- **Username Expression Table**: Birden fazla username/password Ã§ifti tanÄ±mlayÄ±p her biri iÃ§in farklÄ± koÅŸullar belirleyerek Ã§ok senaryolu credential yÃ¶netimi yapabilme.
- **Export/Import Ã–zelliÄŸi**: Politika yapÄ±landÄ±rmasÄ±nÄ± ZIP dosyasÄ± olarak export etme. FarklÄ± ortamlara (Development, Test, Production) import etme. Versiyon kontrolÃ¼ ve yedekleme imkanÄ±.
- **Policy Group ve Proxy Group DesteÄŸi**: Birden fazla politikayÄ± Policy Group iÃ§inde yÃ¶netme. Proxy Group'lara toplu politika atama. Merkezi gÃ¼ncelleme ve deploy iÅŸlemleri.
- **Deploy ve Versiyonlama**: Politika deÄŸiÅŸikliklerini canlÄ± ortama deploy etme. Hangi API Proxy'lerde kullanÄ±ldÄ±ÄŸÄ±nÄ± gÃ¶rme (Policy Usage). Proxy Group ve Policy Group kullanÄ±m raporlarÄ±.

## KullanÄ±m SenaryolarÄ±

| Senaryo | Durum | Ã‡Ã¶zÃ¼m (Politika UygulamasÄ±) | Beklenen DavranÄ±ÅŸ / SonuÃ§ |
| :------ | :---- | :--------------------------- | :------------------------ |
| **Backend SOAP Servisine WS-Security ile BaÄŸlanma** | SOAP backend servisi Basic Authentication ile korumalÄ± ve WS-Security header'Ä± bekliyor | **Auth Type:** BASIC<br/>**Send Type:** BODY_MESSAGE<br/>**Message Type:** XML<br/>**Username/Password:** Conditional Expression ile tanÄ±mlanmÄ±ÅŸ<br/>**Body Message:** WS-Security template kullan | Gateway, tÃ¼m SOAP isteklerine otomatik olarak WS-Security header'Ä± ekler. Backend servis kimlik doÄŸrulamasÄ±nÄ± geÃ§er ve cevap dÃ¶ner. |
| **Ortam BazlÄ± FarklÄ± Credential KullanÄ±mÄ±** | Test ortamÄ±nda test_user, Production ortamÄ±nda prod_user kullanÄ±lmasÄ± gerekiyor | **Auth Type:** BASIC<br/>**Send Type:** HEADER<br/>**Conditional Expression 1:** Header X-Environment = test â†’ username: test_user<br/>**Conditional Expression 2:** Header X-Environment = prod â†’ username: prod_user | Gateway, gelen istekteki X-Environment header'Ä±na gÃ¶re doÄŸru credential'Ä± seÃ§er ve backend'e iletir. |
| **REST API'ye Base64 Authorization Header Ekleme** | REST backend servisi "Authorization: Basic base64string" header'Ä± bekliyor | **Auth Type:** BASE64<br/>**Send Type:** HEADER<br/>**Password Field Name:** Authorization<br/>**Conditional Expression:** Ä°lgili username/password tanÄ±mlanmÄ±ÅŸ | Gateway, username ve password'Ã¼ otomatik olarak Base64 encode eder ve Authorization header'Ä±na ekleyerek backend'e gÃ¶nderir. |
| **HazÄ±r Authentication API KullanÄ±mÄ±** | Merkezi bir OAuth/OIDC servisi Ã¼zerinden token alÄ±nÄ±p backend'e gÃ¶nderilmesi gerekiyor | **Auth Type:** API<br/>**Auth API ID:** SeÃ§ilen Authentication API servisi<br/>Send Type ve diÄŸer parametreler API konfigÃ¼rasyonuna gÃ¶re | Gateway, tanÄ±mlÄ± Authentication API'yi Ã§aÄŸÄ±rÄ±r, aldÄ±ÄŸÄ± token'Ä± kullanarak backend servisine kimlik doÄŸrulamalÄ± istek gÃ¶nderir |
| **JSON REST API'ye Digest Authentication** | JSON backend servisi digest authentication bekliyor ve nonce/created bilgisi istiyor | **Auth Type:** DIGEST<br/>**Send Type:** BODY_INJECTION<br/>**Message Type:** JSON<br/>**Field Names:** username, password, nonce, created<br/>**Injection Paths:** JSONPath ile belirlenen path'ler | Gateway, digest authentication iÃ§in gerekli nonce ve created deÄŸerlerini oluÅŸturur, JSON body'ye inject eder ve backend'e gÃ¶nderir. |
| **URL Parametresi ile Kimlik DoÄŸrulama** | Legacy backend servisi kimlik bilgilerini query string parametresi olarak bekliyor | **Auth Type:** BASIC<br/>**Send Type:** PARAM<br/>**Username Param Name:** api_user<br/>**Password Param Name:** api_key<br/>**Conditional Expression:** Ä°lgili credential tanÄ±mlanmÄ±ÅŸ | Gateway, kimlik bilgilerini URL query string'ine ekler: `?api_user=xxx&api_key=yyy` |
| **Endpoint BazlÄ± FarklÄ± Credential** | /admin endpoint'i admin credential, /user endpoint'i user credential gerektiriyor | **KoÅŸul (Policy Condition):** Path starts with /admin â†’ Admin API Authentication Policy<br/>**KoÅŸul (Policy Condition):** Path starts with /user â†’ User API Authentication Policy | Gateway, gelen isteÄŸin path'ine gÃ¶re doÄŸru politikayÄ± uygular ve ilgili credential'Ä± kullanÄ±r. Ä°ki ayrÄ± policy veya tek policy iÃ§inde conditional expression kullanÄ±labilir. |

## Politika Parametrelerini YapÄ±landÄ±rma

Bu adÄ±mda, kullanÄ±cÄ± **yeni bir politika oluÅŸturabilir** ya da **mevcut politika parametrelerini yapÄ±landÄ±rarak** eriÅŸim kurallarÄ±nÄ± belirleyebilir. TanÄ±mlanan parametreler, politikanÄ±n Ã§alÄ±ÅŸma ÅŸeklini (Ã¶rneÄŸin hangi IP'lerin izinli olacaÄŸÄ±, coÄŸrafi kÄ±sÄ±tlamalar, koÅŸullu aktivasyonlar vb.) doÄŸrudan etkiler. Bu sayede politika hem kuruma Ã¶zel gereksinimlere gÃ¶re Ã¶zelleÅŸtirilebilir hem de merkezi olarak yÃ¶netilebilir.

### Yeni API Authentication PolitikasÄ± OluÅŸturma

<img src="/images/gelistirici/politikalar/backend-kimlik-dogrulama-1.png" alt="Backend API Kimlik DoÄŸrulama PolitikasÄ± YapÄ±landÄ±rma" width="1000" />

#### YapÄ±landÄ±rma AdÄ±mlarÄ±

| AdÄ±m | AÃ§Ä±klama / Ä°ÅŸlem |
| :--- | :--------------- |
| **AdÄ±m 1: OluÅŸturma SayfasÄ±na Gitme** | - Sol menÃ¼den **Development â†’ Global Settings â†’ Global Policies â†’ API Authentication** bÃ¶lÃ¼mÃ¼ne gidin.<br />- SaÄŸ Ã¼stteki **[+ Create]** butonuna tÄ±klayÄ±n. |
| **AdÄ±m 2: Temel Bilgileri Girme** | **Policy Status (Politika Durumu):** Aktif/Pasif durumu gÃ¶sterir. Yeni politikalar varsayÄ±lan olarak aktiftir.<br /><br />**Name (Ä°sim) Zorunlu:**<br />Ã–rnek: `Production_Backend_Auth`<br />- Benzersiz isim girin, boÅŸlukla baÅŸlamaz.<br />- Sistem otomatik kontrol eder. YeÅŸil tik: kullanÄ±labilir. KÄ±rmÄ±zÄ± Ã§arpÄ±: mevcut isim.<br /><br />**Description (AÃ§Ä±klama):**<br />Ã–rnek: "Production ortamÄ± iÃ§in backend servislerine kimlik doÄŸrulama bilgisi ekler"<br />- Maks. 1000 karakter.<br />- PolitikanÄ±n amacÄ±nÄ± aÃ§Ä±klayÄ±n. |
| **AdÄ±m 3: Kimlik DoÄŸrulama TÃ¼rÃ¼ SeÃ§imi (Auth Type)** | **Auth Type Dropdown (Zorunlu):**<br /><br />**SeÃ§enekler:**<br />- **API:** Ã–nceden tanÄ±mlÄ± Authentication API servisi kullanÄ±r (OAuth, OIDC vb.)<br />- **BASIC:** KullanÄ±cÄ± adÄ± ve ÅŸifre ile temel kimlik doÄŸrulama<br />- **BASE64:** Base64 encoded authorization header<br />- **DIGEST:** Digest authentication (nonce, created ile gÃ¼venli kimlik doÄŸrulama)<br /><br />**Not:**<br />- **API** seÃ§ilirse: "Select Authentication API" butonu gÃ¶rÃ¼nÃ¼r, hazÄ±r auth servisi seÃ§ilir.<br />- **BASIC/BASE64/DIGEST** seÃ§ilirse: Username/Password Expression Table gÃ¶rÃ¼nÃ¼r. |
| **AdÄ±m 4: Username/Password Expression TanÄ±mlama** (Auth Type: BASIC, BASE64 veya DIGEST iÃ§in) | Bu bÃ¶lÃ¼mde, koÅŸullu kullanÄ±cÄ± adÄ± ve ÅŸifre tanÄ±mlarÄ± yapÄ±lÄ±r. Birden fazla credential tanÄ±mlanabilir ve her biri iÃ§in farklÄ± koÅŸullar belirlenebilir.<br /><br />**Username/Password Expression Table:**<br />- **[+ Add]** butonuna tÄ±klayÄ±n.<br />- **Username:** Ä°lgili kullanÄ±cÄ± adÄ±nÄ± girin (Ã¶rn: `backend_user`, `${variable.username}`)<br />- **Password:** Ä°lgili ÅŸifreyi girin (Ã¶rn: `backend_pass123`, `${variable.password}`)<br />- **Condition (KoÅŸul):** Query Builder ile koÅŸul tanÄ±mlayÄ±n<br />  - Ã–rnek: `Header[X-Environment] Equals production`<br />  - Ã–rnek: `Path Starts With /admin`<br /><br />**Not:**<br />- En az bir username/password tanÄ±mÄ± zorunludur.<br />- KoÅŸullar sÄ±rayla deÄŸerlendirilir, ilk eÅŸleÅŸen kullanÄ±lÄ±r. |
| **AdÄ±m 5: GÃ¶nderim YÃ¶ntemi SeÃ§imi (Send Type)** (Auth Type: BASIC, BASE64 veya DIGEST iÃ§in) | **Send Type Dropdown (Zorunlu):**<br /><br />**HEADER:** Kimlik bilgileri HTTP header'larÄ±nda gÃ¶nderilir<br />- **Username Header Name:** KullanÄ±cÄ± adÄ± header adÄ± (Ã¶rn: `X-Username`)<br />- **Password Header Name:** Åifre header adÄ± (Ã¶rn: `X-Password`)<br />- **Digest iÃ§in:** Created Header Name, Nonce Header Name<br /><br />**PARAM:** Kimlik bilgileri URL parametresi olarak gÃ¶nderilir<br />- **Username Param Name:** KullanÄ±cÄ± adÄ± parametre adÄ± (Ã¶rn: `user`)<br />- **Password Param Name:** Åifre parametre adÄ± (Ã¶rn: `pass`)<br />- **Digest iÃ§in:** Created Param Name, Nonce Param Name<br /><br />**BODY_MESSAGE:** HazÄ±r mesaj template'i body'ye eklenir<br />- **Message Content Type:** XML veya JSON seÃ§in<br />- **Body Message:** Otomatik template yÃ¼klenir (WS-Security iÃ§in XML, JSON iÃ§in username/password object)<br />- **Body Message Injection Path:** Template'in nereye ekleneceÄŸi (XPath veya JSONPath)<br /><br />**BODY_INJECTION:** Mevcut body'ye field injection yapÄ±lÄ±r<br />- **Message Content Type:** XML veya JSON seÃ§in<br />- **Username Field Name:** KullanÄ±cÄ± adÄ± field adÄ± (Ã¶rn: `username`)<br />- **Username Injection Path:** XPath veya JSONPath (Ã¶rn: `$.credentials.username`)<br />- **Password Field Name:** Åifre field adÄ± (Ã¶rn: `password`)<br />- **Password Injection Path:** XPath veya JSONPath (Ã¶rn: `$.credentials.password`)<br />- **Digest iÃ§in:** Created Field Name, Created Injection Path, Nonce Field Name, Nonce Injection Path |
| **AdÄ±m 6: KoÅŸul TanÄ±mlama (Ä°steÄŸe BaÄŸlÄ±)** | - **Condition** sekmesine geÃ§in.<br />- KoÅŸullar, politikanÄ±n hangi durumda aktif olacaÄŸÄ±nÄ± belirler.<br /><br />**Ã–rnekler:**<br />- Ortam bazlÄ±: `Header = X-Environment, Operator = Equals, Value = production`<br />- API Key bazlÄ±: `Header = X-API-Key, Starts With = PROD-`<br />- Endpoint bazlÄ±: `Path = /api/admin/*`<br /><br />KoÅŸul tanÄ±mlamazsa politika her zaman aktif<br /><br />Detaylar iÃ§in bakabilirsiniz: [KoÅŸullar (Conditions)](/tr/gelistirici/politikalar/politika-nedir#conditions) |
| **AdÄ±m 7: Hata MesajÄ± Ã–zelleÅŸtirme (Ä°steÄŸe BaÄŸlÄ±)** | - **Error Message Customization** sekmesine gidin.<br />- EriÅŸim reddedildiÄŸinde dÃ¶necek mesajÄ± Ã¶zelleÅŸtirin.<br /><br />**VarsayÄ±lan:**<br />`{ "statusCode": 401, "message": "Unauthorized: Authentication credentials are missing or invalid" }`<br /><br />**Ã–zel:**<br />`{ "statusCode": 401, "errorCode": "AUTH_FAILED", "message": "Backend kimlik doÄŸrulama baÅŸarÄ±sÄ±z. LÃ¼tfen sistem yÃ¶neticisi ile iletiÅŸime geÃ§in." }` |
| **AdÄ±m 8: Kaydetme** | - SaÄŸ Ã¼stteki **[Save]** butonuna tÄ±klayÄ±n.<br /><br />**Kontrol Listesi:**<br />- Benzersiz isim<br />- Zorunlu alanlar dolu<br />- En az bir username/password tanÄ±mÄ± mevcut<br /><br />**SonuÃ§:**<br />- Politika listeye eklenir.<br />- API'lere baÄŸlanabilir.<br />- Global politikaysa otomatik uygulanÄ±r. |

**KoÅŸullar (Conditions)** ve **Hata MesajÄ± Ã–zelleÅŸtirme (Error Message Customization)** panellerinin detayÄ± iÃ§in [Politika Nedir?](/tr/gelistirici/politikalar/politika-nedir) sayfasÄ±nÄ± ziyaret edebilirsiniz.

## PolitikayÄ± Silme

Bu politikanÄ±n silme adÄ±mlarÄ± ve kullanÄ±mdayken uygulanacak iÅŸlemler, [Politika Nedir?](/tr/gelistirici/politikalar/politika-nedir) sayfasÄ±ndaki **PolitikayÄ± Silme** bÃ¶lÃ¼mÃ¼nde detaylÄ± olarak aÃ§Ä±klanmÄ±ÅŸtÄ±r. AyrÄ±ntÄ±lÄ± bilgi iÃ§in ilgili bÃ¶lÃ¼me bakabilirsiniz: [PolitikayÄ± Silme](/tr/gelistirici/politikalar/politika-nedir#politikayÄ±-silme)

## PolitikayÄ± DÄ±ÅŸa/Ä°Ã§e Aktarma

Bu politikanÄ±n dÄ±ÅŸa aktarma (Export) adÄ±mlarÄ± ve kullanÄ±labilecek seÃ§enekler, [Politika Nedir?](/tr/gelistirici/politikalar/politika-nedir) sayfasÄ±ndaki **DÄ±ÅŸa Aktarma Ä°ÅŸlemi** bÃ¶lÃ¼mÃ¼nde aÃ§Ä±klanmaktadÄ±r. AyrÄ±ntÄ±lÄ± bilgi iÃ§in ilgili bÃ¶lÃ¼me bakabilirsiniz: [PolitikayÄ± DÄ±ÅŸa/Ä°Ã§e Aktarma](/tr/gelistirici/politikalar/politika-nedir#politikayÄ±-dÄ±ÅŸa-iÃ§e-aktarma)

## PolitikayÄ± API'ye BaÄŸlama

Bu politikanÄ±n API'lere nasÄ±l baÄŸlanacaÄŸÄ±na iliÅŸkin sÃ¼reÃ§, [Politika Nedir?](/tr/gelistirici/politikalar/politika-nedir) sayfasÄ±ndaki **PolitikayÄ± API'ye BaÄŸlama** bÃ¶lÃ¼mÃ¼nde detaylandÄ±rÄ±lmÄ±ÅŸtÄ±r. AyrÄ±ntÄ±lÄ± bilgi iÃ§in ilgili bÃ¶lÃ¼me gÃ¶z atabilirsiniz: [PolitikayÄ± API'ye BaÄŸlama](/tr/gelistirici/politikalar/politika-nedir#politikayÄ±-apiye-baÄŸlama)

## Ä°leri DÃ¼zey Ã–zellikler

| Ã–zellik | AÃ§Ä±klama ve AdÄ±mlar |
| :------ | :------------------ |
| **Variable Expression KullanÄ±mÄ±** | - Username ve password alanlarÄ±nda deÄŸiÅŸken ifadeleri kullanÄ±n (Ã¶rn: `${env.backend_user}`, `${vault.db_password}`)<br />- API Proxy veya Global Settings â†’ Variables bÃ¶lÃ¼mÃ¼nden ilgili deÄŸiÅŸkenleri tanÄ±mlayÄ±n<br />- DeÄŸiÅŸkenler runtime'da Ã§Ã¶zÃ¼mlenir ve gÃ¼venli credential yÃ¶netimi saÄŸlanÄ±r<br /><br />**Fayda:** Credential'lar kod iÃ§inde hardcoded olmaz, merkezi yÃ¶netim ve gÃ¼venlik artar. |
| **XPath ve JSONPath Test AracÄ±** | - Send Type olarak BODY_MESSAGE veya BODY_INJECTION seÃ§in<br />- Field Name ve Injection Path alanlarÄ±nÄ±n yanÄ±ndaki **[Test]** butonuna tÄ±klayÄ±n<br />- Test penceresinde sample XML/JSON mesajÄ±nÄ±zÄ± girin<br />- TanÄ±mladÄ±ÄŸÄ±nÄ±z XPath/JSONPath ifadesinin doÄŸru Ã§alÄ±ÅŸÄ±p Ã§alÄ±ÅŸmadÄ±ÄŸÄ±nÄ± gÃ¶rÃ¼n<br /><br />**Fayda:** CanlÄ± ortama almadan Ã¶nce injection path'lerinizi test edebilir, hata riskini azaltÄ±rsÄ±nÄ±z. |
| **Authentication API Entegrasyonu** | - Global Settings â†’ Authentication API bÃ¶lÃ¼mÃ¼nden OAuth, OIDC veya Custom Auth servisi tanÄ±mlayÄ±n<br />- API Authentication politikasÄ±nda Auth Type = API seÃ§in<br />- "Select Authentication API" butonuna tÄ±klayarak tanÄ±mlÄ± auth servisini seÃ§in<br />- Backend Ã§aÄŸrÄ±larÄ±nda otomatik olarak token alÄ±nÄ±p kullanÄ±lÄ±r<br /><br />**Fayda:** OAuth/OIDC gibi karmaÅŸÄ±k auth flow'larÄ±nÄ± merkezi yÃ¶netim ve token yenileme otomatik yapÄ±lÄ±r. |

## Ä°puÃ§larÄ± ve En Ä°yi Uygulamalar

### YapÄ±lmasÄ± Gerekenler ve En Ä°yi Uygulamalar

| Kategori | AÃ§Ä±klama / Ã–neriler |
| :------- | :------------------ |
| **Credential YÃ¶netimi** | **KÃ¶tÃ¼:** KullanÄ±cÄ± adÄ± ve ÅŸifreleri politika iÃ§inde hardcode etmek: `username: admin, password: 12345`<br />**Ä°yi:** Variable expression kullanmak: `username: ${backend.user}, password: ${backend.pass}`<br />**En Ä°yi:** Variable expression + Vault entegrasyonu kullanmak: `username: ${vault.backend_user}, password: ${vault.backend_password}`<br />- GÃ¼venlik maksimum dÃ¼zeyde, credential rotation kolay |
| **KoÅŸul TanÄ±mlama** | **KÃ¶tÃ¼:** Tek bir global politikada tÃ¼m ortamlar iÃ§in aynÄ± credential kullanmak<br />**Ä°yi:** Her ortam iÃ§in ayrÄ± politika oluÅŸturmak (Dev_Auth, Test_Auth, Prod_Auth)<br />**En Ä°yi:** Tek politika iÃ§inde conditional expression kullanarak ortam bazlÄ± credential yÃ¶netimi: `Header[X-Environment] = prod â†’ prod_user`<br />- Merkezi yÃ¶netim, daha az politika, daha kolay bakÄ±m |
| **Send Type SeÃ§imi** | **KÃ¶tÃ¼:** Legacy sistemler iÃ§in BODY_MESSAGE/BODY_INJECTION kullanmak (performans dÃ¼ÅŸer)<br />**Ä°yi:** Modern REST API'ler iÃ§in HEADER kullanmak (standart ve hÄ±zlÄ±)<br />**En Ä°yi:** Backend'in beklentisine gÃ¶re uygun yÃ¶ntemi seÃ§mek: SOAP WS-Security iÃ§in BODY_MESSAGE, REST iÃ§in HEADER, Legacy iÃ§in PARAM<br />- Uyumluluk ve performans dengesi |
| **Test ve Deploy Stratejisi** | **KÃ¶tÃ¼:** Global politikayÄ± doÄŸrudan production'da oluÅŸturup test etmek<br />**Ä°yi:** Ã–nce local politika olarak test etmek, sonra global yapmak<br />**En Ä°yi:** Dev ortamÄ±nda global politika oluÅŸturup test etmek â†’ Export â†’ Test ortamÄ±na import â†’ Test â†’ Prod ortamÄ±na import<br />- Risk minimize, kontrollÃ¼ deploy |
| **Authentication API KullanÄ±mÄ±** | **KÃ¶tÃ¼:** OAuth token'larÄ±nÄ± manuel olarak yÃ¶netmeye Ã§alÄ±ÅŸmak (token expiration, refresh logic vb.)<br />**Ä°yi:** Her API iÃ§in ayrÄ± auth logic yazmak<br />**En Ä°yi:** Merkezi Authentication API tanÄ±mlayÄ±p tÃ¼m API'lerde kullanmak<br />- Token yenileme otomatik, merkezi yÃ¶netim, kod tekrarÄ± yok |

### GÃ¼venlik En Ä°yi UygulamalarÄ±

| GÃ¼venlik AlanÄ± | AÃ§Ä±klama / UyarÄ±lar |
| :-------------- | :------------------ |
| **Credential GÃ¼venliÄŸi** | **UyarÄ±:** Credential'larÄ± asla log'lara yazdÄ±rmayÄ±n. Politika iÃ§inde credential'larÄ± hardcode etmekten kaÃ§Ä±nÄ±n. Åifreleri dÃ¼z metin olarak saklamayÄ±n.<br />**Ã‡Ã¶zÃ¼m:** Variable expression + Vault entegrasyonu kullanÄ±n. Log masking aktif olsun. Credential rotation politikalarÄ± uygulayÄ±n. |
| **HTTPS KullanÄ±mÄ±** | **UyarÄ±:** Backend kimlik doÄŸrulama bilgileri HTTP Ã¼zerinden gÃ¶nderilirse man-in-the-middle saldÄ±rÄ±larÄ±na aÃ§Ä±k hale gelir.<br />**Ã‡Ã¶zÃ¼m:** Backend servislere mutlaka HTTPS Ã¼zerinden baÄŸlanÄ±n. TLS 1.2 veya Ã¼stÃ¼ kullanÄ±n. Self-signed sertifika kullanmayÄ±n (prod iÃ§in). |
| **Least Privilege Prensibi** | **UyarÄ±:** TÃ¼m backend servisleri iÃ§in aynÄ± admin credential'Ä± kullanmak bÃ¼yÃ¼k gÃ¼venlik riski oluÅŸturur.<br />**Ã‡Ã¶zÃ¼m:** Her backend servisi iÃ§in ayrÄ±, sadece gerekli yetkilere sahip credential kullanÄ±n. Conditional expression ile servis bazlÄ± credential yÃ¶netimi yapÄ±n. |
| **Audit ve Monitoring** | **UyarÄ±:** Kimlik doÄŸrulama baÅŸarÄ±sÄ±zlÄ±klarÄ±nÄ± izlemezseniz saldÄ±rÄ± giriÅŸimlerini kaÃ§Ä±rÄ±rsÄ±nÄ±z.<br />**Ã‡Ã¶zÃ¼m:** Auth failure log'larÄ±nÄ± aktif edin. Monitoring ve alerting kurun. BaÅŸarÄ±sÄ±z auth denemelerini limit edin (Rate Limiting ile birlikte kullanÄ±n). |
| **Policy Update GÃ¼venliÄŸi** | **UyarÄ±:** Global politikayÄ± gÃ¼ncellerken tÃ¼m baÄŸlÄ± API'lerde kimlik doÄŸrulama kesintiye uÄŸrayabilir.<br />**Ã‡Ã¶zÃ¼m:** Ã–nce test ortamÄ±nda deneyin. Production'da gÃ¼ncelleme yapmadan Ã¶nce backup alÄ±n. Deploy'dan sonra Used Proxies'de test edin. Blue-green deployment stratejisi kullanÄ±n. |

### KaÃ§Ä±nÄ±lmasÄ± Gerekenler

| Kategori | AÃ§Ä±klama / UyarÄ±lar |
| :------- | :------------------ |
| **Hardcoded Credential KullanÄ±mÄ±** | **Neden kaÃ§Ä±nÄ±lmalÄ±:** GÃ¼venlik riski oluÅŸturur. Credential deÄŸiÅŸtiÄŸinde tÃ¼m politikalarÄ± manuel gÃ¼ncellemek gerekir. Kod review'lerde credential'lar gÃ¶rÃ¼nÃ¼r.<br />**Alternatif:** Variable expression ve Vault kullanÄ±n: `${vault.backend_credentials.username}` |
| **Send Type YanlÄ±ÅŸ SeÃ§imi** | **Neden kaÃ§Ä±nÄ±lmalÄ±:** Backend'in beklediÄŸi format dÄ±ÅŸÄ±nda gÃ¶nderim yapÄ±lÄ±rsa kimlik doÄŸrulama baÅŸarÄ±sÄ±z olur. BODY_MESSAGE kullanÄ±rken mevcut body'yi ezebilir.<br />**Alternatif:** Backend dokÃ¼mantasyonunu inceleyin ve uygun Send Type'Ä± seÃ§in. BODY_INJECTION kullanÄ±rken path'lerin doÄŸruluÄŸunu test edin. |
| **Conditional Expression Kullanmadan Ã‡ok SayÄ±da Politika OluÅŸturma** | **Neden kaÃ§Ä±nÄ±lmalÄ±:** YÃ¶netim zorlaÅŸÄ±r. Deploy karmaÅŸÄ±k hale gelir. AynÄ± mantÄ±ÄŸÄ± farklÄ± politikalarda tekrarlamak hata riskini artÄ±rÄ±r.<br />**Alternatif:** Tek politika iÃ§inde conditional expression kullanarak farklÄ± senaryolarÄ± yÃ¶netin. Policy Group kullanÄ±n. |
| **Test Etmeden Production'a Deploy** | **Neden kaÃ§Ä±nÄ±lmalÄ±:** YanlÄ±ÅŸ yapÄ±landÄ±rma tÃ¼m backend Ã§aÄŸrÄ±larÄ±nÄ± kÄ±rar. Credential yanlÄ±ÅŸsa servisler eriÅŸilemez hale gelir. Downtime oluÅŸur.<br />**Alternatif:** Ã–nce local politika olarak test edin. Dev/Test ortamlarÄ±nda doÄŸrulayÄ±n. Canary deployment kullanÄ±n. |

### Performans Ä°puÃ§larÄ±

| Kriter | Ã–neri / Etki |
| :----- | :---------- |
| **Send Type PerformansÄ±** | **Ã–neri:** HEADER veya PARAM kullanÄ±n (en hÄ±zlÄ±). BODY_MESSAGE ve BODY_INJECTION daha fazla iÅŸlem gerektirir.<br />**Etki:** HEADER: ~1ms ek sÃ¼re, BODY_MESSAGE: ~5-10ms, BODY_INJECTION: ~10-20ms (message boyutuna baÄŸlÄ±) |
| **Conditional Expression SayÄ±sÄ±** | **Ã–neri:** Conditional expression sayÄ±sÄ±nÄ± makul seviyede tutun (max 5-10). KarmaÅŸÄ±k XPath/JSONPath yerine basit koÅŸullar kullanÄ±n.<br />**Etki:** Her expression ~0.5ms ekler. Ã‡ok fazla expression runtime overhead oluÅŸturur. |
| **Variable Expression Ã‡Ã¶zÃ¼mleme** | **Ã–neri:** Variable expression'larÄ± cache'lenen deÄŸiÅŸkenlerden Ã§Ã¶zÃ¼mleyin. Her istekte external Vault'a gitmekten kaÃ§Ä±nÄ±n (caching kullanÄ±n).<br />**Etki:** Cache hit: ~0.1ms, Cache miss + Vault call: ~50-100ms |
| **Message Content Type** | **Ã–neri:** JSON kullanÄ±n (daha hafif ve hÄ±zlÄ± parse). XML sadece SOAP servisleri iÃ§in gerekli.<br />**Etki:** JSON parsing: ~2-5ms, XML parsing: ~10-20ms (message boyutuna baÄŸlÄ±) |
| **Authentication API Cache** | **Ã–neri:** Authentication API kullanÄ±yorsanÄ±z token cache'i aktif edin. Token expiration sÃ¼resini optimize edin (ë„ˆë¬´ kÄ±sa: Ã§ok sÄ±k yenileme, Ã§ok uzun: gÃ¼venlik riski).<br />**Etki:** Cached token: ~0.5ms, Yeni token almak: ~100-500ms (auth service'e baÄŸlÄ±) |

## SÄ±k Sorulan Sorular (SSS)

| Kategori | Soru (S) | Cevap (C) |
| :------- | :------- | :-------- |
| **Genel** | API Authentication politikasÄ± ne zaman kullanÄ±lmalÄ±? | Backend servisleriniz kimlik doÄŸrulama gerektiriyorsa ve bu bilgileri her istekte manuel eklemek istemiyorsanÄ±z bu politikayÄ± kullanmalÄ±sÄ±nÄ±z. Ã–zellikle SOAP WS-Security, Basic Auth, OAuth token yÃ¶netimi gibi durumlarda idealdir. |
| **Genel** | Birden fazla Authentication politikasÄ± aynÄ± API'ye atanabilir mi? | HayÄ±r, bir API'ye sadece bir tane API Authentication politikasÄ± atanabilir. Ancak conditional expression kullanarak tek politika iÃ§inde birden fazla senaryo yÃ¶netebilirsiniz. |
| **Teknik** | BODY_MESSAGE ve BODY_INJECTION arasÄ±ndaki fark nedir? | **BODY_MESSAGE:** HazÄ±r bir template'i mesajÄ±n belirli bir yerine ekler (Ã¶rn: SOAP Header). Mevcut body'yi deÄŸiÅŸtirmez, sadece ekler.<br /><br />**BODY_INJECTION:** Mevcut body iÃ§indeki belirli alanlara credential bilgilerini inject eder. XPath/JSONPath ile hedef field'larÄ± bulup deÄŸer atar. |
| **Teknik** | Authentication API kullanÄ±rken token yenileme otomatik mi yapÄ±lÄ±yor? | Evet, Authentication API yapÄ±landÄ±rmasÄ±nda token expiration ve refresh logic tanÄ±mlÄ±ysa Apinizer otomatik olarak token'Ä± yeniler. Manual mÃ¼dahale gerekmez. |
| **KullanÄ±m** | Ortam bazlÄ± farklÄ± credential nasÄ±l yÃ¶netilir? | Ä°ki yÃ¶ntem:<br />1) Conditional Expression kullanarak tek politika iÃ§inde `Header[X-Environment] = prod â†’ prod_user` ÅŸeklinde tanÄ±m yapÄ±n.<br />2) Her ortam iÃ§in ayrÄ± politika oluÅŸturun ve deployment sÄ±rasÄ±nda doÄŸru politikayÄ± aktif edin.<br />Birinci yÃ¶ntem Ã¶nerilir (merkezi yÃ¶netim). |
| **KullanÄ±m** | Variable expression'da hangi deÄŸiÅŸken kaynaklarÄ±nÄ± kullanabilirim? | `${env.VAR_NAME}`: Environment variables<br/>`${variable.VAR_NAME}`: API Proxy veya Global Variables<br/>`${vault.PATH}`: Vault entegrasyonu (HashiCorp Vault, AWS Secrets Manager vb.)<br/>`${header.HEADER_NAME}`: Request header'larÄ±ndan deÄŸer alma |
| **GÃ¼venlik** | Credential'lar log'larda gÃ¶rÃ¼nÃ¼r mÃ¼? | HayÄ±r, Apinizer default olarak credential field'larÄ±nÄ± log'lardan maskeler. Ancak custom log policy kullanÄ±yorsanÄ±z masking kurallarÄ±nÄ± kontrol edin. |
| **GÃ¼venlik** | Digest authentication'da nonce ve created nasÄ±l oluÅŸturuluyor? | Apinizer otomatik olarak her istek iÃ§in unique nonce (Base64 encoded random deÄŸer) ve created (ISO 8601 timestamp) deÄŸerleri oluÅŸturur. Manual mÃ¼dahale gerekmez. |
| **Hata Giderme** | "Authentication credentials are missing or invalid" hatasÄ± alÄ±yorum | ÅunlarÄ± kontrol edin: 1) Conditional expression'larÄ±nÄ±z doÄŸru mu? (hiÃ§biri match etmiyorsa hata alÄ±rsÄ±nÄ±z) 2) Variable expression'lar Ã§Ã¶zÃ¼mlenebiliyor mu? 3) Backend'in beklediÄŸi format ile Send Type uyumlu mu? 4) Field name'ler ve injection path'ler doÄŸru mu? Debug iÃ§in API logs ve policy execution logs'larÄ± inceleyin. |

**Bu dokÃ¼man Apinizer Ã¼rÃ¼n dokÃ¼mantasyonunun bir parÃ§asÄ±dÄ±r. Â©ï¸ 2025 Apinizer - TÃ¼m haklarÄ± saklÄ±dÄ±r.**

Bu dokÃ¼mantasyon, Apinizer yazÄ±lÄ±mÄ±nÄ± kullanan kiÅŸi ve kuruluÅŸlar tarafÄ±ndan dahili kullanÄ±m amacÄ±yla serbestÃ§e kullanÄ±labilir, kopyalanabilir ve daÄŸÄ±tÄ±labilir.
