---
title: "Politika Yönetimi"
description: "API Proxy'nin geliştirme sekmesinde mesaj akışı sırasında istek ve yanıt mesajlarına uygulanacak politikaları yönetebilirsiniz. Politikaları ekleyebilirsiniz, güncelleyebilirsiniz, silebilirsiniz, aktif/pasif hale getirebilirsiniz ve görsel akış diyagramı üzerinden yönetebilirsiniz. Geliştirme sekmesi, mesaj akışı sırasında istek ve yanıt mesajlarına uygulanacak politikaların biçimlendirildiği sekmedir. Arayüz bu akışı gösterecek şekilde tasarlanmıştır. Böylece görsel olarak bir istek mesajının hangi politikalar hangi sırada uygulandıktan sonra Backend API'ye gönderileceğini ve Backend API'den dönen yanıt mesajı istemciye iletilmeden önce hangi sırada hangi politikaların uygulanacağını görme olanağı kazanırsınız."
---

<Info>
Mesaj akışı, politika pipeline'ı ve politika uygulama sırası hakkında kavramsal bilgi için [Mesaj İşleme ve Politika Uygulama](/tr/apinizer-anlama/temel-kavramlar/mesaj-isleme-ve-politika-uygulama) temel kavramlar sayfasına bakabilirsiniz.
</Info>

## Mesaj Akışı

İstemci ile Backend API arasındaki akış, 

* İstemciden çıkıp Backend API'ye giden istek mesajını sembolize eden bir ok,
* Backend API'den çıkıp İstemciye giden yanıt mesajını sembolize eden bir ok,
* İstek ya da yanıt mesajı üzerinde uygulanan politikaları ve uygulanma sırasını gösteren ikonlar

ile gösterilmektedir.

Bu bölümde politikaların detaylarına girilmeyecektir. Politikalarla ilgili detaylı bilgi için [Politikalar (Policies)](/tr/gelistirici/politikalar) sayfasına bakılabilir.

### İstemci 

Arayüzde sol taraftaki çerçeve içinde gösterilir. API Proxy'e istek gönderen paydaştır. Akışı başlatır. İstemciden çıkan mesaj, politikalar uygulandıktan sonra Backend API'ye ulaşır.

<img src="/images/gelistirici/message-processing/istemci.png" alt="İstemci" style={{maxWidth: '800px', width: '100%', height: 'auto'}} />

### Backend API

API Proxy ile istemcinin doğrudan erişimine kapatılan ve istemciden saklanan, istekleri API Proxy'den alıp yanıtlarını API Proxy'e döndüren orijinal API'dır. Arayüzünde sağ taraftaki çerçeve ile gösterilir. Backend API'nin yanıtı, politikalar uygulandıktan sonra İstemciye gönderilir.

<img src="/images/gelistirici/message-processing/backend-api.png" alt="Backend API" style={{maxWidth: '800px', width: '100%', height: 'auto'}} />

Backend API kutusundaki **API** bağlantısına tıklandığı zaman Backend API'nin API Tanım Belgesi görüntülenir.

<img src="/images/gelistirici/message-processing/api-tanim-belgesi.png" alt="API Tanım Belgesi" style={{maxWidth: '800px', width: '100%', height: 'auto'}} />

## Politika Yönetimi

Bu bölümde API Proxy'nin geliştirme sekmesinde politikalar üzerinde yapılabilecek yönetimsel işlemler anlatılmaktadır. [Politika Nedir?](/tr/apinizer-anlama/temel-kavramlar/politika-nedir) kavramı hakkında detaylı bilgi için temel kavramlar sayfasına bakabilirsiniz. Herhangi bir politika hakkında detaylı bilgi edinmek için [Politikalar (Policies)](/tr/gelistirici/politikalar) bölümünden ilgili politikaya ilişkin dokümantasyona bakabilirsiniz.

### Politikaların Yeri ve Çalışma Sırası

Politikalar 3 farklı noktaya eklenebilir:

* **[API Proxy Grubu](/tr/apinizer-anlama/temel-kavramlar/api-proxy-group)**: Bir API Proxy Grubuna eklenen bir politika, sadece istek API Proxy Grup üzerinden gelmiş ise işletilir.
* **[API Proxy](/tr/apinizer-anlama/temel-kavramlar/api-proxy-nedir)**: Bir API Proxy'ye eklenen bir politika, o API Proxy'nin bütün metot/endpoint'leri için işletilir.
* **[Metot/Endpoint](/tr/apinizer-anlama/temel-kavramlar/endpoint)**: Bir metot/endpoint'e eklenen bir politika, yalnızca o metot/endpoint için işletilir.

Aşağıdaki görselde bu 3 noktaya da eklenmiş olan politikalara ilişkin bir örnek bulunmaktadır.

Görselde **GET - findByStatus** adlı metot/endpoint'i seçilmiş olan API Proxy'nin, **Proxy Group - 1** adlı bir API Proxy Grubu'na eklenmiş olduğu görülmektedir.

İşaretlenmiş olan alanlar, politikaların nereye eklendiğine bağlı olarak görüntülendikleri yerlerdir:

* **1 numaralı çerçeve** ile işaretlenen alanda, bu API Proxy için herhangi bir metot/endpoint seçilmeden, bütün metot/endpoint'ler için geçerli olacak şekilde eklenmiş ve istek mesajlarına uygulanacak olan politikalar görülür. **Hepsi (All)** yazısı bunu ifade eder.
* **2 numaralı çerçeve** ile işaretlenen alanda, seçilmiş olan metot/endpoint için geçerli olacak şekilde ve istek mesajlarına uygulanacak olan politikalar görülür.
* **3 numaralı çerçeve** ile işaretlenen alanda, seçilmiş olan metot/endpoint için geçerli olacak şekilde ve yanıt mesajlarına uygulanacak olan politikalar görülür.
* **4 numaralı çerçeve** ile işaretlenen alanda, bu API Proxy için herhangi bir metot/endpoint seçilmeden, bütün metot/endpoint'ler için geçerli olacak şekilde eklenmiş ve yanıt mesajlarına uygulanacak olan politikalar görülür. **Hepsi (All)** yazısı bunu ifade eder.

<Info>
Bu API Proxy herhangi bir API Proxy Grubu'na eklenmiş, eklenen API Proxy Grupta politikalar bulunuyor ve istek API Proxy Grup üzerinden geldiyse request hattındakiler uygulanır daha sonra response hattı üzerindeki politikalar da uygulanır. Ancak bu sayfada gösterilmez.
</Info>

API Proxy'nin herhangi bir metot/endpoint'i için herhangi bir politikanın eklenmiş olması durumunda metot/endpoint yanında çark ikonu bulunur.

Eğer API Proxy'nin belirli bir metot/endpoint'i seçilmezse (ya da **Hepsi (All)**) seçilirse, aşağıdaki görselde gösterildiği gibi 2 bölge görünür:

<img src="/images/gelistirici/message-processing/hepsi-seceneği.png" alt="Hepsi Seçeneği" style={{maxWidth: '1000px', width: '100%', height: 'auto'}} />

* **1 numaralı çerçeve** ile işaretlenen alanda, bu API Proxy'nin bütün metot/endpoint'leri için geçerli olacak şekilde eklenmiş ve istek mesajlarına uygulanacak olan politikalar görülür.
* **2 numaralı çerçeve** ile işaretlenen alanda, bu API Proxy'nin bütün metot/endpoint'leri için geçerli olacak şekilde eklenmiş ve yanıt mesajlarına uygulanacak olan politikalar görülür.

## Politikaların İşletilme Sırası

Politikalar, mesajın akış sırasında;

* **İstek mesajı için**: API Proxy Grup → API Proxy → metot/endpoint sırasıyla
* **Yanıt mesajı için**: metot/endpoint → API Proxy → API Proxy Grup sırasıyla

işletilir. Her seviyede, o seviyedeki politikalar mesajın akış yönündeki sıralamaya göre işleme alınır.

Aşağıdaki görselde bu durum özetlenmiş, politikaların işleme alınma sıraları numaralandırılarak gösterilmiştir.

<img src="/images/gelistirici/message-processing/politika-isletilme-sirasi.png" alt="Politika İşletilme Sırası" style={{maxWidth: '1000px', width: '100%', height: 'auto'}} />


### Hata Durumunda Politikaların İşletilme Sırası

Hata durumunda işletilecek olan politikalar "Hata Politikası Ekle" seçeneği ile eklenir.

Akışın herhangi bir noktasında hata olması durumunda normal akış kesilerek öncelikle varsa hata yanıt şablonu hata mesajına uygulanır.

Sonrasında "Hata Politikaları" hattına eklenen politikalar **sağdan sola doğru** sırasıyla işletilir.

## Politika Yönetimi İşlemleri

### Akışa Politika Ekleme

Bir politika eklemek için:

* Politikanın eklenmek istediği varlık seçilir. Örneğin API Proxy'nin bütün metot/endpoint'leri için uygulanması istenen bir politika için, o API Proxy'nin metot/endpoint alanında **Hepsi (All)** seçilir.
* Politikanın istek mesajına mı yanıt mesajına mı ekleneceğine göre uygun alandaki **➕ Politika Ekle (Add Policy)** ikonuna tıklanır.

<img src="/images/gelistirici/message-processing/politika-ekle.png" alt="Politika Ekle" style={{maxWidth: '800px', width: '100%', height: 'auto'}} />

* Açılan pencereden eklenmek istenen politikanın tipi seçilir. Bu pencerede görünen politika tipleri, aktif API Proxy'nin tipine ve hangi bölge politika eklenmek istendiğine göre değişir.

<img src="/images/gelistirici/message-processing/politika-tipi-secimi.png" alt="Politika Tipi Seçimi" style={{maxWidth: '800px', width: '100%', height: 'auto'}} />

* Eklenmek istenen politika seçildiğinde, o politikaya ilişkin konfigürasyon bilgisinin girilebileceği bir pencere açılır. Bu pencereden farklı şekillerde politika eklenebilir:

1. **Var olan bir global politikayı eklemek için**: Politika penceresinde, en üstte politika tipinin yanındaki **Global Politikalardan Seç (Select From Global Policies)** bağlantısına tıklanır. Açılan pencereden uygun politika seçilerek işlem tamamlanır.
2. **Yerel politika oluşturmak için**: Herhangi özel işlem yapmadan açılan pencerede girilen veriler ile yerel politika oluşturulması sağlanır.

### Akıştaki Politikayı Güncelleme

Var olan bir politikanın ikonuna tıklandığı zaman, o politikanın bilgilerinin güncellenebileceği bir pencere açılır.

### Seçilen Politikayı Activate/Deactivate Etme

Bir politika, eklenmiş olduğu metot/endpoint ya da API Proxy'den silinmeden geçici olarak kullanımdan kaldırılabilir. Bunun için politika güncellenmek üzere açılır ve açılan pencerenin en üst kısmındaki **Deactivate** tuşuna tıklanır.

### Bütün Politikaları Activate/Deactivate Etme

Metot/endpoint bölümünde, orta bölümün alt kısmında **Bütün Politikaları Kapat (Disable All Policies)** bağlantısı belirir. Bu bağlantıya tıklandığı zaman, eğer **Hepsi (All)** seçeneğinde ise API Proxy üzerine eklenmiş olan bütün politikalar; eğer herhangi bir metot içerisindeyse sadece o metot içerisinde eklenmiş olan tüm politikalar devre dışı kalır. Kullanımdan kaldırılmış olan politikalar daha sonra politika güncelleme penceresinden tek tek ya da **Bütün Politikaları Aç (Activate All Policies)** bağlantısına tıklanarak toplu olarak yeniden etkinleştirilebilir.

Politikalar devre dışı kaldığında, ikonların renkleri değişerek gri bir görünüme kavuşur.

<Warning>
Eğer API Proxy bir API Proxy Grubu'na eklenmişse ve bu API Proxy Grubu üzerinden politikalar uygulanmışsa, bütün politikaların kapatılması API Proxy Grubu'ndan gelen politikaları etkilemez, bu politikalar aktif olarak kalır.
</Warning>

### Akıştan Politika Kaldırma

Fare silinmek istenen politikanın üzerine getirildiğinde, politikayı silecek bir ikon belirir. Bu ikona tıklanarak politika silinebilir.

<Info>
Geliştirme sekmesinde gerçekleştirilen politika silme işleminde;

* politika yerel ise tamamen silinir,
* politika global ise yalnızca bu metot/endpoint ya da API Proxy ile ilişkisi kaldırılır, politikanın kendisi silinmez. Daha sonra tekrar eklenebilir. Bir global politikanın tamamen silinmesi isteniyorsa, silme işleminin [Global Politikalar (Global Policies)](/tr/gelistirici/global-configurations/global-policies) arayüzlerinden yapılması gerekir.
</Info>

## İlgili Sayfalar

<CardGroup cols={2}>
  <Card title="Mesaj İşleme ve Politika Uygulama" icon="diagram-project" href="/tr/apinizer-anlama/temel-kavramlar/mesaj-isleme-ve-politika-uygulama">
    Mesaj akışı ve politika uygulama kavramını öğrenin
  </Card>
  <Card title="Politika Nedir?" icon="shield" href="/tr/apinizer-anlama/temel-kavramlar/politika-nedir">
    Politika kavramını öğrenin
  </Card>
  <Card title="Politikalar" icon="list" href="/tr/gelistirici/politikalar">
    Tüm politikalar hakkında detaylı bilgi alın
  </Card>
  <Card title="Global Politikalar" icon="cog" href="/tr/gelistirici/global-configurations/global-policies">
    Global politika yapılandırmalarını öğrenin
  </Card>
</CardGroup>
