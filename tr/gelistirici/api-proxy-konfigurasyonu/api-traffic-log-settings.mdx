---
title: "API Trafiği Log Ayarları (API Traffic Log Settings)"
description: "API Proxy mesajlarını Elasticsearch veritabanında loglayabilir, proje ve ortam bazlı log ayarlarını yönetebilir, mesaj ögelerine (başlık, parametre, gövde) göre loglama konfigürasyonu yapabilir."
---

## Log Kaydı Tutulan Bölgeler

API Proxy mesajları şu bölgelerde loglanabilir:

<CardGroup cols={2}>
  <Card title="Request from Client" icon="arrow-right">
    İstemciden API Proxy'e gelen istek mesajları
  </Card>
  <Card title="Request to Target" icon="arrow-right">
    API Proxy'den Backend API'ye iletilen istek mesajları
  </Card>
  <Card title="Response from Target" icon="arrow-left">
    Backend API'den API Proxy'e verilen yanıt mesajları
  </Card>
  <Card title="Response to Client" icon="arrow-left">
    API Proxy'den istemciye gönderilen yanıt mesajları
  </Card>
</CardGroup>

Varsayılan olarak, projenin tüm mesaj bölgelerindeki alanların loglanması aktiftir. Loglanan alanlar ihtiyaca göre veya log sunucusunun kaynak tüketimi baz alınarak kısıtlanabilir.

## Üretim Ortamı Önerileri

<Warning>
  **Üretim Ortamı İçin Öneriler**: Üretim ortamında aşağıdaki bölgelerin loglanmasının devre dışı bırakılması tavsiye edilir.
</Warning>

Üretim ortamında çalışan API Proxy'lerde tüm poliçelerin ayarları ve testleri tamamlandığı için geliştirme yapılmayacaktır. Veritabanında verilerin aşırı büyümemesi için şu bölgelerin loglanması devre dışı bırakılabilir:

* **Request to Target**: API Proxy'den Backend API'ye iletilen istekler
* **Response from Target**: Backend API'den API Proxy'e verilen yanıtlar

Bu iki bölgedeki başlık, parametre ve gövde verilerinin yazılmaması veritabanı boyutunu kontrol altında tutmaya yardımcı olur.

## Hata Durumunda Loglama

<Info>
  **Hata Durumunda Otomatik Loglama**: Tüm loglama alanları kapalı olsa dahi, istekte bir hata oluştuysa log alanlarının tümü hatanın tespit edilebilmesi için otomatik olarak kayıt edilir. Bu özellik genel ayarlarda açılıp kapatılabilir.
</Info>

## Formdata İstekleri

<Warning>
  **Formdata İstekleri**: Formdata istekleri güvenlik nedeniyle hiçbir şekilde loglanmamaktadır.
</Warning>

## WebSocket ve gRPC İstekleri

<Info>
  **WebSocket ve gRPC**: WebSocket ve gRPC istekleri Apinizer'a gelen ve Apinizer'dan çıkan veriler şeklinde tutulduğundan bu tip API Proxy'lerde sadece 2 bölge bulunur:
  * Request from Client / Response to Client
  * Request to Target / Response from Target
</Info>

## Log Ayarları Ekranı

Log ayarları ekranında API Proxy bazlı log ayarları yapılabilir. Eğer entegrasyon ayarları yapılmışsa, hangi API Proxy'lerin trafik kayıtlarının bu entegrasyon hedeflerine gönderilebileceği de ayarlanabilir.

<img
  src="/images/gelistirici/api-proxy-konfigurasyonu/log-ayarlari.png"
  alt="Log Ayarları"
  width="800"
  height="600"
/>

## Düzenle Dialog Ekranı

Düzenle butonuna tıklandığında açılan dialog ekranında log ayarları yapılandırılabilir:

<img
  src="/images/gelistirici/api-proxy-konfigurasyonu/duzenle-dialog.png"
  alt="Düzenle Dialog"
  width="800"
  height="600"
/>

## Log Ayarları Alanları

Log ayarları için kullanılan alanlar:

| Alan | Açıklama |
|---|---|
| **Başlık (Header)** | Mesajdaki başlık bilgilerinin loglanıp loglanmadığını yönetir. |
| **Gövde (Body)** | Mesajdaki gövde bilgilerinin loglanıp loglanmadığını yönetir. |
| **Parametre (Parameter)** | Mesajdaki parametre bilgilerinin loglanıp loglanmadığını yönetir. |
