---
title: 'API Trafiği Log Ayarları (API Traffic Log Settings)'
description: 'API Proxy mesajlarının Elasticsearch veritabanında loglanması, log ayarları yönetimi, proje ve ortam bazlı log konfigürasyonu'
---

Apinizer üzerinde tanımlanan API Proxy'e gelen ve giden mesaj bilgileri mesaj ögelerine (başlık, parametre, gövde) göre Elasticsearch veri tabanında loglanmaktadır.

## Log Kaydı Tutulan Bölgeler

Bu log kaydı tutulan bölgeler;

* İstemciden API Proxy'e Gelen İstek (Request from Client)
* API Proxy'den Backend API'ye İletilen İstek (Request to Target)
* Backend API'den API Proxy'e Verilen Yanıt (Response from Target)
* API Proxy'den İstemciye Gönderilen Yanıt (Response to Client)

Varsayılan olarak, projenin tüm mesaj bölgelerindeki alanların loglanması aktiftir.

Loglanan alanlar ihtiyaca göre veya log sunucusunun kaynak tüketimi baz alınarak kısıtlanabilir.

Bu ekran üzerinden proje ve ortam (environment) bazlı log ayarı yönetilmektedir.

## Üretim Ortamı Önerileri

Üretim ortamı için aşağıdaki ortamlara ait ögeleri loglama işleminin devre dış bırakılması tavsiye edilmektedir.

* API Proxy'den Backend API'ye (Request to Target)
* Backend API'den API Proxy'e (Response from Target)

Eğer bir API Proxy üretim ortamında çalışıyorsa, API Proxy'deki tüm poliçelerin ayarları ve testleri tamamlandığı ve artık geliştirme yapılmayacağı anlamına gelmektedir.

Bu yüzden veri tabanında verilerinin aşırı büyümemesi bu iki bölgedeki başlık, parametre ve gövde verilerinin yazılmaması tavsiye edilir.

## Hata Durumunda Loglama

Tüm loglama alanları kapalı olsa dahi istekte de bir hata oluştuysa log alanlarının tümü hatanın tespit edilebilmesi için kayıt edilir. Bu özellik genel ayarlarda açılıp, kapatılabilir.

## Formdata İstekleri

Formdata istekleri hiçbir şekilde loglanmamaktadır.

## WebSocket ve gRPC İstekleri

Websocket ve gRPC istekleri Apinizer'a gelen ve Apinizer'dan çıkan veriler şeklinde tutulmakta olduğundan bu tip API Proxylerde sadece 2 bölge vardır.

## Log Ayarları Ekranı

Log ayarlarını içeren görsele aşağıda yer verilmiştir:

![Log Ayarları](https://docs.apinizer.com/apinizer-dokumantasyonu/files/6684781/75809911/1/1697533691958/image2023-10-17_11-8-14.png)

Bu ekranda API Proxy bazlı log ayarları yapılabilmektedir.

Ayrıca eğer entegrasyon ayarları yapılmış ise hangi API Proxy'lerin trafik kayıtlarının bu entegrasyon hedeflerine gönderilebileceği de ayarlanabilir.

## Düzenle Dialog Ekranı

Düzenle butonuna tıklandığında açılan dialog ekranını içeren görsele aşağıda yer verilmiştir:

![Düzenle Dialog](https://docs.apinizer.com/apinizer-dokumantasyonu/files/6684781/85950542/1/1701767346953/image-2023-12-5_12-9-7.png)

## Log Ayarları Alanları

Log ayarları için kullanılan alanlar aşağıdaki tabloda görülmektedir.

| Alan | Açıklama |
|---|---|
| **Başlık (Header)** | Mesajdaki başlık bilgilerinin loglanıp loglanmadığını yönetir. |
| **Gövde (Body)** | Mesajdaki gövde bilgilerinin loglanıp loglanmadığını yönetir. |
| **Parametre (Parameter)** | Mesajdaki parametre bilgilerinin loglanıp loglanmadığını yönetir. |
