---
title: "Politika Yönetimi"
description: "API Gateway'de politika yönetimi hakkında kapsamlı rehber"
---


Bir politika (policy), API Gateway'de istemciden gelen istekleri ve Backend API'den dönen yanıtları belirli kurallara göre işlemek için kullanılan yapılandırılabilir bir bileşendir.

<Info>
Politikalar konfigürasyon temelli çalışır. Kod yazmanıza veya uygulama deploy etmenize gerek yoktur. Arayüzde sürükle-bırak, parametre girişi veya konfigürasyon seçimleriyle politikaları anında etkinleştirebilir, güncelleyebilir veya devre dışı bırakabilirsiniz.
</Info>

## Politika Kullanım Alanları

Politikalar aracılığıyla aşağıdaki işlemleri gerçekleştirebilirsiniz:

<CardGroup cols={2}>
  <Card title="Güvenlik Kuralları" icon="shield">
    Kimlik doğrulama (Basic Auth, OAuth2, OIDC, JWT vb.) ve yetkilendirme (role-based access control) mekanizmalarını politikalar ile tanımlarız.
  </Card>
  
  <Card title="Trafik Yönetimi" icon="gauge">
    Kullanıcılar veya uygulamalar başına düşen kota (belirli dönem içinde yapılabilecek istek sayısı) ve hız sınırı (rate limiting) politikaları ile API'lerinizi aşırı yüklenmelerden koruyabilirsiniz.
  </Card>
  
  <Card title="Veri Dönüşümü" icon="arrows-rotate">
    Gelen istekleri veya dönen yanıtları farklı formatlara dönüştürebilirsiniz (örneğin XML'i JSON'a çevirme, veri yapısını yeniden biçimlendirme).
  </Card>
  
  <Card title="Hata Mesajı Özelleştirme" icon="message">
    Sistem tarafından dönen hata mesajlarını, kurumsal standartlara veya kullanıcı dostu bir dile çevirebilirsiniz.
  </Card>
  
  <Card title="İş Mantığı" icon="code">
    JavaScript veya Groovy gibi betik dilleri veya koşullu mantık politikaları kullanarak basit iş kurallarını API Gateway seviyesinde tanımlayabilirsiniz.
  </Card>
  
  <Card title="Mesaj Zenginleştirme" icon="wand-magic">
    İstek veya yanıta header ekleyebilir, metadata ekleyebilir veya hassas verileri maskeyleyebilirsiniz.
  </Card>
</CardGroup>

## Politikanın Amacı ve Faydaları

<CardGroup cols={2}>
  <Card title="Merkezi Kontrol" icon="sitemap">
    API'lerin davranışı, güvenliği ve performansı tek bir noktadan yönetilir. Bu sayede dağıtık sistemlerde tutarlılık sağlanır ve yönetim karmaşıklığı azalır.
  </Card>
  
  <Card title="Erişim Denetimi" icon="lock">
    Kimlik doğrulama, yetkilendirme ve API kaynaklarına erişim izinleri politikalar aracılığıyla tanımlanır. Böylece yetkisiz erişimler önlenir ve güvenlik sağlanır.
  </Card>
  
  <Card title="Yeniden Kullanılabilirlik" icon="repeat">
    Bir kez tanımlanan politika, birden fazla API, endpoint veya servis tarafından kullanılabilir. Bu, policy yönetimini basitleştirir ve geliştirme sürecini hızlandırır.
  </Card>
  
  <Card title="Kod Bakım Yükünü Azaltma" icon="code-branch">
    Güvenlik, veri dönüşümü ve doğrulama işlemleri kod içinde değil, gateway konfigürasyonunda yapılır. Bu, uygulamaların kodundaki karmaşıklığı azaltır ve bakım maliyetlerini düşürür.
  </Card>
  
  <Card title="Tutarlılık" icon="check-double">
    Tüm API'ler aynı politikalara tabi olduğundan, enterprise-wide güvenlik ve performans standartları tutarlı şekilde uygulanır. İstisnalar minimal düzeyde kalır.
  </Card>
  
  <Card title="Hızlı Müdahale ve Esneklik" icon="bolt">
    Politikalar anında devre dışı bırakılabilir, güncellenebilir veya yeniden deploy edilebilir. Böylece güvenlik tehditlerine hızlı yanıt verilir, performans sorunları çözülür veya iş kuralları değişikliğe uyum sağlanır.
  </Card>
</CardGroup>

## Politika Kullanım Tipleri

### Yerel Politika (Local Policy)

<Card title="Yerel Politika Özellikleri" icon="file">
- Yalnızca oluşturulduğu API Proxy'de veya API Proxy Grupta geçerlidir
- Bulunduğu API Proxy veya API Proxy Grup silinirse politika da silinir
- Bulunduğu yerde export, import, activate, deactivate işlemleri yapılabilir
</Card>

### Global Politika (Global Policy)

<Card title="Global Politika Özellikleri" icon="globe">
- Global Politikalar sayfasında oluşturulan politikalardır
- Birden fazla API Proxy veya API Proxy Grup tarafından kullanılabilir
- Global politikada değişiklik yapılırsa, politikayı kullanan tüm API Proxy'ler ve API Proxy Gruplar "Redeploy Required" durumuna geçer
- Bu ekrandaki toplu deploy işlemi ile ilgili tüm API Proxy/API Proxy Gruplar birlikte deploy edilebilir
- Bu ekranlardan politika export, import, activate, deactivate işlemleri de gerçekleştirilebilir
</Card>

#### Global Politikayı Yerelleştirme

Global olarak oluşturulmuş politika bir API Proxy/API proxy Group'da kullanımı sırasında özelleştirilmesi gerekebilir.

Bu durumda aşağıdaki görselde görüldüğü gibi API Proxy/API proxy Group'a eklenen politikaya tıklanır ve sağ üst köşedeki "Yerelleştir" tuşuna basılarak tek tıklama ile yerel hâle getirilebilir:

<Tip>
Global politikayı yerelleştirerek, o API Proxy'ye özel özelleştirmeler yapabilirsiniz. Bu işlem geri alınamaz, bu nedenle dikkatli olunmalıdır.
</Tip>

#### Global Politikanın Kullanıldığı Yerler

Bir global politikanın hangi API proxylerde, API proxy gruplarında veya politika gruplarında kullanıldığını takip etmek, yönetim ve güncelleme süreçlerinde kritik öneme sahiptir.

Her politika detay sayfasında, politikanın kullanım bilgileri aşağıdaki görseldeki gibi görüntülenir:

<CardGroup cols={3}>
  <Card title="Kullanıldığı API Proxy'ler" icon="server">
    Bu bölümde, politikayı kullanan API Proxy'lerin listesi görüntülenir.
  </Card>
  
  <Card title="Kullanıldığı API Proxy Grupları" icon="layer-group">
    Bu bölümde, politikayı kullanan API Proxy gruplarının listesi görüntülenir.
  </Card>
  
  <Card title="Kullanıldığı Politika Grupları" icon="folder">
    Bu bölümde, bu politikayı içeren politika gruplarının listesi görüntülenir.
  </Card>
</CardGroup>

### Global ve Yerel Politika Karşılaştırması

| Global Politika | Local Politika |
|-----------------|----------------|
| Birden fazla API Proxy'de kullanılabilir | Sadece bir API Proxy'de kullanılır |
| Merkezi yönetilir | Proxy bazında yönetilir |
| Bir kez güncellenir, tüm kullanımlar etkilenir | Her proxy için ayrı güncelleme gerekir |
| Yeniden kullanılabilirliği yüksek | Yeniden kullanılabilirliği düşük |

## Politika Uygulama Noktaları

Politikalar üç farklı seviyede uygulanabilir:

<CardGroup cols={3}>
  <Card title="API Proxy Grubu" icon="layer-group">
    Bir gruptaki tüm API Proxy'lere uygulanır
  </Card>
  
  <Card title="API Proxy" icon="server">
    Belirli bir API Proxy içindeki tüm metot/endpoint'lere uygulanır
  </Card>
  
  <Card title="Metot/Endpoint" icon="code">
    Yalnızca ilgili metot veya endpoint için geçerlidir
  </Card>
</CardGroup>

<Info>
Politikaların mesaj akışındaki uygulama sırası, API Proxy Group/API Proxy/Endpoint seviyelerindeki çalışma mantığı ve görsel akış diyagramı hakkında detaylı bilgi için [Mesaj Akışı ve Politika Yönetimi](#mesaj-akışı-ve-politika-yönetimi) sayfasına bakınız.
</Info>

## Politikayı Görüntüleme

<Card title="Politika Görüntüleme" icon="eye">
Her global politika için, kullanıcıların mevcut yapılandırmayı görüntüleyebileceği Politika Görünüm Sayfası bulunmaktadır.

Yerel Politika'lar sadece bulunduğu API Proxy veya API Proxy Grup içinden görüntülenebilirken, Global Politikalar menüden ilgili politika grubunun listeleme sayfasından görüntülenir.

Görüntülenen sayfadan düzenleme, export, import, activate, deactivate ve silme işlemleri yapılabilir.
</Card>

## Politika Yapısı

Politikalar, fonksiyonel farklarına rağmen aynı temel yapıyı paylaşır.

### Genel Bilgi Paneli

Her politikanın adı, açıklaması aktif olup olmadığı bilgileri ortak alanlarıdır.

Ortak alan alanlar sonrasında politikaya özel konfigürasyon alanları yer alır.

### Koşullar (Conditions)

Politikalar, yalnızca belirli koşullar sağlandığında çalışacak şekilde özelleştirilebilir.

**Örnek:**

- `status` parametresi `"pending"` ise çalış.
- `userId` alanı `#user1#user2#user3` listesindeyse işlet.

Bu özellik, politikaların dinamik ve bağlama duyarlı şekilde çalışmasını sağlar.

Aşağıdaki görselde, seçilmiş olan politikanın yalnızca "status" parametresinin değeri "pending" ise çalışması istendiği bir örnek koşul görülmektedir.

<Info>
Koşul değer kıyaslama operatörü olarak "listede olsun" veya "listede olmasın" seçeneği seçildiğinde, liste değerlerinin ayrımı için # işareti kullanılmalıdır. Örneğin user1#user2#user3 gibi.
</Info>

### Hata Mesajı Özelleştirme (Error Message Customization)

Politika çalışması sırasında oluşabilecek hatalar için dönen mesajlar özelleştirilebilir. Bu sayede geliştiriciler, istemcilere dönen hata mesajlarını kurumsal veya anlaşılır biçimde özelleştirebilir.

Her politika, hata oluştuğunda dönecek mesajları özelleştirebilir:

| Alan | Açıklama |
|------|----------|
| HTTP Status Code | Varsayılan sistem kodu |
| Error Code | Varsayılan hata kodu |
| Original Message | Varsayılan hata mesajı |
| Customized HTTP Status Code | Farklı bir HTTP durum kodu döndürülür |
| Customized Error Code | Farklı hata kodu belirlenir |
| Customized Error Message | Özel hata mesajı yazılır |

<Info>
Politika tanımlama arayüzünde o politika özelinde hata kodları ve mesajları özelleştirilebileceği gibi, platform genelinde de hata özelleştirme yapılabilir.
</Info>

## Politikayı Silme

Bir politika artık kullanılmayacaksa veya yanlış yapılandırılmışsa silinebilir. Silme işlemi geri alınamaz, bu nedenle dikkatli olunmalıdır.

<AccordionGroup>
  <Accordion title="Yerel Politika Silme">
    Politika yerel politika ise API Proxy veya API Proxy Group içerisinden silinir.
  </Accordion>
  
  <Accordion title="Global Politika Silme">
    Global politika olması durumunda global politika sayfasındaki:
    
    - Listede Satır sonundaki ⋮ menüsünden Delete seçilerek veya
    - Veya politika detay sayfasında [Delete] butonuna tıklayarak silinebilir.
    
    Ayrıca global politika olması durumunda ve politika hâlihazırda bir veya daha fazla API Proxy/API Proxy Grupta kullanılıyorsa "This policy is currently in use" uyarısı ile birlikte kullanılan referanslar gösterilir, kullanıcının devam isteği ile ilgili referanslar ile beraber politika silinir. Referanslar "redeploy required" durumuna geçer.
  </Accordion>
</AccordionGroup>

<Warning>
Silmek yerine deactivate işlemini de düşünebilirsiniz.
</Warning>

## Politikayı Dışa/İçe Aktarma

Politikalar yedekleme, farklı ortamlara taşıma veya paylaşma amacıyla dışa aktarılabilir (export) ya da daha önce dışa aktarılmış bir politika tekrar içe aktarılabilir (import). Bu işlem, sürüm yönetimi, test ve üretim ortamları arasında geçiş veya ekipler arası paylaşım süreçlerinde veri bütünlüğünü korumak için kullanılır.

<AccordionGroup>
  <Accordion title="Dışa Aktarma (Export)">
    **Yerel ise:**
    
    API proxy/API Proxy Group içindeki politika detay kısmında [Export] butonuna tıklayın, ZIP dosyası indirilir.
    
    **Global ise:**
    
    - **Yöntem 1:** Global politikalar sayfasındaki eylem menüsünden ⋮ → Export seçin, ZIP dosyası otomatik indirilir.
    
    - **Yöntem 2:** Politika detay sayfasında [Export] butonuna tıklayın, ZIP dosyası indirilir.
    
    **Dosya Formatı:**
    
    Format: `{Date}-policy-{PolicyName}-export.zip`
    
    Örnek: `04 Nov 2025-{PolicyName}-export.zip`
    
    **ZIP İçeriği:**
    
    - Politika JSON dosyası
    - Metadata bilgileri
    - Bağımlılık bilgileri (örneğin IP grupları)
    
    **Kullanım Alanları:**
    
    - Yedekleme
    - Ortamlar arası taşıma (Test → Prod)
    - Versiyonlama
    - Ekip veya proje bazlı paylaşım
  </Accordion>
  
  <Accordion title="İçe Aktarma (Import)">
    - Ana listede [Import {PolicyName}] butonuna tıklayın.
    - İndirilen ZIP dosyasını seçin.
    - Sistem kontrolleri: Format geçerli mi? İsim çakışması var mı? Bağımlılıklar mevcut mu?
    - Ardından [Import] butonuna tıklayın.
    
    **İçe Aktarma Senaryoları:**
    
    - **Senaryo 1: İsim Çakışması** → Eski politikanın üzerine yazın veya yeni bir isimle oluşturun.
    - **Senaryo 2: IP Grupları Eksik** → Eksik IP gruplarını önce oluşturun veya import sırasında bu grupları çıkarın.
  </Accordion>
</AccordionGroup>

## Politikayı API'ye Bağlama

Bu adımda kullanıcı, oluşturduğu politikayı bir veya birden fazla API'ye ilişkilendirir. Politikalar ister global düzeyde (tüm projelerde geçerli), ister local düzeyde (yalnızca belirli bir API için) atanabilir.

Ayrıca birden fazla politika Policy Group altında toplanarak merkezi şekilde yönetilebilir.

<AccordionGroup>
  <Accordion title="Global Politika Kullanımı">
    Global politikalar, tanımlandıkları anda proje genelinde kullanıma hazırdır. Adımlar:
    
    <Steps>
      <Step title="API düzenleme sayfasına gidin">
        İlgili API Proxy'yi seçin ve düzenleme moduna geçin.
      </Step>
      
      <Step title="Policies sekmesini açın">
        API düzenleme sayfasında Policies sekmesine tıklayın.
      </Step>
      
      <Step title="Politikanızı seçin">
        Politikalar listesinden kullanmak istediğiniz global politikayı seçin.
      </Step>
      
      <Step title="API'yi kaydedin">
        Değişiklikleri kaydetmek için kaydet butonuna tıklayın.
      </Step>
    </Steps>
  </Accordion>
  
  <Accordion title="Local Politika Oluşturma">
    Sadece belirli bir API'ye özel politika oluşturmak için kullanılır.
    
    <Steps>
      <Step title="Policies sekmesini açın">
        API düzenleme sayfasında Policies sekmesini açın.
      </Step>
      
      <Step title="Create Local Policy butonuna tıklayın">
        İlgili politika bölümünde [+ Create Local Policy] butonuna tıklayın.
      </Step>
      
      <Step title="Politika tanımlayın">
        Yalnızca bu API için geçerli politika tanımlayın.
      </Step>
      
      <Step title="Kaydedin">
        Bu politika diğer API'lerde görünmez, sadece bu API'ye özeldir.
      </Step>
    </Steps>
  </Accordion>
  
  <Accordion title="Politika Grubu Kullanımı (Policy Group)">
    Birden fazla politikayı tek bir grup altında toplayarak, aynı anda birden fazla API'ye atayabilirsiniz.
    
    <Steps>
      <Step title="Policy Group oluşturun">
        Policy Group sayfasından yeni bir grup oluşturun.
      </Step>
      
      <Step title="Politikaları ekleyin">
        İlgili politikaları Policy Group içine ekleyin.
      </Step>
      
      <Step title="API'ye atayın">
        Policy Group'u API'ye veya API Group'a atayın.
      </Step>
      
      <Step title="Merkezi yönetim">
        Tüm ilişkili politikaları tek noktadan yönetin.
      </Step>
    </Steps>
  </Accordion>
</AccordionGroup>

<Info>
Bu işlemlerin nasıl yapıldığına dair daha detaylı bilgi için [Mesaj Akışı ve Politika Yönetimi](#mesaj-akışı-ve-politika-yönetimi) sayfasına bakınız.
</Info>

## En İyi Uygulamalar

<CardGroup cols={2}>
  <Card title="Yeniden Kullanılabilirlik" icon="repeat">
    Politikaları yeniden kullanılabilir olacak şekilde oluşturun. Mümkünse global politika tercih edin.
  </Card>
  
  <Card title="Kullanıcı Dostu Hata Mesajları" icon="message">
    Hata mesajlarını kullanıcı dostu hâle getirin. Kurumsal standartlara uygun mesajlar kullanın.
  </Card>
  
  <Card title="Basit Koşullar" icon="code">
    Politika koşullarını gereksiz yere karmaşıklıklaştırmayın. Basit ve anlaşılır koşullar kullanın.
  </Card>
  
  <Card title="Deploy İşlemleri" icon="rocket">
    Değişiklik sonrası redeploy işlemini gerçekleştirin. Değişikliklerin aktif olması için gerekli.
  </Card>
</CardGroup>

## Mesaj Akışı ve Politika Yönetimi

Politikaların mesaj akışındaki uygulama sırası, API Proxy Group/API Proxy/Endpoint seviyelerindeki çalışma mantığı ve görsel akış diyagramı hakkında detaylı bilgi için Mesaj Akışı ve Politika Yönetimi sayfasına bakınız.
