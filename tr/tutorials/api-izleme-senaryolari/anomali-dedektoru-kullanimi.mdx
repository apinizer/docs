---
title: Anomali Dedektörü Kullanımı
description: "Anomali dedektörü ile log kayıtlarında anomali tespit edebilir. Zaman bazlı verileri sorgu ve filtrelerle inceleyerek eşik değere ulaşan anomalileri tespit edebilir ve anomali durumunda eylemler tanımlayabilir."
---

## Anomali Dedektörünün Genel Tanım Bilgilerinin Oluşturulması

İlk aşamada işin tanımlayıcı bilgileri girilir. Buradaki en önemli alan **ortam (environment)** bilgisi seçeneğidir. Seçilen ortam bilgisindeki log sunucusu üzerinde sorgu ve filtreler çalıştırılır.

<img
  src="/images/tutorials/api-izleme/anomali1.png"
  alt="Anomali Dedektörünün Genel Tanım Bilgileri"
  width="1000"
/>

## Sorgu Oluşturma

Sorgu, log kayıtlarıyla eşleşecek olan belirli alanlar (HTTP Metodu, Hata Tipi vb.) ile **ve** / **ya da** / **değil** tiplerindeki kriterlerle birleştirerek beklenen durumlar oluşturulur.

Yeni bir sorgu oluşturmak için **Sorgu (Query)** bölümünden oluşturulur.

<img
  src="/images/tutorials/api-izleme/sorgu.png"
  alt="Sorgu Oluşturma Ekranı"
  width="800"
/>

**Kaydet** butonuna tıklandığında oluşturulan sorgu tanımlanmakta olan işe eklenir.
<img
    src="/images/tutorials/api-izleme/sorgu-olusturma-ekrani.png"
    alt="Sorgu Oluşturma Ekranı"
    width="1000"
/>
<Tip>
  Tüm sorguların yönetildiği **Sorgular (Queries)** ekranına gitmek ve detaylı bilgi almak için [tıklayınız.](/tr/analytic/query-editor/sorgular-queries.mdx)
</Tip>

## Filtre Oluşturma

Filtreler sorgularla birlikte uygulanır. Log kayıtlarının eşleşeceği kriterleri içerir.

Yeni bir filtre oluşturmak için **Filtre (Filter)** bölümünden **oluşturulur.**

<img
  src="/images/tutorials/api-izleme/filtre.png"
  alt="Filtre Oluşturma Ekranı"
  width="1000"
/>

**Kaydet** butonuna tıklandığında oluşturulan filtre tanımlanmakta olan işe eklenir.
<img
    src="/images/tutorials/api-izleme/filtre-olusturma-ekrani.png"
    alt="Filtre Oluşturma Ekranı"
    width="1000"
/>
<Tip>
  Tüm filtrelerin yönetildiği **Filtreler (Filters)** ekranına gitmek ve detaylı bilgi almak için [tıklayınız.](/tr/analytic/query-editor/filtreler-filters.mdx)
</Tip>

## Conditions

Aşağıdaki koşulda, **'count of documents'** istek sayısına bakacaktır. Ortalamaya göre **"%50'den"** fazla bir artış olup olmadığına bakılacaktır.

Bu durumda, **"'1 Result'"** ifadesi, anomali tek bir kez gerçekleşmesi durumunda anomali olarak kabul edileceğini belirtir.

<img
  src="/images/tutorials/api-izleme/conditions-ayarlari.png"
  alt="Conditions Ayarları"
  width="1000"
/>

## Actions

Anomali tespiti yaptığında bir uyarı sistemi oluşturabiliriz. Bu örnekte anomali oluştuğunda mail atmasını sağlayacağız.

<img
  src="/images/tutorials/api-izleme/actions-mail-ayarlari.png"
  alt="Actions Mail Ayarları"
  width="1000"
/>

**'Server'** alanında yeni bir mail bağlantı bilgisi ekleyebilir veya mevcut olanı seçebilirsiniz. Eposta iletilecek **adres**, **konu** ve **mesaj** girilerek kaydedilir.

<img
  src="/images/tutorials/api-izleme/server.png"
  alt="Actions Mail Form"
  width="1000"
/>

<Tip>
  Eylem çeşitleri, eylemin kullanımı ve görev içindeki değişkenler ile bilgi almak için [tıklayınız.](/tr/apinizer-anlama/temel-kavramlar/konnektor.mdx)
</Tip>

## Kaydet

Son durumda bilgiler aşağıdaki gibi görünecektir ve kaydet butonu ile izlemeye hazır hale getirelim.

<img
  src="/images/tutorials/api-izleme/kaydet-son-durum.png"
  alt="Kaydet Son Durum"
  width="1000"
/>

## İşin Detaylarını İnceleme

**Result** seçeneği ile kontrol edebilirsiniz.

<img
    src="/images/tutorials/api-izleme/monitor-kaydi-detay.png"
    alt="Monitor Kaydı Detay"
    width="1000"
/>

Eğer bir hata alınmışsa bunun nedenini bulmak gerekebilir ya da sürecin genel log kayıtları incelenmek ve bunlar üzerinde filtreleme yapılmak isteniyorsa monitör kaydının detay sayfası ziyaret edilmelidir.



İlgili log kaydında yer alan detay ikonuna tıklanarak detaylı bilgi alınabilir.

<img
  src="/images/tutorials/api-izleme/log-kaydi-detay.png"
  alt="Log Kaydı Detay"
  width="1000"
/>
