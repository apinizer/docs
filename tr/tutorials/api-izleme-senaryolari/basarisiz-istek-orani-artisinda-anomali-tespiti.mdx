---
title: Başarısız İstek Oranı Artışı Üzerine Anomali Tespiti: Farklı Senaryoların İncelenmesi
---

# Başarısız İstek Oranı Artışı Üzerine Anomali Tespiti: Farklı Senaryoların İncelenmesi

Bu senaryoda, 3 farklı durum incelenecektir. Hepsinin ortak noktası, hatalı isteklerin son kontrole göre belirli bir miktar artması olacaktır.

**Senaryo A**: *Son 1 saatte* belirli bir Api Proxy'ye gelen ***başarısız istek sayısında***, bir önceki kontrole göre ***%50'lik*** bir artış, bizim için bir anomali olarak kabul edilecektir.

**Senaryo B**: *Son 1 saatte* belirli bir Api Proxy'ye gelen ***tüm isteklerin başarısız isteklere olan oranı***, bir önceki kontrole göre ***%50'lik*** bir artış, bizim için bir anomali olarak kabul edilecektir.

**Senaryo C**: Son 10 veri noktasına dayanarak **bloklanan** istekler, Bollinger bantları ile karşılaştırılır ve **üst Bollinger** bandına **eşit veya** bundan **yüksekse**, bu durum anomali olarak tespit edilip bildirilir.

Örnek değerler ile düşünmek gerekirse her bir senaryo aşağıda belirtilen durumları kontrol edecektir (Başarısız/Toplam oranı parantez içinde verilmiştir);

**Senaryo A**: İlk kontrol saatinde toplam 100 istek geldi ve bunlardan 10 tanesi hatalıysa (%10), sonraki saat gelen 100 istekten 15 ve üstünün hatalı olarak gelmesi durumu (%15).

İlk kontrol saatinde toplam 100 istek geldi ve bunlardan 10 tanesi hatalıysa (%10), sonraki saat gelen 200 istekten 15 ve üstünün hatalı olarak gelmesi durumu (%7.5). Dikkat edilmesi gereken nokta bu senaryoda hata miktarı artmıştır ancak toplam istek sayısına göre hata oranı düşmüştür.

İlk kontrol saatinde toplam 100 istek geldi ve bunlardan 10 tanesi hatalıysa (%10), sonraki saat gelen 10 istekten 2 ve üstünün hatalı olarak gelmesi durumu (%20). Bu durum bu senaryoda hatalı sayılmaz

İlk kontrol saatinde toplam 100 istek geldi ve bunlardan 10 tanesi hatalıysa (%10), sonraki saat gelen 5 istekten tamamının hatalı olarak gelmesi durumu (%100). Bu durum bu senaryoda hatalı sayılmaz

**Senaryo B**: İlk kontrol saatinde toplam 100 istek geldi ve bunlardan 10 tanesi hatalıysa (%10), sonraki saat gelen 100 istekten 15 ve üstünün hatalı olarak gelmesi durumu (%15).

İlk kontrol saatinde toplam 100 istek geldi ve bunlardan 10 tanesi hatalıysa (%10), sonraki saat gelen 200 istekten 30 ve üstünün hatalı olarak gelmesi durumu (%15).

İlk kontrol saatinde toplam 100 istek geldi ve bunlardan 10 tanesi hatalıysa (%10), sonraki saat gelen 10 istekten 2 ve üstünün hatalı olarak gelmesi durumu (%20). Dikkat edilmesi gereken nokta bu senaryoda hata miktarı azalmıştır ancak toplam istek sayısına göre hata oranı artmıştır.

İlk kontrol saatinde toplam 100 istek geldi ve bunlardan 10 tanesi hatalıysa (%10), sonraki saat gelen 5 istekten tamamının hatalı olarak gelmesi durumu (%100). Dikkat edilmesi gereken nokta bu senaryoda hata miktarı azalmıştır ancak toplam istek sayısına göre hata oranı artmıştır.

İlk kontrol saatinde toplam 100 istek geldi ve bunlardan 10 tanesi hatalıysa (%10), sonraki saat gelen 200 istekten 20 ve üstünün hatalı olarak gelmesi durumu (%10). Bu durum bu senaryoda hatalı sayılmaz çünkü hata miktarı artmıştır ancak toplam istek sayısına göre hata oranı değişmemiştir.

**Senaryo C**: EMA'nın üst bandı, belirli bir hata oranının normalin dışında olduğunu gösteren eşik olarak kullanılabilir. Bu durumda, hata oranı EMA'nın üst bandını aşarsa, bu bir anomali olarak işaretlenir.

## Senaryo A

Bu senaryoda, **yalnızca başarısız olan istekler filtrelenir** ve **son 1 saat** içindeki başarısız istekler incelenir. Eğer bir önceki saatte gelen toplam başarısız isteklerin oranı **%50 veya daha fazla** ise, bu durum bir **anomali** olarak kabul edilir.

Aşağıdaki görselde gösterildiği gibi, istek sayısı değil, bir önceki durumda gelen başarısız isteklerin sayısı önemlidir. Eğer bu sayının %50 veya daha fazlası başarısız istek gelirse anomali oluşacaktır.

**Uyarı : Görseldeki saatleri dikkate almayınız, yalnızca örnek amaçlı eklenmiştir.**

## Senaryo B

**Amaç:** Hata oranındaki artışı bir önceki sonuca kıyasla yüzde bazında ölçmek.

İlk 100 istek içinde 10 tanesi hatalı. Hata oranı = 10/100 = 0.10

İkinci 100 istekte 15 tanesi hatalı. Hata oranı = 15/100 = 0.15

Tüm isteklerin hatalı gelen isteklere oranı hesaplandıktan sonra, bir önceki durumun oranına göre %50'lik bir artış gerçekleştiğinde anomali oluşur.

**Uyarı : Görseldeki saatleri dikkate almayınız, yalnızca örnek amaçlı eklenmiştir.**

## Senaryo C

Son 1 dakikada bloklanan isteklerin sayısı, son 10 veri noktasına dayanarak hesaplanan EMA değeri ile karşılaştırılır ve üst Bollinger bandına eşit veya yüksekse, bu durum anomali olarak tespit edilir, standart sapma çarpan duyarlılığı 2.0 olarak ayarlanır.

- **Yeşil çizgi (Metric Value)**: Bloklanan isteklerin sayısını gösteriyor.
- **Kırmızı çizgi (EMA Lower Value)**: Hesaplanan alt Exponential Moving Average (EMA) değerini temsil ediyor.
- **Siyah çizgi (EMA Value)**: EMA'nın güncel değerini gösteriyor.
- **Mavi çizgi (EMA Upper Value)**: Hesaplanan üst EMA değerini temsil ediyor.

Koşullara göre, istek sayısı belirli bir zaman diliminde üst Bollinger bandının (yani mavi çizginin) üzerine çıktığında, bu durum anomali olarak kabul edilir.
