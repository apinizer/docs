---
title: "Kibana Maps ile Apinizer'a Gelen İsteklerin Coğrafi Olarak Görselleştirilmesi"
description: "Geolocation verilerini Kibana Maps ile harita üzerinde görselleştirme"
---

Bu dokümanda, Apinizer'da kullanılan geolocation verilerinin Kibana Maps özelliği ile hangi şehirlerden istek geldiğinin harita üzerinde nasıl görselleştirileceği anlatılacaktır.

Apinizer'da 2025 versiyonu ile birlikte geolocation özelliğini kullanabilirsiniz. Geolocation özelliğini kullanmak için ilgili dökümanı [Geolocation Şehir Bazlı Erişim Kontrolü](/tr/operations/yonetici-kilavuzlari/geolocation-sehir-bazli-erisim-kontrolu) sayfasına bakabilirsiniz.

## 1) Apinizer Üzerinden Sağlanan Geolocation Verisi

Apinizer'da gelen isteğin coğrafi konum verisi, Elasticsearch'te aşağıdaki gibi bir JSON formatında temsil edilmektedir.

```json
{
  "toClientBody": "[]",
  "loc": {
    "lat": 41.0,
    "lon": 28.0
  }
}
```

Lat (latitude) ve lon (longitude) değerleri, bir noktanın Dünya üzerindeki konumunu belirlemek için kullanılan coğrafi koordinatlardır.

**Örneğin:**

- Latitude: 41.0082° N, Longitude: 28.9784° E (İstanbul, Türkiye)
- Latitude: 40.7128° N, Longitude: 74.0060° W (New York, ABD)

## 2) Kibana'ya Veri Aktarma

### 2.1) Index Pattern Oluşturma

Kibana'ya veri aktarma adımında, Kibana **kurulumu** ve **entegrasyonu** sağlanmalıdır. Kibana kurulumu için ilgili dökümana [Kibana API Trafik Log Görselleştirme](/tr/tutorials/api-analitigi-ve-gozlemlenebilirlik-senaryolari/kibana-api-trafik-log-gorsellestirme) sayfasına bakabilirsiniz.

Kurulum sonrası Kibana'da, **Stack Management → Index Patterns** sayfasında, '**Create Index Pattern**' bölümünden yeni bir index pattern oluşturulabilir:

  <img
    src="/images/tutorials/nasil-yapilir-kilavuzlari/yonetici-kilavuzlari/kibana-maps-gorsellestirme/01-index-pattern-create.png"
    alt="Index Pattern Oluşturma"
    width="1000"
  />

Elasticsearch'te kullanılan **data stream** seçilerek adımlar tamamlanır ve oluşturma işlemi gerçekleştirilir:

  <img
    src="/images/tutorials/nasil-yapilir-kilavuzlari/yonetici-kilavuzlari/kibana-maps-gorsellestirme/02-data-stream-select.png"
    alt="Data Stream Seçimi"
    width="1000"
  />

Oluşturma işlemi tamamlandıktan sonra, ilgili alanları (**fields**) aşağıdaki sayfada görebilirsiniz:

  <img
    src="/images/tutorials/nasil-yapilir-kilavuzlari/yonetici-kilavuzlari/kibana-maps-gorsellestirme/03-fields-view.png"
    alt="Index Pattern Fields Görünümü"
    width="1000"
  />

### 2.2) Mevcut Index Pattern'i Kontrol Etme

Kibana daha önce **kurulduysa** ve **index pattern mevcutsa** aşağıdaki **Stack Management → Index Patterns** sayfasıdan Kibanaya eklediğiniz indeksi yenileyin. Arama kısmına **'loc'** yazarak ilgili değerin var olduğunu kontrol etmelisiniz.

  <img
    src="/images/tutorials/nasil-yapilir-kilavuzlari/yonetici-kilavuzlari/kibana-maps-gorsellestirme/04-loc-field-check.png"
    alt="loc Field Kontrolü"
    width="1000"
  />

Kibana, bu **'loc'** verilerini (**enlem ve boylam**) kullanarak, **harita** üzerinde gelen isteklerin **görselleştirilmesini** sağlar.

## 3) Kibana Maps ile Harita Paneli Eklemek ve Görselleştirmesi

**Kibana** ana sayfasında, sol menüdeki "**Maps**" sekmesine tıklayın. Bu, harita görselleştirmeleri oluşturmak için kullanacağınız uygulamadır:

  <img
    src="/images/tutorials/nasil-yapilir-kilavuzlari/yonetici-kilavuzlari/kibana-maps-gorsellestirme/05-maps-menu.png"
    alt="Kibana Maps Menüsü"
    width="1000"
  />

**Add layer** butonuna tıklayın. **Documents** seçeneğini tercih edin:

  <img
    src="/images/tutorials/nasil-yapilir-kilavuzlari/yonetici-kilavuzlari/kibana-maps-gorsellestirme/06-add-layer-documents.png"
    alt="Add Layer Documents Seçimi"
    width="1000"
  />

Index pattern'ı seçtikten sonra, 'loc' alanı otomatik seçilecek. Ardından, '**Add layer'** butonuna tıklayıp katmanı **ekleyip** isim vererek **kaydedebilirsiniz**:

  <img
    src="/images/tutorials/nasil-yapilir-kilavuzlari/yonetici-kilavuzlari/kibana-maps-gorsellestirme/07-add-layer-loc.png"
    alt="loc Alanı ile Layer Ekleme"
    width="1000"
  />

## 4) Sonuç

Bu dokümanda, Apinizer'a gelen isteklerin **IP bilgileri coğrafi verilere dönüştürülüp** Elasticsearch'e gönderildikten sonra, **Kibana Maps** kullanılarak hangi şehirlerden istek geldiği adım adım **görselleştirilmiştir**.

Bu yapı sayesinde, kullanıcı erişimleri şehir bazında analiz edilebilir.

Harita üzerinde gelen istekler, **yeşil işaretçilerle** gösterilecektir:

  <img
    src="/images/tutorials/nasil-yapilir-kilavuzlari/yonetici-kilavuzlari/kibana-maps-gorsellestirme/08-map-result.png"
    alt="Kibana Maps Harita Sonucu"
    width="1000"
  />
