---
title: "Sunucu IP Adresinin Değiştirilmesi Durumunda Yapılacaklar"
description: "Sunucu IP adresi değiştiğinde Kubernetes Master ve MongoDB için gerekli yapılandırma değişikliklerini yapabilir, sertifikaları yenileyebilir ve servislerin düzgün çalışmasını sağlayabilirsiniz."
---

## Kubernetes Master için yapılacaklar:

```bash
#Aşağıdaki dosyalarda ip'leri değiştirilir
/etc/kubernetes/admin.conf
/etc/kubernetes/controller-manager.conf
/etc/kubernetes/kubelet.conf
/etc/kubernetes/scheduler.conf
/etc/kubernetes/manifests/etcd.yaml
/etc/kubernetes/manifests/kube-apiserver.yaml

#Mevcut sertifikalar silinir
cd /etc/kubernetes/pki
rm -rf apiserver.* apiserver-kubelet-client.*

#Yeni sertifikalar oluşturulur (bu aşamada hatalar verebiliyor ancak gözardı edilebilirler)
sudo kubeadm init phase certs apiserver-kubelet-client
sudo kubeadm init phase certs apiserver
sudo systemctl restart kubelet

#Mevcut kullanıcının erişimi için güncel config dosyası kullanıcı altına taşınır
sudo cp -i /etc/kubernetes/admin.conf $HOME/.kube/config
sudo chown $(id -u):$(id -g) $HOME/.kube/config
```

## MongoDB için yapılacaklar:

```bash
#MongoDB'ye bağlanılır
mongosh mongodb://<YOUR_NEW_MONGO_IP_ADDRESS>:25080 --authenticationDatabase "admin" -u "apinizer" -p

#Yeni ip ayarları, "force" seçeneğiyle verilir
cfg = rs.conf()
cfg.members[0].host = "<YOUR_NEW_MONGO_IP_ADDRESS>:25080"
rs.reconfig(cfg, {force:true})
```
