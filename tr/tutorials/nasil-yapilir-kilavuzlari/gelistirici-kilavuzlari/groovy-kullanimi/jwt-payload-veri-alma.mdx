---
title: "Gelen JWT Anahtarından Payload Alanındaki Json Verisinden Veri Alan Script"
description: "Groovy script ile JWT token'dan payload verisi alma işlemi"
---

Bu sayfa, Groovy script politikası kullanarak JWT token'dan payload alanındaki JSON verisinden veri almanın nasıl yapılacağını açıklar.

## Groovy Script

```groovy
import groovy.json.JsonSlurper
import org.apache.commons.codec.binary.Base64

def authzHeaderValue = requestHeaderMapToTargetAPI.get("Authorization")
authzHeaderValue = authzHeaderValue.split('\\.')[1] //Bearer yazan kısım için, veri her zaman ilk nokta işaretinden sonra geçtiği için ayrılma ihtiyacı duyulmamıştır.

def decodedValue = new String(Base64.decodeBase64(authzHeaderValue),"UTF-8")
def jsonSlurper = new JsonSlurper()
def jsonMessage = jsonSlurper.parseText(decodedValue)

//do some logic with json:
requestHeaderMapToTargetAPI.put("usernameTest",jsonMessage.username)
```

## Açıklama

Bu script, Authorization header'ından gelen JWT token'ın payload kısmını decode eder ve JSON formatında parse eder. JWT token formatı `header.payload.signature` şeklindedir ve script, token'ı nokta (.) karakterine göre ayırarak payload kısmını (ikinci bölüm) alır.

Payload kısmı Base64 kodlanmış JSON formatındadır. Script bu kısmı decode edip JSON olarak parse eder ve içindeki verilere erişim sağlar.

Örnekte, payload içindeki `username` alanı alınarak `usernameTest` adıyla header'a eklenmektedir.

---

# Gelen JWT Anahtarından Payload Alanındaki Json Verisinden Veri Alan Script

Bu script, Authorization header'ından gelen JWT token'ın payload kısmını decode ederek içindeki JSON verisinden bilgi alır.

**Groovy Script Kodu**

```groovy
import groovy.json.JsonSlurper
import org.apache.commons.codec.binary.Base64

def authzHeaderValue=requestHeaderMapToTargetAPI.get("Authorization")
authzHeaderValue = authzHeaderValue.split('\\.')[1]
//Bearer yazan kısım için, veri her zaman ilk nokta işaretinden sonra geçtiği için ayrılma ihtiyacı duyulmamıştır.

def decodedValue = new String(Base64.decodeBase64(authzHeaderValue),"UTF-8")
def jsonSlurper = new JsonSlurper()
def jsonMessage = jsonSlurper.parseText(decodedValue)

//do some logic with json:
requestHeaderMapToTargetAPI.put("usernameTest",jsonMessage.username)
```

**Açıklama**

- Authorization header'ından JWT token alınır
- Token'ın payload kısmı (ikinci bölüm) ayrılır
- Base64 decode işlemi yapılır
- JSON olarak parse edilir
- İstenen alanlar (örneğin username) çıkarılarak kullanılabilir
