---
title: Request URL Path Okuma ve Backend Adresi Değiştirme
description: "Groovy script ile request URL path'i okuma ve backend adresini dinamik olarak değiştirme işlemi"
---

## Senaryo

Apinizer worker'ın `http://<SERVICE_IP>:30080/apigateway/` adresi üzerinde çalıştığı durumda [Petstore API'sini](https://petstore.swagger.io/v2/swagger.json) Apinizer'a tanıtmış olalım.

- API Proxy'nin relative path değeri: `"/apigateway/petstore"`
- API Proxy'nin tam adresi: `http://<SERVICE_IP>:30080/apigateway/petstore/`
- Backend Routing URL: `https://petstore.swagger.io/v2`

## Kullanım

Aşağıdaki endpoint'e GET isteği ile erişildiğinde:

```
http://<SERVICE_IP>:30080/apigateway/petstore/pet/findByStatus?status=pending
```

Script politikası içerisinde yer alan `requestUrlFromClient` değişkeni içerisinde `"/pet/findByStatus"` değeri yer alır. SOAP servis olsaydı bu değişkenin değeri SOAP method'unun adı olacaktı.

Script politikası içindeki `requestBackendUrlToTargetAPI` değişkenine `"/xxx/yyy"` değeri verildiğinde, isteğin hangi metoda geldiği farketmeksizin isteğe mevcut query param eklenerek şu adrese gider:

```
https://petstore.swagger.io/v2/xxx/yyy?status=pending
```

<Note>
Bu script, request hattında (Request Policy) çalıştırılmalıdır çünkü `requestUrlFromClient` ve `requestBackendUrlToTargetAPI` değişkenlerini kullanmaktadır.
</Note>
