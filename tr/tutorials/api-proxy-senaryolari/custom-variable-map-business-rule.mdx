---
title: Custom Variable Map Kullanarak Değişken İçeriğe Göre Business Rule Uygulaması
---

Bu senaryoda, Apinizer üzerinde bir Mock API oluşturulacak. Yapılacak istekte, script kullanarak **customVariableMap** değişkenine **stop=true** değeri eklenecektir.

Sonraki aşamada, bir **Business Rule** politikası eklenerek **customVariableMap** içindeki değer kontrol edilecektir. Eğer bu değer **stop=true** ise, isteğin **backend'e gitmesi engellenecektir**

Add policy üzerinden politikaları ekleyelim.
<img src="/images/tutorials/custom1.png" alt="All kısmına ekleme" width="1000" />


Politika olarak **Script** ve **Business Rule** ekliyoruz.
<img src="/images/tutorials/custom2.png" alt="All kısmına ekleme" width="1000" />


**Script** politikasında **Groovy** dilini seçerek, customVariableMap değerine stop=true atanacaktır.
<img src="/images/tutorials/custom3.png" alt="All kısmına ekleme" width="1000" />

Business Rule politikasında belirlediğimiz **stop** aksiyonunu seçelim.
<img src="/images/tutorials/custom4.png" alt="All kısmına ekleme" width="1000" />

**Conditions** alanından **"'Custom Variable'"** seçiniz ve name alanına **stop** yazınız ve kaydediniz.
<img src="/images/tutorials/custom5.png" alt="All kısmına ekleme" width="1000" />

Aşağıda eklediğiniz kural ile birlikte, eğer **customVariableMap** içindeki değer **"'true'"** ise istek backende iletilmeyecektir.
<img src="/images/tutorials/custom6.png" alt="All kısmına ekleme" width="1000" />

Aşağıdaki konsol üzerinden test işlemi gerçekleştirildiğinde, isteğin durdurulduğunu belirten bir yanıt mesajı dönmektedir.
<img src="/images/tutorials/custom7.png" alt="All kısmına ekleme" width="1000" />
