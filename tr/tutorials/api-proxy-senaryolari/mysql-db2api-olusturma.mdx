---
title: MySQL Database Üzerinden DB-2-API Oluşturulması
description: "MySQL veritabanı bağlantısı üzerinden Apinizer'da DB-2-API oluşturmayı açıklar. Veritabanı bağlantısının kurulmasından endpoint'lerin tanımlanmasına, API Proxy'ye dönüştürülmesinden test edilmesine kadar tüm adımları içerir."
---

Aşağıdaki grafikte yer alan numaralandırmalar işlemlerin **yapılış sırasına aittir.**

- **API Client**, Apinizer üzerinde yer alan **DB-2-API** içerisinde bulunan bir **endpoint'e** istekte bulunur.
- **Apinizer** bu isteği **veri tabanına** gönderir, veri tabanı üzerinde ilgili **endpoint'e** ait sorgu çalıştırılır.
- **Veri tabanından ilgili sorguya** ait yanıt **Apinizer'a** gelir.
- **Apinizer, API Client'a yanıtı gönderir.**

<img src="/images/tutorials/db-ana.png" alt="Veri tabanı bağlantısı sayfası" width="1000" />


<Steps>
  <Step title="Veritabanı bağlantısının kurulması">
    MySQL veritabanı bağlantısının Apinizer'da tanımlanması.
  </Step>
  <Step title="Endpoint'lerin oluşturulması">
    GET, POST, PUT, DELETE işlemleri için endpoint'lerin tanımlanması.
  </Step>
  <Step title="API Proxy'ye dönüştürme">
    DB-2-API'nin API Proxy formatına dönüştürülmesi.
  </Step>
  <Step title="Test edilmesi">
    Oluşturulan endpoint'lerin test edilmesi.
  </Step>
</Steps>


## Veri Tabanı Bağlantısının Gerçekleştirilmesi

**Connection Management** menüsü altında yer alan **Database** ifadesi seçilir.

<img src="/images/tutorials/db1.png" alt="Veri tabanı bağlantısı sayfası" width="1000" />

<Info>
  Daha önceden herhangi bir veri tabanı bağlantısı yapılmadığı için bu sayfa boş gözükmektedir, sağ üst köşede yer alan **Create** butonuna tıklanır.
</Info>

MySQL veri tabanı bağlantısı oluşturulmaya başlanır.

<img src="/images/tutorials/db2.png" alt="MySQL veri tabanı bağlantısı oluşturma sayfası" width="1000" />

Bu sayfada yer alan girdi alanları incelenecek olursa;

- **Name** alanı ile bağlantısını sağladığınız veri tabanının ismi yazılır.
- **Description** alanı ile oluşturulacak olan bağlantıya açıklama yapılır.
- **Database Type** ile oluşturulacak bağlantının tipi seçilir.
- **JDBC URL** alanı ile bağlanılacak olan veri tabanının adresi yazılır, örnek bağlantı cümlesi de input alanı içerisinde yer almaktadır.
- **Username** alanı ile bağlanılacak veri tabanı için girilmesi gereken kullanıcı adı, **Password** alanına da bağlantı esnasında girilmesi gereken parola bilgisi yazılır.
- Bu alanlar haricinde kalan diğer alanlar hakkında bilgi için [veritabanı bağlantısı](/tr/entegrasyon-otomasyon/baglanti-yonetimi/database) sayfasına bakabilirsiniz.

<Tip>
  Gerekli olan veri tabanı bağlantı bilgileri girildikten sonra yukarıda ortada yer alan **Test Connection** butonu ile bağlantı test edilir, **Save And Deploy** butonuna tıklanır ve bağlantı oluşturulur.
</Tip>
<img src="/images/tutorials/db3.png" alt="Veri tabanı bağlantısı kaydedildikten sonra" width="1000" />


Kaydettikten sonra ise elde edilecek ekran görüntüsü aşağıdaki görselde yer almaktadır.

<img src="/images/tutorials/db3-new.png" alt="Veri tabanı bağlantısı kaydedildikten sonra" width="1000" />

## DB-2-API'nin Oluşturulması

Veri tabanı bağlantısı gerçekleştirildikten sonra DB-2-API oluşturma aşamasına geçilir.

**Development** menüsünde bulunan **API Creator** menüsünün altında yer alan **DB-2-API** seçeneği seçilir.

<img src="/images/tutorials/db4.png" alt="DB-2-API seçeneği seçildikten sonra boş sayfa" width="1000" />

<Info>
  **DB-2-API** seçeneği seçildikten sonra ekrana boş bir sayfa gelmektedir. Bunun sebebi daha önce herhangi bir DB-2-API oluşturulmamış olmasıdır.
</Info>

Bu ekranda sağ üst köşede yer alan **Create** butonuna tıklanarak DB-2-API oluşturmaya başlanır.
<img src="/images/tutorials/db5.png" alt="Create butonuna tıkladıktan sonra çıkan sayfa" width="1000" />

**Create** butonuna tıkladıktan sonra karşımıza çıkan sayfa aşağıda yer almaktadır.
<img src="/images/tutorials/db5-new.png" alt="Create butonuna tıkladıktan sonra çıkan sayfa" width="1000" />


**Create** butonuna tıkladıktan sonra karşımıza çıkan sayfada:

- **Name** alanından **DB-2-API**'ye bir isim verilmesi gereklidir. Bu alan boş geçilemez bir alandır.
- İsteğe göre açıklama eklenebilir.

**Name** alanı doldurulduktan sonra **Save and Next** butonuna tıklanır ve bir sonraki adıma geçiş yapılır.

Bu sayfada artık DB-2-API oluşturabilir.

Kırmızı dikdörtgen içerisinde yer almakta olan **Add** butonuna tıklayarak ilk endpoint oluşturulur.

<img src="/images/tutorials/db6-yeni.png" alt="Add butonuna tıklayarak endpoint oluşturma" width="1000" />

Endpoint oluşturma ekranında yer alan alanlar:

- **HTTP Method** alanı ile oluşturulacak olan endpoint'in **(GET,POST,DELETE,PUT vb.)** metotları seçilir.
- **Name/URL** alanına endpoint'in **ismi** girilir.
- **Description** alanına endpoint ile ilgili **açıklama** eklenebilir.
- **Connection Pool Definition** alanı ile bağlantısı sağlanacak olan veri tabanı seçilir.
- **Timeout** alanı ile oluşturulan sorgunun kaç saniye sonra **timeout** olacağı belirtilir.
- **Type of SQL Statement** ifadesi ile yazılacak olan **SQL sorgusunun hangi tipte** oluşturulacağı seçilir.
- **Enter SQL Statement** alanına ise yazılacak **SQL sorgusu** girilir.
<img src="/images/tutorials/db6.2.png" alt="GET endpoint için alanlar" width="1000" />


### GET Endpoint: /getSalariesByEmpNo

İlk olarak /getSalariesByEmpNo isimli endpoint oluşturulacaktır.

Bu endpoint'in kullanılabilmesi için **Query** tipinde bir parametre gönderilmesi gereklidir.

Yukarıda tek tek anlatılan kısımlara bu endpoint'de kullanılacak alanlar girilmiştir.

<img src="/images/tutorials/db7.png" alt="GET endpoint için alanlar" width="1000" />

Oluşturulan Query tipindeki parametreye ait görselde aşağıda yer almaktadır.

<img src="/images/tutorials/db8.png" alt="Query tipindeki parametre" width="1000" />

Parametrenin özellikleri:

- **Data Type**: integer
- **Repetition Type**: Single (tek bir alan içerdiği için)
- **Parameter Type**: Query
- **Test Value**: Test edilecek değer yazılarak örnek yanıt elde edilir

**Save** butonuna tıklanarak endpoint kaydedilir.

### PUT Endpoint: /updateDepartmentByDeptNo

İkinci oluşturulması gereken endpoint ise /updateDepartmentByDeptNo isimli endpoint'dir.

Bunun için ise aşağıdaki görselde de görüldüğü üzere kırmızı dikdörtgen içerisinde yer alan **Add** butonuna tıklanması gereklidir.

<img src="/images/tutorials/db9.png" alt="Add butonuna tıklama (ikinci endpoint için)" width="1000" />

Tıkladıktan sonra yan tarafta endpoint'in oluşturabileceği alan ekrana gelmektedir.

Oluşturulacak endpoint **Body** tipinde bir parametre almaktadır.
<img src="/images/tutorials/db9.1.png" alt="Add butonuna tıklama (ikinci endpoint için)" width="1000" />

Yukarıda tek tek anlatılan kısımlara bu endpoint'de kullanılacak alanlar girilmiştir.

Oluşturulan Body tipindeki parametreye ait görselde aşağıda yer almaktadır.
<img src="/images/tutorials/db10.png" alt="PUT endpoint için alanlar" width="1000" />

Bu endpoint'te iki farklı parametre değeri aldığı için parametreler ayrı ayrı olacak şekilde tanımlanmıştır.

Oluşturulan endpoint bir update işlemi gerçekleştirdiği için Parameter Type olarak Body ifadesi seçilmiştir.

Yazılan SQL sorgusu da test edildiğinde yukarıdaki görselde yer alan yanıtı elde edilir.


### DELETE Endpoint: /deleteSalariesByEmpNo

Son oluşturulması gereken endpoint ise /deleteSalariesByEmpNo isimli endpoint'dir.

Bu endpoint'i eklemek için aşağıdaki görselde kırmızı dikdörtgen içerisinde yer alan **Add** butonuna tıklanır ve sağ tarafta açılan ekran üzerinden endpoint oluşturulur.

<img src="/images/tutorials/db12.png" alt="Add butonuna tıklama (üçüncü endpoint için)" width="1000" />

Gerekli alanlar doldurduktan sonra endpoint içerisinde yer alacak olan Query parametresi oluşturulur.

<img src="/images/tutorials/db13.png" alt="DELETE endpoint için Query parametresi" width="1000" />

Oluşturulan Query parametresi ile yazılmış olan SQL sorgusu test edilir ve aşağıdaki görselde yer alan örnek yanıt elde edilir.

<img src="/images/tutorials/db14.png" alt="DELETE endpoint test sonucu" width="1000" />

Bu endpoint kaydedilir ve oluşturulacak olan DB-2-API'nin son hali de aşağıdaki görselde yer alır.

API'de bulunan endpoint'ler solda yer alan dikdörtgen içerisinde yer almaktadır.

<img src="/images/tutorials/db15.png" alt="DB-2-API'nin son hali" width="1000" />

Tüm endpoint'ler oluşturulduktan sonra sağ üst köşede yer alan **Create API Proxy** butonuna tıklanır.

## DB-2-API'den API Proxy Oluşturulması

Bu sayfada:

- **Name** alanına DB-2-API'den oluşturulacak **API Proxy'ye** isim verilir.
- **Relative Path** ifadesine **/db2api** path ifadesi yazılır. Bu adres API Proxy'nin dışarıya açılacağı adres olacaktır.

<img src="/images/tutorials/db16.png" alt="API Proxy oluşturma sayfası" width="1000" />

Sağ üst köşede yer alan **Save** butonuna tıklanır ve proxy kaydedilir.

Kaydetme işlemi gerçekleştikten sonra ise aşağıdaki görselde yer alan sayfaya gelinir.

<img src="/images/tutorials/db17.png" alt="Kaydetme işleminden sonra gelen sayfa" width="1000" />

## API Proxy'nin Test Edilmesi

Burada yukarıda bulunan ve görselde kırmızı dikdörtgen içerisine alınmış **Deploy** butonuna basarak **API Proxy deploy edilir**.

<img src="/images/tutorials/db18.png" alt="Deploy butonu" width="1000" />

Proxy deploy edildikten sonra sırasıyla oluşturulan endpoint'ler test edilir.

Test işlemleri için **Develop** sekmesi seçilir.


<Steps>
  <Step title="GET endpoint testi">
    **/getSalariesByEmpNo** isimli endpoint seçilir ve **Test Endpoint** butonuna tıklanır.

      <img src="/images/tutorials/db19.png" alt="Develop sekmesi" width="1000" />

    **Query** parametresi olarak **"10005"** değeri girilir ve kırmızı dikdörtgen içerisinde yer almakta olan yanıt elde edilir.

      <img src="/images/tutorials/db20.png" alt="Develop sekmesi" width="1000" />
  </Step>
  <Step title="PUT endpoint testi">
    Bu endpoint'i test ettikten sonra ikinci endpoint olan **/updateDepartmentByDeptNo** isimli endpoint test için seçilir.

    **Test Endpoint** butonuna tıklanır.

    <img src="/images/tutorials/db22.png" alt="PUT endpoint testi" width="1000" />

    Bu endpoint **Body** içerisinde iki adet veri istediği için bunlar **key/value** biçiminde verilir.

    **Send** butonuna tıkladığında yanıt olarak kırmızı dikdörtgen içerisinde yer alan yanıt elde edilir.

    <img src="/images/tutorials/db23.png" alt="PUT endpoint test sonucu" width="1000" />
  </Step>
  <Step title="DELETE endpoint testi">
    Son olarak **/deleteSalariesByEmpNo** isimli endpoint test için seçilir.

    **Test Endpoint** butonuna tıklanır.

    <img src="/images/tutorials/db24.png" alt="DELETE endpoint testi" width="1000" />

    Bu endpoint **Query** tipinde parametre almaktadır, değer olarak **"10005"** değerini girip **Send** butonuna tıkladığında elde edilen yanıt ise kırmızı dikdörtgen içerisinde yer almaktadır.

    <img src="/images/tutorials/db25.png" alt="DELETE endpoint test sonucu" width="1000" />
  </Step>
</Steps>
