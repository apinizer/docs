---
title: MySQL Database Üzerinden DB-2-API Oluşturulması
description: "MySQL veritabanı bağlantısı üzerinden Apinizer'da DB-2-API oluşturmayı açıklar. Veritabanı bağlantısının kurulmasından endpoint'lerin tanımlanmasına, API Proxy'ye dönüştürülmesinden test edilmesine kadar tüm adımları içerir."
---

Aşağıdaki grafikte yer alan numaralandırmalar işlemlerin **yapılış sırasına aittir.**

- **API Client**, Apinizer üzerinde yer alan **DB-2-API** içerisinde bulunan bir **endpoint'e** istekte bulunur.
- **Apinizer** bu isteği **veri tabanına** gönderir, veri tabanı üzerinde ilgili **endpoint'e** ait sorgu çalıştırılır.
- **Veri tabanından ilgili sorguya** ait yanıt **Apinizer'a** gelir.
- **Apinizer, API Client'a yanıtı gönderir.**

<Steps>
  <Step title="Veritabanı bağlantısının kurulması">
    MySQL veritabanı bağlantısının Apinizer'da tanımlanması.
  </Step>
  <Step title="Endpoint'lerin oluşturulması">
    GET, POST, PUT, DELETE işlemleri için endpoint'lerin tanımlanması.
  </Step>
  <Step title="API Proxy'ye dönüştürme">
    DB-2-API'nin API Proxy formatına dönüştürülmesi.
  </Step>
  <Step title="Test edilmesi">
    Oluşturulan endpoint'lerin test edilmesi.
  </Step>
</Steps>


## Veri Tabanı Bağlantısının Gerçekleştirilmesi

**Connection Management** menüsü altında yer alan **Database** ifadesi seçilir.

<Info>
  Daha önceden herhangi bir veri tabanı bağlantısı yapılmadığı için bu sayfa boş gözükmektedir, sağ üst köşede yer alan **Create** butonuna tıklanır.
</Info>

Bu sayfada yer alan girdi alanları incelenecek olursa;

- **Name** alanı ile bağlantısını sağladığınız veri tabanının ismi yazılır.
- **Description** alanı ile oluşturulacak olan bağlantıya açıklama yapılır.
- **Database Type** ile oluşturulacak bağlantının tipi seçilir.
- **JDBC URL** alanı ile bağlanılacak olan veri tabanının adresi yazılır, örnek bağlantı cümlesi de input alanı içerisinde yer almaktadır.
- **Username** alanı ile bağlanılacak veri tabanı için girilmesi gereken kullanıcı adı, **Password** alanına da bağlantı esnasında girilmesi gereken parola bilgisi yazılır.
- Bu alanlar haricinde kalan diğer alanlar hakkında bilgi için [veritabanı bağlantısı](/tr/entegrasyon-otomasyon/baglanti-yonetimi/database) sayfasına bakabilirsiniz.

<Tip>
  Gerekli olan veri tabanı bağlantı bilgileri girildikten sonra yukarıda ortada yer alan **Test Connection** butonu ile bağlantı test edilir, **Save And Deploy** butonuna tıklanır ve bağlantı oluşturulur.
</Tip>

## DB-2-API'nin Oluşturulması

Veri tabanı bağlantısı gerçekleştirildikten sonra DB-2-API oluşturma aşamasına geçilir.

**Development** menüsünde bulunan **API Creator** menüsünün altında yer alan **DB-2-API** seçeneği seçilir.

<Info>
  **DB-2-API** seçeneği seçildikten sonra ekrana boş bir sayfa gelmektedir. Bunun sebebi daha önce herhangi bir DB-2-API oluşturulmamış olmasıdır.
</Info>

Bu ekranda sağ üst köşede yer alan **Create** butonuna tıklanarak DB-2-API oluşturmaya başlanır.

**Create** butonuna tıkladıktan sonra karşımıza çıkan sayfada:

- **Name** alanından **DB-2-API**'ye bir isim verilmesi gereklidir. Bu alan boş geçilemez bir alandır.
- İsteğe göre açıklama eklenebilir.

**Name** alanı doldurulduktan sonra **Save and Next** butonuna tıklanır ve bir sonraki adıma geçiş yapılır.

**Add** butonuna tıklayarak ilk endpoint oluşturulur.

Endpoint oluşturma ekranında yer alan alanlar:

- **HTTP Method** alanı ile oluşturulacak olan endpoint'in **(GET,POST,DELETE,PUT vb.)** metotları seçilir.
- **Name/URL** alanına endpoint'in **ismi** girilir.
- **Description** alanına endpoint ile ilgili **açıklama** eklenebilir.
- **Connection Pool Definition** alanı ile bağlantısı sağlanacak olan veri tabanı seçilir.
- **Timeout** alanı ile oluşturulan sorgunun kaç saniye sonra **timeout** olacağı belirtilir.
- **Type of SQL Statement** ifadesi ile yazılacak olan **SQL sorgusunun hangi tipte** oluşturulacağı seçilir.
- **Enter SQL Statement** alanına ise yazılacak **SQL sorgusu** girilir.

### GET Endpoint: /getSalariesByEmpNo

Bu endpoint'in kullanılabilmesi için **Query** tipinde bir parametre gönderilmesi gereklidir.

Parametrenin özellikleri:

- **Data Type**: integer
- **Repetition Type**: Single (tek bir alan içerdiği için)
- **Parameter Type**: Query
- **Test Value**: Test edilecek değer yazılarak örnek yanıt elde edilir

**Save** butonuna tıklanarak endpoint kaydedilir.

### PUT Endpoint: /updateDepartmentByDeptNo

**Add** butonuna tıklanarak yeni endpoint oluşturulur.

Bu endpoint **Body** tipinde parametre almaktadır ve **iki farklı parametre** değeri aldığı için parametreler **ayrı ayrı** tanımlanmıştır.

**Parameter Type** olarak **Body** seçilir ve SQL sorgusu test edilir.

### DELETE Endpoint: /deleteSalariesByEmpNo

**Add** butonuna tıklanarak son endpoint oluşturulur.

Endpoint içerisinde **Query** tipinde parametre tanımlanır ve SQL sorgusu test edilir.

Tüm endpoint'ler oluşturulduktan sonra sağ üst köşede yer alan **Create API Proxy** butonuna tıklanır.

## DB-2-API'den API Proxy Oluşturulması

Bu sayfada:

- **Name** alanına DB-2-API'den oluşturulacak **API Proxy'ye** isim verilir.
- **Relative Path** ifadesine **/db2api** path ifadesi yazılır. Bu adres API Proxy'nin dışarıya açılacağı adres olacaktır.

Sağ üst köşede yer alan **Save** butonuna tıklanır ve proxy kaydedilir.

## API Proxy'nin Test Edilmesi

**Deploy** butonuna basarak **API Proxy deploy edilir**.

Proxy deploy edildikten sonra sırasıyla oluşturulan endpoint'ler test edilir.

<Steps>
  <Step title="GET endpoint testi">
    **Develop** sekmesi seçilir. **/getSalariesByEmpNo** endpoint'i seçilir ve **Test Endpoint** butonuna tıklanır. **Query** parametresi olarak **"10005"** değeri girilir ve **Send** butonuna tıklanır.
  </Step>
  <Step title="PUT endpoint testi">
    **/updateDepartmentByDeptNo** endpoint'i seçilir ve **Test Endpoint** butonuna tıklanır. **Body** içerisinde iki adet veri **key/value** biçiminde verilir ve **Send** butonuna tıklanır.
  </Step>
  <Step title="DELETE endpoint testi">
    **/deleteSalariesByEmpNo** endpoint'i seçilir ve **Test Endpoint** butonuna tıklanır. **Query** tipinde parametre olarak **"10005"** değeri girilir ve **Send** butonuna tıklanır.
  </Step>
</Steps>
