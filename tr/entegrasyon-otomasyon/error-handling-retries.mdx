---
title: 'Error Handling & Retries'
description: 'Hata yönetimi stratejilerini yapılandırın, retry mantığını uygulayın, hataları zarif bir şekilde yönetin ve Task Flow güvenilirliğini sağlayın'
---

Hata yönetimi ve retry'lar, güvenilir Task Flow'lar oluşturmak için çok önemlidir. Uygun hata yönetimi, hataların yakalanmasını, loglanmasını ve uygun şekilde yönetilmesini sağlar, retry mekanizmaları ise geçici hatalardan kurtulmaya yardımcı olur.

## Genel Bakış

Task Flow'larda hata yönetimi, hataları yakalamanıza, retry mantığı uygulamanıza ve fallback mekanizmaları sağlamanıza olanak tanır. Bu, entegrasyon iş akışlarınızın dayanıklı olmasını ve hatalardan kurtulabilmesini sağlar.

<CardGroup cols={2}>
  <Card title="Hata Yönetimi" icon="shield-halved">
    Hataları zarif bir şekilde yakalayın ve yönetin
  </Card>
  <Card title="Retry Mantığı" icon="rotate-right">
    Başarısız işlemleri otomatik olarak tekrar deneyin
  </Card>
  <Card title="Fallback Stratejileri" icon="arrow-down">
    Alternatif çalıştırma yolları sağlayın
  </Card>
  <Card title="Hata Loglama" icon="file-lines">
    Debug ve izleme için hataları loglayın
  </Card>
</CardGroup>

## Hata Türleri

### Konnektör Hataları

Konnektör çalıştırma sırasında oluşan hatalar:

* **Bağlantı Hataları**: Dış sisteme bağlanılamadı
* **Zaman Aşımı Hataları**: İşlem zaman limitini aştı
* **Kimlik Doğrulama Hataları**: Geçersiz kimlik bilgileri
* **Doğrulama Hataları**: Geçersiz girdi verisi
* **İş Mantığı Hataları**: Uygulamaya özel hatalar

### Task Flow Hataları

Task Flow çalıştırma sırasında oluşan hatalar:

* **Değişken Hataları**: Eksik veya geçersiz değişkenler
* **İfade Hataları**: Geçersiz ifade değerlendirmesi
* **Akış Kontrol Hataları**: Geçersiz akış mantığı
* **Kaynak Hataları**: Yetersiz kaynaklar

## Hata Yönetimi Stratejileri

### Try-Catch Blokları

Hataları yönetmek için task'ları try-catch bloklarına sarın:

**Yapılandırma:**

```
Try Block:
  ├─ Task 1
  ├─ Task 2
  └─ Task 3
Catch Block:
  ├─ Log Error
  ├─ Send Notification
  └─ Set Error Variable
```

**Hata Yönetimi Eylemleri:**

* **Log Error**: Hata detaylarını kaydedin
* **Set Variable**: Hata bilgisini saklayın
* **Send Notification**: Yöneticileri uyarın
* **Continue**: Sonraki task'a devam edin
* **Fail**: Çalıştırmayı durdurun

### Error Handler Node

Belirli hataları yakalamak için Error Handler node'larını kullanın:

**Error Handler Yapılandırması:**

* **Error Types**: Yakalanacak hata türleri
* **Error Actions**: Hata durumunda yapılacak eylemler
* **Error Variables**: Hata durumunda ayarlanacak değişkenler

**Örnek:**

```
Error Handler:
  Error Types: [ConnectionError, TimeoutError]
  Actions:
    - Log error details
    - Set error variable
    - Send email notification
    - Continue with fallback task
```

### Koşullu Hata Yönetimi

Koşullara göre hataları yönetin:

**Koşullu Error Handler:**

```javascript
if (error.type === 'ConnectionError') {
  // Bağlantıyı tekrar dene
  retryConnection();
} else if (error.type === 'ValidationError') {
  // Log ve başarısız ol
  logError(error);
  throw error;
} else {
  // Varsayılan yönetim
  handleGenericError(error);
}
```

## Retry Mekanizmaları

### Retry Yapılandırması

Konnektörler için retry mantığını yapılandırın:

**Retry Ayarları:**

* **Max Retries**: Maksimum retry deneme sayısı
* **Retry Interval**: Retry'lar arasındaki süre
* **Retry Strategy**: Retry aralıklarının nasıl hesaplanacağı
* **Retry Conditions**: Ne zaman retry yapılacağı

**Örnek Yapılandırma:**

```json
{
  "retry": {
    "maxAttempts": 3,
    "initialInterval": 1000,
    "maxInterval": 10000,
    "multiplier": 2,
    "retryOn": ["ConnectionError", "TimeoutError"]
  }
}
```

### Retry Stratejileri

#### Fixed Interval

Sabit aralıklarla retry:

```javascript
retryInterval = 5000 // 5 saniye
```

**Kullanım Senaryosu**: Öngörülebilir zamanlamalı basit retry'lar

#### Exponential Backoff

Aralığı üstel olarak artırın:

```javascript
interval = initialInterval * (multiplier ^ attemptNumber)
```

**Örnek:**

* Deneme 1: 1 saniye
* Deneme 2: 2 saniye
* Deneme 3: 4 saniye
* Deneme 4: 8 saniye

**Kullanım Senaryosu**: Başarısız sistemlerdeki yükü azaltın

#### Linear Backoff

Aralığı doğrusal olarak artırın:

```javascript
interval = initialInterval + (step * attemptNumber)
```

**Örnek:**

* Deneme 1: 1 saniye
* Deneme 2: 2 saniye
* Deneme 3: 3 saniye
* Deneme 4: 4 saniye

**Kullanım Senaryosu**: Kademeli retry artışı

### Retry Koşulları

Ne zaman retry yapılacağını belirleyin:

**Retry Yapılabilir Hatalar:**

* Bağlantı hataları
* Zaman aşımı hataları
* Geçici hizmet kullanılamazlığı
* Rate limiting (backoff ile)

**Retry Yapılamaz Hatalar:**

* Kimlik doğrulama hataları
* Doğrulama hataları
* İş mantığı hataları
* Kalıcı başarısızlıklar

**Örnek:**

```javascript
function shouldRetry(error) {
  const retryableErrors = [
    'ConnectionError',
    'TimeoutError',
    'ServiceUnavailableError'
  ];
  
  return retryableErrors.includes(error.type) && 
         error.attemptNumber < maxRetries;
}
```

## Fallback Stratejileri

### Alternatif Yollar

Alternatif çalıştırma yolları sağlayın:

**Fallback Akışı:**

```
Main Path:
  ├─ Try: Call Primary API
  └─ On Error → Fallback Path
       ├─ Call Backup API
       └─ Continue
```

**Yapılandırma:**

* **Primary Task**: Çalıştırılacak ana task
* **Fallback Task**: Hata durumunda alternatif task
* **Fallback Condition**: Fallback ne zaman kullanılacak

### Varsayılan Değerler

Hata durumunda varsayılan değerler sağlayın:

```javascript
try {
  result = await fetchData();
} catch (error) {
  result = getDefaultData();
}
```

**Kullanım Senaryosu**: Task Flow'un varsayılan verilerle devam etmesini sağlayın

### Kısmi Başarı

Kısmi başarısızlıkları yönetin:

```javascript
results = [];
for (item of items) {
  try {
    result = await processItem(item);
    results.push(result);
  } catch (error) {
    // Hatayı logla ama devam et
    logError(error);
    // İsteğe bağlı olarak hata sonucu ekle
    results.push({error: error.message});
  }
}
```

**Kullanım Senaryosu**: Birden fazla öğeyi işleyin, bireysel başarısızlıklarda devam edin

## Hata Loglama

### Hata Bilgisi

Kapsamlı hata bilgilerini loglayın:

**Hata Detayları:**

* **Error Type**: Hata türü
* **Error Message**: Hata mesajı
* **Error Code**: Varsa hata kodu
* **Stack Trace**: Tam stack trace
* **Context**: Task Flow bağlamı
* **Variables**: Hata anındaki değişken değerleri
* **Timestamp**: Hatanın oluştuğu zaman

**Örnek Log Girişi:**

```json
{
  "timestamp": "2024-01-15T10:30:00Z",
  "taskFlow": "ProcessOrder",
  "task": "DatabaseConnector",
  "errorType": "ConnectionError",
  "errorMessage": "Veritabanına bağlanılamadı",
  "errorCode": "DB_CONN_001",
  "variables": {
    "orderId": "12345",
    "customerId": "67890"
  },
  "attemptNumber": 2,
  "maxRetries": 3
}
```

### Loglama Hedefleri

Hata loglarını çeşitli hedeflere gönderin:

* **Task Flow Logs**: Dahili Task Flow çalıştırma logları
* **System Logs**: Apinizer sistem logları
* **External Logging**: Dış loglama sistemleri (Elasticsearch, vb.)
* **Email Notifications**: E-posta uyarıları
* **Monitoring Systems**: İzleme araçlarıyla entegrasyon

## Hata Bildirimi

### Bildirim Türleri

Paydaşları hatalar hakkında bilgilendirin:

**E-posta Bildirimi:**

```javascript
{
  "to": ["admin@example.com"],
  "subject": "Task Flow Hatası: ProcessOrder",
  "body": "ProcessOrder Task Flow'unda hata oluştu...",
  "includeDetails": true
}
```

**Webhook Bildirimi:**

```javascript
{
  "url": "https://monitoring.example.com/webhook",
  "method": "POST",
  "body": {
    "event": "taskflow_error",
    "taskFlow": "ProcessOrder",
    "error": errorDetails
  }
}
```

### Bildirim Koşulları

Ne zaman bildirim gönderileceğini yapılandırın:

* **On First Error**: İlk oluşumda bildirim gönder
* **On Final Failure**: Tüm retry'lar tükendikten sonra gönder
* **Error Threshold**: Hata oranı eşiği aştığında gönder
* **Critical Errors**: Kritik hatalar için her zaman gönder

## En İyi Uygulamalar

<CardGroup cols={2}>
  <Card title="Tüm Hataları Yönetin" icon="shield-halved">
    Tüm olası hataların yönetildiğinden emin olun
  </Card>
  <Card title="Geçici Hataları Retry Edin" icon="rotate-right">
    Geçici başarısızlıkları retry edin, kalıcı hatalarda başarısız olun
  </Card>
  <Card title="Kapsamlı Loglama" icon="file-lines">
    Debug için yeterli bilgiyi loglayın
  </Card>
  <Card title="Timeout Ayarlayın" icon="clock">
    Asılı kalmayı önlemek için uygun timeout'ları ayarlayın
  </Card>
  <Card title="Fallback Kullanın" icon="arrow-down">
    Kritik işlemler için fallback mekanizmaları sağlayın
  </Card>
  <Card title="Hata Oranlarını İzleyin" icon="chart-line">
    Hata oranlarını ve trendlerini izleyin
  </Card>
  <Card title="Hata Senaryolarını Test Edin" icon="flask">
    Çeşitli başarısızlık senaryolarında hata yönetimini test edin
  </Card>
  <Card title="Hata Yönetimini Dokümante Edin" icon="file-lines">
    Hata yönetimi stratejilerini dokümante edin
  </Card>
</CardGroup>

## Yaygın Desenler

### Exponential Backoff ile Retry

```javascript
async function executeWithRetry(task, maxRetries = 3) {
  let attempt = 0;
  let interval = 1000;
  
  while (attempt < maxRetries) {
    try {
      return await task();
    } catch (error) {
      attempt++;
      if (attempt >= maxRetries) {
        throw error;
      }
      await sleep(interval);
      interval *= 2; // Exponential backoff
    }
  }
}
```

### Circuit Breaker Pattern

```javascript
let failureCount = 0;
const failureThreshold = 5;
const resetTimeout = 60000; // 1 dakika

async function executeWithCircuitBreaker(task) {
  if (failureCount >= failureThreshold) {
    throw new Error("Circuit breaker açık");
  }
  
  try {
    const result = await task();
    failureCount = 0; // Başarıda sıfırla
    return result;
  } catch (error) {
    failureCount++;
    throw error;
  }
}
```

### Graceful Degradation

```javascript
try {
  // Premium özelliği dene
  result = await callPremiumAPI();
} catch (error) {
  // Temel özelliğe fallback
  result = await callBasicAPI();
}
```

## İlgili Konular

<CardGroup cols={2}>
  <Card title="Task Flow Tasarımı" icon="diagram-project" href="/tr/entegrasyon-otomasyon/task-flow-tasarimi">
    Task Flow tasarımını öğrenin
  </Card>
  <Card title="Monitoring & Debugging" icon="bug" href="/tr/entegrasyon-otomasyon/monitoring-debugging">
    Task Flow sorunlarını debug edin
  </Card>
  <Card title="Taskflow Monitor" icon="chart-line" href="/tr/entegrasyon-otomasyon/taskflow-monitor">
    Task Flow çalışmalarını izleyin
  </Card>
  <Card title="Performance Optimization" icon="gauge" href="/tr/entegrasyon-otomasyon/performance-optimization">
    Task Flow performansını optimize edin
  </Card>
</CardGroup>
