---
title: "RabbitMQ Queue Connections"
description: "RabbitMQ Queue Connections yapılandırması ve kullanım kılavuzu"
---

**Son Güncelleme:** 15 Kasım 2025

**Hedef Kitle:** Sistem Yöneticileri, Backend Geliştiriciler, DevOps Mühendisleri, Entegrasyon Uzmanları

| Alan | Değer |
|------|-------|
| **Connection Adı** | RabbitMQ Bağlantısı |
| **Özet** | AMQP tabanlı RabbitMQ clusterlarına düşük gecikmeli mesaj iletimi sağlar. |
| **Kategori** | Message Queue |
| **Protocol** | AMQP |
| **Desteklenen Ortamlar** | Development, Test, Production |

## Genel Bakış

### Amacı Nedir?

RabbitMQ Connection (Bağlantı), Apinizer içindeki Integration Flow adımlarının AMQP üzerinden güvenilir biçimde mesaj yayınlamasını sağlar.

Birden fazla host/port tanımlayarak cluster içindeki brokerlar arasında yüksek erişilebilirlik sağlar.

Sanal host ve basic properties alanlarıyla log mesajlarını, telemetriyi veya iş verilerini hedef kuyruğa uygun formatta iletir.

İsteğe bağlı Authentication ve SSL/TLS desteğiyle güvenli mesajlaşmayı garanti eder.

### Çalışma Prensibi

**Bağlantı Başlatma:** Integration Flow veya Connector içerisinden RabbitMQ Connection bağlantısı talep edildiğinde, sistem yapılandırılmış connection parametrelerini okur.

**Connection Pool Yönetimi:** Tanımlı hostPortList'e göre round-robin stratejisiyle broker seçilir, mevcut açık bağlantı yoksa pool'da yeni AMQP bağlantısı oluşturulur.

**Kimlik Doğrulama:** Authentication toggle'ı aktifleştirildiyse kullanıcı adı/şifre ile, SSL/TLS etkinse sertifika zinciri doğrulanarak hedef sisteme kimlik doğrulaması yapılır.

**Veri İletişimi:** AMQP protokolü üzerinden channel açılır, channelExchange ve channelRoutingKey parametreleriyle mesaj yayınlanır; basic properties alanları mesaj meta verisini taşır.

**Bağlantı Yönetimi:** İşlem tamamlandıktan sonra bağlantı pool'a geri döner; idle süre aşıldığında otomatik olarak kapatılır.

**Hata Yönetimi:** Bağlantı hatası, timeout veya authentication hatası durumunda retry ve fallback host denemesi, uyarı logları ve kullanıcıya detaylı hata mesajı iletilir.

### Kullanım Alanları

- Log, audit ve izleme olaylarının RabbitMQ bazlı merkezi kuyruğa gönderilmesi.
- Dış sistemlere komut veya event tetiklemek için AMQP topic/queue entegrasyonları.
- Yüksek hacimli veri işleme pipeline'larında dağıtık mikroservisler arasında mesajlaşma.
- Üçüncü taraf Message Queue altyapılarına (ör. yönetilen RabbitMQ) güvenli bağlantı.

## Teknik Özellikler ve Yetenekler

### Temel Özellikler

**Çoklu Host/Port Tanımı:** Birden fazla broker adresi eklenerek otomatik failover sağlanır.

**Sanal Host Yönetimi:** connectionFactoryVirtualHost alanı ile tenant bazlı izolasyon desteklenir.

**AMQP Basic Properties Şablonu:** AppId, ContentType, Priority gibi alanlar önceden tanımlanarak mesaj formatı standardize edilir.

**Ortam Bazlı Yapılandırma:** Her ortam (Development, Test, Production) için ayrı connection parametreleri tanımlama imkanı.

**Enable/Disable Kontrolü:** Connection'ı aktif veya pasif hale getirme (enable/disable toggle). Pasif durumda bağlantı kullanılamaz ancak yapılandırması saklanır.

### İleri Düzey Özellikler

**Authentication Toggle:** Kimlik doğrulama gerekmeyen brokerlarda devre dışı bırakılabilir, gerektiğinde kullanıcı adı/şifre zorunlu olur.

**SSL/TLS Protokol Seçimi:** TLS sürümü serbestçe yazılabilir, self-signed sertifikalar development ortamında test edilebilir.

**Heartbeat ve Channel Limitleri:** RequestedChannelMax, RequestedFrameMax ve RequestedHeartbeat değerleri ile broker kapasitesine uyum sağlanır.

**Connection Test Özelliği:** "Test Connection" butonu ile bağlantı parametrelerini kaydetmeden önce doğrulama imkanı.

**Export/Import Özelliği:** Connection yapılandırmasını ZIP dosyası olarak export etme. Farklı ortamlara (Development, Test, Production) import etme. Versiyon kontrolü ve yedekleme imkanı.

**Connection Monitoring:** Bağlantı sağlığı, pool durumu ve performans metriklerini izleme.

## Connection Parametreleri

### Zorunlu Parametreler

| Parametre | Açıklama | Örnek Değer | Notlar |
|-----------|----------|-------------|--------|
| **Name** | Connection adı (benzersiz olmalı) | Production_RabbitMQ | Boşlukla başlamaz, özel karakterler kullanılmamalı |
| **Host/Port Listesi** | Her broker için host ve port çifti | mq1.internal.local:5672 | En az bir satır zorunlu; tüm satırlarda host ve port doldurulmalı |
| **Connection Factory Virtual Host** | AMQP sanal host adı | /apinizer | RabbitMQ yönetim konsolundaki vhost adıyla eşleşmeli |
| **Connection Factory Connection Timeout** | AMQP bağlantısı kurulana kadar beklenecek süre | 60000 | ms cinsinden; 0 değeri sınırsız bekleme anlamına gelir |
| **Requested Channel Max** | Her bağlantı için maksimum channel sayısı | 2047 | Broker limitini aşmamalı |
| **Requested Frame Max** | AMQP frame boyutu limiti | 0 | 0 değeri broker varsayılanını kullanır |
| **Requested Heartbeat** | Broker ile heartbeat aralığı | 60 | Saniye cinsinden; 0 -> heartbeat devre dışı |
| **Channel Routing Key** | Mesajın yönlendirileceği queue veya topic anahtarı | apinizer.audit.queue | Queue adıyla aynı tutulması önerilir |
| **Basic Properties AppId** | Mesajı oluşturan uygulama kimliği | apinizer | API loglarında izlenebilir |
| **Basic Properties ContentType** | Mesaj gövde formatı | application/json | application/xml vb. değerler desteklenir |
| **Basic Properties ContentEncoding** | İçerik karakter seti | UTF-8 | Broker ve tüketici aynı encoding'i kullanmalı |
| **Basic Properties DeliveryMode** | 1 (geçici) veya 2 (kalıcı) teslim modu | 2 | Kalıcılık için 2 seçilmelidir |
| **Basic Properties Priority** | Mesaj önceliği (0-9) | 5 | Kuyruk önceliği etkin olmalıdır |
| **Basic Properties ReplyTo** | Yanıtın döneceği queue | apinizer.reply | Request/Reply desenlerinde zorunlu |
| **Basic Properties Expiration** | Mesajın TTL değeri (ms) | 60000 | Kuyruk politikasını aşmamalı |
| **Basic Properties Type** | Mesaj tipini tanımlar | apinizer-log-type | Tüketicide filtreleme için kullanılır |
| **Basic Properties UserId** | RabbitMQ kullanıcı kimliği | guest | Authentication etkinse broker doğrular |
| **Basic Properties ClusterId** | Broker cluster kimliği | cluster-eu-central | Cluster izlenebilirlik raporlarında kullanılır |

### İsteğe Bağlı Parametreler

| Parametre | Açıklama | Varsayılan Değer | Önerilen Değer |
|-----------|----------|------------------|----------------|
| **Description** | Connection amacı hakkında açıklama | - | Süreç veya proje adını belirtin |
| **Channel Exchange** | Mesajın yayınlanacağı exchange adı | "" | apinizer.audit.exchange |
| **Authentication Enabled** | Kimlik doğrulama gerekliliği toggle'ı | false | Production ortamında true |
| **Connection Factory Username** | Authentication etkinse kullanıcı adı | guest | Ayrı bir servis hesabı kullanın |
| **Connection Factory Password** | Kullanıcı için şifre | guest | Secret Manager üzerinden yönetilen güçlü parola |
| **Connection Factory Use SSL Protocol** | SSL/TLS kullanım durumu | false | Production'da true |
| **Connection Factory SSL Protocol** | Kullanılacak TLS sürümü | TLSv1.2 | Broker desteğine göre TLSv1.3 |
| **Channel Exchange Binding** | Exchange ile routing key ilişkisi notu | - | Ortam bazlı tablo tutun |

### Timeout ve Connection Pool Parametreleri

| Parametre | Açıklama | Varsayılan | Min | Max | Birim |
|-----------|----------|------------|-----|-----|-------|
| **Connection Timeout** | Bağlantı kurulması için maksimum bekleme süresi | 60000 | 1000 | 300000 | milisaniye |
| **Request Timeout** | Mesaj gönderiminin yanıt bekleme süresi | 30000 | 5000 | 120000 | milisaniye |
| **Pool Size** | Connection pool'daki maksimum bağlantı sayısı | 10 | 1 | 100 | adet |
| **Heartbeat Interval** | Broker ile heartbeat süresi | 60 | 0 | 300 | saniye |

## Kullanım Senaryoları

| Senaryo | Durum | Çözüm (Connection Yapılandırması) | Beklenen Davranış / Sonuç |
|---------|-------|-----------------------------------|---------------------------|
| **Log Streaming** | Gateway loglarını merkezi kuyruğa aktarma | channelRoutingKey=apinizer.logs, deliveryMode=2 | Tüm log mesajları kalıcı kuyrukta toplanır |
| **Audit Trail** | Yetkili işlemleri izleme | basicPropertiesType=audit, SSL aktif | Güvenli audit mesajları tüketici servise ulaşır |
| **Event Fan-out** | Birden fazla tüketiciye yayımlama | channelExchange=apinizer.events, topic exchange | Tüm aboneler routing key desenine göre mesaj alır |
| **Failover Cluster** | Bir broker düştüğünde süreklilik | hostPortList'e en az 3 node ekleme | Bağlantı otomatik olarak diğer node'a geçer |
| **Uzun Kuyruk TTL** | Zamana duyarlı görevler | basicPropertiesExpiration=120000, priority düşürme | Mesajlar 2 dakika sonra otomatik silinir |
| **Düşük Gecikme İşleri** | Hızlı komut iletimi | connectionFactoryRequestedHeartbeat=30, pool size=20 | Gecikme azalır, throughput artar |

## Connection Yapılandırma

Bu adımda, kullanıcı yeni bir connection oluşturabilir ya da mevcut connection parametrelerini yapılandırarak bağlantı kurallarını belirleyebilir. Tanımlanan parametreler, connection'ın çalışma şeklini doğrudan etkiler ve Integration Flow veya Connector adımlarında kullanılabilir hale gelir.

### Yeni RabbitMQ Bağlantısı Oluşturma
<img
    src="/images/yonetici/baglantilar/rabbit.png"
    alt="Image 2024 9 9 15 35 35 Pn"
    width="1000"
    className="mr-auto"
/>

<Steps>
<Step title="Oluşturma Sayfasına Gitme">

Sol menüden **Connection → RabbitMQ Bağlantısı** bölümüne gidin.

Sağ üstteki **[+ Create]** butonuna tıklayın.

</Step>

<Step title="Temel Bilgileri Girme">

**Enable Status (Aktif Durumu):** Toggle ile aktif/pasif durumu ayarlayın. Yeni connection'lar varsayılan olarak aktiftir.

**Name (İsim) Zorunlu:**

Örnek: `Production_RabbitMQ`

- Benzersiz isim girin, boşlukla başlamaz.
- Sistem otomatik kontrol eder. Yeşil tik: kullanılabilir. Kırmızı çarpı: mevcut isim.

**Description (Açıklama):**

Örnek: "RabbitMQ log publishing connection"

- Maks. 1000 karakter.
- Connection'ın amacını açıklayın.

</Step>

<Step title="Environment (Ortam) Seçimi">

Dropdown menüden ortam seçin: **Development**, **Test**, veya **Production**.

Her ortam için farklı connection parametreleri tanımlanabilir.

</Step>

<Step title="Host ve Virtual Host Parametreleri">

**Add Host** butonuyla broker adresleri ekleyin.

Her satırda host ve port alanları dolu olmalıdır.

**Connection Factory Virtual Host** alanına broker'daki vhost değerini yazın.

</Step>

<Step title="Kanal ve Mesaj Parametreleri">

**Channel Exchange** değerini (varsa) girin.

**Channel Routing Key**, **Basic Properties** alanlarını RabbitMQ tüketici gereksinimlerine göre doldurun.

Teslim modunu (1/2) ve önceliği belirleyin.

</Step>

<Step title="Timeout ve Connection Pool Ayarları">

**Connection Timeout**, **Requested Frame/Channel Max**, **Requested Heartbeat** alanlarını trafik hacmine göre ayarlayın.

Kurumsal standartlara göre Pool Size yönetim ekranından güncellenir.

</Step>

<Step title="Güvenlik ve Authentication Ayarları">

**Authentication Enabled** toggle'ını aktif edin.

Username/Password alanlarını doldurun.

SSL gerekiyorsa **Use SSL Protocol** toggle'ını açın ve TLS sürümünü belirtin.

</Step>

<Step title="Test Connection">

**[Test Connection]** butonuna tıklayın.

Bağlantı parametrelerinin doğru olup olmadığını test edin.

Başarılı: Yeşil onay mesajı, Başarısız: Hata detayları gösterilir.

</Step>

<Step title="Kaydetme">

Sağ üstteki **[Save and Deploy]** butonuna tıklayın.

**Kontrol Listesi:** Benzersiz isim. Zorunlu alanlar dolu. Test connection başarılı (önerilir)

**Sonuç:**

- Connection listeye eklenir.
- Integration Flow ve Connector adımlarında kullanılabilir hale gelir.
- Ortama göre aktif olur.

</Step>
</Steps>

### Connection'ı Silme

| Bölüm / Adım | Açıklama ve İşlevler |
|--------------|---------------------|
| Silme İşlemi | Satır sonundaki **⋮** menüsünden **Delete** seçin veya connection detay sayfasında **[Delete]** butonuna tıklayın |
| Silme İpuçları | **Silmeden Önce Kontrol Edin:** Integration Flow veya Connector adımlarında kullanılıyor olabilir. Gerekirse alternatif bir connection atayın. Silmeden önce **Export** ile yedek alın |
| Alternatif: Deaktif Etme | Silmek yerine **Disable** seçeneğini kullanın. Connection pasif olur ancak silinmez. Gerektiğinde yeniden etkinleştirilebilir |

### Connection'ı Dışa/İçe Aktarma

Bu adımda kullanıcı, mevcut connection'ları yedekleme, farklı ortamlara taşıma veya paylaşma amacıyla dışa aktarabilir (export) ya da daha önce dışa aktarılmış bir connection'ı tekrar içe aktarabilir (import). Bu işlem, sürüm yönetimi, test ve üretim ortamları arasında geçiş veya ekipler arası paylaşım süreçlerinde veri bütünlüğünü korumak için kullanılır.

| Bölüm / Adım | Açıklama ve İşlevler |
|--------------|---------------------|
| Dışa Aktarma (Export) | **Yöntem 1:** Eylem menüsünden **⋮ → Export** seçin. ZIP dosyası otomatik indirilir. **Yöntem 2:** Connection detay sayfasında **[Export]** butonuna tıklayın. ZIP dosyası indirilir |
| Dosya Formatı | Format: Tarih-connection-ConnectionName-export.zip. Örnek: `13 Nov 2025-connection-Production_RabbitMQ-export.zip` |
| ZIP İçeriği | Connection JSON dosyası, Metadata bilgileri, Bağımlılık bilgileri (örneğin sertifikalar, key store) |
| Kullanım Alanları | Yedekleme, Ortamlar arası taşıma (Test → Prod), Versiyonlama, Ekip veya proje bazlı paylaşım |
| İçe Aktarma (Import) | Ana listede **[Import RabbitMQ Bağlantısı]** butonuna tıklayın. İndirilen ZIP dosyasını seçin. Sistem kontrolleri: Format geçerli mi? İsim çakışması var mı? Bağımlılıklar mevcut mu? Ardından **[Import]** butonuna tıklayın |
| İçe Aktarma Senaryoları | **Senaryo 1: İsim Çakışması** → Eski connection'ın üzerine yazın veya yeni bir isimle oluşturun. **Senaryo 2: Eksik Bağımlılıklar** → Eksik sertifikaları veya key store'ları önce oluşturun veya import sırasında çıkarın |

## Connection'ın Kullanım Alanları

Bu adımda kullanıcı, oluşturduğu **RabbitMQ Bağlantısı** connection'ını sistemin farklı bileşenlerinde kullanabilir. Connection'lar Integration Flow, Connector adımları veya Scheduled Job'larda seçilerek kullanılır.

| Kullanım Yeri | Açıklama ve İşlevler |
|---------------|---------------------|
| Connection Oluşturma ve Aktif Etme | **Adımlar:** 1. Connection'ı oluşturun. 2. **Test Connection** ile bağlantıyı doğrulayın. 3. **Save and Deploy** ile kaydedin ve etkinleştirin. 4. Connection'ın **Enabled** durumda olduğundan emin olun |
| Integration / Connector Adımlarında Kullanım | Mesaj kuyruğu (queue), topic, e-posta, FTP/SFTP, LDAP veya benzeri dış sistemlerle iletişim isteyen adımlarda connection seçilir. Örnek: "Send Message", "Consume Message", "Upload File", "Read Directory" gibi adımlar. Bağlantı seçimi bu adımların yapılandırmasında yer alan Connection alanından yapılır |
| Scheduled Job Kullanımı | Zamanlanmış görevlerde (ör. belirli aralıklarla mesaj gönderme, dosya işleme vb.) bağlantı seçilerek dış sistemlere erişim sağlanır. Connection değiştiğinde, job çalışma davranışı da buna göre güncellenir |
| Test Amaçlı Kullanım | Connection Test özelliği ile bağlantının doğruluğu Integration Flow'dan bağımsız olarak kontrol edilebilir. Bu test hata ayıklama sürecinde kritik önem taşır |

## Best Practices

### Yapılması Gerekenler ve En İyi Uygulamalar

| Kategori | Açıklama / Öneriler |
|----------|---------------------|
| **Cluster Ulaşılabilirliği** | **Kötü:** Tek host tanımlamak.<br/>**İyi:** İki host eklemek.<br/>**En İyi:** Tüm broker nodelarını hostPortList'e ekleyip health check sonuçlarına göre sıralamak. |
| **Routing Key Yönetimi** | **Kötü:** Rastgele routing key kullanmak.<br/>**İyi:** Queue adını routing key olarak kullanmak.<br/>**En İyi:** `domain.context.event` formatında isimlendirme yaparak bakım kolaylığı sağlamak. |
| **Mesaj TTL Stratejisi** | **Kötü:** Expiration alanını boş bırakmak.<br/>**İyi:** Varsayılan 60 saniye tanımlamak.<br/>**En İyi:** İş gereksinimine göre ortam bazlı TTL setleri oluşturmak. |
| **Authentication Stratejisi** | **Kötü:** `guest/guest` kimlik bilgilerini tüm ortamlarda kullanmak.<br/>**İyi:** Production için farklı kullanıcı oluşturmak.<br/>**En İyi:** Sadece gerekli izinlere sahip servis hesapları ve secret rotation politikası uygulamak. |
| **Ortam Yönetimi** | **Kötü:** Tüm ortamlarda aynı connection parametrelerini kullanmak.<br/>**İyi:** Her ortam için ayrı connection oluşturmak.<br/>**En İyi:** Environment seçeneğini kullanarak tek connection'da tüm ortamları yönetmek, ortamlar arası geçişte sadece environment değiştirmek. |
| **Connection Test** | **Kötü:** Connection'ı test etmeden kaydetmek ve deploy etmek.<br/>**İyi:** Kaydetmeden önce Test Connection ile doğrulamak.<br/>**En İyi:** Her parametre değişikliğinden sonra test etmek, production'a geçmeden önce test ortamında tam entegrasyon testi yapmak. |

### Güvenlik En İyi Uygulamaları

| Güvenlik Alanı | Açıklama / Uyarılar |
|----------------|---------------------|
| **RabbitMQ Kullanıcı Yetkileri** | Kullanıcıya yalnızca gerekli vhost ve queue izinlerini verin; configure/write/read izinlerini ayrı ayrı yönetin. |
| **AMQP Sertifika Yönetimi** | SSL/TLS etkinse broker sertifikalarını keystore'a ekleyin, expiration tarihlerini izleyin, yenilemeyi önceden planlayın. |
| **Audit ve Loglama** | Authentication hatalarını ve SSL negotiation loglarını merkezi log havuzuna gönderin, SIEM üzerinden alarm üretin. |
| **Kimlik Bilgileri Yönetimi** | Kullanıcı adı ve şifre gibi hassas bilgileri environment variable veya secret manager kullanarak saklayın. Kimlik bilgilerini kod veya konfigürasyon dosyalarına hardcode etmeyin. Periyodik olarak şifreleri güncelleyin. |
| **SSL/TLS Kullanımı** | Production ortamında mutlaka SSL/TLS aktif edin. Self-signed sertifikalar sadece development ortamında kullanın. Sertifika expiration tarihlerini takip edin ve zamanında yenileyin. |
| **Erişim Kontrolü** | Connection yapılandırmasını sadece yetkili kullanıcıların değiştirmesine izin verin. Connection değişiklik loglarını saklayın. Kritik connection'lar için değişiklik approval süreci uygulayın. |

### Kaçınılması Gerekenler

| Kategori | Açıklama / Uyarılar |
|----------|---------------------|
| **Tek Kuyruğa Aşırı Yükleme** | **Neden kaçınılmalı:** Tek routing key tüm mesajları aynı kuyruğa yönlendirir, darboğaz oluşur.<br/>**Alternatif:** Mesaj tipine göre farklı routing key tanımlayın. |
| **Heartbeat'i 0 Yapmak** | **Neden kaçınılmalı:** Broker bağlantı kopmalarını tespit edemez.<br/>**Alternatif:** En az 30 saniyelik heartbeat kullanın. |
| **SSL Sertifikasını Paylaşmak** | **Neden kaçınılmalı:** Sertifikanın kopyalanması güvenlik açığı yaratır.<br/>**Alternatif:** Her ortam için ayrı sertifika/credential kullanın. |
| **Production Connection'ı Test Ortamında Kullanma** | **Neden kaçınılmalı:** Test verileri production sistemine yazılabilir, gerçek kullanıcılar etkilenebilir, güvenlik riski oluşur.<br/>**Alternatif:** Her ortam için ayrı connection oluşturun, environment parametresini kullanın, connection isimlerini ortama göre prefix ekleyerek ayırın (Test_, Prod_). |
| **Çok Düşük Timeout Değerleri** | **Neden kaçınılmalı:** Ağ gecikmelerinde connection sürekli timeout olur, Entegrasyon adımları başarısız olur.<br/>**Alternatif:** Gerçek kullanım senaryolarına göre timeout değerlerini ayarlayın, network latency'yi ölçün ve timeout'ları buna göre belirleyin. |
| **Connection Pool Kullanmama** | **Neden kaçınılmalı:** Her istekte yeni bağlantı açılır, performans düşer, kaynak tüketimi artar, hedef sistem yükü artar.<br/>**Alternatif:** Connection pool aktif edin, pool size'ı trafik hacmine göre ayarlayın, pool monitoring kurun. |

## Performans İpuçları

| Kriter | Öneri / Etki |
|--------|--------------|
| **Mesaj Boyutu Yönetimi** | **Öneri:** 128 KB üzeri mesajları parçalayın veya gzip kullanın.<br/>**Etki:** FrameMax sınırına takılma riski azalır, throughput artar. |
| **Routing Key Şablonları** | **Öneri:** `service.region.event` kalıbı kullanın.<br/>**Etki:** Tüketiciler pattern ile kolay filtreleme yapar, subscription sayısı düşer. |
| **Heartbeat Ayarı** | **Öneri:** WAN bağlantılarında 60 sn, LAN'de 30 sn heartbeat kullanın.<br/>**Etki:** Kopmalar hızlı tespit edilir, gereksiz reconnect önlenir. |
| **Connection Pool Optimizasyonu** | **Öneri:** Pool size'ı peak trafiğe göre ayarlayın (önerilen: eşzamanlı istek sayısı × 1.5), idle connection timeout'ları belirleyin, pool health check yapın.<br/>**Etki:** Bağlantı açma maliyeti %80 azalır, yanıt süreleri düşer, kaynak kullanımı optimize edilir. |
| **Timeout Değerleri Optimizasyonu** | **Öneri:** Gerçek network latency'yi ölçün, timeout değerlerini buna göre ayarlayın, çok düşük veya çok yüksek timeout'lardan kaçının.<br/>**Etki:** Gereksiz beklemeler önlenir, hızlı fail-over sağlanır, kullanıcı deneyimi iyileşir. |
| **Connection Monitoring** | **Öneri:** Connection pool kullanımını izleyin, timeout oranlarını takip edin, connection health check yapın, alerting kurun.<br/>**Etki:** Sorunlar proaktif tespit edilir, performans darboğazları erken belirlenir, kesinti süresi azalır. |

## Sorun Giderme (Troubleshooting)

| Problem | Olası Nedenler | Çözüm Adımları |
|---------|----------------|----------------|
| **Message Rejected by Broker** | - Yanlış routing key<br/>- Exchange binding yok<br/>- Kullanıcının write izni yok | 1. Exchange/queue binding'lerini kontrol edin<br/>2. Routing key'i broker üzerinden test edin<br/>3. Kullanıcı izinlerini güncelleyin |
| **SSL Handshake Failure** | - Yanlış TLS sürümü<br/>- Sertifika zinciri eksik<br/>- Self-signed sertifika Production'da kullanılıyor | 1. Broker desteklediği TLS sürümünü doğrulayın<br/>2. Sertifikayı keystore'a yeniden yükleyin<br/>3. Production'da CA imzalı sertifika kullanın |
| **Connection Timeout** | - Network gecikmesi<br/>- Hedef sistem yavaş yanıt veriyor<br/>- Timeout değeri çok düşük | 1. Network connectivity kontrol edin<br/>2. Hedef sistem sağlığını kontrol edin<br/>3. Timeout değerlerini artırın<br/>4. Connection loglarını inceleyin |
| **Authentication Failed** | - Yanlış kullanıcı adı/şifre<br/>- Expired credentials<br/>- Yetki problemi | 1. Kimlik bilgilerini doğrulayın<br/>2. Hedef sistemde kullanıcının aktif olduğunu kontrol edin<br/>3. Gerekli yetkilerin verildiğini kontrol edin<br/>4. SSL/TLS sertifikalarını kontrol edin |
| **Pool Exhausted** | - Pool size çok düşük<br/>- Connection leak var<br/>- Trafik çok yüksek | 1. Pool size'ı artırın<br/>2. Connection'ların düzgün kapatıldığını kontrol edin<br/>3. Idle connection timeout'ları ayarlayın<br/>4. Connection kullanım metriklerini izleyin |
| **Connection Test Başarılı Ama Entegrasyon Akışı Hata Veriyor** | - Integration/Connector adımında farklı connection seçili olabilir<br/>- Adım yanlış yapılandırılmış olabilir<br/>- Flow/Job redeploy edilmemiş olabilir | 1. Connection'ın enable toggle'ının aktif olduğunu kontrol edin<br/>2. Integration Flow'da doğru connection'ın seçildiğini doğrulayın<br/>3. Connection'ı tekrar deploy edin<br/>4. Integration Flow veya Job'ı redeploy edin<br/>5. Gateway loglarını kontrol edin |

## Sık Sorulan Sorular (SSS)

| Kategori | Soru (S) | Cevap (C) |
|----------|----------|-----------|
| **Genel** | Aynı RabbitMQ Bağlantısı ile hem log hem de iş verisi gönderebilir miyim? | Evet, ancak routing key ve basic properties alanlarını farklı Integration Flow adımlarında özelleştirmek gerekir. |
| **Genel** | Host listesinde IP yerine DNS kullanmak zorunda mıyım? | Hayır, IP de kullanılabilir fakat DNS kullanımı node değişikliklerinde bakım maliyetini düşürür. |
| **Teknik** | Heartbeat değerini nasıl seçmeliyim? | WAN ortamlarında 60 sn, LAN'de 30 sn önerilir; broker ve client aynı değeri kullanmalıdır. |
| **Teknik** | TLSv1.3 destekleniyor mu? | Broker ve JVM sürümünüz destekliyorsa connectionFactorySslProtocol alanına `TLSv1.3` yazabilirsiniz. |
| **Kullanım** | Mesaj TTL'ini ortam bazlı farklılaştırabilir miyim? | Evet, Environment seçimi sonrası basicPropertiesExpiration değerini ortam için güncelleyebilirsiniz. |
| **Genel** | Aynı connection'ı birden fazla Integration Flow'da kullanabilir miyim? | Evet, aynı connection birden fazla Integration Flow veya Connector adımında kullanılabilir. Bu merkezi yönetim sağlar ve konfigürasyon tutarlılığını garanti eder. Ancak connection'da yapılan değişiklikler tüm kullanım yerlerini etkileyeceği için dikkatli olunmalıdır. |
| **Teknik** | Connection pool kullanmak zorunlu mudur? | Connection pool kullanımı zorunlu değildir ancak yüksek trafikli sistemlerde şiddetle önerilir. Her istekte yeni bağlantı açmak yerine mevcut bağlantıları yeniden kullanmak performansı önemli ölçüde artırır. |
| **Kullanım** | Test ve Production için farklı connection'lar mı oluşturmalıyım? | Evet, her ortam için ayrı connection oluşturmanız önerilir. Alternatif olarak environment parametresini kullanarak tek connection içinde tüm ortamları yönetebilirsiniz. Bu yaklaşım daha kolay yönetim ve daha az hata riski sağlar. |
| **Teknik** | Test Connection başarılı ama Integration Flow'da çalışmıyor, neden? | Birkaç neden olabilir: 1) Connection enable toggle'ı pasif olabilir, 2) Integration adımında farklı bir connection seçili olabilir, 3) Connection deploy edilmemiş olabilir, 4) Integration Flow henüz redeploy edilmemiş olabilir. |
