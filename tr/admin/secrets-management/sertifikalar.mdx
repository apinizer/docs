---
title: "Sertifikalar"
description: "Politikalarda ve bağlantılarda kullanılan sertifikaları tanımlayabilir ve yönetebilir. HTTPS/LDAPS bağlantısıyla alma, dosyadan içe aktarma, panodan yapıştırma ve truststore yönetimi işlemlerini gerçekleştirebilir."
---

## Yeni Bir Sertifika Oluşturma

<Steps>
  <Step title="Tanım Bilgilerini Doldurma">
    **Yönetim → Gizlilik Yönetimi → Sertifikalar** ekranından **Yeni (Create)** butonuna tıklayınız. **Tanım (Definition)** altındaki bilgileri doldurunuz. Ardından **Yeni Sertifika Tanımı (New Certificate Definition)** butonuna tıklayınız.

    <img
      src="/images/yonetici/sertifika1.png"
      alt="Sertifika Tanım Bilgileri"
      width="1000"
      height="600"
    />

    Sertifika oluşturma konfigürasyonu için kullanılan alanlar aşağıdaki tabloda görülmektedir.

    | Alan                   | Açıklama                                                                            |
    | ---------------------- | ----------------------------------------------------------------------------------- |
    | Ad               | Oluşturulan sertifikanın ad bilgisidir.                                             |
    | Açıklama  | Oluşturulan sertifika ile ilgili yönetimi kolaylaştırmak için açıklama yazılabilir. |
  </Step>
  <Step title="Sertifika Konfigürasyon Bilgilerini Doldurma">
    Açılan pencerede Sertifika için konfigürasyon bilgilerini doldurunuz. Ardından **Kaydet (Apply)** butonuna tıklayınız. Kaydedilen **Sertifika Tanımı**, **Konfigürasyon** altında açılan tabloda listelenir.

    <img
      src="/images/yonetici/sertifika2.png"
      alt="Sertifika Konfigürasyon Bilgileri"
      width="1000"
      height="600"
    />

    Sertifika tanımlama konfigürasyonu için kullanılan alanlar aşağıdaki tabloda görülmektedir.

    | Alan                                      | Açıklama                                                                                                                                    |
    | ----------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------- |
    | Ortamlar (Environments)                   | Sertifikanın kullanılacağı önceden tanımlı ortam seçilir.                                                                                   |
    | Sertifika Kaynağı (Source Of Certificate) | Sertifikanın alınacağı kaynaktır. Üç seçenek bulunur:<br />- HTTPS/LDAPS Bağlantısıyla Al<br />- Dosyadan İçe Aktar<br />- Panodan Yapıştır |
    | URL                                       | HTTPS/LDAPS Bağlantısıyla Al seçeneği seçildiğinde URL alanına HTTPs ya da LDAPS URL bağlantı adresi girilir ve yanındaki butona tıklanır.  |
    | Dosya (File)                              | Dosyadan İçe Aktar seçeneği seçildiğinde "Dosya Seç" butonuna tıklanarak sertifikayı içeren dosya seçilir.                                  |
    | Sertifika (Certificate)                   | Panodan Yapıştır seçeneği seçildiğinde sertifikanın yapıştırılacağı alandır.                                                                |
    | Şifreleme Tipi (Encoding Type)            | Panodan Yapıştır seçeneği seçildiğinde yapıştırılan sertifikanın kodlama türü seçilir. İki seçenek bulunur:<br />- BASE64<br />- BASE64PEM  |
    | Alias                                     | Sertifikanın alias bilgisi girilir.                                                                                                         |
    | İçerik (Content)                          | Sertifikanın içeriğinin görüntülendiği alandır.                                                                                             |
    | Sertifika Adı (Certificate)               | Sertifikadan elde edilir.                                                                                                                   |
  </Step>
  <Step title="Kaydet ve Yükleme">
    Tanımlama ve konfigürasyon bilgilerini tamamladıktan sonra **Kaydet ve Yükle (Save and Deploy)** butonuna tıklayarak yükleyiniz.

    <img
      src="/images/yonetici/sertifika3.png"
      alt="Sertifika Kaydet ve Yükle"
      width="1000"
      height="600"
    />
  </Step>
</Steps>

## API Manager Ortamı ve JVM TrustStore Senkronizasyonu

Sertifika ortam seçiminde **API Manager** ortamı özel bir anlam taşır. Bu ortama atanan sertifikalar, API Manager uygulamasının JVM TrustStore'una otomatik olarak eklenir. Bu sayede API Manager'dan yapılan HTTPS çağrılarında (spec indirme, test konsol, OIDC discovery vb.) ilgili sunucu sertifikalarının doğrulanması sağlanır.

<Info>
API Manager ortamına atanan sertifikalar uygulama başlatıldığında otomatik olarak JVM'e yüklenir. Sertifika eklendiğinde, güncellendiğinde veya silindiğinde JVM TrustStore anında güncellenir; yeniden başlatma gerekmez.
</Info>

<Warning>
Self-signed sertifika kullanan sunuculara API Manager'dan bağlantı kuruluyorsa (örneğin spec URL'si veya OIDC provider), ilgili sertifikanın burada **API Manager** ortamına atanmış olması gerekir. Aksi halde bağlantı sırasında PKIX sertifika hatası alınır.
</Warning>

## Sertifika Düzenleme

<Steps>
  <Step title="Düzenle Butonuna Tıklama">
    Varolan bir sertifikayı düzenlemek için o sertifikanın menüsünden **Düzenle (Edit)** butonuna tıklayınız.

    <img
      src="/images/yonetici/sertifika4.png"
      alt="Sertifika Düzenleme"
      width="1000"
      height="600"
    />
  </Step>
  <Step title="Güncelleme veya İptal Etme İşlemleri">
    **Düzenle (Edit)** alanına tıklayınca açılan ekranda **güncelleme** ve sertifikayı **iptal etme** işlemleri yapabilirsiniz.
  </Step>
  <Step title="Değişiklikleri Kaydetme">
    Yaptığınız değişiklikleri kaydetmek için **Uygula (Apply)** butonuna tıklayınız.

    <img
      src="/images/yonetici/sertifika5.png"
      alt="Sertifika Değişiklikleri Kaydetme"
      width="1000"
      height="600"
    />
  </Step>
</Steps>

### İlişkili JWK'ların Güncellenmesi

Sertifika güncellendiğinde ve **Kaydet ve Yükle (Save and Deploy)** butonuna basıldığında, eğer bu sertifikadan oluşturulmuş JWK'lar varsa, sistem otomatik olarak ilişkili JWK'ları tespit eder ve kullanıcıya bir seçenek sunar.

<Info>
Sertifika güncellendiğinde, bu sertifikadan oluşturulmuş JWK'lar da otomatik olarak güncellenebilir veya ilişki kesilebilir.
</Info>

#### JWK Bağlantı Dialog'u

Sertifika güncellendiğinde ve ilişkili JWK'lar tespit edildiğinde, aşağıdaki dialog açılır:

  <img
    src="/images/yonetici/jwk.png"
    alt="JWK Connection Dialog"
    width="600"
    height="400"
    style={{ borderRadius: '0.5rem' }}
  />

**Dialog İçeriği:**

- **Başlık**: "JWK Connection"
- **Uyarı Mesajı**: "This Certificate is used in X JWK(s). What would you like to do?" (Bu Sertifika X JWK tarafından kullanılmaktadır. Ne yapmak istersiniz?)
- **Seçenekler**:
  - **Update related JWKs (İlişkili JWK'leri Güncelle)**: Sertifikadaki değişikliklerin ilişkili JWK'lere de yansıtılmasını sağlar. Bu seçenek seçildiğinde, sertifika güncellendiğinde ilişkili JWK'lar da otomatik olarak güncellenir.
  - **Update certificate only and disconnect (Yalnızca sertifikayı güncelle ve bağlantıyı kes)**: Sertifikayı günceller ancak JWK ile olan ilişkiyi keser. Bu seçenek seçildiğinde, sertifika güncellenir ancak JWK'lar eski halinde kalır ve ilişki kaldırılır.
  - **Cancel (İptal)**: İşlemi iptal eder ve hiçbir değişiklik yapılmaz.

#### Güncelleme Akışı

<Steps>
  <Step title="Sertifika Güncelleme">
    Sertifika bilgilerini düzenleyin ve **Kaydet ve Yükle (Save and Deploy)** butonuna tıklayın.
  </Step>
  <Step title="İlişkili JWK Kontrolü">
    Sistem, bu sertifikadan oluşturulmuş JWK'ları kontrol eder.
  </Step>
  <Step title="Dialog Gösterimi">
    Eğer ilişkili JWK'lar varsa, JWK Connection dialog'u açılır.
  </Step>
  <Step title="Seçim Yapma">
    Kullanıcı üç seçenekten birini seçer:
    - **Update**: İlişkili JWK'ları da güncelle
    - **Disconnect**: Sadece sertifikayı güncelle, ilişkiyi kes
    - **Cancel**: İşlemi iptal et
  </Step>
  <Step title="Onay Dialog'u">
    Update veya Disconnect seçildiğinde, bir onay dialog'u açılır. Kullanıcı sertifika adını girerek işlemi onaylar.
  </Step>
  <Step title="İşlem Tamamlama">
    Onaylandıktan sonra seçilen işlem gerçekleştirilir ve sertifika güncellenir.
  </Step>
</Steps>

<Warning>
İlişkili JWK'ları güncellemek, bu JWK'ları kullanan tüm politikaları ve bağlantıları etkileyebilir. İşlem öncesi etkileri değerlendirin.
</Warning>
## Sertifika Silme

<Steps>
  <Step title="Sil Butonuna Tıklama">
    Varolan bir sertifikayı silmek için o sertifikanın menüsünden **Sil (Delete)** butonuna tıklayınız.

    <img
      src="/images/yonetici/sertifika6.png"
      alt="Sertifika Silme"
      width="1000"
      height="600"
    />
  </Step>
  <Step title="İlişkili JWK Kontrolü">
    Sistem, bu sertifikadan oluşturulmuş JWK'ları kontrol eder. Eğer ilişkili JWK'lar varsa, JWK Connection dialog'u açılır.
  </Step>
  <Step title="Silme Seçenekleri">
    İlişkili JWK'lar varsa, aşağıdaki seçenekler sunulur:
    - **Delete JWKS**: İlişkili JWK'ları da sil
    - **Delete Disconnect**: Sadece sertifikayı sil, JWK'ları koru (ilişki kesilir)
    - **Cancel**: İşlemi iptal et
  </Step>
  <Step title="Onay Dialog'u">
    Delete JWKS veya Delete Disconnect seçildiğinde, bir onay dialog'u açılır. Kullanıcı sertifika adını girerek işlemi onaylar.
  </Step>
  <Step title="Silme İşlemini Onaylama">
    Açılan pencerede tekrar **Sil (Delete)** butonuna tıklayarak onaylayınız.

    <img
      src="/images/yonetici/sertifika7.png"
      alt="Sertifika Silme Onayı"
      width="1000"
      height="600"
    />
  </Step>
</Steps>

### İlişkili JWK'ların Silinmesi

Sertifika silindiğinde, eğer bu sertifikadan oluşturulmuş JWK'lar varsa, sistem otomatik olarak ilişkili JWK'ları tespit eder ve kullanıcıya seçenek sunar.

<Warning>
Sertifika silindiğinde, ilişkili JWK'lar da silinebilir veya ilişki kesilebilir. Bu işlem geri alınamaz. İşlem öncesi etkileri değerlendirin.
</Warning>

#### Silme Akışı

<Steps>
  <Step title="Sertifika Silme İsteği">
    Sertifika silme işlemini başlatın.
  </Step>
  <Step title="İlişkili JWK Kontrolü">
    Sistem, bu sertifikadan oluşturulmuş JWK'ları kontrol eder.
  </Step>
  <Step title="Dialog Gösterimi">
    Eğer ilişkili JWK'lar varsa, JWK Connection dialog'u açılır.
  </Step>
  <Step title="Seçim Yapma">
    Kullanıcı üç seçenekten birini seçer:
    - **Delete JWKS**: İlişkili JWK'ları da sil
    - **Delete Disconnect**: Sadece sertifikayı sil, JWK'ları koru
    - **CANCEL**: İşlemi iptal et
  </Step>
  <Step title="Onay Dialog'u">
    Delete JWKS veya Delete Disconnect seçildiğinde, bir onay dialog'u açılır. Kullanıcı sertifika adını girerek işlemi onaylar.
  </Step>
  <Step title="İşlem Tamamlama">
    Onaylandıktan sonra seçilen işlem gerçekleştirilir ve sertifika silinir.
  </Step>
</Steps>
## Sertifika Dışa Aktarma (Export)

Sertifika görüntüleme ekranında iki farklı dışa aktarma seçeneği bulunur:

<Steps>
  <Step title="Dışa Aktarma Türünü Seçme">
    Sertifika görüntüleme (View) ekranında üst menüde iki dışa aktarma butonu yer alır:

    - **Sertifika Olarak Dışa Aktar (Export as Certificate)**: Sertifikayı sertifika dosya formatında dışa aktarır.
    - **Dışa Aktar (Export)**: Sertifika yapılandırmasını JSON/ZIP formatında dışa aktarır. Bu format, başka bir Apinizer ortamına aktarma (import) için uygundur.

    <img
      src="/images/yonetici/sertifika8.png"
      alt="Sertifika Dışa Aktarma"
      width="1000"
      height="600"
    />
  </Step>
  <Step title="Dosyayı İndirme">
    Seçilen dışa aktarma türüne göre dosya otomatik olarak indirilir. ZIP formatındaki export dosyası tarih bilgisi ile adlandırılır ve başka ortamlara import edilebilir.
  </Step>
</Steps>

<Info>
JSON/ZIP formatındaki export, sertifika yapılandırmasının tamamını içerir ve farklı Apinizer ortamlarına taşıma (migration) için kullanılabilir. Sertifika formatındaki export ise sertifikayı doğrudan sertifika dosyası olarak indirir.
</Info>
## Truststore

Truststore sekmesinde, Apinizer'da kullanılan dijital sertifikaların ve güvenilir kök sertifika yetkilileri (CA) listelenir.

<img
  src="/images/yonetici/sertifika9.png"
  alt="Truststore"
  width="1000"
  height="600"
/>