---
title: "Kubernetes İş Yükleri"
description: "Apinizer Platformu Gateway Runtime ortamlarının genel ayarlarını yapılandırabilir, deployment ve pod yönetimi gerçekleştirebilirsiniz. Kubernetes monitörü ile kaynak tüketimini izleyebilir ve pod security context ayarlarını yapılandırabilirsiniz."
---

<img
  src="/images/yonetici/kubernetes-resources-ana.png"
  alt="Kubernetes İş Yükleri Ana Ekran"
  width="1000"
  height="600"
/>

## Deployment & Pods

Bu sekmede, Kubernetes'e yüklenmiş deployment ve servislerin kontrolü ve yönetimi yapılabilir. Pods listesinden Pod'lar görüntülenebilir ve silinebilir.

Deployment & Pods sekmesini içeren görsele aşağıda yer verilmiştir:

<img
  src="/images/yonetici/deployment-pods.png"
  alt="Deployment & Pods Sekmesi"
  width="1000"
  height="600"
/>

## Deployments İşlemleri

<Steps>
  <Step title="Senkronize Et (Sync)">
    Bu özellik ile Kubernetes üzerinde yapılan değişiklikler, veritabanıyla senkronize edilir.
  </Step>

  <Step title="Yapılandır (Configure)">
    Deployment bilgilerinin güncellenebildiği alandır.

    Satır sonundaki açılır menüden **Yapılandır (Configure)** seçeneği ile yapılandırma ekranı açılır.

    <img
      src="/images/yonetici/deploy1.png"
      alt="Deployment Yapılandırma Menüsü"
      width="1000"
      height="600"
    />

    Yapılandırma ekranına ait detayları içeren görsele aşağıda yer verilmiştir:

    <img
      src="/images/yonetici/deploy2.png"
      alt="Deployment Yapılandırma Ekranı"
      width="1000"
      height="600"
    />

    Yapılandırma ayarları için kullanılan alanlar aşağıdaki tabloda görülmektedir.

    | Alan | Açıklama |
    |------|----------|
    | **Erişim Adresi/Apinizer Management API URL** (Access URL) | Deployment erişim adresinin girildiği alandır. |
    | **Apinizer Management API Key/Token** (Apinizer Management API Key/Token) | Deployment işleminde ihtiyaç duyulan, uygulamanın Apinizer Manager'a erişim için kullanacağı güvenlik anahtarının girildiği alandır. |
    | **Sayısı** (Count) | Gateway engine sayısı, Kubernetes Cluster'daki replicaSet ile eş değerdir. |
    | **Servis Portu** (Service Port) | Deployment'taki servis objesinin kullanacağı aktif portu gösteren alandır. |
    | **CPU** (CPU) | Pod'un kullanacağı maksimum CPU core sayısı bilgisidir. Sadece tam değer kullanılır. |
    | **Bellek** (Memory) | Pod'un kullanacağı maksimum bellek değeridir. |
    | **Bellek Birimi** (Memory Unit) | Bellek için gerekli olan değerin birimi seçilir; MB, GB. |
    | **Ek Değişkenler** (Additional Variables) | Pod içinde çalıştırılacak varsayılan ve opsiyonel değişkenler ve değerleri tanımlanır. Varsayılan değişkenler silinemez, sadece değerleri düzenlenebilir. |
    | **Host Takma Adlar** (Host Aliases) | Ağda bulunan IP adresleri bazen host isimleri arkasına konulabilir, bunlar eğer nameserver ya da host dosyasına tanımlanmamışsa ya da bir şekilde Apinizer'ın bunları çözmesi sağlanamamışsa, Gateway pod'larının bu isimleri çözmesi için Host Alias tanımı yapılmalıdır. |
  </Step>

  <Step title="Devre dışı Bırak ve Kaldır (Disable and Remove)">
    Seçilen deployment'ın kaldırılmasını sağlar.
  </Step>

  <Step title="Pod'ları Yeniden Başlat (Restart Pods)">
    Seçilen deployment altında çalışan podların yeniden başlamasını sağlar.
  </Step>
</Steps>

## Pods İşlemleri

<Steps>
  <Step title="Logu Görüntüle (View Log)">
    Seçilen pod bilgisinin log bilgisi görüntülenir.
  </Step>

  <Step title="Podu Sil (Delete Pod)">
    Seçilen pod silinir ve otomatik olarak yenisi oluşturulur.
  </Step>
</Steps>

## Monitör (Monitor)

Kubernetes monitörü, Apinizer Kubernetes kümesinin tükettiği CPU ve bellek kaynakları hakkında bilgi edinmek için kullanılır.

Bu ekran tüm alt yapının tek bir bütün olarak izlenmesine ve yönetilmesine olanak sağlar. Tüm Gateway Runtime ortamları ya da seçilen bir Gateway Runtime ortamı için tüketilen kaynaklar düğümler ve bölmeler için ayrı ayrı görüntülebilir.

Ekranın sol tarafında CPU tüketimi için yeşil core-zaman grafikleri, sağ tarafında ise bellek tüketimi için mavi megabayt-zaman grafikleri yer alır.

Monitör sekmesini içeren görsele aşağıda yer verilmiştir:

<img
  src="/images/yonetici/kube1.png"
  alt="Kubernetes Monitör Ekranı"
  width="1000"
  height="600"
/>

## Ayarlar 

Bu sekmede, Apinizer için oluşturulmuş Gateway Runtime ortamlarına ait repository bilgisini yönetme, namespace bilgilerini güncelleme ve Pod Security Context ayarları konfigure etme gibi Kubernetes bazında genel işlemler yapılır.

Ayarlar sekmesini içeren görsele aşağıda yer verilmiştir:

<img
  src="/images/yonetici/kube2.png"
  alt="Kubernetes Ayarlar Sekmesi"
  width="1000"
  height="600"
/>

### Apinizer Manager ve Portal Kubernetes Namespace

Apinizer Manager ve Portal Kubernetes bölümünün altında sağ tarafta yer alan **Yapılandır (Configure)** butonuna basılarak bu bölüme ait ayarlar yapılabilir.

Kubernetes Namespace ayarlarını içeren görsele aşağıda yer verilmiştir:

<img
  src="/images/yonetici/kube3.png"
  alt="Kubernetes Namespace Ayarları"
  width="800"
  height="500"
/>

Kubernetes Namespace ayarları için kullanılan alanlar aşağıdaki tabloda görülmektedir.

| Alan | Açıklama |
|------|----------|
| **Apinizer Manager Kubernetes Namespace Adı** (Apinizer Manager Kubernetes Namespace Name) | Manager deployment'ının çalışacağı namespace'in belirtildiği alandır. |
| **Apinizer API Integration Kubernetes Namespace Adı** (Apinizer API Integration Kubernetes Namespace Name) | Integration deployment'ının çalışacağı namespace'in belirtildiği alandır. |
| **Apinizer API/Developer Portal Kubernetes Namespace Adı** (Apinizer API/Developer Portal Kubernetes Namespace Name) | Portal deployment'ının çalışacağı namespace'in belirtildiği alandır. |

### Pod Security Context'ini Tanımlayın

**Pod Security Context'ini Tanımlayın (Define your Pod Security Context)** bölümünün altında sağ tarafta yer alan **Yapılandır (Configure)** butonuna basılarak bu bölüme ait ayarlar yapılabilir.

Yapılandırma ayarlarını içeren görsele aşağıda yer verilmiştir:

<img
  src="/images/yonetici/kube4.png"
  alt="Pod Security Context Yapılandırması"
  width="800"
  height="500"
/>

Yapılandırma ayarları için kullanılan alanlar aşağıdaki tabloda görülmektedir.

| Alan | Açıklama |
|------|----------|
| **Run as Group** | Kubernetes Pod'larının kullanıcı grubu ile çalıştırılmasını sağlayan ayardır. |
| **Run as User** | Kubernetes Pod'larının kullanıcı ile çalıştırılmasını sağlayan ayardır. |
| **Run as Non-root** | Kubernetes Pod'larının sadece Root kullanıcı ile çalıştırılmasını sağlayan ayardır. |
| **Read Only Root Filesystem** | Kubernetes Pod kök dosyalarının sadece okunabilir olmasını sağlayan ayardır. |
| **Allow Privilege Escalation** | Kubernetes Pod'larının güvenlik ilkesinin aktif (true) olduğunu gösteren ayardır. |
| **Automount Service Account Token** | Kubernetes Pod'larının çalışması için oluşturulan servis token'ının otomatik yenilendiği ayardır. |

<Warning>
Pod Security bölümünün aktifleştirilmesi kapatılmak istenirse; Gateway Runtime, Manager, API Integration ve API Portal ortamlarına ait podlar yeniden başlatılır.
</Warning>

### Pod Probes'u Tanımlayın

**Pod Probes'u Tanımlayın (Define your Pod Probes)** bölümünün altında sağ tarafta yer alan **Yapılandır (Configure)** butonuna basılarak bu bölüme ait ayarlar yapılabilir.

Pod Probes ayarlarını içeren görsele aşağıda yer verilmiştir:

<img
  src="/images/yonetici/kube5.png"
  alt="Pod Probes Yapılandırması"
  width="800"
  height="500"
/>

Pod Probes Yapılandırma ayarları için kullanılan alanlar aşağıdaki tabloda görülmektedir.

| Alan | Açıklama |
|------|----------|
| **Başlatma Probu** (Startup Probe) | Konteynerin başlatılma sürecini izleyen ve belirli bir süre boyunca çalışıp çalışmadığını kontrol eden bir probe türüdür. Uygulamanın başlatılma sürecinin ne kadar sürdüğünü belirlemek ve hizmete almadan önce tamamen hazır olup olmadığını kontrol etmek için kullanılır. |
| **Canlılık Probu** (Liveness Probe) | Uygulamanın çalışma durumunu izleyen probe türüdür. Konteyner içindeki uygulamanın hala çalışıp çalışmadığını belirler. Eğer uygulama çalışmıyorsa, Kubernetes bu konteyneri yeniden başlatır. |
| **Hazırlık Probu** (Readiness Probe) | Konteynerin hizmete hazır olup olmadığını belirleyen probe türüdür. Uygulamanın kullanıcı trafiğini kabul etmeye hazır olup olmadığını kontrol eder. Eğer hazır değilse, servis trafiği bu konteynere yönlendirilmez. Bu, hizmet kesintilerini önlemek için önemlidir. |
| **Period** (Period) | Bu parametre, probenin ne sıklıkla çalıştırılacağını belirler. Örneğin, bir Liveness Probe için belirli bir dönem belirlendiğinde, Kubernetes bu probe'u o dönem aralıklarında çalıştırır ve uygulamanın çalışma durumunu izler. Saniye cinsindedir. |
| **Başlangıç Gecikmesi** (Initial Delay) | Bu parametre, probenin başlatılması için belirli bir sürenin geçmesini bekler. Özellikle uygulama başlatma sürecinin uzun olabileceği durumlarda, başlangıç gecikmesi, uygulamanın tamamen başlatılmasını beklemek için kullanılabilir. Böylece, konteynerin başlangıç süreci tamamlanmadan önce probaların çalışmasını önler. Saniye cinsindedir. |
| **Zaman Aşımı** (Timeout) | Bu parametre, bir probenin belirli bir süre içinde yanıt alamadığı durumu tanımlar. Örneğin, bir Liveness Probe için belirli bir zaman aşımı süresi ayarlandığında, eğer uygulama belirli bir süre içinde cevap vermezse, Kubernetes bu pod'u hatalı olarak işaretleyebilir ve yeniden başlatılmasını başlatabilir. Saniye cinsindedir. |

