---
title: 'Geri Yükleme'
description: 'MongoDB veritabanı geri yükleme işlemleri, geri yükleme önemi ve geri yükleme komutları'
---

# Geri Yükleme

## Geri Yükleme Nedir?

Geri yükleme (Restore), daha önce alınmış yedek dosyalarından verilerin geri getirilmesi işlemidir. Apinizer platformunda, MongoDB veritabanından alınan yedekler kullanılarak tüm sistem yapılandırmaları, API proxy tanımları, politika ayarları ve diğer veriler geri yüklenebilir.

## Geri Yüklemenin Önemi

Geri yükleme işlemi, sistem kurtarma ve veri bütünlüğü açısından kritik bir işlemdir:

* **Hızlı Sistem Kurtarma**: Veri kaybı veya sistem arızası durumunda, yedekten geri yükleme yaparak sistemi hızlıca çalışır hale getirebilirsiniz
* **Veri Bütünlüğü**: Yedekten geri yükleme yaparak, sisteminizin belirli bir noktadaki durumuna geri dönebilirsiniz
* **Test Ortamları**: Yedekleri test ortamlarına geri yükleyerek, test ve geliştirme işlemlerini gerçek verilerle yapabilirsiniz
* **Versiyon Geri Dönüş**: Sistem güncellemesi sonrası sorun yaşanırsa, önceki versiyonun yedeğinden geri yükleme yapabilirsiniz
* **Felaket Kurtarma**: Büyük ölçekli sistem arızalarında, yedeklerden geri yükleme yaparak iş sürekliliğini sağlayabilirsiniz

## MongoDB Geri Yükleme İşlemi

Apinizer konfigürasyon verilerini yedekten geri yüklemek için, oluşturduğunuz yedek dosyaları kullanılır. Bu işlem linux shell üzerinde "mongorestore" komutuyla yapılır.

### Temel Geri Yükleme Komutu

Aşağıdaki komut kullanılarak daha önce alınmış olan yedek dosyası geri yüklenebilir:

```bash
mongorestore --drop --host=<PRIMARY_MONGODB_IP> --port=<PRIMARY_MONGODB_PORT> --username=apinizer --authenticationDatabase=admin --gzip --archive=/home/apinizer/apinizer-backup-v<CURRENT_VERSION>--<BACKUP_DATE>--01.archive
```

### Replica Set'e Geri Yükleme

**Primary MongoDB sunucusunu hedef göstermeden tüm replica'ya restore eden örnek komut:**

```bash
mongorestore --drop --host apinizer-replicaset/10.0.0.1:25080,10.0.0.2:25080,10.0.0.3:25080 --username apinizer --password "123456" --gzip --archive=/home/apinizer/apinizer-backup-v2024092--20241231--01.archive
```

### Tek Koleksiyon Geri Yükleme

**Tüm veritabanı değil sadece tek bir koleksiyon yedeklenmişse, bunu geri yüklemek için:**

```bash
mongorestore --drop --host 10.0.0.1 --port 25080 --authenticationDatabase "admin" -d apinizerdb -u apinizer -p "123456" --collection=api_proxy /home/apinizer/apinizerdb/api_proxy.bson
```

## Geri Yükleme Öncesi Dikkat Edilmesi Gerekenler

* **Yedek Dosyası Kontrolü**: Geri yükleme yapmadan önce yedek dosyasının bütünlüğünü kontrol edin
* **Versiyon Uyumluluğu**: Yedek dosyasının Apinizer sürümü ile uyumlu olduğundan emin olun
* **Mevcut Veriler**: `--drop` parametresi kullanıldığında mevcut veriler silinir, bu nedenle dikkatli olun
* **Yedekleme**: Geri yükleme yapmadan önce mevcut durumun yedeğini alın
* **Test Ortamı**: Mümkünse önce test ortamında geri yükleme işlemini deneyin
* **Bakım Penceresi**: Geri yükleme işlemi sırasında sistem kullanılamayacağı için bakım penceresi planlayın

## Geri Yükleme En İyi Uygulamaları

* **Planlama**: Geri yükleme işlemini önceden planlayın ve dokümante edin
* **Test**: Düzenli olarak geri yükleme testleri yapın
* **Yedekleme**: Geri yükleme öncesi mevcut durumun yedeğini alın
* **Versiyon Kontrolü**: Yedek dosyalarında sürüm bilgisini kontrol edin
* **Dokümantasyon**: Geri yükleme işlemlerini dokümante edin
* **İzleme**: Geri yükleme sonrası sistemin düzgün çalıştığını doğrulayın

## Detaylı Bilgi

Detaylı bilgi için [MongoDB dökümantasyonunu inceleyebilirsiniz](https://docs.mongodb.com/manual/tutorial/restore-replica-set-from-backup/).

