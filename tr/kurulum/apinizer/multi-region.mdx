---
title: "Multi-Region Apinizer"
description: "Apinizer'ın multi-region Kubernetes mimarisi üzerinde nasıl çalıştığını adım adım açıklayabilir. Farklı coğrafi bölgelerdeki Kubernetes cluster'larında Apinizer bileşenlerinin kurulumunu ve yapılandırmasını sağlar. Multi-region kurulumu için gerekli adımları ve yapılandırma detaylarını sunar."
---

<Note>
  Bu dokümanda yalnızca **Apinizer'a özel yapılması gereken işlemler** anlatılmaktadır. Kubernetes cluster ve Apinizer kurulumuna dair detaylar bu dokümanın kapsamında değildir ve ayrı bir dökümanda sunulmaktadır.
</Note>

<CardGroup cols={2}>
  <Card title="Kubernetes Kurulumu" icon="layer-group" href="/tr/kurulum-surum-yukseltme/kubernetes-kurulumu/giris">
    Kubernetes cluster kurulumunu öğrenin
  </Card>
  <Card title="Apinizer Kurulumu" icon="server" href="/tr/kurulum-surum-yukseltme/apinizer-kurulumu/giris">
    Apinizer kurulumunu öğrenin
  </Card>
</CardGroup>

## Kubernetes Namespace ve Kaynak Yönetimi Özelliğinin Kapatılması

Multi-region kurulumunda, Apinizer Manager Konsolu üzerinden Kubernetes namespace ve kaynak yönetimi özelliğinin devre dışı bırakılması gerekmektedir.

Apinizer arayüzünde **"Enable the management of Kubernetes Namespace and Resources with Apinizer"** ayarı devre dışı bırakıldığında, Apinizer artık Kubernetes üzerinde namespace ve kaynakları otomatik olarak oluşturmaz veya güncellemez.

Bu durumda:

* Kubernetes kaynaklarının (Deployment, Service, Secret, Role, vb.) yönetimi **manuel olarak YAML dosyaları** üzerinden gerçekleştirilmelidir.
* Bu yöntem, çoklu cluster yapılarında daha fazla esneklik ve kontrol sağlar ve Multi Region kurulumunu kolaylaştırır.

<Steps>
  <Step title="Administration menüsüne gidin">
    Apinizer Manager Konsolu'nda Administration menüsünü açın.
  </Step>
  <Step title="System Settings → General Settings sekmesini açın">
    System Settings altından General Settings sekmesine gidin.
  </Step>
  <Step title="Kubernetes yönetimini devre dışı bırakın">
    "Enable the management of Kubernetes Namespace and Resources with Apinizer" seçeneğini devre dışı bırakın (disable).
  </Step>
  <Step title="Değişiklikleri kaydedin">
    Yapılan değişiklikleri kaydedin.
  </Step>
</Steps>

## Ortam Oluşturma

Apinizer Manager Konsolu üzerinden multi-region yapılandırması için ortam oluşturulur. Bu işlem ile Apinizer'ın hangi ortam(namespace) ve hangi cluster'lara erişip yönetmesi gerektiği bilgisi tanımlanır.

Örnek olarak, prod isimli mevcut bir ortamın cluster'ına, farklı bir bölgede kurduğumuz yeni ortamı aşağıdaki adımlar ile tanımlayabilirsiniz.

<Steps>
  <Step title="Gateway Environments sayfasına gidin">
    **Administration > Server Management > Gateway Environments** sayfasını açın.
  </Step>
  <Step title="Gateway ve Cache Management API Access URLs tanımlayın">
    **Gateway and Cache Management API Access URLs** bölümünde yeni eklenen cluster'a ait **Gateway** ve **Cache** bileşenlerinin yönetim API erişim bilgilerini tanımlayın.

    <Warning>
      **Çok Önemli**

      Bu adımda her cluster için Apinizer Manager Konsolu tarafından **erişilebilir Gateway ve Cache adresleri** girilmelidir.
    </Warning>
  </Step>
  <Step title="Erişimi test edin ve kaydedin">
    "Try it" butonunu kullanarak erişimin sağlandığını test edin. Erişim başarılı ise kaydedin.
  </Step>
</Steps>

## Cluster Bilgisinin YAML Dosyalarına Eklenmesi

Aynı ortama (namespace'e) ait fakat farklı coğrafi ortamda çalışan Apinizer Worker ve Cache uygulamalarına hangi cluster'a ait olduklarını belirtmek için aşağıdaki ayarın yapılması gerekmektedir. Bu ayar ile her bir worker'ın hangi cache'e bağlanacağı da belirlenmiş olur.

Her bir **Worker Deployment** tanımına aşağıdaki ortam değişkeni eklenmelidir:

```yaml
spec:
  containers:
    env:
      - name: environmentClusterName
        value: <NAME>
```

<Warning>
  **Çok Önemli**

  * `<NAME>` Worker'ın bağlanacağı Cache'in bulunduğu cluster'ı temsil eden isimdir.
  * Bu isim, Apinizer arayüzünde **Gateway Environments** altında tanımlanan cluster adı ile birebir aynı olmalıdır.
  * Her cluster'daki Worker bileşeni, yalnızca kendi bölgesinde bulunan Cache bileşeni ile iletişim kurar.
</Warning>

## Sonraki Adımlar

<CardGroup cols={2}>
  <Card title="Apinizer Kurulumu" icon="server" href="/tr/kurulum-surum-yukseltme/apinizer-kurulumu/giris">
    Apinizer kurulumunu öğrenin
  </Card>
  <Card title="API Portal Kurulumu" icon="window-maximize" href="/tr/kurulum-surum-yukseltme/apinizer-kurulumu/api-portal">
    API Portal kurulumunu öğrenin
  </Card>
  <Card title="API Integration Kurulumu" icon="plug" href="/tr/kurulum-surum-yukseltme/apinizer-kurulumu/api-integration">
    API Integration kurulumunu öğrenin
  </Card>
  <Card title="Kubernetes Kurulumu" icon="layer-group" href="/tr/kurulum-surum-yukseltme/kubernetes-kurulumu/giris">
    Kubernetes kurulumunu öğrenin
  </Card>
</CardGroup>
