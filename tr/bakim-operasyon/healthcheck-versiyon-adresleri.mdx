---
title: "Apinizer Healthcheck ve Sürüm Adresleri"
description: 'Apinizer Healthcheck ve Sürüm Adresleri'
---

*   *   *   *   * 

  * [Apinizer Dokümantasyonu](/apinizer-dokumantasyonu/apinizer-dokuemantasyonuna-hos-geldiniz-1179695.html)
  * [Bakım İşlemleri](/apinizer-dokumantasyonu/bakim-islemleri-39732228.html)
  * Current: Apinizer Healthcheck ve Sürüm Adresleri

# Apinizer Healthcheck ve Sürüm Adresleri

Bu doküman, Apinizer dağıtımınızdaki ana modüllerin (Manager, Worker, Cache, Integration ve Portal) sağlık durumunu ve sürüm bilgilerini nasıl kontrol edeceğinizi açıklar. Bu kontroller, sisteminizin düzgün çalıştığını doğrulamak, olası sorunları erken teşhis etmek ve sorun giderme süreçlerinde size yol göstermek için kritik öneme sahiptir.

## Genel Yaklaşım

Apinizer modüllerinin healthcheck ve sürüm kontrollerini iki ana yöntemle gerçekleştirebiliriz:

### Kubernetes İçinden: 

Küme içindeki bir pod üzerinden curl komutu kullanarak dahili servis isimleri aracılığıyla istek atarak gerçekleştirilir. Bu yöntem, cluster içi iletişim problemlerini teşhis etmek için idealdir.

### Kubernetes Dışından:

Modülleriniz dışarıya (NodePort, LoadBalancer, Ingress) açılmışsa, yerel makinenizden veya sunucu üzerinden doğrudan erişim URL'lerine istek atarak gerçekleştirilir. Bu yöntem, genel erişilebilirliği ve harici entegrasyonları test etmek için kullanışlıdır.

## Kubernetes İçinden Kontroller

Bu yöntem ile Apinizer modüllerinin Kubernetes kümesi içindeki dahili ağ üzerinden erişilebilirliğini ve durumunu kontrol etmek için kullanılır.

### Pod'lar ve Durumları Tespit Edilir

Kümedeki tüm Pod'ları ve onların durumlarını kontrol edilir. Bu, hangi Pod'ların çalıştığını ve hangi Namespace'lerde bulunduğunun gösterilmesini sağlar.
```bash
    kubectl get pods -A
```



Bu sisteminizdeki bütün pod'ların çıktısını verecektir. Bu örnekte tüm pod'lar sağlıklı bir şekilde çalışmaktadır:

![](/apinizer-dokumantasyonu/files/136052924/136052926/1/1750676099390/image2022-12-1_17-49-58.png)

Bu çıktıda, tüm Pod'ların Running (Çalışıyor) durumda olduğunu ve READY (Hazır) sütununun `1/1` olduğunu görebilirsiniz, bu da onların sağlıklı olduğunu gösterir.

### Servis Bilgileri Tespit Edilir

Pod'lar arasındaki iletişimi sağlayan Servislerin bilgileri tespit edilir. Bu, Servis isimlerini, ilgili Namespace'lerini ve dahili portlarının bulunmasını sağlar.
```bash
    kubectl get svc -A
```



Örnek çıktı:

![](/apinizer-dokumantasyonu/files/136052924/136052925/1/1750676099328/image2022-12-1_17-55-43.png)

Bu örnekte görüldüğü üzere Apinizer Namespace'leri ve Portları Aşağıdaki tabloda verilmiştir.

Modül| Servis Adı| Servis Türü| Namespace| Internal Port| External Port (Dışarıya Açılan)  
---|---|---|---|---|---  
Manager| manager| NodePort| apinizer| 8080| 32080  
Worker| worker-http-service| NodePort| prod| 8091| 30080  
Cache| cache-http-service| ClusterIp| prod| 8090| -  
Integration| integration-http-service| NodePort| apinizer-integration| 8092| 30088  
Portal| apinizer-portal-service| NodePort| apinizer-portal| 8080| 32090  
  
Bu bilgiler ışığında aşağıdaki şablonda URL'ler oluşturulabilir ve bu url'lere kubernetes içindeki herhangi bir pod üzerinden curl atılarak kontrol edilebilir.
```bash
    http://&#60;SERVICE_NAME&#62;.&#60;NAMESPACE&#62;.svc.cluster.local:&#60;SERVICE_INTERNAL_PORT&#62;/apinizer/management/health
```

TEXT

**Manager:**
```bash
    kubectl exec -it <any_pod_name> -n <namespace> -- curl -X GET http://manager.apinizer.svc.cluster.local:8080/apinizer/management/health
```



Sürüm bilgisini sorgulamak için:
```bash
    kubectl exec -it <any_pod_name> -n <namespace> -- curl -X GET http://manager.apinizer.svc.cluster.local:8080/apinizer/management/version
```



**Worker:**
```bash
    kubectl exec -it <any_pod_name> -n <namespace> -- curl -X GET http://worker-http-service.prod.svc.cluster.local:8091/apinizer/management/health
```



Sürüm bilgisini sorgulamak için:
```bash
    kubectl exec -it <any_pod_name> -n <namespace> -- curl -X GET http://worker-http-service.prod.svc.cluster.local:8091/apinizer/management/version
    
```



**Cache:**
```bash
    kubectl exec -it <any_pod_name> -n <namespace> -- curl -X GET http://cache-http-service.prod.svc.cluster.local:8090/apinizer/management/health
```



Sürüm bilgisini sorgulamak için:
```bash
    kubectl exec -it <any_pod_name> -n <namespace> -- curl -X GET http://cache-http-service.prod.svc.cluster.local:8090/apinizer/management/version
```



**Integration:**
```bash
    kubectl exec -it <any_pod_name> -n <namespace> -- curl -X GET http://integration-http-service.apinizer-integration.svc.cluster.local:8092/apinizer/management/health
```



Sürüm bilgisini sorgulamak için:
```bash
    kubectl exec -it <any_pod_name> -n <namespace> -- curl -X GET http://integration-http-service.apinizer-integration.svc.cluster.local:8092/apinizer/management/version
```



**Portal:**
```bash
    kubectl exec -it <any_pod_name> -n <namespace> -- curl -X GET http://apinizer-portal-service.apinizer-portal.svc.cluster.local:8080/apinizer/management/health
```



Sürüm bilgisini sorgulamak için:
```bash
    kubectl exec -it <any_pod_name> -n <namespace> -- curl -X GET http://apinizer-portal-service.apinizer-portal.svc.cluster.local:8080/apinizer/management/version
```



## Kubernetes Dışından Kontroller (Harici Erişim URL'leri ile)

Eğer Apinizer modülleriniz Kubernetes dışından erişilebilir şekilde yapılandırılmışsa (örneğin `NodePort`, `LoadBalancer` tipi servisler veya bir `Ingress` Controller aracılığıyla), Postman gibi bir HTTP istemcisi veya yerel terminalinizden `curl` ile doğrudan istek gönderebilirsiniz.

![](/apinizer-dokumantasyonu/files/136052924/136052925/1/1750676099328/image2022-12-1_17-55-43.png)

Apinizer modüllerinin `NodePort` servis tipi ile dışarıya açılan servisleri için **Kubernetes Node IP adresleri ve Node Portları** aracılığıyla herhangi bir istemciden erişim sağlanabilmektedir. Aşağıdaki tablo, Apinizer servislerinin detaylarını sunmaktadır:

Modül| Servis Adı| Servis Türü| Namespace| Internal Port| External Port (Dışarıya Açılan)  
---|---|---|---|---|---  
Manager| manager| NodePort| apinizer| 8080| 32080  
Worker| worker-http-service| NodePort| prod| 8091| 30080  
Cache| cache-http-service| ClusterIp| prod| 8090| -  
Integration| integration-http-service| NodePort| apinizer-integration| 8092| 30088  
Portal| apinizer-portal-service| NodePort| apinizer-portal| 8080| 32090  
  
**Manager:**
```bash
    curl "http://&#60;MANAGER_ACCESS_URL&#62;/apinizer/management/health"
```

BASH

Sürüm bilgisini sorgulamak için:
```bash
    curl "http://&#60;MANAGER_ACCESS_URL&#62;/apinizer/management/version"
```

BASH

**Worker:**
```bash
    curl "http://&#60;WORKER_ACCESS_URL&#62;/apinizer/management/health"
```

BASH

Sürüm bilgisini sorgulamak için:
```bash
    curl "http://&#60;WORKER_ACCESS_URL&#62;/apinizer/management/version"
```

BASH

**Integration:**
```bash
    curl "http://&#60;INTEGRATION_ACCESS_URL&#62;/apinizer/management/health"
```

BASH

Sürüm bilgisini sorgulamak için:
```bash
    curl "http://&#60;INTEGRATION_ACCESS_URL&#62;/apinizer/management/version"
```

BASH

**Portal:**
```bash
    curl "http://&#60;PORTAL_ACCESS_URL&#62;/apinizer/management/health"
```

BASH

Sürüm bilgisini sorgulamak için:
```bash
    curl "http://&#60;PORTAL_ACCESS_URL&#62;/apinizer/management/version"
```

BASH

![](/apinizer-dokumantasyonu/_/05BD9F48017A5D1E2319A7812864C3E5/1699865923290/images/common/info-macro-icon.svg)

Cache'e Kubernetes Dışından Erişmek İçin

**Cache modülü** varsayılan olarak kurulumlarda dışarıya açılmamaktadır (**ClusterIP** servis türü). Bu nedenle, Kubernetes dışından doğrudan `health-check` ve `version-check` yapmak istenilirse, Cache servisinin `8090` numaralı portunun dışarıya erişilebilir şekilde yapılandırılması gerekmektedir.

×