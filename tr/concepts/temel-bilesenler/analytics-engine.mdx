---
title: "Analytics Engine"
description: "Analytics Engine (Analitik Motoru), Apinizer platformunda API kullanım verilerini toplayan, analiz eden ve görselleştiren bileşendir. API trafiğinden gelen log kayıtlarını işleyerek analitik veriler çıkarır, performans metriklerini hesaplar ve kullanım istatistiklerini sunar."
---

## Analytics Engine Kavramı

<CardGroup cols={2}>
  <Card title="Veri Toplama" icon="database">
    API trafiğinden veri toplama
  </Card>
  <Card title="Analiz" icon="chart-bar">
    Veri analizi ve metrik hesaplama
  </Card>
  <Card title="Görselleştirme" icon="chart-line">
    Dashboard ve raporlar
  </Card>
  <Card title="Gerçek Zamanlı" icon="clock">
    Gerçek zamanlı metrikler
  </Card>
</CardGroup>

## Analytics Engine Özellikleri

### Veri Toplama

API trafiği ve tüm loglamalar **asenkron** olarak yapılır. Bu sayede API Gateway'in performansı etkilenmez ve loglama işlemleri arka planda gerçekleştirilir.

<AccordionGroup>
  <Accordion title="Request Logs">
    * İstek URL'i
    * HTTP method
    * Request headers
    * Request body (opsiyonel)
    * Timestamp
  </Accordion>
  
  <Accordion title="Response Logs">
    * Response status code
    * Response headers
    * Response body (opsiyonel)
    * Response time
  </Accordion>
  
  <Accordion title="Error Logs">
    * Hata tipi
    * Hata mesajı
    * Hata zamanı
  </Accordion>
</AccordionGroup>

<Info>
Tüm loglama işlemleri asenkron olarak gerçekleştirilir. Bu sayede API Gateway'in yanıt süresi etkilenmez ve yüksek performans korunur.
</Info>

### Metrikler

<CardGroup cols={2}>
  <Card title="Performans Metrikleri" icon="gauge">
    * Response time (ortalama, min, max)
    * Throughput (requests/second)
    * Latency
    * Error rate
  </Card>
  <Card title="Kullanım Metrikleri" icon="users">
    * API çağrı sayısı
    * Unique kullanıcı sayısı
    * Endpoint kullanımı
    * Method bazlı kullanım
  </Card>
  <Card title="Hata Metrikleri" icon="triangle-exclamation">
    * Hata sayısı
    * Hata oranı
    * Hata tipi dağılımı
    * Hata trendi
  </Card>
  <Card title="Trafik Metrikleri" icon="route">
    * Toplam trafik
    * Trafik trendi
    * Peak saatler
    * Coğrafi dağılım
  </Card>
</CardGroup>

### Görselleştirme

<AccordionGroup>
  <Accordion title="Dashboard">
    * Gerçek zamanlı metrikler
    * Grafikler ve chart'lar
    * Özelleştirilebilir widget'lar
    * Filtreleme ve zaman aralığı seçimi
  </Accordion>
  
  <Accordion title="Raporlar">
    * Hazır raporlar
    * Özel rapor oluşturma
    * Rapor zamanlama
    * Rapor export (PDF, CSV, Excel)
  </Accordion>
  
  <Accordion title="Alerting">
    * Metrik bazlı alarmlar
    * Threshold tanımlama
    * Bildirim kanalları (Email, SMS, Webhook)
  </Accordion>
</AccordionGroup>

## Analytics Engine Bileşenleri

<CardGroup cols={3}>
  <Card title="Log Collector" icon="file-lines">
    API Gateway'lerden log kayıtlarını toplayan bileşen
    
    * **Log Aggregation**: Log kayıtlarını toplama
    * **Log Parsing**: Log kayıtlarını parse etme
    * **Log Storage**: Log kayıtlarını saklama
  </Card>
  
  <Card title="Data Processor" icon="cog">
    Toplanan verileri işleyen ve metrikleri hesaplayan bileşen
    
    * **Data Transformation**: Veri dönüştürme
    * **Metric Calculation**: Metrik hesaplama
    * **Data Aggregation**: Veri toplama
  </Card>
  
  <Card title="Depolama Katmanı" icon="database">
    Analitik verilerin saklandığı katman
    
    * **Elasticsearch**: Log ve metrik verileri
    * **Zaman Serisi Veritabanı**: Zaman serisi verileri
    * **Veri Saklama**: Veri saklama politikaları
  </Card>
</CardGroup>

## Analytics Engine Kullanım Senaryoları

<CardGroup cols={3}>
  <Card title="Performans İzleme" icon="gauge">
    1. API response time izleme
    2. Throughput analizi
    3. Latency trend analizi
    4. Bottleneck tespiti
  </Card>
  
  <Card title="Kullanım Analizi" icon="users">
    1. En çok kullanılan API'ler
    2. Kullanıcı bazlı kullanım
    3. Endpoint bazlı kullanım
    4. Zaman bazlı kullanım trendi
  </Card>
  
  <Card title="Hata Analizi" icon="triangle-exclamation">
    1. Hata oranı izleme
    2. Hata tipi analizi
    3. Hata trend analizi
    4. Hata çözümü takibi
  </Card>
</CardGroup>

## Analytics Engine ve Diğer Bileşenler İlişkisi

Analytics Engine, API Gateway'lerden log kayıtlarını **asenkron** olarak alır, işler ve analitik veriler üretir. İşleyiş akışı:

```
API Gateway
   │
   │ Asenkron Log Kayıtları
   ▼
Analytics Engine
   │
   │ Analitik Veriler
   ▼
Depolama Katmanı (Elasticsearch)
   │
   │ Görselleştirme
   ▼
Dashboard / Reports
```

<CardGroup cols={4}>
  <Card title="1. Asenkron Veri Toplama" icon="database">
    API Gateway'lerden log kayıtları asenkron olarak toplanır
    
    Request, Response ve Error logları arka planda toplanır. API Gateway'in performansı etkilenmez.
  </Card>
  
  <Card title="2. Veri İşleme" icon="cog">
    Log kayıtları işlenir ve metrikler hesaplanır
    
    Veri dönüştürme ve metrik hesaplama yapılır.
  </Card>
  
  <Card title="3. Veri Saklama" icon="hard-drive">
    Analitik veriler depolama katmanına kaydedilir
    
    Elasticsearch'e log ve metrik verileri saklanır.
  </Card>
  
  <Card title="4. Görselleştirme" icon="chart-line">
    Dashboard ve raporlar oluşturulur
    
    Kullanıcılar metrikleri görselleştirebilir.
  </Card>
</CardGroup>

<Info>
Analytics Engine, API Gateway'lerden gelen log kayıtlarını asenkron olarak işleyerek API performansı ve kullanımı hakkında değerli bilgiler sağlar. Asenkron loglama sayesinde API Gateway'in yanıt süresi etkilenmez ve yüksek performans korunur.
</Info>

## Veri Saklama ve Retention

### API Trafiği Logları ve ILM

API trafiği logları **Elasticsearch'te saklanır** ve **Index Lifecycle Management (ILM)** doğrudan desteklenir. ILM politikaları Apinizer üzerinden yönetilebilir. Ayrıca connector'lar vasıtasıyla loglar farklı hedeflere gönderilebilir:

<CardGroup cols={2}>
  <Card title="Elasticsearch Saklama" icon="hard-drive">
    API trafiği logları Elasticsearch'te saklanır
    
    * Gerçek zamanlı log saklama
    * Arama ve analiz yetenekleri
    * Ölçeklenebilir depolama
    * Apinizer ekranında direkt görüntüleme ve yönetim
    * Kibana ile görselleştirme desteği
  </Card>
  
  <Card title="ILM Desteği" icon="database">
    Elasticsearch ILM politikaları Apinizer'dan yönetilir
    
    * Index lifecycle aşamaları (hot, warm, cold, delete)
    * Otomatik index rollover
    * Retention politikaları
  </Card>
</CardGroup>

<AccordionGroup>
  <Accordion title="Apinizer Analytics ve Raporlama">
    Apinizer, Elasticsearch'te saklanan API trafiği logları için özel analytics ve raporlama özellikleri sunar:
    
    * **Analytics Dashboard**: Apinizer ekranında direkt görüntüleme
    * **Raporlama**: Özel raporlar oluşturma ve yönetme
    * **Gerçek Zamanlı Metrikler**: Canlı trafik ve performans metrikleri
    * **Filtreleme ve Sorgulama**: Gelişmiş filtreleme ve sorgulama yetenekleri
    
    <Tip>
    Apinizer ekranından API trafiği loglarını görüntüleyebilir, analiz edebilir ve raporlar oluşturabilirsiniz. Tüm analytics ve raporlama işlemleri Apinizer üzerinden yönetilebilir.
    </Tip>
  </Accordion>
  
  <Accordion title="Kibana Entegrasyonu">
    İstenirse Elasticsearch'teki loglar Kibana ile görselleştirilebilir:
    
    * **Kibana Dashboard**: Kibana üzerinden dashboard oluşturma
    * **Görselleştirme**: Kibana'nın görselleştirme araçları
    * **Gelişmiş Analiz**: Kibana'nın analiz yetenekleri
    
    <Tip>
    Kibana entegrasyonu sayesinde Elasticsearch'teki loglar Kibana'nın güçlü görselleştirme ve analiz araçları ile kullanılabilir.
    </Tip>
  </Accordion>
  
  <Accordion title="Connector ile Log Gönderimi">
    API trafiği logları connector'lar vasıtasıyla farklı hedeflere gönderilebilir:
    
    * **Kafka**: Mesaj kuyruğuna log gönderimi
    * **Syslog**: Syslog sunucularına log gönderimi
    * **SIEM Araçları**: Güvenlik bilgi ve olay yönetimi araçlarına entegrasyon
    * **Relational Database**: İlişkisel veritabanlarına log kaydetme
    
    <Tip>
    Connector'lar sayesinde API trafiği logları birden fazla hedefe paralel olarak gönderilebilir. Bu sayede loglar hem Elasticsearch'te saklanır hem de diğer sistemlere aktarılır.
    </Tip>
  </Accordion>
</AccordionGroup>

### Apinizer Uygulama Logları

Apinizer platformunun çeşitli bileşenlerinin oluşturduğu loglar için otomatik temizleme görevleri yapılandırılabilir:

<AccordionGroup>
  <Accordion title="Bileşen Logları">
    * **Manager Logs**: Manager uygulamasının yazılımsal logları
    * **Gateway Logs**: Gateway uygulamasının yazılımsal logları
    * **Cache Logs**: Cache uygulamasının yazılımsal logları
  </Accordion>
  
  <Accordion title="Audit ve Güvenlik Logları">
    * **Audit Records**: Kullanıcı değişiklik kayıtları
    * **ACL Audit Records**: API Proxy ve grup erişim kayıtları
    * **Token Requests**: Token alma istekleri
    * **API Manager User Token Blacklist**: Çıkış yapıldığında tutulan token kayıtları
  </Accordion>
  
  <Accordion title="Monitoring ve İşlem Logları">
    * **Alert Logs**: Alarm kayıtları
    * **Anomaly Detector Logs**: Anomali tespit logları
    * **Uptime Monitor Logs**: Uptime monitoring logları
    * **Task Flow Logs**: Task Flow işlem logları
    * **Report Logs**: Rapor işlem logları
    * **API Proxy Trace Logs**: Trace özelliği etkin olduğunda tutulan loglar
  </Accordion>
  
  <Accordion title="Kullanıcı ve Metrik Verileri">
    * **User Notifications**: Kullanıcı bildirimleri
    * **Environment Metrics**: Ortam (Namespace) metrikleri
  </Accordion>
</AccordionGroup>

<Tip>
Uygulama logu temizleme görevleri saatlik veya günlük olarak çalıştırılabilir. Belirtilen tarihten önceki kayıtlar otomatik olarak silinir. Detaylı bilgi için [Uygulama Logu Temizleme Görevleri](/tr/admin/audit-compliance/uygulama-logu-temizleme-gorevleri.mdx) sayfasına bakabilirsiniz.
</Tip>

### Gönderilmemiş API Trafik Logları

API trafik logları konnektöre gönderilemediğinde failover konnektör kullanılır. Failover konnektör olarak Apinizer konfigürasyon veritabanı seçilmişse, biriken veriler esas konnektörlere taşınabilir:

<Info>
Gönderilmemiş API trafik logları manuel olarak taşınabilir. İşlem sırasında hata alınırsa veri kaybı olmayacak şekilde yarıda kesilir ve daha sonra tekrar başlatılabilir. Detaylı bilgi için [Gönderilmemiş API Trafik Loglarını Taşı](/tr/analytic/gonderilmemis-api-trafik-loglari-tasima.mdx) sayfasına bakabilirsiniz.
</Info>

### Prometheus ve Grafana Entegrasyonu

Analytics Engine metrikleri Prometheus ve Grafana ile entegre edilebilir:

<CardGroup cols={2}>
  <Card title="Prometheus Entegrasyonu" icon="chart-bar">
    Apinizer metrikleri Prometheus'a aktarılır
    
    * Gateway metrikleri
    * Cache metrikleri
    * Custom PromQL sorguları
  </Card>
  
  <Card title="Grafana Dashboard" icon="chart-line">
    Prometheus verileri Grafana'da görselleştirilir
    
    * Örnek dashboard'lar
    * Özelleştirilebilir grafikler
    * Gerçek zamanlı metrikler
  </Card>
</CardGroup>

<Tip>
Prometheus ve Grafana entegrasyonu hakkında detaylı bilgi için [Apinizer Metriklerinin Prometheus ve Grafana'ya Entegre Edilmesi](/tr/tutorials/nasil-yapilir-kilavuzlari/yonetici-kilavuzlari/prometheus-grafana-entegrasyonu.mdx) sayfasına bakabilirsiniz.
</Tip>

## Sonraki Adımlar

<CardGroup cols={2}>
  <Card title="API Trafiği" icon="route" href="/tr/analytic/api-trafigi.mdx">
    API trafiği loglarını görüntüleme ve analiz
  </Card>
  <Card title="Prometheus ve Grafana" icon="chart-bar" href="/tr/tutorials/nasil-yapilir-kilavuzlari/yonetici-kilavuzlari/prometheus-grafana-entegrasyonu.mdx">
    Prometheus ve Grafana entegrasyonu
  </Card>
  <Card title="Uygulama Logu Temizleme" icon="trash" href="/tr/admin/audit-compliance/uygulama-logu-temizleme-gorevleri.mdx">
    Uygulama logu temizleme görevleri
  </Card>
  <Card title="Veri Log Katmanı" icon="database" href="/tr/concepts/mimari#5-veri-ve-log-katmanı">
    Veri Log Katmanı mimarisini öğrenin
  </Card>
</CardGroup>
