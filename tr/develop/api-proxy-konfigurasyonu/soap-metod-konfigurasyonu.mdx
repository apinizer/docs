---
title: "API Proxy SOAP Metod Konfigürasyonu"
description: "SOAP tipindeki API Proxy'lerde metod güncelleme, silme ve geçici olarak kullanımdan kaldırma işlemlerini gerçekleştirebilirsiniz. SOAP metodlarını test edebilirsiniz, WS-Addressing ayarlarını ve önbellek ayarlarını yapılandırabilirsiniz."
---

## SOAP Metod Konfigürasyonu

Bu sekmede, seçilen [API Proxy](/tr/concepts/temel-kavramlar/api-proxy-nedir) için [politikalar](/tr/concepts/temel-kavramlar/politika-nedir), protokol dönüşümü ayarları ve SOAP metod yönetimi işlemleri yapılabilir.
<img
  src="/images/develop/api-proxy-konfigurasyonu/soap1.png"
  alt="Geliştirme Sekmesi"
  width="1000"
  height="667"
/>
## SOAP Metod İşlemleri

Her [API Proxy](/tr/concepts/temel-kavramlar/api-proxy-nedir), önüne koyulduğu Backend API'nin metodları için vekil olarak çalışan kendi metodlarına sahiptir.

Eğer API Proxy, WSDL dosyasının adresi verilerek ya da böyle bir dosya yüklenerek oluşturulmuşsa, bu dosyada var olan metodların her birisi için API Proxy'de aynı adlı bir metod otomatik olarak oluşturulur.
<img
  src="/images/develop/api-proxy-konfigurasyonu/soap2.png"
  alt="Metot/Endpoint Listesi"
  width="1000"
  height="500"
/>
Kullanıcılar aşağıdaki muhtemel nedenlerden dolayı metodlara yenilerini eklemek, var olanları güncellemek, silmek ya da belirli veya belirsiz bir süre için kullanıma kapatmak isteyebilirler:

- Backend API'ye bir ya da daha fazla yeni metod eklenmesi
- Backend API'den bir ya da daha fazla metod silinmesi
- Backend API'deki bir ya da daha fazla metod'un adının istemcilerden saklanmak istenmesi
- Backend API'deki bir ya da daha fazla metod'un istemcilerin erişimine tamamen ya da geçici bir süreyle kapatılmak istenmesi

### SOAP Metod Seçme

Metod listesinde, herhangi bir metodun adına tıklandığında o metod seçilmiş olur ve arayüz buna göre güncellenir.

1. Listede, seçilmiş olan metod'u belli edecek şekilde renk değişir.
2. Üst orta bölümde seçilmiş olan metod'un hangisi olduğu gösterilir.
3. Alt orta bölümde ise bu metod için yapılabilecek işlemlerin bağlantıları görüntülenir.
4. Sağ tarafta ise seçilen metod'un Backend API'nin hangi metod ile ilişkili olduğu görünür.
<img
  src="/images/develop/api-proxy-konfigurasyonu/soap3.png"
  alt="Metot/Endpoint Seçme"
  width="1000"
  height="500"
/>
## SOAP Metod Ayarları Güncelleme

SOAP tipindeki API Proxylerde sadece metod güncelleme işlemi yapılabilir.

SOAP tipindeki API Proxy'nin metodları için yapılabilecek ayarlar REST tipindeki ayarlardan farklı olup bu ayarları içeren görsele aşağıda yer verilmiştir:
<img
  src="/images/develop/api-proxy-konfigurasyonu/soap4.png"
  alt="SOAP Metod Ayarları"
  width="1000"
  height="700"
/>
### SOAP Metod Ayarları Alanları

| Alan | Açıklama |
|---|---|
| **SOAP Action** _(SOAP Action)_ | WSDL dosyası ayrıştırıldığında metod için belirtilmiş olan SOAPAction değeri otomatik elde edilir. Fakat herhangi bir sebepten dolayı farklı bir değer kullanmak için bu alandaki değer değiştirilebilir. |
| **İndirmeyi Etkinleştir** _(Enable Download)_ | API Metodundan/Endpointinden dönen sonuç [Byte Array](/tr/admin/system-settings/on-tanimli-degerler/byte-array-content-types) tipinde ise sonucun dosya olarak ele alınması için bu seçenek işaretlenir. Aksi halde içerik encoded text olarak istemciye döner. Sonucun Byte Array olup olmadığına karar vermek için ise Content Type Header değerinin sistem ayarlarındaki "Byte Array Tipleri" listesinde yer alıp almadığına bakılır. Eğer bu listede yer alıyorsa sonucun Byte Array tipinde olduğuna karar verilir. |
| **Aktifleştirildiğinde, compressed yanıt için (Accept-Encoding başlık değerine göre) Base64 Encoded Text kullanılır, varsayılan değeri Byte Array'dir.** _(If enabled, Base64 Encoded Text is used For Compressed Response(by Accept-Encoding header value), default value is Byte Array)_ | Bu metoddan dönecek olan yanıt mesajının sıkıştırılmış olduğuna Accept-Encoding değeri içinde gzip, deflate veya br değerleri var mı diye bakılarak karar verilir. Eğer bu değerlerden birisi varsa yanıt mesajının durumu sıkıştırılmış (compressed)'tır.<br/><br/>Dönen mesaj sıkıştırılmış durumda ise ve yanıt Byte Array tipinde ise ve:<br/>• Metodun bu seçeneği aktif ise, dönen mesaj Byte Array olarak sıkıştırılarak istemciye döndürülür.<br/>• Metodun bu seçeneği pasif ise, dönen mesaj Base64 ile encode edilip text'e çevrildikten sonra text hali sıkıştırılarak istemciye döner. |
| **Re-Parse'da Yoksay** _(Skip for Re-Parse)_ | Bu alan işaretlendiğinde, API Proxy "re-parse" işlemine tabi tutulduğunda bu metodun güncellenmemesi gerektiğini belirtir. Örneğin tanım dosyasından bu method silinmiş ise dahi re-parse işlemi sonrası silinmeden kalır. |
| **WSA Ayarı** _(WSA Settings)_ | Bu kısım sayesinde WS-Security Addressing ayarları her metod için ayrı ayrı aktifleştirilebilir. Aktif hale getirildiğinde ilgili WSA değerleri SOAP mesajına eklenir. |
| **Anlaşılmalı** _(Must Understand)_ | "Must Understand" değerinin ayarı yapılır. |
| **Versiyon** _(Version)_ | Kullanılacak olan WSA versiyonu seçimi yapılır. |
| **Ön Tanımlı Aksiyonu Ekle** _(Add Default Action)_ | SOAP mesajına WSDL dosyası ayrıştırılırken belirlenmiş ön tanımlı aksiyonun eklenmesini sağlar. Aktif hale getirildiğinde aşağıdaki aksiyon ifadesi kaybolur. |
| **Aksiyon** _(Action)_ | SOAP mesajına özelleştirilmiş aksiyon eklenmesi için bu alan kullanılır. |
| **Ön Tanımlı Kime Bilgisi Ekle** _(Add Default To)_ | SOAP mesajına WSDL dosyası ayrıştırılırken belirlenmiş ön tanımlı kime bilgisinin eklenmesini sağlar. Aktif hale getirildiğinde aşağıdaki kime ifadesi kaybolur. |
| **Kime** _(To)_ | SOAP mesajına özelleştirilmiş kime bilgisi eklenmesi için bu alan kullanılır. |
| **Yanıt Kime** _(Reply To)_ | SOAP mesajına özelleştirilmiş yanıt kime bilgisi eklenmesi için bu alan kullanılır. |
| **Mesaj ID Üret** _(Generate Message ID)_ | SOAP mesajına her mesaj için farklı üretilmiş Mesaj ID eklenmesi için bu alan aktif hale getirilir. |
| **Mesaj ID** _(Message ID)_ | SOAP mesajına her mesaj için sabit bir Mesaj ID eklenmesi için bu alan aktif hale getirilir. |
| **Kimden** _(From)_ | SOAP mesajına özelleştirilmiş kimden bilgisi eklenmesi için bu alan kullanılır. |
| **Hata Kime** _(Fault To)_ | SOAP mesajına özelleştirilmiş hata kime bilgisi eklenmesi için bu alan kullanılır. |
| **Hata İlişkisi** _(Relates To)_ | SOAP mesajına özelleştirilmiş hata ilişkisi bilgisi eklenmesi için bu alan kullanılır. |
| **Hata İlişki Tipi** _(RelationShip Type)_ | SOAP mesajına özelleştirilmiş hata ilişki tipi bilgisi eklenmesi için bu alan kullanılır. |
| **Önbellek Ayarları** _(Cache Settings)_ | Bu ayar aktifleştirilirse metot/endpoint bazlı önbellek ayarları aktifleştirilmiş olur. |
| **Önbellek Key Tipi** _(Cache Key Type)_ | Önbellek Anahtar Tipi için iki seçenek vardır:<br/><br/>• **Query Parametreleri Kullan** _(Use Query Params)_: Önbelleğe alma işlemi için oluşturulacak olan anahtarın istekteki HTTP Query parametrelerine göre belirlenmesi için kullanılır. Örneğin sorgu parametresi `/metodAdı?param1=value1&param2=value2` şeklinde olduğunda önbellekte tutulacak anahtar `param1=value1&param2=value2` değerinden oluşur, ve bir daha istek bu şekilde geldiğinde önbellekteki sonuç döner.<br/><br/>• **Özel Anahtar Oluştur** _(Create Custom Key)_: Önbelleğe alma işlemi için oluşturulacak olan anahtarın istekteki seçilecek alanlar ile oluşturulması için kullanılır. Bu değer seçildiğinde "Değişken Listesi" tablosunda belirtilecek alanlar ile anahtar oluşturulur. |
| **Değişken Listesi** _(Variable List)_ | Önbellek Key Tipi olarak "Özel Anahtar Oluştur (Create Custom Key)" seçilirse bu alan aktifleşir. Bu seçenek ile oluşturulacak olan önbellek anahtarının istek mesajının başlık, parametre veya gövde bölümlerinden belirtilecek alanların kombinasyonu ile yapılması sağlanır. [Variable](/tr/concepts/temel-kavramlar/variable) kullanarak özel anahtar oluşturulabilir. |
| **Kapasite** _(Capacity)_ | Önbellekte saklanabilecek maksimum yanıt sayısıdır. |
| **Önbellek Geçersizleme İçin Yetki Gerekir** _(Invalidation Requires Authn)_ | Önbelleği geçersiz kılmak için yetkilendirme gerekiyorsa seçilir. |
| **Yetkisiz İsteklerin Ele Alınması** _(Handling Action)_ | Önbelleği geçersiz kılmak için yetkilendirme gerekiyorsa yetkisiz istekler için yapılacak işlem seçilir:<br/><br/>• **DEVAM ET** _(Continue)_: Bu seçenek seçilirse, Cache-Control başlık bilgisinde `no-cache`, `no-store` veya `max-age=0` değerlerinden biri gönderildiğinde eğer gönderen kişi yetkilendirilmemiş ise bu değer gönderilmemiş gibi çalışmasına devam eder.<br/><br/>• **DUR** _(Stop)_: Bu seçenek seçilirse, Cache-Control başlık bilgisinde `no-cache`, `no-store` veya `max-age=0` değerlerinden biri gönderildiğinde eğer gönderen kişi yetkilendirilmemiş ise akışı durdurur ve hata mesajı döner.<br/><br/>Bu alan "Önbellek Geçersizleme İçin Yetki Gerekir" seçeneği işaretlendiğinde aktif hale gelir. |
| **TTL (saniye)** _(TTL (seconds))_ | Önbelleğe alınan yanıtın geçerli olacağı süre saniye olarak girilir. |
| **Null/Boş Değerleri Önbelleğe Al** _(Cache Null Value)_ | Boş değerlerin de önbelleğe alınması isteniyorsa işaretlenir. |

## SOAP Metod Silme

**Metodu Sil** _(Delete Method)_ bağlantısına tıklanır. Onay işleminden sonra metod silinir.

## SOAP Metod Geçici Olarak Kullanımdan Kaldırma

Bir metod'un silinmeden erişime kapatılması mümkündür. Bunun için **Metodu Devre Dışı Bırak** _(Disable Method)_ bağlantısına tıklanır. Bağlantıya tıklandığında metod kullanımdan kaldırılmış olur ve bununla birlikte arayüzde aşağıdaki değişiklikler gerçekleşir.

1. Metod'un yanındaki simge, metod'un kullanım dışı olduğunu gösterecek şekilde değişir.
2. **Metodu Devre Dışı Bırak** _(Disable Method)_ bağlantısı kaybolur. Bunun yerine **Metodu Etkinleştir** _(Enable Method)_ bağlantısı gelir.
<img
  src="/images/develop/api-proxy-konfigurasyonu/soap5.png"
  alt="Metot/Endpoint Devre Dışı Bırakma"
  width="1000"
  height="500"
/>
## SOAP Metod Test Etme

Eğer bir API Proxy [en az bir ortama yüklenmişse](/tr/develop/yukleme-ve-surum-yonetimi), metodları bu sekmeden kolayca test edilebilir. Bunun için seçilen metod için **Metodu Test Et** _(Test Method)_ bağlantısına tıklandığında bu metod için [Test Konsolu](/tr/develop/test-debug-araclari/test-console) açılır.

## Sonraki Adımlar

<CardGroup cols={2}>
  <Card title="Endpoint Konfigürasyonu" icon="link" href="/tr/develop/api-proxy-konfigurasyonu/endpoint-konfigurasyonu">
    REST endpoint konfigürasyonu
  </Card>
  <Card title="Genel Bilgi Sekmesi" icon="info-circle" href="/tr/develop/api-proxy-konfigurasyonu/overview">
    API Proxy genel bilgileri
  </Card>
  <Card title="Settings" icon="gear" href="/tr/develop/api-proxy-konfigurasyonu/settings">
    API Proxy ayarları
  </Card>
  <Card title="Test Konsolu" icon="flask" href="/tr/develop/test-debug-araclari/test-console">
    API Proxy test işlemleri
  </Card>
</CardGroup>
