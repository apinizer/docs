---
title: "Token Alma Yöntemleri"
description: "Token almak için iki tip yöntem bulunur. Bu yöntemler, oluşturulan JWT/OAuth2 Politikası üzerinden \"Bu Poliçe'den Yönet\" veya \"ACL'den Yönet\" seçeneklerinden birinin seçilmesiyle aktifleştirilir."
---

Token almak için iki tip yöntem bulunur. Bu yöntemler, oluşturulan JWT/OAuth2 Politikası üzerinden "Bu Poliçe'den Yönet" veya "ACL'den Yönet" seçeneklerinden birinin seçilmesiyle aktifleştirilir. İki yöntemle de token alma işlemi detaylıca anlatılacaktır.

## 1. "Bu Poliçe'den Yönet" Seçeneği ile Token Alma

<Info>
Authentication politikasının yönetim seviyesine göre **client_id** ve **client_secret** değerlerini almanın yolları aşağıdaki gibidir:

* **Authentication Politikası API Proxy'e Eklendiyse:** client_id ve client_secret değerlerini API Proxy'nin Overview bölümünde bulunan "Show Proxy Key" kısmından alınır.
* **Authentication Politikası Proxy Group'a Eklendiyse:** client_id ve client_secret değerlerini API Proxy Group'un Overview bölümünde bulunan "Show Proxy Key" kısmından alınır.
* **Authentication Politikası Policy Group'a Eklendiyse:** client_id ve client_secret değerlerini ilgili Policy Group'un Definition bölümünde bulunan "Show Proxy Key" kısmından alınır.
</Info>

### 1.1 JWT ile Token Alma

Oluşturulan JWT Politikasında "Bu Poliçe'den Yönet (Manage From This Policy)" seçeneği seçilmiş ise bu yöntemle token alınır.

Apinizer Test Konsolunu kullanarak ya da tercih ettiğiniz bir başka uygulama üzerinden yeni bir HTTP isteği hazırlayın.

* Adres, kendi Apinizer erişim adresinize uygun olarak şuna benzer şekilde girilmelidir: `https://apinizerErisimAdresiniz/auth/jwt`.

<Info>
**URL Parametrelerine İzin Ver** seçeneği seçildiyse, bilgiler GET metodu ile ve URL parametresi kullanarak gönderilebilir. (Gönderilecek olan parametreler için aşağıdaki tabloya bakınız)
</Info>

* HTTP Metodu POST olmalıdır.
* Body alanında "x-www-form-urlencoded" değeri seçilmelidir. Eğer Apinizer Test Konsolu kullanılmıyor ise "Content-Type" adı ve "application/x-www-form-urlencoded" değeri ile bir başlık eklenmelidir.
* Body alanına girilecek değerler aşağıdaki tablodaki gibidir.

| Anahtar Adı | Politika Tanımlanırken "client_credentials" Seçildiyse Girilecek Değer | Politika Tanımlanırken "password" Seçildiyse Girilecek Değer |
|-------------|-------------------------------------------------------------------------|---------------------------------------------------------------|
| grant_type | client_credentials | password |
| client_id | API Anahtarı alanından alınan Genel Anahtar değeri | API Anahtarı alanından alınan Genel Anahtar değeri |
| client_secret | API Anahtarı alanından alınan Gizli Anahtar değeri | "-" (tire işareti) |
| username | Bu alan eklenmez | Seçtiğiniz doğrulama havuzundaki kayıtlardan birinin kullanıcı adı |
| password | Bu alan eklenmez | Seçtiğiniz doğrulama havuzundaki kayıtlardan birinin şifresi |

#### Token Yenileme

**Token Ölümsüz Olsun** seçeneği kapatılıp **Token Yenileme Olsun** seçeneği açılır ise belli bir süre sonra geçersiz hale gelecek olan *token*'lar, **Yenilenmiş Token Geçerlilik Süresi** alanında belirtilen süre içerisinde yenilenebilir.

Apinizer Test Konsolunu kullanarak ya da tercih ettiğiniz bir başka uygulama üzerinden yeni bir HTTP isteği hazırlayın.

* Adres, kendi Apinizer erişim adresinize uygun olarak şuna benzer şekilde girilmelidir: `https://apinizerErisimAdresiniz/auth/jwt`.

<Info>
**URL Parametrelerine İzin Ver** seçeneği seçildiyse, bilgiler GET metodu ile URL parametresi üzerinden gönderilebilir. (Gönderilecek olan parametreler için aşağıdaki tabloya bakınız).
</Info>

* HTTP Metodu POST olmalıdır.
* Body alanında "x-www-form-urlencoded" değeri seçilmelidir. Eğer Apinizer Test Konsolu kullanılmıyor ise "Content-Type" adı ve "application/x-www-form-urlencoded" değeri ile bir başlık eklenmelidir.
* Body alanına girilecek değerler aşağıdaki tablodaki gibidir.

| Anahtar Adı | Anahtar Değeri |
|-------------|----------------|
| grant_type | refresh_token |
| client_id | API Anahtarı alanından alınan Genel Anahtar değeri |
| client_secret | "-" (tire işareti) |
| refresh_token | Daha önce alınmış olan token'daki "refresh_token" anahtarındaki değer |

#### Grant_type client_credentials ise

Varsayılan değerleri ile bir JWT Kimlik Doğrulama poltiikası ekleyin. Bu işlemi yaparken API Anahtarı bilgilerinizi kullanılmak üzere bir yere kopyalayın.

Aşağıdaki örnekteki gibi bir mesaj ile token alma isteğinizi gönderin.

**Apinizer Test Konsolu üzerinden Token Servisine istek gönderme ayarlarını içeren görsele aşağıda yer verilmiştir:**

<img src="/images/develop/politikalar/token-service/token-alma-yontemleri/jwt-client-credentials-request.png" alt="JWT Client Credentials Token İsteği" width="600" style={{maxWidth: '600px', width: '100%', height: 'auto'}} />

Yanıt mesajı içerisindeki "access_token" alanındaki değer, bu API Proxy'e gönderilecek olan tüm isteklerde "Authorization" anahtarına değer olarak verilerek ilgili API'ye güvenli bir şekilde erişim sağlanmış olur.

**Apinizer Test Konsolu üzerinden token bilgisiyle istek gönderme işlemini içeren görsele aşağıda yer verilmiştir:**

<img src="/images/develop/politikalar/token-service/token-alma-yontemleri/jwt-client-credentials-usage.png" alt="JWT Token ile İstek Gönderme" width="600" style={{maxWidth: '600px', width: '100%', height: 'auto'}} />

#### Grant_type password ise

Grant Type değeri Password olan bir JWT Kimlik Doğrulama politikası ekleyin. Bu işlemi yaparken API Anahtarı bilgilerinizi kullanılmak üzere bir yere kopyalayın.

Aşağıdaki örnekteki gibi bir mesaj ile token alma isteğinizi gönderin.

**Apinizer Test Konsolu üzerinden Token Servisine istek gönderme ayarlarını içeren görsele aşağıda yer verilmiştir:**

<img src="/images/develop/politikalar/token-service/token-alma-yontemleri/jwt-password-request.png" alt="JWT Password Token İsteği" width="600" style={{maxWidth: '600px', width: '100%', height: 'auto'}} />

Yanıt mesajı içerisindeki "access_token" alanındaki değer, bu API Proxy'e gönderilecek olan tüm isteklerde "Authorization" anahtarına değer olarak verilerek ilgili API'ye güvenli bir şekilde erişim sağlanmış olur.

**Apinizer Test Konsolu üzerinden token bilgisiyle istek gönderme işlemini içeren görsele aşağıda yer verilmiştir:**

<img src="/images/develop/politikalar/token-service/token-alma-yontemleri/jwt-password-usage.png" alt="JWT Password Token ile İstek Gönderme" width="600" style={{maxWidth: '600px', width: '100%', height: 'auto'}} />

#### Grant_type refresh_token ise

Yenileme seçeneği açık olacak şekilde bir JWT Kimlik Doğrulama politikası ekleyin. Bu işlemi yaparken API Anahtarı bilgilerinizi kullanılmak üzere bir yere kopyalayın.

Aşağıdaki örnekteki gibi bir mesaj ile token alma isteğinizi gönderin.

**Apinizer Test Konsolu üzerinden Token Servisine istek gönderme ayarlarını içeren görsele aşağıda yer verilmiştir:**

<img src="/images/develop/politikalar/token-service/token-alma-yontemleri/jwt-refresh-token-request.png" alt="JWT Refresh Token İsteği" width="600" style={{maxWidth: '600px', width: '100%', height: 'auto'}} />

Token yenileme yapmak için, ilk istekte gelen cevapta bulunan "refresh_token" alanındaki değeri alın ve aşağıdaki gibi hazırladığınız mesajda refresh_token anahtarına değer olarak verin.

Gelecek olan cevap içerisindeki "access_token" alanındaki değer yenilenmiş token değeriniz olacaktır.

**Apinizer Test Konsolu üzerinden token yenilemek için gönderilen istek örneğine ait görsele aşağıda yer verilmiştir:**

<img src="/images/develop/politikalar/token-service/token-alma-yontemleri/jwt-refresh-token-refresh.png" alt="JWT Refresh Token Yenileme" width="600" style={{maxWidth: '600px', width: '100%', height: 'auto'}} />

### 1.2 OAuth2 ile Token Alma

Oluşturulan OAuth2 Politikasında "Bu Poliçe'den Yönet (Manage From This Policy)" seçeneği seçilmiş ise bu yöntemle token alınır.

Apinizer Test Konsolunu kullanarak ya da tercih ettiğiniz bir başka uygulama üzerinden yeni bir HTTP isteği hazırlayın.

* Adres, kendi Apinizer erişim adresinize uygun olarak şuna benzer şekilde girilmelidir: `https://apinizerErisimAdresiniz/auth/token`.

<Info>
**URL Parametrelerine İzin Ver** seçeneği seçildiyse, bilgiler GET metodu ile ve URL parametresi kullanarak gönderilebilir. (Gönderilecek olan parametreler için aşağıdaki tabloya bakınız)
</Info>

* HTTP metodu POST olmalıdır.
* Body alanında "x-www-form-urlencoded" değeri seçilmelidir. Eğer Apinizer Test Konsolu kullanılmıyor ise "Content-Type" adı ve "application/x-www-form-urlencoded" değeri ile bir başlık eklenmelidir.
* Body alanına girilecek değerler aşağıdaki tablodaki gibidir.

| Anahtar Adı | Politika Tanımlanırken "client_credentials" Seçildiyse Girilecek Değer | Politika Tanımlanırken "password" Seçildiyse Girilecek Değer |
|-------------|-------------------------------------------------------------------------|---------------------------------------------------------------|
| grant_type | client_credentials | password |
| client_id | API Anahtarı alanından alınan Genel Anahtar değeri | API Anahtarı alanından alınan Genel Anahtar değeri |
| client_secret | API Anahtarı alanından alınan Gizli Anahtar değeri | API Anahtarı alanından alınan Gizli Anahtar değeri |
| username | Bu alan eklenmez | Seçtiğiniz doğrulama havuzundaki kayıtlardan birinin kullanıcı adı |
| password | Bu alan eklenmez | Seçtiğiniz doğrulama havuzundaki kayıtlardan birinin şifresi |

#### Token Yenileme

**Token Ölümsüz Olsun** seçeneği kapatılıp **Token Yenileme Olsun** seçeneği açılır ise belli bir süre sonra geçersiz hale gelecek olan *token*'lar, **Yenilenmiş Token Geçerlilik Süresi** alanında belirtilen süre içerisinde yenilenebilir.

Apinizer Test Konsolunu kullanarak ya da tercih ettiğiniz bir başka uygulama üzerinden yeni bir HTTP isteği hazırlayın.

* Adres, kendi Apinizer erişim adresinize uygun olarak şuna benzer şekilde girilmelidir: `https://apinizerErisimAdresiniz/auth/token`.

<Info>
**URL Parametrelerine İzin Ver** seçeneği seçildiyse, bilgiler GET metodu ile URL parametresi üzerinden gönderilebilir. (Gönderilecek olan parametreler için aşağıdaki tabloya bakınız).
</Info>

* HTTP metodu POST olmalıdır.
* Body alanında "x-www-form-urlencoded" değeri seçilmelidir. Eğer Apinizer Test Konsolu kullanılmıyor ise "Content-Type" adı ve "application/x-www-form-urlencoded" değeri ile bir başlık eklenmelidir.
* Body alanına girilecek değerler aşağıdaki tablodaki gibidir

| Anahtar Adı | Anahtar Değeri |
|-------------|----------------|
| grant_type | refresh_token |
| client_id | API Anahtarı alanından alınan Genel Anahtar değeri |
| client_secret | API Anahtarı alanından alınan Gizli Anahtar değeri |
| refresh_token | Daha önce alınmış olan token'daki "refresh_token" anahtarındaki değer |

#### Grant_type client_credentials ise

Varsayılan değerleri ile bir OAuth2 Kimlik Doğrulama politikası ekleyin. Bu işlemi yaparken API Anahtarı bilgilerinizi kullanılmak üzere bir yere kopyalayın.

Aşağıdaki örnekteki gibi bir mesaj ile token alma isteğinizi gönderin.

**Apinizer Test Konsolu üzerinden Token Servisine istek gönderme ayarlarını içeren görsele aşağıda yer verilmiştir:**

<img src="/images/develop/politikalar/token-service/token-alma-yontemleri/oauth2-client-credentials-request.png" alt="OAuth2 Client Credentials Token İsteği" width="600" style={{maxWidth: '600px', width: '100%', height: 'auto'}} />

Yanıt mesajı içerisindeki "access_token" alanındaki değer, bu API Proxy'e gönderilecek olan tüm isteklerde "Authorization" anahtarına değer olarak verilerek ilgili API'ye güvenli bir şekilde erişim sağlanmış olur.

**Apinizer Test Konsolu üzerinden token bilgisiyle istek gönderme işlemini içeren görsele aşağıda yer verilmiştir:**

<img src="/images/develop/politikalar/token-service/token-alma-yontemleri/oauth2-client-credentials-usage.png" alt="OAuth2 Token ile İstek Gönderme" width="600" style={{maxWidth: '600px', width: '100%', height: 'auto'}} />

#### Grant_type password ise

Grant Type değeri Password olan bir OAuth2 Kimlik Doğrulama politikası ekleyin. Bu işlemi yaparken API Anahtarı bilgilerinizi kullanılmak üzere bir yere kopyalayın.

Aşağıdaki örnekteki gibi bir mesaj ile token alma isteğinizi gönderin.

**Apinizer Test Konsolu üzerinden Token Servisine istek gönderme ayarlarını içeren görsele aşağıda yer verilmiştir:**

<img src="/images/develop/politikalar/token-service/token-alma-yontemleri/oauth2-password-request.png" alt="OAuth2 Password Token İsteği" width="600" style={{maxWidth: '600px', width: '100%', height: 'auto'}} />

Yanıt mesajı içerisindeki "access_token" alanındaki değer, bu API Proxy'e gönderilecek olan tüm isteklerde "Authorization" anahtarına değer olarak verilerek ilgili API'ye güvenli bir şekilde erişim sağlanmış olur.

**Apinizer Test Konsolu üzerinden token bilgisiyle istek gönderme işlemini içeren görsele aşağıda yer verilmiştir:**

<img src="/images/develop/politikalar/token-service/token-alma-yontemleri/oauth2-password-usage.png" alt="OAuth2 Password Token ile İstek Gönderme" width="600" style={{maxWidth: '600px', width: '100%', height: 'auto'}} />

#### GrantType: Refresh Token

Yenileme seçeneği açık olacak şekilde bir OAuth2 Kimlik Doğrulama politikası ekleyin. Bu işlemi yaparken API Anahtarı bilgilerinizi kullanılmak üzere bir yere kopyalayın.

Aşağıdaki örnekteki gibi bir mesaj ile token alma isteğinizi gönderin.

**Apinizer Test Konsolu üzerinden Token Servisine istek gönderme ayarlarını içeren görsele aşağıda yer verilmiştir:**

<img src="/images/develop/politikalar/token-service/token-alma-yontemleri/oauth2-refresh-token-request.png" alt="OAuth2 Refresh Token İsteği" width="600" style={{maxWidth: '600px', width: '100%', height: 'auto'}} />

Token yenileme yapmak için, ilk istekte gelen cevapta bulunan "refresh_token" alanındaki değeri alın ve aşağıdaki gibi hazırladığınız mesajda refresh_token anahtarına değer olarak verin.

Gelecek olan cevap içerisindeki "access_token" alanındaki değer yenilenmiş token değeriniz olacaktır.

**Apinizer Test Konsolu üzerinden token yenilemek için gönderilen istek örneğine ait görsele aşağıda yer verilmiştir:**

<img src="/images/develop/politikalar/token-service/token-alma-yontemleri/oauth2-refresh-token-refresh.png" alt="OAuth2 Refresh Token Yenileme" width="600" style={{maxWidth: '600px', width: '100%', height: 'auto'}} />

### 1.3 Scope ile Token Alma

Apinizer Test Konsolunu kullanarak ya da tercih ettiğiniz bir başka uygulama üzerinden yeni bir HTTP isteği hazırlayın.

* Adres, kendi Apinizer erişim adresinize uygun olarak şuna benzer şekilde girilmelidir: `https://apinizerErisimAdresiniz/auth/jwt`.
* HTTP Metodu POST olmalıdır. Body alanında "x-www-form-urlencoded" değeri seçilmelidir. Eğer Apinizer Test Konsolu kullanılmıyor ise "Content-Type" adı ve "application/x-www-form-urlencoded" değeri ile bir başlık eklenmelidir.
* Body alanına girilecek değerler aşağıdaki tablodaki gibidir

| Anahtar Adı | Politika Tanımlanırken "client_credentials" Seçildiyse Girilecek Değer | Politika Tanımlanırken "password" Seçildiyse Girilecek Değer |
|-------------|-------------------------------------------------------------------------|---------------------------------------------------------------|
| grant_type | client_credentials | password |
| client_id | API Anahtarı alanından alınan Genel Anahtar değeri | API Anahtarı alanından alınan Genel Anahtar değeri |
| client_secret | API Anahtarı alanından alınan Gizli Anahtar değeri | "-" (tire işareti) |
| username | Bu alan eklenmez | Seçtiğiniz doğrulama havuzundaki kayıtlardan birinin kullanıcı adı |
| password | Bu alan eklenmez | Seçtiğiniz doğrulama havuzundaki kayıtlardan birinin şifresi |
| scope | Kullanıcıya tanımlanan rol ismi | Kullanıcıya tanımlanan rol ismi |

#### Kullanıcıya Rol tanımlama

Kullanıcıya rol tanımlaması için aşağıdaki gibi roles kısmından yeni bir rol eklenip kullanıcıya API Proxy ACL kısmından o Proxy eklenmelidir.

<img src="/images/develop/politikalar/token-service/token-alma-yontemleri/scope-role-definition.png" alt="Scope ile Rol Tanımlama" width="800" style={{maxWidth: '800px', width: '100%', height: 'auto'}} />

#### Grant_type client_credentials ise

Varsayılan değerleri ile bir JWT Kimlik Doğrulama politikası ekleyin. Bu işlemi yaparken API Anahtarı bilgilerinizi kullanılmak üzere bir yere kopyalayın.

Aşağıdaki örnekteki gibi bir mesaj ile token alma isteğinizi gönderin.

**Apinizer Test Konsolu üzerinden Token Servisine istek gönderme ayarlarını içeren görsele aşağıda yer verilmiştir:**

<img src="/images/develop/politikalar/token-service/token-alma-yontemleri/scope-client-credentials-request.png" alt="Scope ile Client Credentials Token İsteği" width="600" style={{maxWidth: '600px', width: '100%', height: 'auto'}} />

Yanıt mesajı içerisindeki "access_token" alanındaki değer, bu API Proxy'e gönderilecek olan tüm isteklerde "Authorization" anahtarına değer olarak verilerek ilgili API'ye güvenli bir şekilde erişim sağlanmış olur.

**Apinizer Test Konsolu üzerinden token bilgisiyle istek gönderme işlemini içeren görsele aşağıda yer verilmiştir:**

<img src="/images/develop/politikalar/token-service/token-alma-yontemleri/scope-client-credentials-usage.png" alt="Scope ile Token Kullanımı" width="800" style={{maxWidth: '800px', width: '100%', height: 'auto'}} />

#### Grant_type password ise

Grant Type değeri Password olan bir JWT Kimlik Doğrulama politikası ekleyin. Bu işlemi yaparken API Anahtarı bilgilerinizi kullanılmak üzere bir yere kopyalayın.

Aşağıdaki örnekteki gibi bir mesaj ile token alma isteğinizi gönderin.

**Apinizer Test Konsolu üzerinden Token Servisine istek gönderme ayarlarını içeren görsele aşağıda yer verilmiştir:**

<img src="/images/develop/politikalar/token-service/token-alma-yontemleri/scope-password-request.png" alt="Scope ile Password Token İsteği" width="600" style={{maxWidth: '600px', width: '100%', height: 'auto'}} />

Yanıt mesajı içerisindeki "access_token" alanındaki değer, bu API Proxy'e gönderilecek olan tüm isteklerde "Authorization" anahtarına değer olarak verilerek ilgili API'ye güvenli bir şekilde erişim sağlanmış olur.

**Apinizer Test Konsolu üzerinden token bilgisiyle istek gönderme işlemini içeren görsele aşağıda yer verilmiştir:**

<img src="/images/develop/politikalar/token-service/token-alma-yontemleri/scope-password-usage.png" alt="Scope ile Password Token Kullanımı" width="800" style={{maxWidth: '800px', width: '100%', height: 'auto'}} />

<img src="/images/develop/politikalar/token-service/token-alma-yontemleri/scope-password-usage-2.png" alt="Scope ile Password Token Kullanımı 2" width="800" style={{maxWidth: '800px', width: '100%', height: 'auto'}} />

## 2. "ACL'den Yönet" Seçeneği ile Token Alma

### 2.1 JWT ile Token Alma

Oluşturulan JWT Politikasında "ACL'den Yönet (Manage From ACL)" seçeneği seçilmiş ise bu yöntemle token alınır.

Apinizer Test Konsolunu kullanarak ya da tercih ettiğiniz bir başka uygulama üzerinden yeni bir HTTP isteği hazırlayın.

* Adres, kendi Apinizer erişim adresinize uygun olarak şuna benzer şekilde girilmelidir: `https://apinizerErisimAdresiniz/credential/jwt`.

<Info>
**URL Parametrelerine İzin Ver** seçeneği seçildiyse, bilgiler GET metodu ile ve URL parametresi kullanarak gönderilebilir. (Gönderilecek olan parametreler için aşağıdaki tabloya bakınız)
</Info>

* HTTP Metodu POST olmalıdır.
* Body alanında "x-www-form-urlencoded" değeri seçilmelidir. Eğer Apinizer Test Konsolu kullanılmıyor ise "Content-Type" adı ve "application/x-www-form-urlencoded" değeri ile bir başlık eklenmelidir.
* Body alanına girilecek değerler aşağıdaki tablodaki gibidir.

| Anahtar Adı | Politika Tanımlanırken "client_credentials" Seçildiyse Girilecek Değer | Politika Tanımlanırken "password" Seçildiyse Girilecek Değer |
|-------------|-------------------------------------------------------------------------|---------------------------------------------------------------|
| grant_type | client_credentials | password |
| client_id | Credentials'a ait Client Id değeri | Credentials'a ait Client Id değeri |
| client_secret | Credentials'a ait Client Secret değeri | Credentials'a ait Client Secret değeri |
| username | Bu alan eklenmez | Seçtiğiniz doğrulama havuzundaki kayıtlardan birinin kullanıcı adı |
| password | Bu alan eklenmez | Seçtiğiniz doğrulama havuzundaki kayıtlardan birinin şifresi |

#### Token Yenileme

**Token Ölümsüz Olsun** seçeneği kapatılıp **Token Yenileme Olsun** seçeneği açılır ise belli bir süre sonra geçersiz hale gelecek olan *token*'lar, **Yenilenmiş Token Geçerlilik Süresi** alanında belirtilen süre içerisinde yenilenebilir.

Apinizer Test Konsolunu kullanarak ya da tercih ettiğiniz bir başka uygulama üzerinden yeni bir HTTP isteği hazırlayın.

* Adres, kendi Apinizer erişim adresinize uygun olarak şuna benzer şekilde girilmelidir: `https://apinizerErisimAdresiniz/credential/jwt`.

<Info>
**URL Parametrelerine İzin Ver** seçeneği seçildiyse, bilgiler GET metodu ile URL parametresi üzerinden gönderilebilir. (Gönderilecek olan parametreler için aşağıdaki tabloya bakınız).
</Info>

* HTTP Metodu POST olmalıdır.
* Body alanında "x-www-form-urlencoded" değeri seçilmelidir. Eğer Apinizer Test Konsolu kullanılmıyor ise "Content-Type" adı ve "application/x-www-form-urlencoded" değeri ile bir başlık eklenmelidir.
* Body alanına girilecek değerler aşağıdaki tablodaki gibidir.

| Anahtar adı | Anahtar Değeri |
|-------------|----------------|
| grant_type | refresh_token |
| client_id | Credentials'a ait Client Id değeri |
| client_secret | Credentials'a ait Client Secret değeri |
| refresh_token | Daha önce alınmış olan token'daki "refresh_token" anahtarındaki değer |

#### Grant_type client_credentials ise

ACL'den Yönet seçeneği ile bir JWT Kimlik Doğrulama politikası ekleyin. Credential ekranından Token Settings paneline gelerek varsayılan değerleri kaydedin.

Aşağıdaki örnekteki gibi bir mesaj ile token alma isteğinizi gönderin.

**Apinizer Test Konsolu üzerinden Token Servisine istek gönderme ayarlarını içeren görsele aşağıda yer verilmiştir:**

<img src="/images/develop/politikalar/token-service/token-alma-yontemleri/acl-jwt-client-credentials-request.png" alt="ACL JWT Client Credentials Token İsteği" width="600" style={{maxWidth: '600px', width: '100%', height: 'auto'}} />

Yanıt mesajı içerisindeki "access_token" alanındaki değer, bu API Proxy'e gönderilecek olan tüm isteklerde "Authorization" anahtarına değer olarak verilerek ilgili API'ye güvenli bir şekilde erişim sağlanmış olur.

**Apinizer Test Konsolu üzerinden token bilgisiyle istek gönderme işlemini içeren görsele aşağıda yer verilmiştir:**

<img src="/images/develop/politikalar/token-service/token-alma-yontemleri/acl-jwt-client-credentials-usage.png" alt="ACL JWT Token ile İstek Gönderme" width="600" style={{maxWidth: '600px', width: '100%', height: 'auto'}} />

#### Grant_type password ise

ACL'den Yönet seçeneği ile bir JWT Kimlik Doğrulama politikası ekleyin. Credential ekranından Token Settings paneline gelerek Grant Type değerini Password olarak seçin ve kaydedin.

Aşağıdaki örnekteki gibi bir mesaj ile token alma isteğinizi gönderin.

**Apinizer Test Konsolu üzerinden Token Servisine istek gönderme ayarlarını içeren görsele aşağıda yer verilmiştir:**

<img src="/images/develop/politikalar/token-service/token-alma-yontemleri/acl-jwt-password-request.png" alt="ACL JWT Password Token İsteği" width="600" style={{maxWidth: '600px', width: '100%', height: 'auto'}} />

Yanıt mesajı içerisindeki "access_token" alanındaki değer, bu API Proxy'e gönderilecek olan tüm isteklerde "Authorization" anahtarına değer olarak verilerek ilgili API'ye güvenli bir şekilde erişim sağlanmış olur.

**Apinizer Test Konsolu üzerinden token bilgisiyle istek gönderme işlemini içeren görsele aşağıda yer verilmiştir:**

<img src="/images/develop/politikalar/token-service/token-alma-yontemleri/acl-jwt-password-usage.png" alt="ACL JWT Password Token ile İstek Gönderme" width="600" style={{maxWidth: '600px', width: '100%', height: 'auto'}} />

#### Grant_type refresh_token ise

ACL'den Yönet seçeneği ile bir JWT Kimlik Doğrulama politikası ekleyin. Credential ekranından Token Settings paneline gelerek Token Yenileme seçeneğini aktifleştirin ve kaydedin.

Aşağıdaki örnekteki gibi bir mesaj ile token alma isteğinizi gönderin.

**Apinizer Test Konsolu üzerinden Token Servisine istek gönderme ayarlarını içeren görsele aşağıda yer verilmiştir:**

<img src="/images/develop/politikalar/token-service/token-alma-yontemleri/acl-jwt-refresh-token-request.png" alt="ACL JWT Refresh Token İsteği" width="600" style={{maxWidth: '600px', width: '100%', height: 'auto'}} />

Token yenileme yapmak için, ilk istekte gelen cevapta bulunan "refresh_token" alanındaki değeri alın ve aşağıdaki gibi hazırladığınız mesajda refresh_token anahtarına değer olarak verin.

Gelecek olan cevap içerisindeki "access_token" alanındaki değer yenilenmiş token değeriniz olacaktır.

**Apinizer Test Konsolu üzerinden token yenilemek için gönderilen istek örneğine ait görsele aşağıda yer verilmiştir:**

<img src="/images/develop/politikalar/token-service/token-alma-yontemleri/acl-jwt-refresh-token-refresh.png" alt="ACL JWT Refresh Token Yenileme" width="600" style={{maxWidth: '600px', width: '100%', height: 'auto'}} />

### 2.2 OAuth2 ile Token Alma

Oluşturulan OAuth2 Politikasında "ACL'den Yönet (Manage From ACL)" seçeneği seçilmiş ise bu yöntemle token alınır.

Apinizer Test Konsolunu kullanarak ya da tercih ettiğiniz bir başka uygulama üzerinden yeni bir HTTP isteği hazırlayın.

* Adres, kendi Apinizer erişim adresinize uygun olarak şuna benzer şekilde girilmelidir: `https://apinizerErisimAdresiniz/credential/token`.

<Info>
**URL Parametrelerine İzin Ver** seçeneği seçildiyse, bilgiler GET metodu ile ve URL parametresi kullanarak gönderilebilir. (Gönderilecek olan parametreler için aşağıdaki tabloya bakınız)
</Info>

* HTTP metodu POST olmalıdır.
* Body alanında "x-www-form-urlencoded" değeri seçilmelidir. Eğer Apinizer Test Konsolu kullanılmıyor ise "Content-Type" adı ve "application/x-www-form-urlencoded" değeri ile bir başlık eklenmelidir.
* Body alanına girilecek değerler aşağıdaki tablodaki gibidir.

| Anahtar Adı | Politika Tanımlanırken "client_credentials" Seçildiyse Girilecek Değer | Politika Tanımlanırken "password" Seçildiyse Girilecek Değer |
|-------------|-------------------------------------------------------------------------|---------------------------------------------------------------|
| grant_type | client_credentials | password |
| client_id | Credentials'a ait Client Id değeri | Credentials'a ait Client Id değeri |
| client_secret | Credentials'a ait Client Secret değeri | Credentials'a ait Client Secret değeri |
| username | Bu alan eklenmez | Seçtiğiniz doğrulama havuzundaki kayıtlardan birinin kullanıcı adı |
| password | Bu alan eklenmez | Seçtiğiniz doğrulama havuzundaki kayıtlardan birinin şifresi |

#### Token Yenileme

**Token Ölümsüz Olsun** seçeneği kapatılıp **Token Yenileme Olsun** seçeneği açılır ise belli bir süre sonra geçersiz hale gelecek olan *token*'lar, **Yenilenmiş Token Geçerlilik Süresi** alanında belirtilen süre içerisinde yenilenebilir.

Apinizer Test Konsolunu kullanarak ya da tercih ettiğiniz bir başka uygulama üzerinden yeni bir HTTP isteği hazırlayın.

* Adres, kendi Apinizer erişim adresinize uygun olarak şuna benzer şekilde girilmelidir: `https://apinizerErisimAdresiniz/credential/token`.

<Info>
**URL Parametrelerine İzin Ver** seçeneği seçildiyse, bilgiler GET metodu ile URL parametresi üzerinden gönderilebilir. (Gönderilecek olan parametreler için aşağıdaki tabloya bakınız).
</Info>

* HTTP metodu POST olmalıdır.
* Body alanında "x-www-form-urlencoded" değeri seçilmelidir. Eğer Apinizer Test Konsolu kullanılmıyor ise "Content-Type" adı ve "application/x-www-form-urlencoded" değeri ile bir başlık eklenmelidir.
* Body alanına girilecek değerler aşağıdaki tablodaki gibidir

| Anahtar Adı | Anahtar Değeri |
|-------------|----------------|
| grant_type | refresh_token |
| client_id | Credentials'a ait Client Id değeri |
| client_secret | Credentials'a ait Client Secret değeri |
| refresh_token | Daha önce alınmış olan token'daki "refresh_token" anahtarındaki değer |

#### Grant_type client_credentials ise

ACL'den Yönet seçeneği ile bir OAuth2 Kimlik Doğrulama politikası ekleyin. Credential ekranından Token Settings paneline gelerek varsayılan değerleri kaydedin.

Aşağıdaki örnekteki gibi bir mesaj ile token alma isteğinizi gönderin.

**Apinizer Test Konsolu üzerinden Token Servisine istek gönderme ayarlarını içeren görsele aşağıda yer verilmiştir:**

<img src="/images/develop/politikalar/token-service/token-alma-yontemleri/acl-oauth2-client-credentials-request.png" alt="ACL OAuth2 Client Credentials Token İsteği" width="600" style={{maxWidth: '600px', width: '100%', height: 'auto'}} />

Yanıt mesajı içerisindeki "access_token" alanındaki değer, bu API Proxy'e gönderilecek olan tüm isteklerde "Authorization" anahtarına değer olarak verilerek ilgili API'ye güvenli bir şekilde erişim sağlanmış olur.

**Apinizer Test Konsolu üzerinden token bilgisiyle istek gönderme işlemini içeren görsele aşağıda yer verilmiştir:**

<img src="/images/develop/politikalar/token-service/token-alma-yontemleri/acl-oauth2-client-credentials-usage.png" alt="ACL OAuth2 Token ile İstek Gönderme" width="600" style={{maxWidth: '600px', width: '100%', height: 'auto'}} />

#### Grant_type password ise

ACL'den Yönet seçeneği ile bir OAuth2 Kimlik Doğrulama politikası ekleyin. Credential ekranından Token Settings paneline gelerek Grant Type değerini Password olarak seçin ve kaydedin.

Aşağıdaki örnekteki gibi bir mesaj ile token alma isteğinizi gönderin.

**Apinizer Test Konsolu üzerinden Token Servisine istek gönderme ayarlarını içeren görsele aşağıda yer verilmiştir:**

<img src="/images/develop/politikalar/token-service/token-alma-yontemleri/acl-oauth2-password-request.png" alt="ACL OAuth2 Password Token İsteği" width="600" style={{maxWidth: '600px', width: '100%', height: 'auto'}} />

Yanıt mesajı içerisindeki "access_token" alanındaki değer, bu API Proxy'e gönderilecek olan tüm isteklerde "Authorization" anahtarına değer olarak verilerek ilgili API'ye güvenli bir şekilde erişim sağlanmış olur.

**Apinizer Test Konsolu üzerinden token bilgisiyle istek gönderme işlemini içeren görsele aşağıda yer verilmiştir:**

<img src="/images/develop/politikalar/token-service/token-alma-yontemleri/acl-oauth2-password-usage.png" alt="ACL OAuth2 Password Token ile İstek Gönderme" width="600" style={{maxWidth: '600px', width: '100%', height: 'auto'}} />

#### Grant_type refresh_token ise

ACL'den Yönet seçeneği ile bir OAuth2 Kimlik Doğrulama politikası ekleyin. Credential ekranından Token Settings paneline gelerek Token Yenileme seçeneğini aktifleştirin ve kaydedin.

Aşağıdaki örnekteki gibi bir mesaj ile token alma isteğinizi gönderin.

**Apinizer Test Konsolu üzerinden Token Servisine istek gönderme ayarlarını içeren görsele aşağıda yer verilmiştir:**

<img src="/images/develop/politikalar/token-service/token-alma-yontemleri/acl-oauth2-refresh-token-request.png" alt="ACL OAuth2 Refresh Token İsteği" width="600" style={{maxWidth: '600px', width: '100%', height: 'auto'}} />

Token yenileme yapmak için, ilk istekte gelen cevapta bulunan "refresh_token" alanındaki değeri alın ve aşağıdaki gibi hazırladığınız mesajda refresh_token anahtarına değer olarak verin.

Gelecek olan cevap içerisindeki "access_token" alanındaki değer yenilenmiş token değeriniz olacaktır.

**Apinizer Test Konsolu üzerinden token yenilemek için gönderilen istek örneğine ait görsele aşağıda yer verilmiştir:**

<img src="/images/develop/politikalar/token-service/token-alma-yontemleri/acl-oauth2-refresh-token-refresh.png" alt="ACL OAuth2 Refresh Token Yenileme" width="600" style={{maxWidth: '600px', width: '100%', height: 'auto'}} />
