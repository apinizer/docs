---
title: "Kubernetes, Docker ve Containerd Sık Kullanılan Komutlar"
description: "Kubernetes cluster'ında pod, deployment ve servis yönetimi yapabilir, Docker ve Containerd ile image işlemlerini gerçekleştirebilir. Pod loglarını görüntüleyebilir, deployment'ları güncelleyebilir, container'ları yönetebilir ve image import/export işlemlerini yapabilir."
---

## Kubernetes

<AccordionGroup>
  <Accordion title="kubelet Çalışıyor mu Kontrol Etmek İçin">
    ```bash
    systemctl status kubelet
    ```
  </Accordion>

  <Accordion title="kubelet'te Bir Hata Olduğunda Linux Sistem Üzerinden Detay Görmek İçin">
    ```bash
    journalctl -xeu kubelet
    ```
  </Accordion>

  <Accordion title="kubelet'te Bir Hata Olduğunda kubelet Üzerinden Detay Görmek İçin">
    ```bash
    kubectl get events --all-namespaces --sort-by='.metadata.creationTimestamp'
    ```
  </Accordion>

  <Accordion title="Pod Özelinde Bir Hata Olduğunda Logları Görmek İçin">
    ```bash
    kubectl logs <POD_NAME> -n <NAMESPACE>
    ```
  </Accordion>

  <Accordion title="Pod Baştan Başlatıldıysa Bir Önceki Pod'un Loglarını Görmek İçin">
    ```bash
    kubectl logs --previous <POD_NAME> -n apinizer
    ```
  </Accordion>

  <Accordion title="Pod'un Genel Problemi Var mı Görmek İçin">
    ```bash
    kubectl describe pod <POD_NAME> -n apinizer
    ```
  </Accordion>

  <Accordion title="Çalışan Pod Üzerinde Bir İşlem Yapılmak İsteniyor, İlgili Pod'a Girebilmek İçin">
    ```bash
    kubectl exec -it <POD_NAME> -n prod /bin/bash
    ```
  </Accordion>

  <Accordion title="Pod İçerisine Girmeden Belirli Bir Adrese İstek Atmak">
    ```bash
    kubectl exec -it <POD_NAME> -n prod -- curl x.y.gov.tr
    ```
  </Accordion>

  <Accordion title="Bir Deployment Altındaki Podları Restart Etmek İçin">
    ```bash
    kubectl rollout restart deployment manager -n apinizer
    ```
  </Accordion>

  <Accordion title="Bir Deployment Altındaki Podların Sayısını Sıfıra Çekmek İçin">
    ```bash
    kubectl scale deploy cache -n prod --replicas=0
    ```
  </Accordion>

  <Accordion title="Bir Deployment'ı Silmek İçin">
    ```bash
    kubectl delete -f apinizer-deployment.yaml
    ```
  </Accordion>

  <Accordion title="Pod Terminating'te Takıldıysa Silmeyi Zorlamak İçin">
    ```bash
    kubectl delete pod <POD_NAME> -n apinizer --grace-period=0 --force
    ```
  </Accordion>

  <Accordion title="Versiyon Güncellemek İçin">
    <Note>
      İmajları sunuculara çektikten sonra aşağıdaki komutlar kullanılır. Burası "vi" editörü gibi çalışır, kaydederek çıkmak için ":wq" kullanılmalıdır.
    </Note>

    ```bash
    kubectl edit deployment manager -n apinizer
    kubectl edit deployment cache -n prod
    kubectl edit deployment worker -n prod
    ```
  </Accordion>

  <Accordion title="Evicted Durumdaki Podları Temizlemek İçin">
    ```bash
    kubectl get pod -n prod | grep Evicted | awk '{print $1}' | xargs kubectl delete pod -n prod
    ```
  </Accordion>

  <Accordion title="Kubernetes Node Affinity Kullanarak Pod'un Belirli Nodelar Üzerinde Çalışmasını Engelleme">
    ```yaml
    affinity:
      nodeAffinity:
        requiredDuringSchedulingIgnoredDuringExecution:
          nodeSelectorTerms:
          - matchExpressions:
            - key: kubernetes.io/hostname
              operator: NotIn
              values:
              - kuberdemo55
              - kuberdemo56
    ```
  </Accordion>
</AccordionGroup>

## Docker

<AccordionGroup>
  <Accordion title="Image Listeleme">
    ```bash
    docker images
    ```
  </Accordion>

  <Accordion title="Tüm Container'ları Listeleme">
    ```bash
    docker ps -a
    ```
  </Accordion>

  <Accordion title="Image Pull İşlemi">
    ```bash
    sudo docker pull apinizercloud/manager:2024.xx.0
    ```
  </Accordion>

  <Accordion title="Image Export">
    ```bash
    sudo docker save apinizercloud/manager:2024.xx.0 > manager_2024.xx.0.tar
    ```
  </Accordion>

  <Accordion title="Image Import">
    ```bash
    sudo docker load < manager_2024.xx.0.tar
    ```
  </Accordion>
</AccordionGroup>

## Containerd

<AccordionGroup>
  <Accordion title="Namespace Listeleme">
    ```bash
    sudo ctr namespaces list
    ```
  </Accordion>

  <Accordion title="Container'ları Listeleme Namespace Göre">
    ```bash
    sudo ctr --namespace k8s.io containers ls
    ```
  </Accordion>

  <Accordion title="Image Listeleme Namespace Göre Apinizer Image'ları">
    ```bash
    sudo ctr -n k8s.io images list | grep apinizer
    ```
  </Accordion>

  <Accordion title="Image Pull İşlemi">
    ```bash
    sudo ctr --namespace k8s.io images pull docker.io/apinizercloud/manager:2024.05.0
    ```
  </Accordion>

  <Accordion title="Image Export">
    ```bash
    sudo ctr -n k8s.io images export /tmp/manager:2024.05.0.tar docker.io/apinizercloud/manager:2024.05.0
    ```
  </Accordion>

  <Accordion title="Image Import">
    ```bash
    sudo ctr --namespace k8s.io images import /tmp/manager:2024.05.0.tar
    ```
  </Accordion>
</AccordionGroup>
