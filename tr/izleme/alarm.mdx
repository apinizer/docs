---
title: "Alarm"
description: "Alarm modülü, belirli koşullar ve eşik değerleri aşıldığında otomatik olarak uyarılar oluşturan ve tanımlanan eylemleri tetikleyen bir izleme modülüdür. Sistem sağlığı, performans metrikleri ve sertifika süreleri gibi çeşitli durumları izleyebilir."
---

## Alarm Nedir?

Alarm modülü, Apinizer API Gateway ve altyapı bileşenlerinin durumunu izleyerek belirlenen eşik değerleri aşıldığında veya belirli koşullar oluştuğunda otomatik olarak uyarılar oluşturan bir izleme modülüdür. Bu modül, sistem sağlığı, performans metrikleri, sertifika süreleri ve log durumları gibi çeşitli kriterleri izleyerek proaktif bir şekilde sorunları tespit eder ve ilgili ekipleri bilgilendirir.

### Temel İşlevler

Alarm modülü aşağıdaki temel işlevleri yerine getirir:

- **Koşul İzleme**: Belirlenen koşulları sürekli olarak izler ve değerlendirir
- **Eşik Kontrolü**: Tanımlanan eşik değerlerini kontrol eder ve aşıldığında alarm tetikler
- **Zamanlanmış Kontrol**: Cron expression ile belirlenen zaman aralıklarında otomatik kontrol yapar
- **Eylem Tetikleme**: Alarm tetiklendiğinde tanımlanan eylemleri (email, webhook, API çağrısı vb.) otomatik olarak çalıştırır
- **Geçmiş İzleme**: Tüm alarm tetiklenme geçmişini kaydeder ve raporlar
- **Çoklu Tetiklenme Tipleri**: Farklı sistem bileşenleri ve metrikler için özelleştirilmiş alarm tipleri sunar

### Kullanım Senaryoları

- Kubernetes Pod ve Node sağlık durumunu izleme
- Elasticsearch cluster sağlığı ve performans metriklerini takip etme
- CPU ve disk kullanım oranlarını izleme
- SSL ve JWK sertifika sürelerini kontrol etme
- Application log sayılarını izleme ve anormal durumları tespit etme
- Sistem kesintilerini erken tespit etme ve bildirim gönderme
- Kritik altyapı bileşenlerinin durumunu sürekli izleme

## Özellikler

Alarm modülü aşağıdaki özellikleri sunar:

<CardGroup cols={2}>
  <Card title="Çoklu Tetiklenme Tipleri" icon="bell">
    Kubernetes, Elasticsearch, SSL/JWK sertifika ve log bazlı alarm tipleri.
  </Card>
  <Card title="Esnek Eşik Değerleri" icon="gauge">
    Her alarm tipi için özelleştirilebilir eşik değerleri ve birimler (%%, gün, kayıt sayısı).
  </Card>
  <Card title="Zamanlanmış Kontrol" icon="clock">
    Cron expression ile esnek zamanlama. İstediğiniz zaman aralıklarında otomatik kontrol.
  </Card>
  <Card title="Eylem Entegrasyonu" icon="bolt">
    Email, Webhook, API çağrısı ve daha fazlası ile otomatik bildirim ve eylem tetikleme.
  </Card>
  <Card title="Geçmiş İzleme" icon="history">
    Tüm alarm tetiklenme geçmişi, sonuçlar ve detaylı raporlama.
  </Card>
  <Card title="Aktif/Pasif Yönetimi" icon="toggle-on">
    Alarmları aktif/pasif duruma getirerek esnek yönetim.
  </Card>
</CardGroup>

## Tetiklenme Tipleri

Alarm modülü aşağıdaki tetiklenme tiplerini destekler:

### Kubernetes İzleme
- **Pod Sağlık Durumu**: Kubernetes pod'larının sağlık durumunu izler
- **Node Sağlık Durumu**: Kubernetes node'larının sağlık durumunu izler
- **Node CPU Yüzdesi**: Kubernetes node'larının CPU kullanım yüzdesini izler

### Elasticsearch İzleme
- **Sağlık Durumu**: Elasticsearch cluster'ının sağlık durumunu izler
- **CPU Yüzdesi**: Elasticsearch node'larının CPU kullanım yüzdesini izler
- **Disk Yüzdesi**: Elasticsearch node'larının disk kullanım yüzdesini izler
- **Log Varlığı**: Elasticsearch loglarının veritabanında olup olmadığını kontrol eder

### Sertifika İzleme
- **SSL Sertifika Süresi**: SSL sertifikalarının kalan süresini izler
- **JWK Sertifika Süresi**: JWK sertifikalarının kalan süresini izler

### Log İzleme
- **Application Log Sayısı**: Belirli log tiplerinin sayısını izler ve eşik değerini kontrol eder

## Nasıl Çalışır?

1. **Alarm Tanımlama**: İzlenecek koşul ve tetiklenme tipi belirlenir
2. **Eşik Belirleme**: Alarmın tetikleneceği eşik değeri tanımlanır (gerekli tetiklenme tipleri için)
3. **Zamanlama**: Alarmın ne sıklıkla kontrol edileceği cron expression ile belirlenir
4. **Eylem Tanımlama**: Alarm tetiklendiğinde çalışacak eylemler (recipients) eklenir
5. **İzleme**: Belirlenen zamanlarda otomatik olarak koşullar kontrol edilir
6. **Tetikleme**: Eşik değeri aşıldığında veya koşul sağlandığında alarm tetiklenir
7. **Eylem Çalıştırma**: Tanımlanan eylemler otomatik olarak çalıştırılır
8. **Geçmiş Kaydetme**: Tüm alarm tetiklenme geçmişi kaydedilir

**Alarm oluşturma ayarlarını içeren görsele aşağıda yer verilmiştir:**

<img
  src="/images/yonetici/alert1.png"
  alt="Alarm Oluşturma Ayarları"
  width="1000"
  className="mr-auto"
/>

## Konfigürasyon Alanları

Alarm konfigürasyonu için kullanılan alanlar aşağıdaki tabloda görülmektedir.

| Alan | Açıklama |
|------|----------|
| Ad _(Name)_ | Oluşturulan alarma ait ad bilgisidir. |
| Açıklama _(Description)_ | Oluşturulan alarm ile ilgili yönetimi kolaylaştırmak için açıklama yazılabilir. |
| Tetiklenme Tipi _(Trigger Type)_ | Oluşturulan alarmın tetiklenme tipi seçilir. |
| Log Tipi _(Log Type)_ | Tetiklenme tipi olarak Application Logs Count seçilmişse bu alan aktifleşir. Alarm oluşturulmak istenen Log Tipi seçilir. |
| Eşik _(Threshold)_ | Oluşturulan alarm için bir eşik değeri belirlenir. |
| Bağlantı Tanımı _(Connection Definition)_ | Tetiklenme tipi olarak Elasticsearch tipleri seçilmişse bu alan aktifleşir. Oluşturulan alarmın çalışacağı bağlantı tanımı seçilir. |
| **Trigger Every** *(Trigger Every)* | İş Zamanlayıcı ile oluşturulan alarmın işletilme sıklığı belirlenir. Cron expression formatında zamanlama yapılır. |
| **Eylemler** _(Actions)_ | Oluşturulan alarm işletildiği zaman yapılacak olan eylemlerin seçilmesini sağlar. Birden fazla eylem tanımlanabilir. Eylemler hakkında detaylı bilgi almak için [bu sayfayı](/eylemler-konnektoerler-actions-connectors) ziyaret edebilirsiniz. |

### Tetiklenme Tipine Göre Özel Alanlar

Bazı tetiklenme tipleri için ek konfigürasyon alanları gereklidir:

#### Application Logs Count
- **Log Tipi** *(Log Type)*: İzlenecek application log tipi seçilir (örn: ERROR, WARN, INFO)

#### Elasticsearch Tipleri
- **Bağlantı Tanımı** *(Connection Definition)*: Alarmın çalışacağı Elasticsearch bağlantı tanımı seçilir

#### Eşik Değeri Birimleri
Farklı tetiklenme tipleri için eşik değeri farklı birimlerle ifade edilir:
- **CPU/Disk Yüzdesi**: Yüzde (%) olarak
- **SSL/JWK Süresi**: Gün olarak
- **Log Sayısı**: Kayıt sayısı olarak

### Eylem (Actions)

Alarm tetiklendiğinde otomatik olarak çalışacak eylemler tanımlanabilir. Aşağıdaki eylem türleri desteklenir:

- **Email**: Alarm durumunda email bildirimi gönderme
- **Webhook**: HTTP webhook çağrısı yapma
- **API Çağrısı**: Başka bir API endpoint'ine istek gönderme
- **Veritabanı İşlemi**: Veritabanına kayıt ekleme veya güncelleme
- **Kafka**: Kafka mesajı gönderme
- **RabbitMQ**: RabbitMQ mesajı gönderme
- **ActiveMQ**: ActiveMQ mesajı gönderme
- **SNMP**: SNMP trap gönderme
- **Syslog**: Syslog mesajı gönderme
- **Graylog**: Graylog'a log gönderme
- **FTP**: FTP üzerinden dosya transferi
- **Script**: Özel script çalıştırma
- **Linux Script**: Linux komutları çalıştırma
- **Bildirim**: Sistem bildirimi gönderme

Her eylem için ayrı ayrı konfigürasyon yapılabilir ve birden fazla eylem tanımlanabilir. Eylemler aktif/pasif duruma getirilebilir.

## Alarm Geçmişi ve İzleme

Alarm modülü, tüm alarm tetiklenme geçmişini detaylı olarak kaydeder ve görselleştirir.

**Alarm özetini içeren görsele aşağıda yer verilmiştir:**

<img
  src="/images/yonetici/alert2.png"
  alt="Alarm Özet Ekranı"
  width="1000"
  className="mr-auto"
/>

### Geçmiş Özellikleri

- **Tetiklenme Geçmişi**: Tüm alarm tetiklenme kayıtları ve sonuçları
- **Sonuç Durumları**: Eşik aşıldı, eşik aşılmadı, hata oluştu gibi durumlar
- **Tarih ve Saat**: Her tetiklenmenin tam zamanı
- **Detaylı Bilgiler**: Tetiklenme anındaki sistem durumu ve metrik değerleri
- **Filtreleme**: Tarih aralığına göre filtreleme ve arama
- **Toplu Silme**: Geçmiş kayıtlarını toplu olarak temizleme

### Sonuç Durumları

- **Eşik Aşıldı** *(Threshold Exceeded)*: Eşik değeri aşıldığında alarm tetiklenir
- **Eşik Aşılmadı** *(Threshold Not Exceeded)*: Eşik değeri normal sınırlar içinde
- **Hata Oluştu** *(An Error Occurred)*: Kontrol sırasında bir hata meydana geldi