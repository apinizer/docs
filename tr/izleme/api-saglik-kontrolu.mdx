---
title: "API Sağlık Kontrolü"
description: "API Sağlık Kontrolü, Apinizer API Gateway üzerinde çalışan API Proxy'lerin ve endpoint'lerin sürekli olarak izlenmesini sağlayan bir izleme modülüdür. Bu modül, belirlenen zaman aralıklarında API'lere otomatik olarak HTTP istekleri göndererek sistemin ayakta kalma durumunu kontrol eder ve beklenen sonuçların alınıp alınmadığını doğrular."
---

### Temel İşlevler

API Sağlık Kontrolü modülü aşağıdaki temel işlevleri yerine getirir:

- **Sürekli İzleme**: Belirlenen zaman aralıklarında (cron expression ile) otomatik olarak API endpoint'lerine istek gönderir
- **Sağlık Kontrolü**: API'nin ayakta olup olmadığını ve doğru yanıt verip vermediğini kontrol eder
- **Doğrulama (Assertion)**: Gönderilen isteğin sonucunu çeşitli kriterlere göre doğrular (HTTP status code, response body, XPath, JsonPath)
- **Yeniden Deneme**: Başarısız isteklerde otomatik yeniden deneme mekanizması sunar
- **Eylem Tetikleme**: Sorun tespit edildiğinde tanımlanan eylemleri (email, webhook, API çağrısı, veritabanı işlemi vb.) otomatik olarak tetikler
- **Sonuç İzleme**: Tüm izleme sonuçlarını kaydeder ve detaylı raporlama sunar
- **Performans Metrikleri**: Ortalama yanıt süresi, başarı oranı gibi metrikleri takip eder

### Kullanım Senaryoları

- API endpoint'lerinin sürekli erişilebilirliğini izleme
- Sistem kesintilerini erken tespit etme
- API performansını izleme ve raporlama
- Kritik servislerin sağlık durumunu takip etme
- Sorun durumlarında otomatik bildirim gönderme
- Test koleksiyonlarından hazır test senaryolarını monitör olarak kullanma

## Özellikler

API Sağlık Kontrolü modülü aşağıdaki özellikleri sunar:

<CardGroup cols={2}>
  <Card title="Zamanlanmış İzleme" icon="clock">
    Cron expression ile esnek zamanlama desteği. İstediğiniz zaman aralıklarında otomatik izleme.
  </Card>
  <Card title="Test Koleksiyonu Entegrasyonu" icon="folder">
    Test Konsolu'nda kayıtlı test senaryolarını doğrudan monitör olarak kullanabilme.
  </Card>
  <Card title="Çoklu Doğrulama" icon="check-circle">
    HTTP status code, response body, XPath ve JsonPath ile kapsamlı doğrulama.
  </Card>
  <Card title="Yeniden Deneme Mekanizması" icon="redo">
    Başarısız isteklerde otomatik yeniden deneme ve istekler arası bekleme süresi ayarlama.
  </Card>
  <Card title="Eylem Entegrasyonu" icon="bolt">
    Email, Webhook, API çağrısı, veritabanı işlemi ve daha fazlası ile otomatik eylem tetikleme.
  </Card>
  <Card title="Detaylı Raporlama" icon="chart-bar">
    İzleme sonuçları, performans metrikleri ve grafiksel görünümler.
  </Card>
</CardGroup>

## Nasıl Çalışır?

1. **Monitör Oluşturma**: API Sağlık Kontrolü için bir monitör tanımlanır ve izlenecek endpoint belirlenir
2. **Zamanlama**: Monitörün ne sıklıkla çalışacağı cron expression ile belirlenir
3. **İstek Gönderme**: Belirlenen zamanlarda otomatik olarak HTTP isteği gönderilir
4. **Doğrulama**: Gönderilen isteğin sonucu tanımlanan kriterlere göre doğrulanır
5. **Yeniden Deneme**: Başarısız durumlarda yeniden deneme mekanizması devreye girer
6. **Eylem Tetikleme**: Sorun tespit edildiğinde tanımlanan eylemler otomatik olarak çalıştırılır
7. **Sonuç Kaydetme**: Tüm izleme sonuçları kaydedilir ve raporlanır

**Çalışma Süresi Monitörü ayarlarını içeren görsele aşağıda yer verilmiştir:**

<img
  src="/images/yonetici/uptime1.png"
  alt="API Sağlık Kontrolü Ayarları"
  width="1000"
  className="mr-auto"
/>

## Konfigürasyon Alanları

Çalışma süresi monitörü konfigürasyonu için kullanılan alanlar aşağıdaki tabloda görülmektedir.

| Alan | Açıklama |
|------|----------|
| **Ad** *(Name)* | Oluşturulan monitörün adı bilgisidir. |
| **Açıklama** *(Description)* | Oluşturulan konfigürasyon ile ilgili yönetimi kolaylaştırmak için açıklama yazılabilir. |
| **Aktif** *(Enabled)* | Monitörü aktifleştirmek ya da askıya almak için kullanılır. |
| **Trigger Every** *(Trigger Every)* | İş Zamanlayıcı ile oluşturulan monitörün işletilme sıklığı belirlenir. |
| **Koleksiyondan Seçin** *(Select From Collection)* | Test ekranında oluşturulmuş bir testin metot, url ve diğer istek bilgilerini ekrana doldurmak için buradan seçim yapılabilir |
| **Metot** *(Method)* | Test edilecek URL'nin Http Metodu Tipi bilgisi. |
| **URL** *(URL)* | İstenilen uç noktanın URL'i girilebilir ya da mevcut proxy'ler ya da kayıtlı test verisi içerisinden seçilebilir. |
| **Parametreler** *(Parameters)* | Url'ye eklenmek istenen parametre Url'ye eklenmek yerine bu alandan girilebilir. |
| **Başlıklar** *(Headers)* | İsteğe eklenmek istenen Başlık Adı ve Başlık Değeri girilerek istek için başlık eklenebilir. |
| **Gövde** *(Body)* | İstek için gövde girilebilir. |

### Teyit (Assertions)

| Alan | Açıklama |
|------|----------|
| **Zamanaşımı'nı Teyit İçin Kullan** *(Use Timeout For Assertion)* | Ayarlar sekmesindeki zamanaşımı değerini teyit için de kullanmak için bu seçenek seçilir. |
| **Sonuç Durum Kodu** *(Assert Result Status Code)* | Aktifleştirildiğinde teyit etmek için sonuç durum kodu girilmesi gerekir |
| **Beklenen Durum Kodu** *(Expected Result Status Code)* | Teyit için kullanılır. Varsayılan Değeri: 200. |
| **Sonuç Gövdesi** *(Assert Result Body)* | Sonuç gövdesi aktifleştirildiğinde teyit etmek için beklenen sonuç gövdesi girilir. |
| **XPath Sonucu** *(Assert Result XPath)* | XPath Sonucu aktifleştirildiğinde teyit etmek için bir XPath ve beklenen XPath sonucu girilir. |
| **JsonPath Sonucu** *(Assert Result JsonPath)* | JsonPath Sonucu aktifleştirildiğinde teyit etmek için bir JsonPath ve beklenen JsonPath sonucu girilir. |

### Ayarlar (Settings)

| Alan | Açıklama |
|------|----------|
| **Zamanaşımı** *(Timeout)* | Beklenen zaman aşımı saniye olarak girilir. Varsayılan değeri: 30 saniye. |
| **Sertifikayı Aktive Et** *(Enable Certificate)* | Eğer istek gönderilirken bir sertifika kullanılmak istenirse seçilebilir. |

### Yeniden Deneme ve Bekleme Ayarları

| Alan | Açıklama |
|------|----------|
| **Başarısızsa Yeniden Dene** *(Retry On Fail)* - **Yeniden Deneme Sayısı** *(Retry Count)* | Yeniden deneme sayısı girilir. Varsayılan değer: 3. |
| **İstekler Arası Bekleme** *(Delay Between Requests)* - **Bekleme** *(Delay)* | İstekler arasındaki bekleme süresi saniye olarak girilir. Varsayılan değer: 3. |

### Eylem (Actions)

Monitör çalıştığında ve sorun tespit edildiğinde otomatik olarak tetiklenecek eylemler tanımlanabilir. Aşağıdaki eylem türleri desteklenir:

- **Email**: Sorun durumunda email bildirimi gönderme
- **Webhook**: HTTP webhook çağrısı yapma
- **API Çağrısı**: Başka bir API endpoint'ine istek gönderme
- **Veritabanı İşlemi**: Veritabanına kayıt ekleme veya güncelleme
- **Kafka**: Kafka mesajı gönderme
- **RabbitMQ**: RabbitMQ mesajı gönderme
- **ActiveMQ**: ActiveMQ mesajı gönderme
- **SNMP**: SNMP trap gönderme
- **Syslog**: Syslog mesajı gönderme
- **Graylog**: Graylog'a log gönderme
- **FTP**: FTP üzerinden dosya transferi
- **Script**: Özel script çalıştırma
- **Linux Script**: Linux komutları çalıştırma
- **Bildirim**: Sistem bildirimi gönderme

Her eylem için ayrı ayrı konfigürasyon yapılabilir ve birden fazla eylem tanımlanabilir. Eylemler aktif/pasif duruma getirilebilir.

## Monitör Sonuçları ve İzleme

API Sağlık Kontrolü modülü, her izleme işleminin sonuçlarını detaylı olarak kaydeder ve görselleştirir.

### Sonuç Görüntüleme

**Çalışma Süresi Monitörü durum özetini içeren görsele aşağıda yer verilmiştir:**

<img
  src="/images/yonetici/uptime2.png"
  alt="API Sağlık Kontrolü Sonuç Ekranı"
  width="1000"
  className="mr-auto"
/>

### İzlenen Metrikler

- **Başarı Oranı**: Başarılı izleme işlemlerinin toplam işlemlere oranı
- **Ortalama Yanıt Süresi**: API'nin ortalama yanıt süresi (milisaniye)
- **HTTP Status Code Dağılımı**: Farklı HTTP status code'ların kullanım oranları
- **Son Durum**: En son izleme işleminin başarılı/başarısız durumu
- **İstek Detayları**: Her izleme işleminin detaylı bilgileri (gönderilen istek, alınan yanıt, doğrulama sonuçları)

### Sonuç Filtreleme ve Arama

- Tarih aralığına göre filtreleme
- Başarılı/başarısız sonuçlara göre filtreleme
- HTTP status code'a göre filtreleme
- Detaylı sonuç görüntüleme (JSON formatında)

### Grafiksel Görünümler

- Yanıt süresi grafikleri
- Başarı oranı trendleri
- HTTP status code dağılım grafikleri
- Zaman bazlı performans analizi

Görselde monitörün çalışma kayıtları, sonuçları ve performans metrikleri detaylı bir şekilde yer almaktadır.