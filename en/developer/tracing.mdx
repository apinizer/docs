---
title: "Tracing"
description: 'Starting a Trace, Reading Trace Output, Policy-by-policy Execution, Request/Response Inspection, Performance Analysis'
---

Tracing is a debug tool that allows you to step-by-step track how requests are processed in the API Proxy. With tracing, you can see which policies a request passed through, how long each policy took, and what changes it made.

## Overview

The Tracing tool allows you to monitor the message processing flow of the API Proxy in real-time. This tool is particularly used for:

* Understanding how policies work
* Detecting performance issues
* Debugging
* Inspecting request/response flow

<CardGroup cols={2}>
  <Card title="Starting Trace" icon="play">
    Starting a new trace session
  </Card>
  <Card title="Trace Output" icon="eye">
    Viewing trace results
  </Card>
  <Card title="Policy Tracking" icon="list">
    Tracking execution of each policy
  </Card>
  <Card title="Performance Analysis" icon="chart-line">
    Analyzing performance metrics
  </Card>
</CardGroup>

## Starting a Trace

### Creating a Trace Session

To start a trace session:

1. Go to the API Proxy detail page
2. Click on the **Tracing** tab
3. Click the **Start Trace** button
4. Configure trace settings
5. Click the **Start** button

### Trace Settings

When starting a trace, you can configure the following settings:

* **Trace Duration**: Trace duration (default: 5 minutes)
* **Max Traces**: Maximum number of traces
* **Filter**: Trace filter (path, method, header, etc.)
* **Capture Request/Response**: Capture request/response

### Trace Filters

To filter traces:

* **Path Filter**: Trace for specific paths
* **Method Filter**: Trace for specific methods
* **Header Filter**: Trace for requests with specific headers
* **IP Filter**: Trace for requests from specific IP addresses

## Trace Output

After starting a trace, requests arriving at the API Proxy are automatically tracked and trace output is displayed.

### Trace List

The trace list contains the following information:

* **Timestamp**: Time of the request
* **Method**: HTTP method
* **Path**: Request path
* **Status**: Response status code
* **Duration**: Total duration
* **Policies**: Number of policies executed

### Trace Details

Click on a trace to view detailed information:

* **Request Details**: Request details
* **Response Details**: Response details
* **Policy Execution**: Policy execution details
* **Timing Information**: Timing information

## Policy-by-Policy Execution

Tracing shows how each policy works.

### Pre-flow Policies

Execution of pre-flow policies:

* **Policy Name**: Policy name
* **Execution Time**: Execution time
* **Status**: Success/Failure
* **Changes**: Changes made

### Conditional Policies

Execution of conditional policies:

* **Condition**: Condition expression
* **Result**: Condition result (true/false)
* **Executed Policies**: Policies executed
* **Skipped Policies**: Policies skipped

### Route Step

Execution of route step:

* **Selected Target**: Selected upstream target
* **Load Balancing**: Load balancing decision
* **Connection Time**: Connection time
* **Backend Response Time**: Backend response time

### Post-flow Policies

Execution of post-flow policies:

* **Policy Name**: Policy name
* **Execution Time**: Execution time
* **Status**: Success/Failure
* **Changes**: Changes made

### Fault Handler

Execution of fault handler (in error situations):

* **Error Type**: Error type
* **Error Message**: Error message
* **Handler Policies**: Handler policies executed
* **Final Response**: Final response

## Request/Response Inspection

Tracing allows you to inspect request and response content.

### Request Inspection

Request details:

* **Headers**: Request headers
* **Query Parameters**: Query parameters
* **Path Parameters**: Path parameters
* **Body**: Request body
* **Raw Request**: Raw request

### Response Inspection

Response details:

* **Status Code**: Status code
* **Headers**: Response headers
* **Body**: Response body
* **Raw Response**: Raw response

### Request/Response Comparison

You can compare request and response:

* **Before/After**: Before/after policies
* **Transformation**: Transformation details
* **Header Changes**: Header changes
* **Body Changes**: Body changes

## Performance Analysis

Tracing provides detailed metrics for performance analysis.

### Timing Metrics

Timing metrics:

* **Total Duration**: Total duration
* **Pre-flow Duration**: Pre-flow duration
* **Route Duration**: Route duration
* **Backend Duration**: Backend duration
* **Post-flow Duration**: Post-flow duration

### Policy Performance

Policy performance metrics:

* **Policy Execution Time**: Policy execution time
* **Slowest Policies**: Slowest policies
* **Policy Count**: Number of policies
* **Average Policy Time**: Average policy time

### Backend Performance

Backend performance metrics:

* **Connection Time**: Connection time
* **Response Time**: Response time
* **Total Backend Time**: Total backend time
* **Backend Status**: Backend status

## Trace Views

Tracing offers different views:

### Timeline View

Timeline view:

* Order of policy execution
* Duration of each policy
* Total duration distribution

### Tree View

Tree view:

* Hierarchical policy structure
* Conditional branches
* Detailed policy information

### Table View

Table view:

* Policy list
* Performance metrics
* Status information

## Usage Scenarios

### Scenario 1: Performance Issue Detection

When you notice an API Proxy is running slowly:

1. Start a trace
2. Filter slow requests
3. Identify slowest policies
4. Optimize performance

### Scenario 2: Debugging

To understand why a request failed:

1. Start a trace
2. Filter failed requests
3. Find the policy where error occurred
4. Analyze the error cause

### Scenario 3: Transformation Validation

To check if a transformation is working correctly:

1. Start a trace
2. Monitor the transformation policy
3. Compare before/after
4. Validate the result

## Best Practices

### Trace Usage

* **Development**: Use frequently in development environment
* **Production**: Use carefully in production (performance impact)
* **Filtering**: Filter unnecessary traces
* **Duration**: Limit trace duration

### Performance Analysis

* **Baseline**: Create performance baseline
* **Monitoring**: Monitor regularly
* **Optimization**: Optimize slow policies
* **Documentation**: Document results

### Debugging

* **Reproducible**: Create reproducible scenarios
* **Isolation**: Isolate issues
* **Comparison**: Compare before/after
* **Documentation**: Document debugging process

## Next Steps

<CardGroup cols={2}>
  <Card title="Test Console" icon="terminal" href="/en/developer/test-console">
    API test console
  </Card>
  <Card title="API Traffic Tab" icon="chart-line" href="/en/developer/api-traffic-tab">
    Real-time traffic monitoring
  </Card>
  <Card title="Policy Management" icon="shield" href="/en/developer/policy-management">
    Policy management
  </Card>
  <Card title="Error Analysis" icon="exclamation-triangle" href="/en/developer/error-analysis">
    Error analysis
  </Card>
</CardGroup>
