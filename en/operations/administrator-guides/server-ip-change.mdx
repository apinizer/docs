---
title: "Actions to Take When Server IP Address Changes"
description: "When Apinizer server IP address changes, update Kubernetes Master and MongoDB configurations, regenerate certificates, and update replica set configuration."
---

## Actions for Kubernetes Master:

The following files need IP addresses changed:

```bash
/etc/kubernetes/admin.conf
/etc/kubernetes/controller-manager.conf 
/etc/kubernetes/kubelet.conf
/etc/kubernetes/scheduler.conf
/etc/kubernetes/manifests/etcd.yaml
/etc/kubernetes/manifests/kube-apiserver.yaml
```

Existing certificates are deleted:

```bash
cd /etc/kubernetes/pki
rm -rf apiserver.* apiserver-kubelet-client.*
```

New certificates are created (this stage may produce errors but they can be ignored):

```bash
sudo kubeadm init phase certs apiserver-kubelet-client
sudo kubeadm init phase certs apiserver

sudo systemctl restart kubelet
```

The current config file is moved to the user's home directory for access:

```bash
sudo cp -i /etc/kubernetes/admin.conf $HOME/.kube/config
sudo chown $(id -u):$(id -g) $HOME/.kube/config
```

## Actions for MongoDB:

Connect to MongoDB:

```bash
mongosh mongodb://<YOUR_NEW_MONGO_IP_ADDRESS>:25080 --authenticationDatabase "admin" -u "apinizer" -p
```

New IP settings are applied with the "force" option:

```javascript
cfg = rs.conf()
cfg.members[0].host = "<YOUR_NEW_MONGO_IP_ADDRESS>:25080"
rs.reconfig(cfg, {force:true})
```

