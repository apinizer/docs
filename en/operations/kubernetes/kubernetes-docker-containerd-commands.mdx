---
title: "Kubernetes Docker Containerd Commands"
description: "Provides frequently used commands for Kubernetes, Docker, and Containerd. Offers practical command examples for daily operational tasks such as pod management, log viewing, deployment operations, and image management."
---

## Kubernetes Commands

### Kubelet Status Check

**Checking kubelet service status:**

```bash
systemctl status kubelet
```

**Viewing kubelet errors from Linux system:**

```bash
journalctl -xeu kubelet
```

**Viewing kubelet errors from Kubernetes:**

```bash
kubectl get events --all-namespaces --sort-by='.metadata.creationTimestamp'
```

### Pod Log and Status Check

**Viewing pod logs:**

```bash
kubectl logs <POD_NAME> -n <NAMESPACE>
```

**Viewing previous pod logs (if pod was restarted):**

```bash
kubectl logs --previous <POD_NAME> -n apinizer
```

**Viewing pod details:**

```bash
kubectl describe pod <POD_NAME> -n apinizer
```

### Pod Operations

**Entering pod:**

```bash
kubectl exec -it <POD_NAME> -n prod /bin/bash
```

**Making request without entering pod:**

```bash
kubectl exec -it <POD_NAME> -n prod -- curl x.y.gov.tr
```

### Deployment Operations

**Restarting deployment:**

```bash
kubectl rollout restart deployment manager -n apinizer
```

**Setting deployment replica count:**

```bash
kubectl scale deploy cache -n prod --replicas=0
```

**Deleting deployment:**

```bash
kubectl delete -f apinizer-deployment.yaml
```

**Force deleting pod in Terminating state:**

```bash
kubectl delete pod <POD_NAME> -n apinizer --grace-period=0 --force
```

**Version update:**

<Info>
  After pulling images to servers, the following commands are used. These commands work like the "vi" editor, use ":wq" to save and exit.
</Info>

```bash
kubectl edit deployment manager -n apinizer
kubectl edit deployment cache -n prod
kubectl edit deployment worker -n prod
```

**Cleaning evicted pods:**

```bash
kubectl get pod -n prod | grep Evicted | awk '{print $1}' | xargs kubectl delete pod -n prod
```

### Node Affinity Configuration

**Preventing pod from running on specific nodes:**

```yaml
affinity:
  nodeAffinity:
    requiredDuringSchedulingIgnoredDuringExecution:
      nodeSelectorTerms:
        - matchExpressions:
            - key: kubernetes.io/hostname
              operator: NotIn
              values:
                - kuberdemo55
                - kuberdemo56
```

## Docker Commands

### Image Operations

**Listing images:**

```bash
docker images
```

**Listing all containers:**

```bash
docker ps -a
```

**Image pull operation:**

```bash
sudo docker pull apinizercloud/manager:2024.xx.0
```

**Image export:**

```bash
sudo docker save apinizercloud/manager:2024.xx.0 > manager_2024.xx.0.tar
```

**Image import:**

```bash
sudo docker load < manager_2024.xx.0.tar
```

## Containerd Commands

### Namespace Operations

**Listing namespaces:**

```bash
sudo ctr namespaces list
```

**Listing containers by namespace:**

```bash
sudo ctr --namespace k8s.io containers ls
```

### Image Operations

**Listing Apinizer images:**

```bash
sudo ctr -n k8s.io images list | grep apinizer
```

**Image pull operation:**

```bash
sudo ctr --namespace k8s.io images pull docker.io/apinizercloud/manager:2024.05.0
```

**Image export:**

```bash
sudo ctr -n k8s.io images export /tmp/manager:2024.05.0.tar docker.io/apinizercloud/manager:2024.05.0
```

**Image import:**

```bash
sudo ctr --namespace k8s.io images import /tmp/manager:2024.05.0.tar
```

