---
title: "API Portal Setup"
description: "Provides installation and configuration of Apinizer API Portal. The portal running on Kubernetes platform interacts with APIs provided by API Manager to enable developers to access API documentation, test APIs, subscribe, and manage API Keys."
---

<img
  src="/images/portal/sorumlubirim.png"
  alt="API Portal"
  width="800"
  height="600"
  className="mr-auto"
/>

## What is API Portal?

API Portal is a platform that enables developers and API consumers to:

- Access API documentation
- Test APIs
- Subscribe to APIs
- Manage API Keys
- Submit support requests

<Info>
API Developer Portal, like other Apinizer products, runs on Kubernetes Platform. No database is used for portal operations; instead, it directly interacts with APIs provided by API Manager.
</Info>
## Pre-Installation Steps

<Warning>
Before starting installation, make sure the following requirements are met:
</Warning>

- API Manager must be installed. For API Manager Installation, review the [Apinizer Installation and Settings](/en/setup/apinizer/apinizer) document.
- API Developer Portal must be included in your license key.

## Installation Steps

API Portal Installation is done in two ways.

* If Kubernetes management is done **through Apinizer**, you can install API Developer Portal through API Manager.
* If Kubernetes management is **not done through Apinizer**, manual installation can be done on Kubernetes and then connection can be established with API Manager.

### Creating Token for Personal API Access

Token information can be obtained by creating a new token or using an existing token on the My Profile page. Staff tokens usually start with the `apnz_` prefix.

<Info>
  For token creation, you can go to the My Profile page in API Manager and create a new token.
</Info>

### API Developer Portal Installation

#### If API Developer Portal Installation Will Be Done Through API Manager

For API Developer Portal installation through API Manager, the Kubernetes Management section in the General Settings menu must be active.

<Warning>
  If Kubernetes management is done through Apinizer, the "Kubernetes Management" option must be active on the General Settings page.
</Warning>

In API Manager, go to **Management → Server Management → Kubernetes Resources** page. Enable API Portal from the Deployment & Pods tab. In the opened dialog, define the required fields according to your organization.

| Field | Description |
|------|----------|
| **Apinizer Portal Management API URL** | The Management API address run by API Manager required for API Developer Portal to consume Apinizer Management APIs. Example address: `http://<API_MANAGER_ACCESS_URL>:<PORT>/` |
| **Apinizer Portal Management API Key/Token** | Token information required for API Developer Portal to consume Apinizer Management APIs. |
| **Count** | Gateway engine count, regulates the replicaSet setting in Kubernetes Cluster. |
| **Service Port** | Gateway engine access port, regulates the NodePort setting of the service object in Kubernetes Cluster. |
| **Node List** | Sets which Kubernetes Worker servers the pods will run on. Regulates the NodeAffinity setting in Kubernetes. |
| **CPU** | Information about the maximum CPU core count the pod will use. |
| **Memory** | Maximum memory value the pod will use. |
| **Memory Unit** | Unit of the value required for memory is selected; MB, GB. |
| **Additional Variables** | Default and optional variables and their values to be run inside the pod are defined. Default variables cannot be deleted, only their values can be edited. |
| **Host Aliases** | IP addresses found in the network can sometimes be placed behind host names. If these are not defined in nameserver or host file, or if Apinizer cannot resolve them somehow, **Host Alias** definition must be made for worker pods to resolve these names. |

<Info>
  **Additional Variables**

  When configuring the **Java Options** setting in the Additional Variables field, the following warning should be considered:

  * When **-Xmx** and **-Xms** parameters are used, automatic heap sizing is disabled.
  * Since Apinizer runs inside a container, it sets **JVM Heap** values to use **75.0%** of the memory given to the container.
  * **UseContainerSupport** is active by default.
  * Old flags **-XX:MinRAMFraction** and **-XX:MaxRAMFraction** are now deprecated. Instead, a new **-XX:MaxRAMPercentage** flag that takes a value between 0.0 and 100.0 and defaults to 75.0 is used. Therefore, if there is a 1 GB memory limit, JVM heap is limited to approximately 750 MB by default.

  For detailed information, [click here](https://www.eclipse.org/openj9/docs/xxinitialrampercentage/).
</Info>

#### If API Developer Portal Installation Will Not Be Done Through API Manager

The following steps are followed for manual installation of API Developer Portal.

<Warning>
  **Important:** A Kubernetes **Secret** containing API Manager API address and API Key/Token information must be created. The following information should be filled according to your organization.
</Warning>

* **apinizerManagementApiBaseUrl**: The Management API address running on API Manager required for API Developer Portal to consume Apinizer Management APIs. An example address: `http://apimanager-ui-ip-address:port`
* **apiKey**: Token information required for API Developer Portal to consume Apinizer Management APIs.

```bash
API_MANAGER_URL='<APINIZER_MANAGEMENT_API_BASE_URL>'
API_MANAGER_APIKEY='<API_KEY>'
echo -n ${API_MANAGER_URL} | base64  # We will put this output in place of <ENCODED_URL> variable in the next step
echo -n ${API_MANAGER_APIKEY} | base64  # We will put this output in place of <ENCODED_API_KEY> variable in the next step
vi api-portal-secret.yaml
```

```yaml
apiVersion: v1
kind: Namespace
metadata:
  name: apinizer-portal
---
apiVersion: v1
kind: Secret
metadata:
  name: apinizer-portal-secret
  namespace: apinizer-portal
type: Opaque
data:
  apinizerManagementApiBaseUrl: <ENCODED_URL>
  apiKey: <ENCODED_API_KEY>
```

```bash
kubectl apply -f api-portal-secret.yaml
```

```bash
vi apinizer-portal-deployment.yaml
```

```yaml
---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: apinizer-portal
  namespace: apinizer-portal
spec:
  replicas: 1
  selector:
    matchLabels:
      app: apinizer-portal
      version: v1
  template:
    metadata:
      labels:
        app: apinizer-portal
        version: v1
    spec:
      containers:
        - name: apinizer-portal-app
          image: apinizercloud/apiportal:<APINIZER_VERSION>
          env:
            - name: SPRING_PROFILES_ACTIVE
              value: prod
            - name: JAVA_OPTS
              value: -XX:MaxRAMPercentage=75.0
            - name: API_PORTAL_MANAGEMENT_API_BASE_URL
              valueFrom:
                secretKeyRef:
                  key: apinizerManagementApiBaseUrl
                  name: apinizer-portal-secret
            - name: API_PORTAL_MANAGEMENT_API_KEY
              valueFrom:
                secretKeyRef:
                  key: apiKey
                  name: apinizer-portal-secret
          livenessProbe:
            failureThreshold: 13
            httpGet:
              path: /apinizer/management/health
              port: 8080
              scheme: HTTP
            initialDelaySeconds: 60
            periodSeconds: 10
            successThreshold: 1
            timeoutSeconds: 30
          ports:
            - containerPort: 8080
              protocol: TCP
          readinessProbe:
            failureThreshold: 13
            httpGet:
              path: /apinizer/management/health
              port: 8080
              scheme: HTTP
            initialDelaySeconds: 30
            periodSeconds: 10
            successThreshold: 1
            timeoutSeconds: 30
          resources:
            limits:
              cpu: "1"
              memory: 1Gi
          startupProbe:
            failureThreshold: 13
            httpGet:
              path: /apinizer/management/health
              port: 8080
              scheme: HTTP
            initialDelaySeconds: 60
            periodSeconds: 10
            successThreshold: 1
            timeoutSeconds: 30
---
apiVersion: v1
kind: Service
metadata:
  name: apinizer-portal-service
  namespace: apinizer-portal
  labels:
    app: apinizer-portal
spec:
  selector:
    app: apinizer-portal
  type: NodePort
  ports:
    - name: http
      port: 8080
      nodePort: <API_DEVELOPER_PORTAL_PORT>
```

```bash
kubectl apply -f apinizer-portal-deployment.yaml
```

<Warning>
  **Important**

  Up to this stage, API Developer Portal interface installation may have been done, but for APIs to be displayed on API Developer Portal, credentials to be created, and other capabilities to be used, integration with API Manager must be done.
</Warning>

### API Developer Portal Integration with API Manager

In API Manager, go to **Portal → Settings → Portal** page and make definitions according to your organization.

[Click here for detailed information](/en/api-portal/overview).

## API Portal Settings

To configure portal settings, you can visit the [API Portal Settings](/en/api-portal/api-portal-settings) page.

## Starting API Developer Portal with SSL

API Developer Portal can be opened for access with SSL in desired situations.

[Click here for detailed information](/en/operations/administrator-guides/api-developer-portal-ssl).

After the above steps are completed and you have ensured that the Pods belonging to API Portal on Kubernetes are in ready state, Portal Interface can be accessed from the following address:

```
http://<KUBERNETES_WORKER_IP>:<API_PORTAL_PORT>
```

## Next Steps

<CardGroup cols={2}>
  <Card title="API Portal Overview" icon="window-maximize" href="/en/api-portal/overview">
    Get detailed information about API Portal
  </Card>
  <Card title="API Integration Setup" icon="plug" href="/en/setup/apinizer/api-integration">
    Learn API Integration installation
  </Card>
  <Card title="Multi-Region Setup" icon="globe" href="/en/setup/apinizer/multi-region">
    Learn Multi-Region installation
  </Card>
  <Card title="Apinizer Installation" icon="server" href="/en/setup/apinizer/apinizer">
    Learn Apinizer installation
  </Card>
</CardGroup>


