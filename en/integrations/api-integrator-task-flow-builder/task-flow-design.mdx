---
title: "Task Flow"
description: "Enables running multiple tasks integrated as a flow. Many tasks can be integrated to accomplish a job and run as a flow. In the flow, tasks that run sequentially are integrated through their own APIs. Each task in the flow can use the output of the task that ran before it and can run the task once or multiple times. Task flows can be triggered manually, automatically run with a scheduler, or triggered via HTTP endpoint."
---

## Task Flow Features

<CardGroup cols={2}>
  <Card title="Task Output Usage" icon="arrow-right">
    Can use the output of the task that ran before it.
  </Card>
  
  <Card title="Multiple Execution" icon="repeat">
    Can run the task once or multiple times.
  </Card>
</CardGroup>

---

## Creating Task Flow

<Steps>
    <Step title="Go to Task Flows Page">
        Go to the **Task Flows** page within **API Integration** under the **Development** tab from the navigation bar on the left side of your screen.


            <img src="/images/develop/api-integrator/task-flow1.png" alt="Task Flows List" width="800" />
        
    </Step>

    <Step title="Create New Task Flow">
        Create a new Task Flow by clicking the **Create** button in the top right corner.
    </Step>

    <Step title="Name and Save Task Flow">
        Create the task flow by naming it and clicking the **Save and Next** button.

        <img src="/images/develop/api-integrator/task-flow2.png" alt="Task Flow Creation Form" width="800" />
    </Step>
</Steps>

### Creation Form Fields

<CardGroup cols={2}>
  <Card title="Name" icon="tag">
    **Field:** Name
    
    **Type:** string
    
    **Required:** Yes
    
    Unique name that identifies the task flow
  </Card>
  
  <Card title="Description" icon="file-lines">
    **Field:** Description
    
    **Type:** string
    
    **Required:** No
    
    Information text about the content of the task flow (optional)
  </Card>
</CardGroup>

---

## Task Flow Configurations

<img src="/images/develop/api-integrator/task-flow3.png" alt="Task Flow Configuration Screen" width="800" />

### Configuration Fields

<AccordionGroup>
  <Accordion title="Basic Information">
    <CardGroup cols={2}>
      <Card title="Name " icon="tag">
        The name of the task flow as it appears in the list. It is required and must be unique within the project.
      </Card>
      
      <Card title="Description " icon="file-lines">
        Description related to the task flow.
      </Card>
    </CardGroup>
  </Accordion>
  
  <Accordion title="Status and Monitoring">
    <CardGroup cols={2}>
      <Card title="Status" icon="toggle-on">
        Indicates whether the task flow is active/passive.
      </Card>
      
      <Card title="Trace Status" icon="bug">
        Indicates whether the Trace (Debugging) feature is on/off.
      </Card>
    </CardGroup>
  </Accordion>
  
  <Accordion title="Triggering and Tasks">
    <CardGroup cols={2}>
      <Card title="Trigger Every" icon="clock">
        Indicates how often the task flow will be automatically triggered.
      </Card>
      
      <Card title="Tasks" icon="list">
        Tasks defined in the content of the task flow are shown on the graph. Addition, deletion, and configuration operations are performed from here.
      </Card>
      
      <Card title="Endpoint" icon="link">
        Option to trigger the task flow via its REST API endpoint.
      </Card>
      
      <Card title="Actions" icon="gear">
        Indicates actions to be performed if an error occurs during the execution of the defined task flow.
      </Card>
    </CardGroup>
  </Accordion>
</AccordionGroup>

---

## Trigger Frequency Configuration (Trigger Every)

You can define a scheduler to automatically run the task flow at specific times.

<Steps>
    <Step title="Open Trigger Configuration Window">
        Configuration regarding how often the created task flow should be triggered is performed through the window that opens when the **Change** button under **Trigger Every** is pressed.

        <img src="/images/develop/api-integrator/task-flow4.png" alt="Trigger Configuration" width="800" />
    </Step>

    <Step title="Fill Value and Unit Fields">
        Fill the **Value** and **Unit** fields to define the scheduler configuration.
        <img src="/images/develop/api-integrator/task-flow5.png" alt="Task Flow Definition Settings" width="800" />

        Available units:
        - **Minute** - Minute
        - **Hour** - Hour
        - **Custom** - Custom Quartz Cron Expression
    </Step>
</Steps>

<Tip>
    Scheduling can be done with the desired Quartz Cron Expression by selecting the **Custom** option in the scheduler definition.
</Tip>

---

## Task Flow Definition Settings

Task flow definition settings are performed through the window that opens via the **Edit** button in the top right corner.

<img src="/images/develop/api-integrator/task-flow6.png" alt="Task Flow Definition Settings" width="800" />

<img src="/images/develop/api-integrator/task-flow7.png" alt="Task Flow Definition Settings Detail" width="800" />

<CardGroup cols={2}>
  <Card title="Name " icon="tag">
    The name of the task flow as it appears in the list. It is required and must be unique within the project.
  </Card>
  
  <Card title="Description " icon="file-lines">
    Description related to the task flow.
  </Card>
  
  <Card title="Status" icon="toggle-on">
    Active/passive status of the task flow.
  </Card>
  
  <Card title="Trace Status" icon="bug">
    Status of monitoring task flow steps. When active, data belonging to running steps is shown in logs, while when passive (suspend), detailed logging is not performed.
  </Card>
</CardGroup>

---

## Task Settings

### What is a Task?

<Info>
    In the API Integration module, each integration operation with a system or application is called a **task**. Since Apinizer adopts doing integrations as much as possible with API calls, it has adopted defining a task/connection type for each endpoint that can be called via API.
</Info>

### Task Types

<CardGroup cols={3}>
    <Card title="Email Sending" icon="envelope" href="/en/integrations/connectors/email-connector">
        Used for email sending
    </Card>

    <Card title="API Call" icon="globe" href="/en/integrations/connectors/api-call-connector">
        Used to send requests to external APIs
    </Card>

    <Card title="Database Connector" icon="database" href="/en/integrations/connectors/database-connector">
        Used for database operations
    </Card>

    <Card title="Linux Script Execution" icon="terminal" href="/en/integrations/connectors/linux-script-connector">
        Used to run Linux commands
    </Card>

    <Card title="Script (JS/Groovy)" icon="code" href="/en/integrations/connectors/script-connector">
        Used to run JavaScript or Groovy scripts
    </Card>

    <Card title="Notification" icon="bell" href="/en/integrations/connectors/notification-connector">
        Used to send notifications
    </Card>

    <Card title="SNMP" icon="network-wired" href="/en/integrations/connectors/snmp-connector">
        Used for SNMP protocol operations
    </Card>
</CardGroup>

---

## Task Definition

<Steps>
    <Step title="Click Task Addition Button">
        Sequentially running operations (transactions) are managed through the definition interface. To define a new task, press the **+** button on the schema under **Tasks**.

        <img src="/images/develop/api-integrator/task-flow8.png" alt="Task Addition" width="800" />
    </Step>

    <Step title="Select Task Type">

        Task selection screen:

        <img src="/images/develop/api-integrator/task-flow9.png" alt="Task Selection" width="800" />
        Continue with task definition by selecting the task that is desired to be added.
        <img src="/images/develop/api-integrator/task-flow10.png" alt="Task Selection" width="800" />
    </Step>

    <Step title="Configure Task Details">
        <Info>
            For example purposes, explanation will be made through the API Call example in this document.
        </Info>
        You can see the window screen where the working steps of the task are defined in the screenshot below.

        <img src="/images/develop/api-integrator/task-flow11.png" alt="API Call Configuration" width="800" />
        <img src="/images/develop/api-integrator/task-flow12.png" alt="API Call Configuration" width="800" />
    </Step>
</Steps>

---

## Data Transfer Between Tasks

<Info>
    In tasks within the task flow, the output of the previous task can be used as input for subsequent tasks. How the output of Api Call will be used as input for the Script policy added after it is shown in the screenshots below.
</Info>

<img src="/images/develop/api-integrator/task-flow13.png" alt="Data Transfer" width="800" />

### Output Key Usage

You can use the output of the API Call task as input for the Script policy added after it:

<img src="/images/develop/api-integrator/task-flow14.png" alt="Output Key Usage" width="800" />

You can access the output of a previous API Call task within the Script task through the variable specified when defining the API Call task from within the menu button.

<img src="/images/develop/api-integrator/task-flow15.png" alt="Script Variable Access" width="800" />

<Warning>
    To use the output of a previous task within the current task, the variable must be used in double curly braces with a hash (#) sign at the end.

    **Example:** `{{myOutputKey#}}`
</Warning>

As seen in the screenshot below, the needed data has been retrieved from the output variable of the Api Call task by performing filtering operations within JsonPath/XPath Syntax. This retrieved data can be used as the LOOP_VARIABLE variable within the Script task.

<img src="/images/develop/api-integrator/task-flow16.png" alt="Variable Usage" width="800" />

<Warning>
    The # sign at the end of variables represents JsonPath/XPath. It corresponds to the $ operator in JsonPath. This is a Syntax specific to Apinizer. You can review the Common Fields in Tasks table below for detailed usage of this Syntax.
</Warning>

The Script task's ability to transfer data to the task to be defined in the next step is performed through the resultMap object and the variable value in the form interface where the Script task is defined.

<img src="/images/develop/api-integrator/task-flow17.png" alt="Variable Usage" width="800" />

After the tasks that the task flow will perform are defined, the task is manually triggered once from the **Execute** button. To access the executed state and outputs of the task, click the **Details** button to access the execution log records of the task flow.

---

## Viewing Task Flow Details

<Steps>
    <Step title="Open Details Menu">
        Logs can be viewed by clicking the menu button in the rightmost column of the record whose details are desired to be viewed from the task flow list and selecting **Details**.

        <img src="/images/develop/api-integrator/task-flow18.png" alt="Details Menu" width="800" />
    </Step>

    <Step title="Examine Log Records">
        The screen containing the log details of the Task Flow is reached.

        <img src="/images/develop/api-integrator/task-flow19.png" alt="Log Details" width="800" />
    </Step>

    <Step title="View Execution Details">
        Press the three-dot button next to the relevant execution moment log record to examine the execution details of the task flow.

        <img src="/images/develop/api-integrator/task-flow20.png" alt="Execution Details" width="800" />
    </Step>

    <Step title="Task Log Details">
        Select **Task Log Details** to access the detailed execution log and outputs of each task within the task flow.

        <img src="/images/develop/api-integrator/task-flow21.png" alt="Task Log Details" width="800" />
    </Step>

    <Step title="View Task Outputs">
        Execution logs of each task defined within the task flow are displayed through the opened window. Log details and task outputs can be viewed by pressing the three-dot button next to the relevant log record.

        <img src="/images/develop/api-integrator/task-flow22.png" alt="Task Outputs" width="800" />

        <img src="/images/develop/api-integrator/task-flow23.png" alt="Task Outputs Detail" width="800" />

        Output of API Call task:

        <img src="/images/develop/api-integrator/task-flow24.png" alt="API Call Task Output" width="800" />



    </Step>
</Steps>

<Warning>
    The **Trace** option in **Task Flow Definition Settings** must be active to see the output data of tasks. Otherwise, results produced by tasks are not displayed on the log detail screen.
</Warning>

---

## Common Fields in Tasks

Some input and output fields that are the same for each type are found when creating a task. Fields used for configuring common information in tasks are shown in the table below.

### Common Field Descriptions

| Field | Description |
|------|----------|
| **Execute This Task For** | The type of how the result produced from the previous task will be executed within the current task is selected. **Once:** The current task is executed once. **Loop:** The current task runs in loop form with the definition to be specified on the result it receives from the previous task. |
| **JSON Path/XPath Syntax** | This option becomes active if the task execution type is selected as Loop. The result of the value given with JSON Path/XPath is executed as a loop. |
| **Continue if operation fails** | This option becomes active if the task execution type is selected as Loop. When actions in the loop are executed, if an error occurs, it manages whether the task should continue running or be stopped immediately. |
| **Output Keys List button** | The list of output keys created in previous tasks is viewed. Thus, this output key can be used in task definition inputs. |
| **Output Key** | The variable name to which the value that will be created when the task is executed will be assigned is entered. Subsequent tasks after this task will use the output key entered in this field if they want to process with this task's output. |
| **Name ** | The name of the task is written. This information is assigned as the value of the `{{taskflow.name}}` variable. |
| **Description ** | The description of the task is written. |

<Warning>
    - No space should be left in the output key.
    - Output key names in the defined flow must be unique.
</Warning>

### Apinizer Syntax

The critical point in this field is that the value is written in accordance with **Apinizer's syntax**. There are 2 elements to pay attention to in this rule.

<Tabs>
    <Tab title="Syntax 1: Querying Data">
        Syntax rules:
        - Must open and close with 2 curly braces
        - In the first part of the syntax, the output key name of the previous task is given. A `#` sign is placed at the end
        - In the second part of the syntax, the value to be retrieved from within the output value is written in the query language (JSONPath, XPath) belonging to the data type

        **Formula:**
        ```
        {{previous-task-output-name#<this-part-is-written-in-either-JSONPath-or-XPath-format>}}
        ```

        **Example:**
        A result named `centralRates` is produced in one of the previous tasks. The values of the result contain exchange rate information belonging to the Central Bank. An XPath query `/Date/Currency` has been written to get the elements in the array contained in this result one by one.

        ```
        {{centralRates#/Date/Currency}}
        ```
    </Tab>

    <Tab title="Syntax 2: Using Data in Loop">
        Elements retrieved from data with syntax can be used within the task (when sending mail, when working with database, when writing script, etc.). To use, it must be referenced with the variable key named `LOOP_VARIABLE`.

        **Formula:**
        ```
        {{LOOP_VARIABLE#<this-part-is-written-in-either-JSONPath-or-XPath-format>}}
        ```

        **Example:**
        ```
        {{LOOP_VARIABLE#/Currency/Name/text()}}
        ```
    </Tab>
</Tabs>

---

## Triggering Task Flow

Task flow can be triggered in three different ways:

<Tabs>
    <Tab title="Manual Triggering">
        The task flow is triggered every time the marked **Execute** button in the top right corner is clicked.

        <img src="/images/develop/api-integrator/task-flow25.png" alt="Manual Triggering" width="800" />
    </Tab>

    <Tab title="Automatic Triggering">
        The task flow is automatically triggered by Apinizer Integrator at the specified frequency based on the task flow's trigger frequency (**Trigger Every**) value.

        <img src="/images/develop/api-integrator/task-flow26.png" alt="Automatic Triggering" width="800" />
    </Tab>

    <Tab title="Triggering via Endpoint">
        If the Endpoint option is activated, the task flow is triggered on every request made via the specially created access URL for the task flow.

        <img src="/images/develop/api-integrator/task-flow27.png" alt="Endpoint Triggering" width="800" />

        <Warning>
            To trigger the task flow via its access URL, it is necessary to send a request by adding the user token to the **Authorization** header.

            To create a token: Token can be created with the logged-in user from **Profile menu from top right > My Profile**.
        </Warning>

        <Note>
            For the task flow to be triggerable via Endpoint, the Endpoint option must be active and your integrator server status must be reachable.
        </Note>
    </Tab>
</Tabs>

---

## Deleting Task Flow

The record is deleted by clicking the menu button in the rightmost column of the record desired to be deleted in the task flow list and selecting **Delete**.

<img src="/images/develop/api-integrator/task-flow28.png" alt="Deleting Task Flow" width="800" />

---

## Endpoint Configuration

<Info>
    In addition to being triggered with a scheduler or manually with the execute button, task flows can also be triggered via HTTP requests through the special and unique endpoint created for the task flow at the moment the task flow is created.
</Info>

<Steps>
    <Step title="Activate Endpoint Option">
        The endpoint option must be activated from the task flow editing interface.
    </Step>

    <Step title="Use Endpoint URL">
        After the endpoint option is activated, the task flow can be triggered by sending a request to the displayed URL.

        <img src="/images/develop/api-integrator/task-flow29.png" alt="Endpoint URL" width="800" />
    </Step>

    <Step title="Create Token">
        To trigger the task flow via its access URL, it is necessary to send a request by adding the user token to the **Authorization** header.

        To create a token: Token can be created with the logged-in user from **Profile menu from top right > My Profile**.
    </Step>
</Steps>

---

## Actions Configuration

### What is an Action?

<Info>
    Action refers to operations to be performed when an error occurs during the execution of a task flow.
</Info>

<Steps>
    <Step title="Action Addition">
        You can define tasks desired to be performed in case of a possible error by pressing the **+** button from the **Actions** section.

        <img src="/images/develop/api-integrator/task-flow30.png" alt="Action Addition" width="800" />
    </Step>

    <Step title="Select Action Type">
        You can be notified of error situations or perform special operations for error situations by defining a task through the opened window when a possible error is encountered in the task flow.

        <img src="/images/develop/api-integrator/task-flow31.png" alt="Action Type Selection" width="800" />
    </Step>
</Steps>

<Tip>
    For example, you can define an action to send an email or make an API call when the task flow fails.
</Tip>

