---
title: 'Variables & Data Passing'
description: 'Manage variables in Task Flows, pass data between tasks, transform data, and work with different data types'
---

Variables are the primary mechanism for passing data between tasks in a Task Flow. Understanding how to work with variables is essential for building effective integration workflows.

## Overview

Variables store data that can be used throughout a Task Flow. They enable data passing between connectors, data transformation, and conditional logic.

<CardGroup cols={2}>
  <Card title="Variable Types" icon="list">
    Support for various data types
  </Card>
  <Card title="Data Passing" icon="arrows-rotate">
    Pass data between tasks
  </Card>
  <Card title="Data Transformation" icon="wand-magic-sparkles">
    Transform and manipulate data
  </Card>
  <Card title="Expression Evaluation" icon="code">
    Use expressions to compute values
  </Card>
</CardGroup>

## Variable Types

Apinizer supports the following variable types:

### String

Text values:

```javascript
name = "John Doe"
email = "john@example.com"
description = "Customer information"
```

**Operations:**

* Concatenation: `fullName = firstName + " " + lastName`
* Substring: `domain = email.substring(email.indexOf("@") + 1)`
* Length: `nameLength = name.length`

### Number

Numeric values:

```javascript
age = 30
price = 99.99
quantity = 100
```

**Operations:**

* Arithmetic: `total = price * quantity`
* Comparison: `isAdult = age >= 18`
* Rounding: `rounded = Math.round(price)`

### Boolean

True/false values:

```javascript
isActive = true
isPremium = false
hasPermission = true
```

**Operations:**

* Logical: `canAccess = isActive && hasPermission`
* Negation: `isInactive = !isActive`

### Object

JSON objects:

```javascript
customer = {
  "id": "123",
  "name": "John Doe",
  "email": "john@example.com",
  "address": {
    "street": "123 Main St",
    "city": "New York"
  }
}
```

**Access Properties:**

* Dot notation: `customer.name`
* Bracket notation: `customer["name"]`
* Nested: `customer.address.city`

### Array

Collections of values:

```javascript
items = ["item1", "item2", "item3"]
numbers = [1, 2, 3, 4, 5]
customers = [
  {"id": "1", "name": "John"},
  {"id": "2", "name": "Jane"}
]
```

**Operations:**

* Access: `firstItem = items[0]`
* Length: `count = items.length`
* Iteration: Loop through array items

## Variable Scope

### Task Flow Variables

Variables defined at Task Flow level:

* **Input Variables**: Provided when Task Flow is invoked
* **Output Variables**: Returned when Task Flow completes
* **Internal Variables**: Used within Task Flow

### Task Variables

Variables scoped to individual tasks:

* **Input Variables**: Data passed to task
* **Output Variables**: Data returned from task
* **Local Variables**: Variables used within task

## Input Variables

Define input variables for Task Flow:

### Configuration

**Basic Input:**

```json
{
  "customerId": {
    "type": "string",
    "required": true,
    "description": "Customer identifier"
  }
}
```

**Complex Input:**

```json
{
  "order": {
    "type": "object",
    "required": true,
    "properties": {
      "orderId": {"type": "string"},
      "items": {"type": "array"},
      "total": {"type": "number"}
    }
  }
}
```

### Input Validation

Validate input variables:

* **Required**: Variable must be provided
* **Type**: Validate data type
* **Format**: Validate format (email, URL, regex)
* **Range**: Validate numeric ranges
* **Custom**: Custom validation rules

**Example Validation:**

```javascript
// Required validation
if (!customerId) {
  throw new Error("customerId is required");
}

// Type validation
if (typeof age !== 'number') {
  throw new Error("age must be a number");
}

// Format validation
if (!email.match(/^[^\s@]+@[^\s@]+\.[^\s@]+$/)) {
  throw new Error("Invalid email format");
}
```

## Output Variables

Define output variables for Task Flow:

### Configuration

**Basic Output:**

```json
{
  "result": {
    "type": "object",
    "value": {
      "status": "success",
      "customerId": "${customerId}",
      "orderId": "${orderId}"
    }
  }
}
```

**Dynamic Output:**

```javascript
{
  "response": {
    "status": "${status}",
    "data": "${processedData}",
    "timestamp": "${new Date().toISOString()}"
  }
}
```

## Data Passing Between Tasks

### Passing Data to Connector

Map variables to connector inputs:

**Input Mapping:**

```json
{
  "query": "SELECT * FROM customers WHERE id = :customerId",
  "parameters": {
    "customerId": "${customerId}"
  }
}
```

**Object Mapping:**

```json
{
  "url": "https://api.example.com/customers/${customerId}",
  "headers": {
    "Authorization": "Bearer ${authToken}"
  },
  "body": {
    "name": "${customer.name}",
    "email": "${customer.email}"
  }
}
```

### Receiving Data from Connector

Map connector outputs to variables:

**Output Mapping:**

```json
{
  "customer": "${response.body}",
  "statusCode": "${response.statusCode}",
  "headers": "${response.headers}"
}
```

**Nested Mapping:**

```json
{
  "customerId": "${response.body.customer.id}",
  "customerName": "${response.body.customer.name}",
  "orderCount": "${response.body.orders.length}"
}
```

## Data Transformation

Transform data between tasks:

### String Transformation

```javascript
// Concatenation
fullName = firstName + " " + lastName

// Template literals
message = `Hello ${name}, your order ${orderId} is ready`

// Formatting
formattedDate = new Date().toISOString()
```

### Object Transformation

```javascript
// Create new object
customerSummary = {
  id: customer.id,
  name: customer.name,
  email: customer.email
}

// Merge objects
merged = {...customer, ...address}

// Extract properties
const {id, name} = customer
```

### Array Transformation

```javascript
// Map array
emailList = customers.map(c => c.email)

// Filter array
activeCustomers = customers.filter(c => c.status === 'active')

// Reduce array
total = items.reduce((sum, item) => sum + item.price, 0)

// Join array
csv = items.map(i => i.name).join(',')
```

### Type Conversion

```javascript
// String to number
price = parseFloat(priceString)
quantity = parseInt(quantityString)

// Number to string
priceString = price.toString()
formatted = price.toFixed(2)

// Object to JSON
jsonString = JSON.stringify(object)

// JSON to object
object = JSON.parse(jsonString)
```

## Expression Syntax

Use expressions to compute values:

### Variable References

```javascript
// Simple reference
${variableName}

// Nested property
${customer.address.city}

// Array access
${items[0].name}

// Dynamic property
${customer[propertyName]}
```

### Expressions

```javascript
// Arithmetic
${price * quantity}
${total + tax}
${discount / 100}

// Comparison
${age >= 18}
${status === 'active'}
${count > 0}

// Logical
${isActive && hasPermission}
${isPremium || isVip}
${!isBlocked}

// String operations
${name.toUpperCase()}
${email.toLowerCase()}
${description.substring(0, 100)}
```

### Functions

```javascript
// Date functions
${new Date()}
${Date.now()}
${new Date().toISOString()}

// Math functions
${Math.max(a, b)}
${Math.min(a, b)}
${Math.round(number)}

// String functions
${name.length}
${email.indexOf('@')}
${description.substring(0, 50)}
```

## Working with Connector Outputs

### Database Connector Output

```javascript
// Single row
customer = ${result[0]}

// Multiple rows
customers = ${result}

// Specific column
customerName = ${result[0].name}

// Count
rowCount = ${result.length}
```

### HTTP Connector Output

```javascript
// Response body
data = ${response.body}

// Status code
status = ${response.statusCode}

// Headers
contentType = ${response.headers['Content-Type']}

// Nested properties
userId = ${response.body.user.id}
```

### Message Queue Connector Output

```javascript
// Message body
message = ${message.body}

// Message properties
correlationId = ${message.properties.correlationId}

// Headers
messageType = ${message.headers.type}
```

## Error Handling with Variables

Handle errors and pass error information:

### Error Variables

```javascript
// Error message
errorMessage = ${error.message}

// Error code
errorCode = ${error.code}

// Error context
errorContext = {
  task: "${taskName}",
  variable: "${variableName}",
  value: "${variableValue}"
}
```

### Default Values

Provide default values for optional variables:

```javascript
// Default value
quantity = ${quantity || 1}
status = ${status || 'pending'}

// Conditional default
discount = ${isPremium ? 0.2 : 0.1}
```

## Best Practices

<CardGroup cols={2}>
  <Card title="Descriptive Names" icon="tag">
    Use clear, descriptive variable names
  </Card>
  <Card title="Type Safety" icon="shield-halved">
    Validate variable types before use
  </Card>
  <Card title="Avoid Deep Nesting" icon="layer-group">
    Keep variable structures simple
  </Card>
  <Card title="Document Variables" icon="file-lines">
    Document variable purpose and format
  </Card>
  <Card title="Error Handling" icon="exclamation-triangle">
    Handle missing or invalid variables
  </Card>
  <Card title="Performance" icon="gauge">
    Avoid unnecessary data transformations
  </Card>
</CardGroup>

## Common Patterns

### Data Enrichment

```javascript
// Fetch base data
customer = ${databaseResult}

// Enrich with additional data
customer.fullAddress = `${customer.street}, ${customer.city}`
customer.isPremium = customer.balance > 10000
```

### Data Aggregation

```javascript
// Aggregate array data
total = orders.reduce((sum, order) => sum + order.total, 0)
average = total / orders.length
maxOrder = Math.max(...orders.map(o => o.total))
```

### Conditional Transformation

```javascript
// Conditional mapping
status = customer.balance > 1000 ? 'premium' : 'standard'

// Conditional object
discount = isVip ? {
  type: 'percentage',
  value: 20
} : {
  type: 'fixed',
  value: 10
}
```

## Related Topics

<CardGroup cols={2}>
  <Card title="Task Flow Design" icon="diagram-project" href="/en/integration-automation/task-flow-design">
    Learn how to design Task Flows
  </Card>
  <Card title="Task Types" icon="list" href="/en/integration-automation/task-types">
    Understand task execution types
  </Card>
  <Card title="Error Handling & Retries" icon="rotate-right" href="/en/integration-automation/error-handling-retries">
    Handle errors in Task Flows
  </Card>
  <Card title="Script Connector" icon="code" href="/en/integration-automation/connectors/script-connector">
    Use scripts for complex transformations
  </Card>
</CardGroup>
