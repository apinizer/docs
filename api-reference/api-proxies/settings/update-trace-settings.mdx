---
title: "Update Trace Settings"
description: "Updates trace settings for an API proxy. Trace settings allow you to enable detailed request/response tracing for a specific environment within a defined time window."
---

## Endpoint

```
PATCH /apiops/projects/{projectName}/apiProxies/{apiProxyName}/settings/trace/
```

## Authentication

Requires a Personal API Access Token.

### Header

```
Authorization: Bearer YOUR_TOKEN
```

## Request

### Headers

| Header | Value | Required |
|--------|-------|----------|
| Authorization | Bearer {token} | Yes |
| Content-Type | application/json | Yes |

### Path Parameters

| Parameter | Type | Required | Description |
|-----------|------|----------|-------------|
| projectName | string | Yes | Project name |
| apiProxyName | string | Yes | API Proxy name |

### Request Body

#### Full JSON Body Example

```json
{
  "enableTraceLog": true,
  "startTime": "2025-01-01T00:00:00Z",
  "stopTime": "2025-01-02T00:00:00Z",
  "environmentName": "production"
}
```

#### Request Body Fields

| Field | Type | Required | Default | Description |
|-------|------|----------|---------|-------------|
| enableTraceLog | boolean | No | false | Enable or disable trace logging |
| startTime | string | No | - | Start time for trace logging in ISO 8601 format (e.g., `2025-01-01T00:00:00Z`) |
| stopTime | string | No | - | Stop time for trace logging in ISO 8601 format (e.g., `2025-01-02T00:00:00Z`) |
| environmentName | string | No | - | Target environment name for trace logging |

**Note:** All fields are optional. Only provided fields are updated. Omitted fields retain their current values.

## Response

### Success Response (200 OK)

```json
{
  "success": true
}
```

#### Response Fields

| Field | Type | Description |
|-------|------|-------------|
| success | boolean | Indicates if the request was successful |

### Error Response (401 Unauthorized)

```json
{
  "error": "unauthorized_client",
  "error_description": "Invalid token"
}
```

### Error Response (400 Bad Request)

```json
{
  "error": "bad_request",
  "error_description": "ApiProxy (name: MyAPI) was not found!"
}
```

## cURL Example

### Example 1: Enable Trace Logging with Time Window

```bash
curl -X PATCH \
  "https://demo.apinizer.com/apiops/projects/MyProject/apiProxies/MyAPI/settings/trace/" \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "enableTraceLog": true,
    "startTime": "2025-01-01T00:00:00Z",
    "stopTime": "2025-01-02T00:00:00Z",
    "environmentName": "production"
  }'
```

### Example 2: Disable Trace Logging

```bash
curl -X PATCH \
  "https://demo.apinizer.com/apiops/projects/MyProject/apiProxies/MyAPI/settings/trace/" \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "enableTraceLog": false
  }'
```

### Example 3: Update Only Environment

```bash
curl -X PATCH \
  "https://demo.apinizer.com/apiops/projects/MyProject/apiProxies/MyAPI/settings/trace/" \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "environmentName": "staging"
  }'
```

## Permissions

User must have **`API_MANAGEMENT` + `MANAGE`** permission in the project.

## Notes and Warnings

- **Partial Update**: Only provided fields are updated. You can send just the fields you want to change
- **Time Format**: `startTime` and `stopTime` must be in ISO 8601 format with timezone (e.g., `2025-01-01T00:00:00Z`)
- **Time Window**: Trace logging is active only between `startTime` and `stopTime`. Outside this window, trace logging is automatically inactive
- **Environment-Specific**: Trace logging is scoped to a specific environment. Set `environmentName` to target the desired environment
- **Performance Impact**: Trace logging captures detailed request/response data and may impact performance. Use time-bounded windows for production environments

## Related Documentation

- [Update Traffic Log Settings](/api-reference/api-proxies/settings/update-traffic-log-settings) - Configure traffic logging settings
- [Update Maintenance Mode](/api-reference/api-proxies/settings/update-maintenance-mode) - Configure maintenance mode
- [Get API Proxy Detail](/api-reference/api-proxies/crud/get-api-proxy-detail) - Get API proxy details
- [Deploy API Proxy](/api-reference/api-proxies/deployment/deploy-api-proxy) - Deploy API proxy to apply changes
